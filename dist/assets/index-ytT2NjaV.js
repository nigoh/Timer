var Bce=Object.defineProperty;var Fce=(t,e,n)=>e in t?Bce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Uce=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var U=(t,e,n)=>Fce(t,typeof e!="symbol"?e+"":e,n);var QJe=Uce((Ha,Wa)=>{function zce(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ut(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aA={exports:{}},ag={},sA={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V3;function qce(){if(V3)return Dt;V3=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function p(M){return M===null||typeof M!="object"?null:(M=f&&M[f]||M["@@iterator"],typeof M=="function"?M:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,y={};function b(M,Y,se){this.props=M,this.context=Y,this.refs=y,this.updater=se||m}b.prototype.isReactComponent={},b.prototype.setState=function(M,Y){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Y,"setState")},b.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function x(){}x.prototype=b.prototype;function w(M,Y,se){this.props=M,this.context=Y,this.refs=y,this.updater=se||m}var T=w.prototype=new x;T.constructor=w,_(T,b.prototype),T.isPureReactComponent=!0;var A=Array.isArray,E=Object.prototype.hasOwnProperty,C={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function N(M,Y,se){var ge,ue={},H=null,$=null;if(Y!=null)for(ge in Y.ref!==void 0&&($=Y.ref),Y.key!==void 0&&(H=""+Y.key),Y)E.call(Y,ge)&&!R.hasOwnProperty(ge)&&(ue[ge]=Y[ge]);var ne=arguments.length-2;if(ne===1)ue.children=se;else if(1<ne){for(var X=Array(ne),pe=0;pe<ne;pe++)X[pe]=arguments[pe+2];ue.children=X}if(M&&M.defaultProps)for(ge in ne=M.defaultProps,ne)ue[ge]===void 0&&(ue[ge]=ne[ge]);return{$$typeof:t,type:M,key:H,ref:$,props:ue,_owner:C.current}}function D(M,Y){return{$$typeof:t,type:M.type,key:Y,ref:M.ref,props:M.props,_owner:M._owner}}function Z(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function j(M){var Y={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(se){return Y[se]})}var L=/\/+/g;function B(M,Y){return typeof M=="object"&&M!==null&&M.key!=null?j(""+M.key):Y.toString(36)}function z(M,Y,se,ge,ue){var H=typeof M;(H==="undefined"||H==="boolean")&&(M=null);var $=!1;if(M===null)$=!0;else switch(H){case"string":case"number":$=!0;break;case"object":switch(M.$$typeof){case t:case e:$=!0}}if($)return $=M,ue=ue($),M=ge===""?"."+B($,0):ge,A(ue)?(se="",M!=null&&(se=M.replace(L,"$&/")+"/"),z(ue,Y,se,"",function(pe){return pe})):ue!=null&&(Z(ue)&&(ue=D(ue,se+(!ue.key||$&&$.key===ue.key?"":(""+ue.key).replace(L,"$&/")+"/")+M)),Y.push(ue)),1;if($=0,ge=ge===""?".":ge+":",A(M))for(var ne=0;ne<M.length;ne++){H=M[ne];var X=ge+B(H,ne);$+=z(H,Y,se,X,ue)}else if(X=p(M),typeof X=="function")for(M=X.call(M),ne=0;!(H=M.next()).done;)H=H.value,X=ge+B(H,ne++),$+=z(H,Y,se,X,ue);else if(H==="object")throw Y=String(M),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return $}function W(M,Y,se){if(M==null)return M;var ge=[],ue=0;return z(M,ge,"","",function(H){return Y.call(se,H,ue++)}),ge}function q(M){if(M._status===-1){var Y=M._result;Y=Y(),Y.then(function(se){(M._status===0||M._status===-1)&&(M._status=1,M._result=se)},function(se){(M._status===0||M._status===-1)&&(M._status=2,M._result=se)}),M._status===-1&&(M._status=0,M._result=Y)}if(M._status===1)return M._result.default;throw M._result}var K={current:null},V={transition:null},J={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:V,ReactCurrentOwner:C};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Dt.Children={map:W,forEach:function(M,Y,se){W(M,function(){Y.apply(this,arguments)},se)},count:function(M){var Y=0;return W(M,function(){Y++}),Y},toArray:function(M){return W(M,function(Y){return Y})||[]},only:function(M){if(!Z(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Dt.Component=b,Dt.Fragment=n,Dt.Profiler=i,Dt.PureComponent=w,Dt.StrictMode=r,Dt.Suspense=l,Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Dt.act=Q,Dt.cloneElement=function(M,Y,se){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var ge=_({},M.props),ue=M.key,H=M.ref,$=M._owner;if(Y!=null){if(Y.ref!==void 0&&(H=Y.ref,$=C.current),Y.key!==void 0&&(ue=""+Y.key),M.type&&M.type.defaultProps)var ne=M.type.defaultProps;for(X in Y)E.call(Y,X)&&!R.hasOwnProperty(X)&&(ge[X]=Y[X]===void 0&&ne!==void 0?ne[X]:Y[X])}var X=arguments.length-2;if(X===1)ge.children=se;else if(1<X){ne=Array(X);for(var pe=0;pe<X;pe++)ne[pe]=arguments[pe+2];ge.children=ne}return{$$typeof:t,type:M.type,key:ue,ref:H,props:ge,_owner:$}},Dt.createContext=function(M){return M={$$typeof:s,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},Dt.createElement=N,Dt.createFactory=function(M){var Y=N.bind(null,M);return Y.type=M,Y},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(M){return{$$typeof:o,render:M}},Dt.isValidElement=Z,Dt.lazy=function(M){return{$$typeof:u,_payload:{_status:-1,_result:M},_init:q}},Dt.memo=function(M,Y){return{$$typeof:c,type:M,compare:Y===void 0?null:Y}},Dt.startTransition=function(M){var Y=V.transition;V.transition={};try{M()}finally{V.transition=Y}},Dt.unstable_act=Q,Dt.useCallback=function(M,Y){return K.current.useCallback(M,Y)},Dt.useContext=function(M){return K.current.useContext(M)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(M){return K.current.useDeferredValue(M)},Dt.useEffect=function(M,Y){return K.current.useEffect(M,Y)},Dt.useId=function(){return K.current.useId()},Dt.useImperativeHandle=function(M,Y,se){return K.current.useImperativeHandle(M,Y,se)},Dt.useInsertionEffect=function(M,Y){return K.current.useInsertionEffect(M,Y)},Dt.useLayoutEffect=function(M,Y){return K.current.useLayoutEffect(M,Y)},Dt.useMemo=function(M,Y){return K.current.useMemo(M,Y)},Dt.useReducer=function(M,Y,se){return K.current.useReducer(M,Y,se)},Dt.useRef=function(M){return K.current.useRef(M)},Dt.useState=function(M){return K.current.useState(M)},Dt.useSyncExternalStore=function(M,Y,se){return K.current.useSyncExternalStore(M,Y,se)},Dt.useTransition=function(){return K.current.useTransition()},Dt.version="18.3.1",Dt}var G3;function Yv(){return G3||(G3=1,sA.exports=qce()),sA.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K3;function Hce(){if(K3)return ag;K3=1;var t=Yv(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(o,l,c){var u,f={},p=null,m=null;c!==void 0&&(p=""+c),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(m=l.ref);for(u in l)r.call(l,u)&&!a.hasOwnProperty(u)&&(f[u]=l[u]);if(o&&o.defaultProps)for(u in l=o.defaultProps,l)f[u]===void 0&&(f[u]=l[u]);return{$$typeof:e,type:o,key:p,ref:m,props:f,_owner:i.current}}return ag.Fragment=n,ag.jsx=s,ag.jsxs=s,ag}var Z3;function Wce(){return Z3||(Z3=1,aA.exports=Hce()),aA.exports}var g=Wce(),k=Yv();const ee=Ut(k),NG=zce({__proto__:null,default:ee},[k]);var j0={},oA={exports:{}},ia={},lA={exports:{}},cA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X3;function Vce(){return X3||(X3=1,(function(t){function e(V,J){var Q=V.length;V.push(J);e:for(;0<Q;){var M=Q-1>>>1,Y=V[M];if(0<i(Y,J))V[M]=J,V[Q]=Y,Q=M;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var J=V[0],Q=V.pop();if(Q!==J){V[0]=Q;e:for(var M=0,Y=V.length,se=Y>>>1;M<se;){var ge=2*(M+1)-1,ue=V[ge],H=ge+1,$=V[H];if(0>i(ue,Q))H<Y&&0>i($,ue)?(V[M]=$,V[H]=Q,M=H):(V[M]=ue,V[ge]=Q,M=ge);else if(H<Y&&0>i($,Q))V[M]=$,V[H]=Q,M=H;else break e}}return J}function i(V,J){var Q=V.sortIndex-J.sortIndex;return Q!==0?Q:V.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,f=null,p=3,m=!1,_=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(V){for(var J=n(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=V)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(c)}}function A(V){if(y=!1,T(V),!_)if(n(l)!==null)_=!0,q(E);else{var J=n(c);J!==null&&K(A,J.startTime-V)}}function E(V,J){_=!1,y&&(y=!1,x(N),N=-1),m=!0;var Q=p;try{for(T(J),f=n(l);f!==null&&(!(f.expirationTime>J)||V&&!j());){var M=f.callback;if(typeof M=="function"){f.callback=null,p=f.priorityLevel;var Y=M(f.expirationTime<=J);J=t.unstable_now(),typeof Y=="function"?f.callback=Y:f===n(l)&&r(l),T(J)}else r(l);f=n(l)}if(f!==null)var se=!0;else{var ge=n(c);ge!==null&&K(A,ge.startTime-J),se=!1}return se}finally{f=null,p=Q,m=!1}}var C=!1,R=null,N=-1,D=5,Z=-1;function j(){return!(t.unstable_now()-Z<D)}function L(){if(R!==null){var V=t.unstable_now();Z=V;var J=!0;try{J=R(!0,V)}finally{J?B():(C=!1,R=null)}}else C=!1}var B;if(typeof w=="function")B=function(){w(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,W=z.port2;z.port1.onmessage=L,B=function(){W.postMessage(null)}}else B=function(){b(L,0)};function q(V){R=V,C||(C=!0,B())}function K(V,J){N=b(function(){V(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,q(E))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var Q=p;p=J;try{return V()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,J){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=p;p=V;try{return J()}finally{p=Q}},t.unstable_scheduleCallback=function(V,J,Q){var M=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?M+Q:M):Q=M,V){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Q+Y,V={id:u++,callback:J,priorityLevel:V,startTime:Q,expirationTime:Y,sortIndex:-1},Q>M?(V.sortIndex=Q,e(c,V),n(l)===null&&V===n(c)&&(y?(x(N),N=-1):y=!0,K(A,Q-M))):(V.sortIndex=Y,e(l,V),_||m||(_=!0,q(E))),V},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(V){var J=p;return function(){var Q=p;p=J;try{return V.apply(this,arguments)}finally{p=Q}}}})(cA)),cA}var J3;function Gce(){return J3||(J3=1,lA.exports=Vce()),lA.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y3;function Kce(){if(Y3)return ia;Y3=1;var t=Yv(),e=Gce();function n(d){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+d,v=1;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(d,h){s(d,h),s(d+"Capture",h)}function s(d,h){for(i[d]=h,d=0;d<h.length;d++)r.add(h[d])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function p(d){return l.call(f,d)?!0:l.call(u,d)?!1:c.test(d)?f[d]=!0:(u[d]=!0,!1)}function m(d,h,v,S){if(v!==null&&v.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return S?!1:v!==null?!v.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function _(d,h,v,S){if(h===null||typeof h>"u"||m(d,h,v,S))return!0;if(S)return!1;if(v!==null)switch(v.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(d,h,v,S,O,I,F){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=S,this.attributeNamespace=O,this.mustUseProperty=v,this.propertyName=d,this.type=h,this.sanitizeURL=I,this.removeEmptyString=F}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){b[d]=new y(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var h=d[0];b[h]=new y(h,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){b[d]=new y(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){b[d]=new y(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){b[d]=new y(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){b[d]=new y(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){b[d]=new y(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){b[d]=new y(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){b[d]=new y(d,5,!1,d.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function w(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var h=d.replace(x,w);b[h]=new y(h,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var h=d.replace(x,w);b[h]=new y(h,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var h=d.replace(x,w);b[h]=new y(h,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){b[d]=new y(d,1,!1,d.toLowerCase(),null,!1,!1)}),b.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){b[d]=new y(d,1,!1,d.toLowerCase(),null,!0,!0)});function T(d,h,v,S){var O=b.hasOwnProperty(h)?b[h]:null;(O!==null?O.type!==0:S||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(_(h,v,O,S)&&(v=null),S||O===null?p(h)&&(v===null?d.removeAttribute(h):d.setAttribute(h,""+v)):O.mustUseProperty?d[O.propertyName]=v===null?O.type===3?!1:"":v:(h=O.attributeName,S=O.attributeNamespace,v===null?d.removeAttribute(h):(O=O.type,v=O===3||O===4&&v===!0?"":""+v,S?d.setAttributeNS(S,h,v):d.setAttribute(h,v))))}var A=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),C=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),j=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),V=Symbol.iterator;function J(d){return d===null||typeof d!="object"?null:(d=V&&d[V]||d["@@iterator"],typeof d=="function"?d:null)}var Q=Object.assign,M;function Y(d){if(M===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);M=h&&h[1]||""}return`
`+M+d}var se=!1;function ge(d,h){if(!d||se)return"";se=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(me){var S=me}Reflect.construct(d,[],h)}else{try{h.call()}catch(me){S=me}d.call(h.prototype)}else{try{throw Error()}catch(me){S=me}d()}}catch(me){if(me&&S&&typeof me.stack=="string"){for(var O=me.stack.split(`
`),I=S.stack.split(`
`),F=O.length-1,te=I.length-1;1<=F&&0<=te&&O[F]!==I[te];)te--;for(;1<=F&&0<=te;F--,te--)if(O[F]!==I[te]){if(F!==1||te!==1)do if(F--,te--,0>te||O[F]!==I[te]){var ie=`
`+O[F].replace(" at new "," at ");return d.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",d.displayName)),ie}while(1<=F&&0<=te);break}}}finally{se=!1,Error.prepareStackTrace=v}return(d=d?d.displayName||d.name:"")?Y(d):""}function ue(d){switch(d.tag){case 5:return Y(d.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return d=ge(d.type,!1),d;case 11:return d=ge(d.type.render,!1),d;case 1:return d=ge(d.type,!0),d;default:return""}}function H(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case R:return"Fragment";case C:return"Portal";case D:return"Profiler";case N:return"StrictMode";case B:return"Suspense";case z:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case j:return(d.displayName||"Context")+".Consumer";case Z:return(d._context.displayName||"Context")+".Provider";case L:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case W:return h=d.displayName||null,h!==null?h:H(d.type)||"Memo";case q:h=d._payload,d=d._init;try{return H(d(h))}catch{}}return null}function $(d){var h=d.type;switch(d.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=h.render,d=d.displayName||d.name||"",h.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(h);case 8:return h===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function ne(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function X(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function pe(d){var h=X(d)?"checked":"value",v=Object.getOwnPropertyDescriptor(d.constructor.prototype,h),S=""+d[h];if(!d.hasOwnProperty(h)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var O=v.get,I=v.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return O.call(this)},set:function(F){S=""+F,I.call(this,F)}}),Object.defineProperty(d,h,{enumerable:v.enumerable}),{getValue:function(){return S},setValue:function(F){S=""+F},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function ye(d){d._valueTracker||(d._valueTracker=pe(d))}function le(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var v=h.getValue(),S="";return d&&(S=X(d)?d.checked?"true":"false":d.value),d=S,d!==v?(h.setValue(d),!0):!1}function Ne(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function je(d,h){var v=h.checked;return Q({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??d._wrapperState.initialChecked})}function Xe(d,h){var v=h.defaultValue==null?"":h.defaultValue,S=h.checked!=null?h.checked:h.defaultChecked;v=ne(h.value!=null?h.value:v),d._wrapperState={initialChecked:S,initialValue:v,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function st(d,h){h=h.checked,h!=null&&T(d,"checked",h,!1)}function kt(d,h){st(d,h);var v=ne(h.value),S=h.type;if(v!=null)S==="number"?(v===0&&d.value===""||d.value!=v)&&(d.value=""+v):d.value!==""+v&&(d.value=""+v);else if(S==="submit"||S==="reset"){d.removeAttribute("value");return}h.hasOwnProperty("value")?gn(d,h.type,v):h.hasOwnProperty("defaultValue")&&gn(d,h.type,ne(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(d.defaultChecked=!!h.defaultChecked)}function vn(d,h,v){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var S=h.type;if(!(S!=="submit"&&S!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+d._wrapperState.initialValue,v||h===d.value||(d.value=h),d.defaultValue=h}v=d.name,v!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,v!==""&&(d.name=v)}function gn(d,h,v){(h!=="number"||Ne(d.ownerDocument)!==d)&&(v==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+v&&(d.defaultValue=""+v))}var bn=Array.isArray;function _n(d,h,v,S){if(d=d.options,h){h={};for(var O=0;O<v.length;O++)h["$"+v[O]]=!0;for(v=0;v<d.length;v++)O=h.hasOwnProperty("$"+d[v].value),d[v].selected!==O&&(d[v].selected=O),O&&S&&(d[v].defaultSelected=!0)}else{for(v=""+ne(v),h=null,O=0;O<d.length;O++){if(d[O].value===v){d[O].selected=!0,S&&(d[O].defaultSelected=!0);return}h!==null||d[O].disabled||(h=d[O])}h!==null&&(h.selected=!0)}}function br(d,h){if(h.dangerouslySetInnerHTML!=null)throw Error(n(91));return Q({},h,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function ya(d,h){var v=h.value;if(v==null){if(v=h.children,h=h.defaultValue,v!=null){if(h!=null)throw Error(n(92));if(bn(v)){if(1<v.length)throw Error(n(93));v=v[0]}h=v}h==null&&(h=""),v=h}d._wrapperState={initialValue:ne(v)}}function dr(d,h){var v=ne(h.value),S=ne(h.defaultValue);v!=null&&(v=""+v,v!==d.value&&(d.value=v),h.defaultValue==null&&d.defaultValue!==v&&(d.defaultValue=v)),S!=null&&(d.defaultValue=""+S)}function Rr(d){var h=d.textContent;h===d._wrapperState.initialValue&&h!==""&&h!==null&&(d.value=h)}function va(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jn(d,h){return d==null||d==="http://www.w3.org/1999/xhtml"?va(h):d==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var bi,Fs=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,v,S,O){MSApp.execUnsafeLocalFunction(function(){return d(h,v,S,O)})}:d})(function(d,h){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=h;else{for(bi=bi||document.createElement("div"),bi.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=bi.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;h.firstChild;)d.appendChild(h.firstChild)}});function sr(d,h){if(h){var v=d.firstChild;if(v&&v===d.lastChild&&v.nodeType===3){v.nodeValue=h;return}}d.textContent=h}var Gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rl=["Webkit","ms","Moz","O"];Object.keys(Gi).forEach(function(d){Rl.forEach(function(h){h=h+d.charAt(0).toUpperCase()+d.substring(1),Gi[h]=Gi[d]})});function Us(d,h,v){return h==null||typeof h=="boolean"||h===""?"":v||typeof h!="number"||h===0||Gi.hasOwnProperty(d)&&Gi[d]?(""+h).trim():h+"px"}function ba(d,h){d=d.style;for(var v in h)if(h.hasOwnProperty(v)){var S=v.indexOf("--")===0,O=Us(v,h[v],S);v==="float"&&(v="cssFloat"),S?d.setProperty(v,O):d[v]=O}}var jr=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _i(d,h){if(h){if(jr[d]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(n(137,d));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(n(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(n(61))}if(h.style!=null&&typeof h.style!="object")throw Error(n(62))}}function Ki(d,h){if(d.indexOf("-")===-1)return typeof h.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wi=null;function Vr(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var xi=null,Gr=null,oi=null;function Zi(d){if(d=Hm(d)){if(typeof xi!="function")throw Error(n(280));var h=d.stateNode;h&&(h=Zb(h),xi(d.stateNode,d.type,h))}}function ns(d){Gr?oi?oi.push(d):oi=[d]:Gr=d}function Do(){if(Gr){var d=Gr,h=oi;if(oi=Gr=null,Zi(d),h)for(d=0;d<h.length;d++)Zi(h[d])}}function hn(d,h){return d(h)}function Si(){}var Xi=!1;function Bo(d,h,v){if(Xi)return d(h,v);Xi=!0;try{return hn(d,h,v)}finally{Xi=!1,(Gr!==null||oi!==null)&&(Si(),Do())}}function _r(d,h){var v=d.stateNode;if(v===null)return null;var S=Zb(v);if(S===null)return null;v=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(d=d.type,S=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!S;break e;default:d=!1}if(d)return null;if(v&&typeof v!="function")throw Error(n(231,h,typeof v));return v}var Fo=!1;if(o)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){Fo=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{Fo=!1}function ed(d,h,v,S,O,I,F,te,ie){var me=Array.prototype.slice.call(arguments,3);try{h.apply(v,me)}catch(Ce){this.onError(Ce)}}var or=!1,$r=null,In=!1,Uo=null,jl={onError:function(d){or=!0,$r=d}};function Dc(d,h,v,S,O,I,F,te,ie){or=!1,$r=null,ed.apply(jl,arguments)}function Ti(d,h,v,S,O,I,F,te,ie){if(Dc.apply(this,arguments),or){if(or){var me=$r;or=!1,$r=null}else throw Error(n(198));In||(In=!0,Uo=me)}}function Ji(d){var h=d,v=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(v=h.return),d=h.return;while(d)}return h.tag===3?v:null}function Yn(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function $l(d){if(Ji(d)!==d)throw Error(n(188))}function Bc(d){var h=d.alternate;if(!h){if(h=Ji(d),h===null)throw Error(n(188));return h!==d?null:d}for(var v=d,S=h;;){var O=v.return;if(O===null)break;var I=O.alternate;if(I===null){if(S=O.return,S!==null){v=S;continue}break}if(O.child===I.child){for(I=O.child;I;){if(I===v)return $l(O),d;if(I===S)return $l(O),h;I=I.sibling}throw Error(n(188))}if(v.return!==S.return)v=O,S=I;else{for(var F=!1,te=O.child;te;){if(te===v){F=!0,v=O,S=I;break}if(te===S){F=!0,S=O,v=I;break}te=te.sibling}if(!F){for(te=I.child;te;){if(te===v){F=!0,v=I,S=O;break}if(te===S){F=!0,S=I,v=O;break}te=te.sibling}if(!F)throw Error(n(189))}}if(v.alternate!==S)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?d:h}function Fc(d){return d=Bc(d),d!==null?Ge(d):null}function Ge(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var h=Ge(d);if(h!==null)return h;d=d.sibling}return null}var ae=e.unstable_scheduleCallback,Te=e.unstable_cancelCallback,Be=e.unstable_shouldYield,nn=e.unstable_requestPaint,Ot=e.unstable_now,wn=e.unstable_getCurrentPriorityLevel,Qn=e.unstable_ImmediatePriority,wr=e.unstable_UserBlockingPriority,li=e.unstable_NormalPriority,is=e.unstable_LowPriority,tn=e.unstable_IdlePriority,_a=null,Kr=null;function Cm(d){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(_a,d,void 0,(d.current.flags&128)===128)}catch{}}var Ei=Math.clz32?Math.clz32:Uc,km=Math.log,Nm=Math.LN2;function Uc(d){return d>>>=0,d===0?32:31-(km(d)/Nm|0)|0}var zo=64,as=4194304;function qo(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Ml(d,h){var v=d.pendingLanes;if(v===0)return 0;var S=0,O=d.suspendedLanes,I=d.pingedLanes,F=v&268435455;if(F!==0){var te=F&~O;te!==0?S=qo(te):(I&=F,I!==0&&(S=qo(I)))}else F=v&~O,F!==0?S=qo(F):I!==0&&(S=qo(I));if(S===0)return 0;if(h!==0&&h!==S&&(h&O)===0&&(O=S&-S,I=h&-h,O>=I||O===16&&(I&4194240)!==0))return h;if((S&4)!==0&&(S|=v&16),h=d.entangledLanes,h!==0)for(d=d.entanglements,h&=S;0<h;)v=31-Ei(h),O=1<<v,S|=d[v],h&=~O;return S}function Im(d,h){switch(d){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pm(d,h){for(var v=d.suspendedLanes,S=d.pingedLanes,O=d.expirationTimes,I=d.pendingLanes;0<I;){var F=31-Ei(I),te=1<<F,ie=O[F];ie===-1?((te&v)===0||(te&S)!==0)&&(O[F]=Im(te,h)):ie<=h&&(d.expiredLanes|=te),I&=~te}}function td(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Pf(){var d=zo;return zo<<=1,(zo&4194240)===0&&(zo=64),d}function Ll(d){for(var h=[],v=0;31>v;v++)h.push(d);return h}function Dl(d,h,v){d.pendingLanes|=h,h!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,h=31-Ei(h),d[h]=v}function Rm(d,h){var v=d.pendingLanes&~h;d.pendingLanes=h,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=h,d.mutableReadLanes&=h,d.entangledLanes&=h,h=d.entanglements;var S=d.eventTimes;for(d=d.expirationTimes;0<v;){var O=31-Ei(v),I=1<<O;h[O]=0,S[O]=-1,d[O]=-1,v&=~I}}function zs(d,h){var v=d.entangledLanes|=h;for(d=d.entanglements;v;){var S=31-Ei(v),O=1<<S;O&h|d[S]&h&&(d[S]|=h),v&=~O}}var Nt=0;function ss(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var os,nd,wa,Rf,jf,rd=!1,zc=[],xa=null,Un=null,Sa=null,Ho=new Map,ls=new Map,Yi=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $f(d,h){switch(d){case"focusin":case"focusout":xa=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":Ho.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":ls.delete(h.pointerId)}}function Wo(d,h,v,S,O,I){return d===null||d.nativeEvent!==I?(d={blockedOn:h,domEventName:v,eventSystemFlags:S,nativeEvent:I,targetContainers:[O]},h!==null&&(h=Hm(h),h!==null&&nd(h)),d):(d.eventSystemFlags|=S,h=d.targetContainers,O!==null&&h.indexOf(O)===-1&&h.push(O),d)}function id(d,h,v,S,O){switch(h){case"focusin":return xa=Wo(xa,d,h,v,S,O),!0;case"dragenter":return Un=Wo(Un,d,h,v,S,O),!0;case"mouseover":return Sa=Wo(Sa,d,h,v,S,O),!0;case"pointerover":var I=O.pointerId;return Ho.set(I,Wo(Ho.get(I)||null,d,h,v,S,O)),!0;case"gotpointercapture":return I=O.pointerId,ls.set(I,Wo(ls.get(I)||null,d,h,v,S,O)),!0}return!1}function ad(d){var h=ld(d.target);if(h!==null){var v=Ji(h);if(v!==null){if(h=v.tag,h===13){if(h=Yn(v),h!==null){d.blockedOn=h,jf(d.priority,function(){wa(v)});return}}else if(h===3&&v.stateNode.current.memoizedState.isDehydrated){d.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Ai(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var v=zt(d.domEventName,d.eventSystemFlags,h[0],d.nativeEvent);if(v===null){v=d.nativeEvent;var S=new v.constructor(v.type,v);wi=S,v.target.dispatchEvent(S),wi=null}else return h=Hm(v),h!==null&&nd(h),d.blockedOn=v,!1;h.shift()}return!0}function sd(d,h,v){Ai(d)&&v.delete(h)}function od(){rd=!1,xa!==null&&Ai(xa)&&(xa=null),Un!==null&&Ai(Un)&&(Un=null),Sa!==null&&Ai(Sa)&&(Sa=null),Ho.forEach(sd),ls.forEach(sd)}function Bl(d,h){d.blockedOn===h&&(d.blockedOn=null,rd||(rd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,od)))}function Fl(d){function h(O){return Bl(O,d)}if(0<zc.length){Bl(zc[0],d);for(var v=1;v<zc.length;v++){var S=zc[v];S.blockedOn===d&&(S.blockedOn=null)}}for(xa!==null&&Bl(xa,d),Un!==null&&Bl(Un,d),Sa!==null&&Bl(Sa,d),Ho.forEach(h),ls.forEach(h),v=0;v<Yi.length;v++)S=Yi[v],S.blockedOn===d&&(S.blockedOn=null);for(;0<Yi.length&&(v=Yi[0],v.blockedOn===null);)ad(v),v.blockedOn===null&&Yi.shift()}var P=A.ReactCurrentBatchConfig,G=!0;function re(d,h,v,S){var O=Nt,I=P.transition;P.transition=null;try{Nt=1,bt(d,h,v,S)}finally{Nt=O,P.transition=I}}function ve(d,h,v,S){var O=Nt,I=P.transition;P.transition=null;try{Nt=4,bt(d,h,v,S)}finally{Nt=O,P.transition=I}}function bt(d,h,v,S){if(G){var O=zt(d,h,v,S);if(O===null)ZT(d,h,S,Je,v),$f(d,S);else if(id(O,d,h,v,S))S.stopPropagation();else if($f(d,S),h&4&&-1<qc.indexOf(d)){for(;O!==null;){var I=Hm(O);if(I!==null&&os(I),I=zt(d,h,v,S),I===null&&ZT(d,h,S,Je,v),I===O)break;O=I}O!==null&&S.stopPropagation()}else ZT(d,h,S,null,v)}}var Je=null;function zt(d,h,v,S){if(Je=null,d=Vr(S),d=ld(d),d!==null)if(h=Ji(d),h===null)d=null;else if(v=h.tag,v===13){if(d=Yn(h),d!==null)return d;d=null}else if(v===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null);return Je=d,null}function qt(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wn()){case Qn:return 1;case wr:return 4;case li:case is:return 16;case tn:return 536870912;default:return 16}default:return 16}}var ln=null,Wt=null,lr=null;function Zr(){if(lr)return lr;var d,h=Wt,v=h.length,S,O="value"in ln?ln.value:ln.textContent,I=O.length;for(d=0;d<v&&h[d]===O[d];d++);var F=v-d;for(S=1;S<=F&&h[v-S]===O[I-S];S++);return lr=O.slice(d,1<S?1-S:void 0)}function zn(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function cr(){return!0}function fr(){return!1}function er(d){function h(v,S,O,I,F){this._reactName=v,this._targetInst=O,this.type=S,this.nativeEvent=I,this.target=F,this.currentTarget=null;for(var te in d)d.hasOwnProperty(te)&&(v=d[te],this[te]=v?v(I):I[te]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?cr:fr,this.isPropagationStopped=fr,this}return Q(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),h}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qs=er(ci),Hc=Q({},ci,{view:0,detail:0}),Mf=er(Hc),Wc,MT,jm,Ub=Q({},Hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DT,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==jm&&(jm&&d.type==="mousemove"?(Wc=d.screenX-jm.screenX,MT=d.screenY-jm.screenY):MT=Wc=0,jm=d),Wc)},movementY:function(d){return"movementY"in d?d.movementY:MT}}),$D=er(Ub),hle=Q({},Ub,{dataTransfer:0}),ple=er(hle),mle=Q({},Hc,{relatedTarget:0}),LT=er(mle),gle=Q({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),yle=er(gle),vle=Q({},ci,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),ble=er(vle),_le=Q({},ci,{data:0}),MD=er(_le),wle={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tle(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=Sle[d])?!!h[d]:!1}function DT(){return Tle}var Ele=Q({},Hc,{key:function(d){if(d.key){var h=wle[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=zn(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?xle[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DT,charCode:function(d){return d.type==="keypress"?zn(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?zn(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Ale=er(Ele),Ole=Q({},Ub,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LD=er(Ole),Cle=Q({},Hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DT}),kle=er(Cle),Nle=Q({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ile=er(Nle),Ple=Q({},Ub,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Rle=er(Ple),jle=[9,13,27,32],BT=o&&"CompositionEvent"in window,$m=null;o&&"documentMode"in document&&($m=document.documentMode);var $le=o&&"TextEvent"in window&&!$m,DD=o&&(!BT||$m&&8<$m&&11>=$m),BD=" ",FD=!1;function UD(d,h){switch(d){case"keyup":return jle.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zD(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Lf=!1;function Mle(d,h){switch(d){case"compositionend":return zD(h);case"keypress":return h.which!==32?null:(FD=!0,BD);case"textInput":return d=h.data,d===BD&&FD?null:d;default:return null}}function Lle(d,h){if(Lf)return d==="compositionend"||!BT&&UD(d,h)?(d=Zr(),lr=Wt=ln=null,Lf=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return DD&&h.locale!=="ko"?null:h.data;default:return null}}var Dle={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qD(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!Dle[d.type]:h==="textarea"}function HD(d,h,v,S){ns(S),h=Vb(h,"onChange"),0<h.length&&(v=new qs("onChange","change",null,v,S),d.push({event:v,listeners:h}))}var Mm=null,Lm=null;function Ble(d){l4(d,0)}function zb(d){var h=zf(d);if(le(h))return d}function Fle(d,h){if(d==="change")return h}var WD=!1;if(o){var FT;if(o){var UT="oninput"in document;if(!UT){var VD=document.createElement("div");VD.setAttribute("oninput","return;"),UT=typeof VD.oninput=="function"}FT=UT}else FT=!1;WD=FT&&(!document.documentMode||9<document.documentMode)}function GD(){Mm&&(Mm.detachEvent("onpropertychange",KD),Lm=Mm=null)}function KD(d){if(d.propertyName==="value"&&zb(Lm)){var h=[];HD(h,Lm,d,Vr(d)),Bo(Ble,h)}}function Ule(d,h,v){d==="focusin"?(GD(),Mm=h,Lm=v,Mm.attachEvent("onpropertychange",KD)):d==="focusout"&&GD()}function zle(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return zb(Lm)}function qle(d,h){if(d==="click")return zb(h)}function Hle(d,h){if(d==="input"||d==="change")return zb(h)}function Wle(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var Hs=typeof Object.is=="function"?Object.is:Wle;function Dm(d,h){if(Hs(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var v=Object.keys(d),S=Object.keys(h);if(v.length!==S.length)return!1;for(S=0;S<v.length;S++){var O=v[S];if(!l.call(h,O)||!Hs(d[O],h[O]))return!1}return!0}function ZD(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function XD(d,h){var v=ZD(d);d=0;for(var S;v;){if(v.nodeType===3){if(S=d+v.textContent.length,d<=h&&S>=h)return{node:v,offset:h-d};d=S}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=ZD(v)}}function JD(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?JD(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function YD(){for(var d=window,h=Ne();h instanceof d.HTMLIFrameElement;){try{var v=typeof h.contentWindow.location.href=="string"}catch{v=!1}if(v)d=h.contentWindow;else break;h=Ne(d.document)}return h}function zT(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}function Vle(d){var h=YD(),v=d.focusedElem,S=d.selectionRange;if(h!==v&&v&&v.ownerDocument&&JD(v.ownerDocument.documentElement,v)){if(S!==null&&zT(v)){if(h=S.start,d=S.end,d===void 0&&(d=h),"selectionStart"in v)v.selectionStart=h,v.selectionEnd=Math.min(d,v.value.length);else if(d=(h=v.ownerDocument||document)&&h.defaultView||window,d.getSelection){d=d.getSelection();var O=v.textContent.length,I=Math.min(S.start,O);S=S.end===void 0?I:Math.min(S.end,O),!d.extend&&I>S&&(O=S,S=I,I=O),O=XD(v,I);var F=XD(v,S);O&&F&&(d.rangeCount!==1||d.anchorNode!==O.node||d.anchorOffset!==O.offset||d.focusNode!==F.node||d.focusOffset!==F.offset)&&(h=h.createRange(),h.setStart(O.node,O.offset),d.removeAllRanges(),I>S?(d.addRange(h),d.extend(F.node,F.offset)):(h.setEnd(F.node,F.offset),d.addRange(h)))}}for(h=[],d=v;d=d.parentNode;)d.nodeType===1&&h.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<h.length;v++)d=h[v],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var Gle=o&&"documentMode"in document&&11>=document.documentMode,Df=null,qT=null,Bm=null,HT=!1;function QD(d,h,v){var S=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;HT||Df==null||Df!==Ne(S)||(S=Df,"selectionStart"in S&&zT(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Bm&&Dm(Bm,S)||(Bm=S,S=Vb(qT,"onSelect"),0<S.length&&(h=new qs("onSelect","select",null,h,v),d.push({event:h,listeners:S}),h.target=Df)))}function qb(d,h){var v={};return v[d.toLowerCase()]=h.toLowerCase(),v["Webkit"+d]="webkit"+h,v["Moz"+d]="moz"+h,v}var Bf={animationend:qb("Animation","AnimationEnd"),animationiteration:qb("Animation","AnimationIteration"),animationstart:qb("Animation","AnimationStart"),transitionend:qb("Transition","TransitionEnd")},WT={},e4={};o&&(e4=document.createElement("div").style,"AnimationEvent"in window||(delete Bf.animationend.animation,delete Bf.animationiteration.animation,delete Bf.animationstart.animation),"TransitionEvent"in window||delete Bf.transitionend.transition);function Hb(d){if(WT[d])return WT[d];if(!Bf[d])return d;var h=Bf[d],v;for(v in h)if(h.hasOwnProperty(v)&&v in e4)return WT[d]=h[v];return d}var t4=Hb("animationend"),n4=Hb("animationiteration"),r4=Hb("animationstart"),i4=Hb("transitionend"),a4=new Map,s4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vc(d,h){a4.set(d,h),a(h,[d])}for(var VT=0;VT<s4.length;VT++){var GT=s4[VT],Kle=GT.toLowerCase(),Zle=GT[0].toUpperCase()+GT.slice(1);Vc(Kle,"on"+Zle)}Vc(t4,"onAnimationEnd"),Vc(n4,"onAnimationIteration"),Vc(r4,"onAnimationStart"),Vc("dblclick","onDoubleClick"),Vc("focusin","onFocus"),Vc("focusout","onBlur"),Vc(i4,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xle=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fm));function o4(d,h,v){var S=d.type||"unknown-event";d.currentTarget=v,Ti(S,h,void 0,d),d.currentTarget=null}function l4(d,h){h=(h&4)!==0;for(var v=0;v<d.length;v++){var S=d[v],O=S.event;S=S.listeners;e:{var I=void 0;if(h)for(var F=S.length-1;0<=F;F--){var te=S[F],ie=te.instance,me=te.currentTarget;if(te=te.listener,ie!==I&&O.isPropagationStopped())break e;o4(O,te,me),I=ie}else for(F=0;F<S.length;F++){if(te=S[F],ie=te.instance,me=te.currentTarget,te=te.listener,ie!==I&&O.isPropagationStopped())break e;o4(O,te,me),I=ie}}}if(In)throw d=Uo,In=!1,Uo=null,d}function Pn(d,h){var v=h[tE];v===void 0&&(v=h[tE]=new Set);var S=d+"__bubble";v.has(S)||(c4(h,d,2,!1),v.add(S))}function KT(d,h,v){var S=0;h&&(S|=4),c4(v,d,S,h)}var Wb="_reactListening"+Math.random().toString(36).slice(2);function Um(d){if(!d[Wb]){d[Wb]=!0,r.forEach(function(v){v!=="selectionchange"&&(Xle.has(v)||KT(v,!1,d),KT(v,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[Wb]||(h[Wb]=!0,KT("selectionchange",!1,h))}}function c4(d,h,v,S){switch(qt(h)){case 1:var O=re;break;case 4:O=ve;break;default:O=bt}v=O.bind(null,h,v,d),O=void 0,!Fo||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(O=!0),S?O!==void 0?d.addEventListener(h,v,{capture:!0,passive:O}):d.addEventListener(h,v,!0):O!==void 0?d.addEventListener(h,v,{passive:O}):d.addEventListener(h,v,!1)}function ZT(d,h,v,S,O){var I=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var F=S.tag;if(F===3||F===4){var te=S.stateNode.containerInfo;if(te===O||te.nodeType===8&&te.parentNode===O)break;if(F===4)for(F=S.return;F!==null;){var ie=F.tag;if((ie===3||ie===4)&&(ie=F.stateNode.containerInfo,ie===O||ie.nodeType===8&&ie.parentNode===O))return;F=F.return}for(;te!==null;){if(F=ld(te),F===null)return;if(ie=F.tag,ie===5||ie===6){S=I=F;continue e}te=te.parentNode}}S=S.return}Bo(function(){var me=I,Ce=Vr(v),ke=[];e:{var Oe=a4.get(d);if(Oe!==void 0){var Me=qs,He=d;switch(d){case"keypress":if(zn(v)===0)break e;case"keydown":case"keyup":Me=Ale;break;case"focusin":He="focus",Me=LT;break;case"focusout":He="blur",Me=LT;break;case"beforeblur":case"afterblur":Me=LT;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=$D;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=ple;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=kle;break;case t4:case n4:case r4:Me=yle;break;case i4:Me=Ile;break;case"scroll":Me=Mf;break;case"wheel":Me=Rle;break;case"copy":case"cut":case"paste":Me=ble;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=LD}var Ke=(h&4)!==0,ur=!Ke&&d==="scroll",ce=Ke?Oe!==null?Oe+"Capture":null:Oe;Ke=[];for(var oe=me,de;oe!==null;){de=oe;var Ie=de.stateNode;if(de.tag===5&&Ie!==null&&(de=Ie,ce!==null&&(Ie=_r(oe,ce),Ie!=null&&Ke.push(zm(oe,Ie,de)))),ur)break;oe=oe.return}0<Ke.length&&(Oe=new Me(Oe,He,null,v,Ce),ke.push({event:Oe,listeners:Ke}))}}if((h&7)===0){e:{if(Oe=d==="mouseover"||d==="pointerover",Me=d==="mouseout"||d==="pointerout",Oe&&v!==wi&&(He=v.relatedTarget||v.fromElement)&&(ld(He)||He[Ul]))break e;if((Me||Oe)&&(Oe=Ce.window===Ce?Ce:(Oe=Ce.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,Me?(He=v.relatedTarget||v.toElement,Me=me,He=He?ld(He):null,He!==null&&(ur=Ji(He),He!==ur||He.tag!==5&&He.tag!==6)&&(He=null)):(Me=null,He=me),Me!==He)){if(Ke=$D,Ie="onMouseLeave",ce="onMouseEnter",oe="mouse",(d==="pointerout"||d==="pointerover")&&(Ke=LD,Ie="onPointerLeave",ce="onPointerEnter",oe="pointer"),ur=Me==null?Oe:zf(Me),de=He==null?Oe:zf(He),Oe=new Ke(Ie,oe+"leave",Me,v,Ce),Oe.target=ur,Oe.relatedTarget=de,Ie=null,ld(Ce)===me&&(Ke=new Ke(ce,oe+"enter",He,v,Ce),Ke.target=de,Ke.relatedTarget=ur,Ie=Ke),ur=Ie,Me&&He)t:{for(Ke=Me,ce=He,oe=0,de=Ke;de;de=Ff(de))oe++;for(de=0,Ie=ce;Ie;Ie=Ff(Ie))de++;for(;0<oe-de;)Ke=Ff(Ke),oe--;for(;0<de-oe;)ce=Ff(ce),de--;for(;oe--;){if(Ke===ce||ce!==null&&Ke===ce.alternate)break t;Ke=Ff(Ke),ce=Ff(ce)}Ke=null}else Ke=null;Me!==null&&u4(ke,Oe,Me,Ke,!1),He!==null&&ur!==null&&u4(ke,ur,He,Ke,!0)}}e:{if(Oe=me?zf(me):window,Me=Oe.nodeName&&Oe.nodeName.toLowerCase(),Me==="select"||Me==="input"&&Oe.type==="file")var tt=Fle;else if(qD(Oe))if(WD)tt=Hle;else{tt=zle;var ft=Ule}else(Me=Oe.nodeName)&&Me.toLowerCase()==="input"&&(Oe.type==="checkbox"||Oe.type==="radio")&&(tt=qle);if(tt&&(tt=tt(d,me))){HD(ke,tt,v,Ce);break e}ft&&ft(d,Oe,me),d==="focusout"&&(ft=Oe._wrapperState)&&ft.controlled&&Oe.type==="number"&&gn(Oe,"number",Oe.value)}switch(ft=me?zf(me):window,d){case"focusin":(qD(ft)||ft.contentEditable==="true")&&(Df=ft,qT=me,Bm=null);break;case"focusout":Bm=qT=Df=null;break;case"mousedown":HT=!0;break;case"contextmenu":case"mouseup":case"dragend":HT=!1,QD(ke,v,Ce);break;case"selectionchange":if(Gle)break;case"keydown":case"keyup":QD(ke,v,Ce)}var ht;if(BT)e:{switch(d){case"compositionstart":var _t="onCompositionStart";break e;case"compositionend":_t="onCompositionEnd";break e;case"compositionupdate":_t="onCompositionUpdate";break e}_t=void 0}else Lf?UD(d,v)&&(_t="onCompositionEnd"):d==="keydown"&&v.keyCode===229&&(_t="onCompositionStart");_t&&(DD&&v.locale!=="ko"&&(Lf||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&Lf&&(ht=Zr()):(ln=Ce,Wt="value"in ln?ln.value:ln.textContent,Lf=!0)),ft=Vb(me,_t),0<ft.length&&(_t=new MD(_t,d,null,v,Ce),ke.push({event:_t,listeners:ft}),ht?_t.data=ht:(ht=zD(v),ht!==null&&(_t.data=ht)))),(ht=$le?Mle(d,v):Lle(d,v))&&(me=Vb(me,"onBeforeInput"),0<me.length&&(Ce=new MD("onBeforeInput","beforeinput",null,v,Ce),ke.push({event:Ce,listeners:me}),Ce.data=ht))}l4(ke,h)})}function zm(d,h,v){return{instance:d,listener:h,currentTarget:v}}function Vb(d,h){for(var v=h+"Capture",S=[];d!==null;){var O=d,I=O.stateNode;O.tag===5&&I!==null&&(O=I,I=_r(d,v),I!=null&&S.unshift(zm(d,I,O)),I=_r(d,h),I!=null&&S.push(zm(d,I,O))),d=d.return}return S}function Ff(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function u4(d,h,v,S,O){for(var I=h._reactName,F=[];v!==null&&v!==S;){var te=v,ie=te.alternate,me=te.stateNode;if(ie!==null&&ie===S)break;te.tag===5&&me!==null&&(te=me,O?(ie=_r(v,I),ie!=null&&F.unshift(zm(v,ie,te))):O||(ie=_r(v,I),ie!=null&&F.push(zm(v,ie,te)))),v=v.return}F.length!==0&&d.push({event:h,listeners:F})}var Jle=/\r\n?/g,Yle=/\u0000|\uFFFD/g;function d4(d){return(typeof d=="string"?d:""+d).replace(Jle,`
`).replace(Yle,"")}function Gb(d,h,v){if(h=d4(h),d4(d)!==h&&v)throw Error(n(425))}function Kb(){}var XT=null,JT=null;function YT(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var QT=typeof setTimeout=="function"?setTimeout:void 0,Qle=typeof clearTimeout=="function"?clearTimeout:void 0,f4=typeof Promise=="function"?Promise:void 0,ece=typeof queueMicrotask=="function"?queueMicrotask:typeof f4<"u"?function(d){return f4.resolve(null).then(d).catch(tce)}:QT;function tce(d){setTimeout(function(){throw d})}function eE(d,h){var v=h,S=0;do{var O=v.nextSibling;if(d.removeChild(v),O&&O.nodeType===8)if(v=O.data,v==="/$"){if(S===0){d.removeChild(O),Fl(h);return}S--}else v!=="$"&&v!=="$?"&&v!=="$!"||S++;v=O}while(v);Fl(h)}function Gc(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return d}function h4(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var v=d.data;if(v==="$"||v==="$!"||v==="$?"){if(h===0)return d;h--}else v==="/$"&&h++}d=d.previousSibling}return null}var Uf=Math.random().toString(36).slice(2),Vo="__reactFiber$"+Uf,qm="__reactProps$"+Uf,Ul="__reactContainer$"+Uf,tE="__reactEvents$"+Uf,nce="__reactListeners$"+Uf,rce="__reactHandles$"+Uf;function ld(d){var h=d[Vo];if(h)return h;for(var v=d.parentNode;v;){if(h=v[Ul]||v[Vo]){if(v=h.alternate,h.child!==null||v!==null&&v.child!==null)for(d=h4(d);d!==null;){if(v=d[Vo])return v;d=h4(d)}return h}d=v,v=d.parentNode}return null}function Hm(d){return d=d[Vo]||d[Ul],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function zf(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(n(33))}function Zb(d){return d[qm]||null}var nE=[],qf=-1;function Kc(d){return{current:d}}function Rn(d){0>qf||(d.current=nE[qf],nE[qf]=null,qf--)}function xn(d,h){qf++,nE[qf]=d.current,d.current=h}var Zc={},ui=Kc(Zc),Qi=Kc(!1),cd=Zc;function Hf(d,h){var v=d.type.contextTypes;if(!v)return Zc;var S=d.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===h)return S.__reactInternalMemoizedMaskedChildContext;var O={},I;for(I in v)O[I]=h[I];return S&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=h,d.__reactInternalMemoizedMaskedChildContext=O),O}function ea(d){return d=d.childContextTypes,d!=null}function Xb(){Rn(Qi),Rn(ui)}function p4(d,h,v){if(ui.current!==Zc)throw Error(n(168));xn(ui,h),xn(Qi,v)}function m4(d,h,v){var S=d.stateNode;if(h=h.childContextTypes,typeof S.getChildContext!="function")return v;S=S.getChildContext();for(var O in S)if(!(O in h))throw Error(n(108,$(d)||"Unknown",O));return Q({},v,S)}function Jb(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Zc,cd=ui.current,xn(ui,d),xn(Qi,Qi.current),!0}function g4(d,h,v){var S=d.stateNode;if(!S)throw Error(n(169));v?(d=m4(d,h,cd),S.__reactInternalMemoizedMergedChildContext=d,Rn(Qi),Rn(ui),xn(ui,d)):Rn(Qi),xn(Qi,v)}var zl=null,Yb=!1,rE=!1;function y4(d){zl===null?zl=[d]:zl.push(d)}function ice(d){Yb=!0,y4(d)}function Xc(){if(!rE&&zl!==null){rE=!0;var d=0,h=Nt;try{var v=zl;for(Nt=1;d<v.length;d++){var S=v[d];do S=S(!0);while(S!==null)}zl=null,Yb=!1}catch(O){throw zl!==null&&(zl=zl.slice(d+1)),ae(Qn,Xc),O}finally{Nt=h,rE=!1}}return null}var Wf=[],Vf=0,Qb=null,e0=0,cs=[],us=0,ud=null,ql=1,Hl="";function dd(d,h){Wf[Vf++]=e0,Wf[Vf++]=Qb,Qb=d,e0=h}function v4(d,h,v){cs[us++]=ql,cs[us++]=Hl,cs[us++]=ud,ud=d;var S=ql;d=Hl;var O=32-Ei(S)-1;S&=~(1<<O),v+=1;var I=32-Ei(h)+O;if(30<I){var F=O-O%5;I=(S&(1<<F)-1).toString(32),S>>=F,O-=F,ql=1<<32-Ei(h)+O|v<<O|S,Hl=I+d}else ql=1<<I|v<<O|S,Hl=d}function iE(d){d.return!==null&&(dd(d,1),v4(d,1,0))}function aE(d){for(;d===Qb;)Qb=Wf[--Vf],Wf[Vf]=null,e0=Wf[--Vf],Wf[Vf]=null;for(;d===ud;)ud=cs[--us],cs[us]=null,Hl=cs[--us],cs[us]=null,ql=cs[--us],cs[us]=null}var Ta=null,Ea=null,qn=!1,Ws=null;function b4(d,h){var v=ps(5,null,null,0);v.elementType="DELETED",v.stateNode=h,v.return=d,h=d.deletions,h===null?(d.deletions=[v],d.flags|=16):h.push(v)}function _4(d,h){switch(d.tag){case 5:var v=d.type;return h=h.nodeType!==1||v.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(d.stateNode=h,Ta=d,Ea=Gc(h.firstChild),!0):!1;case 6:return h=d.pendingProps===""||h.nodeType!==3?null:h,h!==null?(d.stateNode=h,Ta=d,Ea=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(v=ud!==null?{id:ql,overflow:Hl}:null,d.memoizedState={dehydrated:h,treeContext:v,retryLane:1073741824},v=ps(18,null,null,0),v.stateNode=h,v.return=d,d.child=v,Ta=d,Ea=null,!0):!1;default:return!1}}function sE(d){return(d.mode&1)!==0&&(d.flags&128)===0}function oE(d){if(qn){var h=Ea;if(h){var v=h;if(!_4(d,h)){if(sE(d))throw Error(n(418));h=Gc(v.nextSibling);var S=Ta;h&&_4(d,h)?b4(S,v):(d.flags=d.flags&-4097|2,qn=!1,Ta=d)}}else{if(sE(d))throw Error(n(418));d.flags=d.flags&-4097|2,qn=!1,Ta=d}}}function w4(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Ta=d}function t0(d){if(d!==Ta)return!1;if(!qn)return w4(d),qn=!0,!1;var h;if((h=d.tag!==3)&&!(h=d.tag!==5)&&(h=d.type,h=h!=="head"&&h!=="body"&&!YT(d.type,d.memoizedProps)),h&&(h=Ea)){if(sE(d))throw x4(),Error(n(418));for(;h;)b4(d,h),h=Gc(h.nextSibling)}if(w4(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,h=0;d;){if(d.nodeType===8){var v=d.data;if(v==="/$"){if(h===0){Ea=Gc(d.nextSibling);break e}h--}else v!=="$"&&v!=="$!"&&v!=="$?"||h++}d=d.nextSibling}Ea=null}}else Ea=Ta?Gc(d.stateNode.nextSibling):null;return!0}function x4(){for(var d=Ea;d;)d=Gc(d.nextSibling)}function Gf(){Ea=Ta=null,qn=!1}function lE(d){Ws===null?Ws=[d]:Ws.push(d)}var ace=A.ReactCurrentBatchConfig;function Wm(d,h,v){if(d=v.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(n(309));var S=v.stateNode}if(!S)throw Error(n(147,d));var O=S,I=""+d;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===I?h.ref:(h=function(F){var te=O.refs;F===null?delete te[I]:te[I]=F},h._stringRef=I,h)}if(typeof d!="string")throw Error(n(284));if(!v._owner)throw Error(n(290,d))}return d}function n0(d,h){throw d=Object.prototype.toString.call(h),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d))}function S4(d){var h=d._init;return h(d._payload)}function T4(d){function h(ce,oe){if(d){var de=ce.deletions;de===null?(ce.deletions=[oe],ce.flags|=16):de.push(oe)}}function v(ce,oe){if(!d)return null;for(;oe!==null;)h(ce,oe),oe=oe.sibling;return null}function S(ce,oe){for(ce=new Map;oe!==null;)oe.key!==null?ce.set(oe.key,oe):ce.set(oe.index,oe),oe=oe.sibling;return ce}function O(ce,oe){return ce=iu(ce,oe),ce.index=0,ce.sibling=null,ce}function I(ce,oe,de){return ce.index=de,d?(de=ce.alternate,de!==null?(de=de.index,de<oe?(ce.flags|=2,oe):de):(ce.flags|=2,oe)):(ce.flags|=1048576,oe)}function F(ce){return d&&ce.alternate===null&&(ce.flags|=2),ce}function te(ce,oe,de,Ie){return oe===null||oe.tag!==6?(oe=QE(de,ce.mode,Ie),oe.return=ce,oe):(oe=O(oe,de),oe.return=ce,oe)}function ie(ce,oe,de,Ie){var tt=de.type;return tt===R?Ce(ce,oe,de.props.children,Ie,de.key):oe!==null&&(oe.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===q&&S4(tt)===oe.type)?(Ie=O(oe,de.props),Ie.ref=Wm(ce,oe,de),Ie.return=ce,Ie):(Ie=A0(de.type,de.key,de.props,null,ce.mode,Ie),Ie.ref=Wm(ce,oe,de),Ie.return=ce,Ie)}function me(ce,oe,de,Ie){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==de.containerInfo||oe.stateNode.implementation!==de.implementation?(oe=eA(de,ce.mode,Ie),oe.return=ce,oe):(oe=O(oe,de.children||[]),oe.return=ce,oe)}function Ce(ce,oe,de,Ie,tt){return oe===null||oe.tag!==7?(oe=bd(de,ce.mode,Ie,tt),oe.return=ce,oe):(oe=O(oe,de),oe.return=ce,oe)}function ke(ce,oe,de){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=QE(""+oe,ce.mode,de),oe.return=ce,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case E:return de=A0(oe.type,oe.key,oe.props,null,ce.mode,de),de.ref=Wm(ce,null,oe),de.return=ce,de;case C:return oe=eA(oe,ce.mode,de),oe.return=ce,oe;case q:var Ie=oe._init;return ke(ce,Ie(oe._payload),de)}if(bn(oe)||J(oe))return oe=bd(oe,ce.mode,de,null),oe.return=ce,oe;n0(ce,oe)}return null}function Oe(ce,oe,de,Ie){var tt=oe!==null?oe.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return tt!==null?null:te(ce,oe,""+de,Ie);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case E:return de.key===tt?ie(ce,oe,de,Ie):null;case C:return de.key===tt?me(ce,oe,de,Ie):null;case q:return tt=de._init,Oe(ce,oe,tt(de._payload),Ie)}if(bn(de)||J(de))return tt!==null?null:Ce(ce,oe,de,Ie,null);n0(ce,de)}return null}function Me(ce,oe,de,Ie,tt){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return ce=ce.get(de)||null,te(oe,ce,""+Ie,tt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case E:return ce=ce.get(Ie.key===null?de:Ie.key)||null,ie(oe,ce,Ie,tt);case C:return ce=ce.get(Ie.key===null?de:Ie.key)||null,me(oe,ce,Ie,tt);case q:var ft=Ie._init;return Me(ce,oe,de,ft(Ie._payload),tt)}if(bn(Ie)||J(Ie))return ce=ce.get(de)||null,Ce(oe,ce,Ie,tt,null);n0(oe,Ie)}return null}function He(ce,oe,de,Ie){for(var tt=null,ft=null,ht=oe,_t=oe=0,Dr=null;ht!==null&&_t<de.length;_t++){ht.index>_t?(Dr=ht,ht=null):Dr=ht.sibling;var Zt=Oe(ce,ht,de[_t],Ie);if(Zt===null){ht===null&&(ht=Dr);break}d&&ht&&Zt.alternate===null&&h(ce,ht),oe=I(Zt,oe,_t),ft===null?tt=Zt:ft.sibling=Zt,ft=Zt,ht=Dr}if(_t===de.length)return v(ce,ht),qn&&dd(ce,_t),tt;if(ht===null){for(;_t<de.length;_t++)ht=ke(ce,de[_t],Ie),ht!==null&&(oe=I(ht,oe,_t),ft===null?tt=ht:ft.sibling=ht,ft=ht);return qn&&dd(ce,_t),tt}for(ht=S(ce,ht);_t<de.length;_t++)Dr=Me(ht,ce,_t,de[_t],Ie),Dr!==null&&(d&&Dr.alternate!==null&&ht.delete(Dr.key===null?_t:Dr.key),oe=I(Dr,oe,_t),ft===null?tt=Dr:ft.sibling=Dr,ft=Dr);return d&&ht.forEach(function(au){return h(ce,au)}),qn&&dd(ce,_t),tt}function Ke(ce,oe,de,Ie){var tt=J(de);if(typeof tt!="function")throw Error(n(150));if(de=tt.call(de),de==null)throw Error(n(151));for(var ft=tt=null,ht=oe,_t=oe=0,Dr=null,Zt=de.next();ht!==null&&!Zt.done;_t++,Zt=de.next()){ht.index>_t?(Dr=ht,ht=null):Dr=ht.sibling;var au=Oe(ce,ht,Zt.value,Ie);if(au===null){ht===null&&(ht=Dr);break}d&&ht&&au.alternate===null&&h(ce,ht),oe=I(au,oe,_t),ft===null?tt=au:ft.sibling=au,ft=au,ht=Dr}if(Zt.done)return v(ce,ht),qn&&dd(ce,_t),tt;if(ht===null){for(;!Zt.done;_t++,Zt=de.next())Zt=ke(ce,Zt.value,Ie),Zt!==null&&(oe=I(Zt,oe,_t),ft===null?tt=Zt:ft.sibling=Zt,ft=Zt);return qn&&dd(ce,_t),tt}for(ht=S(ce,ht);!Zt.done;_t++,Zt=de.next())Zt=Me(ht,ce,_t,Zt.value,Ie),Zt!==null&&(d&&Zt.alternate!==null&&ht.delete(Zt.key===null?_t:Zt.key),oe=I(Zt,oe,_t),ft===null?tt=Zt:ft.sibling=Zt,ft=Zt);return d&&ht.forEach(function(Dce){return h(ce,Dce)}),qn&&dd(ce,_t),tt}function ur(ce,oe,de,Ie){if(typeof de=="object"&&de!==null&&de.type===R&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case E:e:{for(var tt=de.key,ft=oe;ft!==null;){if(ft.key===tt){if(tt=de.type,tt===R){if(ft.tag===7){v(ce,ft.sibling),oe=O(ft,de.props.children),oe.return=ce,ce=oe;break e}}else if(ft.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===q&&S4(tt)===ft.type){v(ce,ft.sibling),oe=O(ft,de.props),oe.ref=Wm(ce,ft,de),oe.return=ce,ce=oe;break e}v(ce,ft);break}else h(ce,ft);ft=ft.sibling}de.type===R?(oe=bd(de.props.children,ce.mode,Ie,de.key),oe.return=ce,ce=oe):(Ie=A0(de.type,de.key,de.props,null,ce.mode,Ie),Ie.ref=Wm(ce,oe,de),Ie.return=ce,ce=Ie)}return F(ce);case C:e:{for(ft=de.key;oe!==null;){if(oe.key===ft)if(oe.tag===4&&oe.stateNode.containerInfo===de.containerInfo&&oe.stateNode.implementation===de.implementation){v(ce,oe.sibling),oe=O(oe,de.children||[]),oe.return=ce,ce=oe;break e}else{v(ce,oe);break}else h(ce,oe);oe=oe.sibling}oe=eA(de,ce.mode,Ie),oe.return=ce,ce=oe}return F(ce);case q:return ft=de._init,ur(ce,oe,ft(de._payload),Ie)}if(bn(de))return He(ce,oe,de,Ie);if(J(de))return Ke(ce,oe,de,Ie);n0(ce,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,oe!==null&&oe.tag===6?(v(ce,oe.sibling),oe=O(oe,de),oe.return=ce,ce=oe):(v(ce,oe),oe=QE(de,ce.mode,Ie),oe.return=ce,ce=oe),F(ce)):v(ce,oe)}return ur}var Kf=T4(!0),E4=T4(!1),r0=Kc(null),i0=null,Zf=null,cE=null;function uE(){cE=Zf=i0=null}function dE(d){var h=r0.current;Rn(r0),d._currentValue=h}function fE(d,h,v){for(;d!==null;){var S=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),d===v)break;d=d.return}}function Xf(d,h){i0=d,cE=Zf=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&h)!==0&&(ta=!0),d.firstContext=null)}function ds(d){var h=d._currentValue;if(cE!==d)if(d={context:d,memoizedValue:h,next:null},Zf===null){if(i0===null)throw Error(n(308));Zf=d,i0.dependencies={lanes:0,firstContext:d}}else Zf=Zf.next=d;return h}var fd=null;function hE(d){fd===null?fd=[d]:fd.push(d)}function A4(d,h,v,S){var O=h.interleaved;return O===null?(v.next=v,hE(h)):(v.next=O.next,O.next=v),h.interleaved=v,Wl(d,S)}function Wl(d,h){d.lanes|=h;var v=d.alternate;for(v!==null&&(v.lanes|=h),v=d,d=d.return;d!==null;)d.childLanes|=h,v=d.alternate,v!==null&&(v.childLanes|=h),v=d,d=d.return;return v.tag===3?v.stateNode:null}var Jc=!1;function pE(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O4(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Vl(d,h){return{eventTime:d,lane:h,tag:0,payload:null,callback:null,next:null}}function Yc(d,h,v){var S=d.updateQueue;if(S===null)return null;if(S=S.shared,(Gt&2)!==0){var O=S.pending;return O===null?h.next=h:(h.next=O.next,O.next=h),S.pending=h,Wl(d,v)}return O=S.interleaved,O===null?(h.next=h,hE(S)):(h.next=O.next,O.next=h),S.interleaved=h,Wl(d,v)}function a0(d,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194240)!==0)){var S=h.lanes;S&=d.pendingLanes,v|=S,h.lanes=v,zs(d,v)}}function C4(d,h){var v=d.updateQueue,S=d.alternate;if(S!==null&&(S=S.updateQueue,v===S)){var O=null,I=null;if(v=v.firstBaseUpdate,v!==null){do{var F={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};I===null?O=I=F:I=I.next=F,v=v.next}while(v!==null);I===null?O=I=h:I=I.next=h}else O=I=h;v={baseState:S.baseState,firstBaseUpdate:O,lastBaseUpdate:I,shared:S.shared,effects:S.effects},d.updateQueue=v;return}d=v.lastBaseUpdate,d===null?v.firstBaseUpdate=h:d.next=h,v.lastBaseUpdate=h}function s0(d,h,v,S){var O=d.updateQueue;Jc=!1;var I=O.firstBaseUpdate,F=O.lastBaseUpdate,te=O.shared.pending;if(te!==null){O.shared.pending=null;var ie=te,me=ie.next;ie.next=null,F===null?I=me:F.next=me,F=ie;var Ce=d.alternate;Ce!==null&&(Ce=Ce.updateQueue,te=Ce.lastBaseUpdate,te!==F&&(te===null?Ce.firstBaseUpdate=me:te.next=me,Ce.lastBaseUpdate=ie))}if(I!==null){var ke=O.baseState;F=0,Ce=me=ie=null,te=I;do{var Oe=te.lane,Me=te.eventTime;if((S&Oe)===Oe){Ce!==null&&(Ce=Ce.next={eventTime:Me,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var He=d,Ke=te;switch(Oe=h,Me=v,Ke.tag){case 1:if(He=Ke.payload,typeof He=="function"){ke=He.call(Me,ke,Oe);break e}ke=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ke.payload,Oe=typeof He=="function"?He.call(Me,ke,Oe):He,Oe==null)break e;ke=Q({},ke,Oe);break e;case 2:Jc=!0}}te.callback!==null&&te.lane!==0&&(d.flags|=64,Oe=O.effects,Oe===null?O.effects=[te]:Oe.push(te))}else Me={eventTime:Me,lane:Oe,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Ce===null?(me=Ce=Me,ie=ke):Ce=Ce.next=Me,F|=Oe;if(te=te.next,te===null){if(te=O.shared.pending,te===null)break;Oe=te,te=Oe.next,Oe.next=null,O.lastBaseUpdate=Oe,O.shared.pending=null}}while(!0);if(Ce===null&&(ie=ke),O.baseState=ie,O.firstBaseUpdate=me,O.lastBaseUpdate=Ce,h=O.shared.interleaved,h!==null){O=h;do F|=O.lane,O=O.next;while(O!==h)}else I===null&&(O.shared.lanes=0);md|=F,d.lanes=F,d.memoizedState=ke}}function k4(d,h,v){if(d=h.effects,h.effects=null,d!==null)for(h=0;h<d.length;h++){var S=d[h],O=S.callback;if(O!==null){if(S.callback=null,S=v,typeof O!="function")throw Error(n(191,O));O.call(S)}}}var Vm={},Go=Kc(Vm),Gm=Kc(Vm),Km=Kc(Vm);function hd(d){if(d===Vm)throw Error(n(174));return d}function mE(d,h){switch(xn(Km,h),xn(Gm,d),xn(Go,Vm),d=h.nodeType,d){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Jn(null,"");break;default:d=d===8?h.parentNode:h,h=d.namespaceURI||null,d=d.tagName,h=Jn(h,d)}Rn(Go),xn(Go,h)}function Jf(){Rn(Go),Rn(Gm),Rn(Km)}function N4(d){hd(Km.current);var h=hd(Go.current),v=Jn(h,d.type);h!==v&&(xn(Gm,d),xn(Go,v))}function gE(d){Gm.current===d&&(Rn(Go),Rn(Gm))}var Kn=Kc(0);function o0(d){for(var h=d;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var yE=[];function vE(){for(var d=0;d<yE.length;d++)yE[d]._workInProgressVersionPrimary=null;yE.length=0}var l0=A.ReactCurrentDispatcher,bE=A.ReactCurrentBatchConfig,pd=0,Zn=null,xr=null,Mr=null,c0=!1,Zm=!1,Xm=0,sce=0;function di(){throw Error(n(321))}function _E(d,h){if(h===null)return!1;for(var v=0;v<h.length&&v<d.length;v++)if(!Hs(d[v],h[v]))return!1;return!0}function wE(d,h,v,S,O,I){if(pd=I,Zn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,l0.current=d===null||d.memoizedState===null?uce:dce,d=v(S,O),Zm){I=0;do{if(Zm=!1,Xm=0,25<=I)throw Error(n(301));I+=1,Mr=xr=null,h.updateQueue=null,l0.current=fce,d=v(S,O)}while(Zm)}if(l0.current=f0,h=xr!==null&&xr.next!==null,pd=0,Mr=xr=Zn=null,c0=!1,h)throw Error(n(300));return d}function xE(){var d=Xm!==0;return Xm=0,d}function Ko(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?Zn.memoizedState=Mr=d:Mr=Mr.next=d,Mr}function fs(){if(xr===null){var d=Zn.alternate;d=d!==null?d.memoizedState:null}else d=xr.next;var h=Mr===null?Zn.memoizedState:Mr.next;if(h!==null)Mr=h,xr=d;else{if(d===null)throw Error(n(310));xr=d,d={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Mr===null?Zn.memoizedState=Mr=d:Mr=Mr.next=d}return Mr}function Jm(d,h){return typeof h=="function"?h(d):h}function SE(d){var h=fs(),v=h.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=d;var S=xr,O=S.baseQueue,I=v.pending;if(I!==null){if(O!==null){var F=O.next;O.next=I.next,I.next=F}S.baseQueue=O=I,v.pending=null}if(O!==null){I=O.next,S=S.baseState;var te=F=null,ie=null,me=I;do{var Ce=me.lane;if((pd&Ce)===Ce)ie!==null&&(ie=ie.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),S=me.hasEagerState?me.eagerState:d(S,me.action);else{var ke={lane:Ce,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};ie===null?(te=ie=ke,F=S):ie=ie.next=ke,Zn.lanes|=Ce,md|=Ce}me=me.next}while(me!==null&&me!==I);ie===null?F=S:ie.next=te,Hs(S,h.memoizedState)||(ta=!0),h.memoizedState=S,h.baseState=F,h.baseQueue=ie,v.lastRenderedState=S}if(d=v.interleaved,d!==null){O=d;do I=O.lane,Zn.lanes|=I,md|=I,O=O.next;while(O!==d)}else O===null&&(v.lanes=0);return[h.memoizedState,v.dispatch]}function TE(d){var h=fs(),v=h.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=d;var S=v.dispatch,O=v.pending,I=h.memoizedState;if(O!==null){v.pending=null;var F=O=O.next;do I=d(I,F.action),F=F.next;while(F!==O);Hs(I,h.memoizedState)||(ta=!0),h.memoizedState=I,h.baseQueue===null&&(h.baseState=I),v.lastRenderedState=I}return[I,S]}function I4(){}function P4(d,h){var v=Zn,S=fs(),O=h(),I=!Hs(S.memoizedState,O);if(I&&(S.memoizedState=O,ta=!0),S=S.queue,EE($4.bind(null,v,S,d),[d]),S.getSnapshot!==h||I||Mr!==null&&Mr.memoizedState.tag&1){if(v.flags|=2048,Ym(9,j4.bind(null,v,S,O,h),void 0,null),Lr===null)throw Error(n(349));(pd&30)!==0||R4(v,h,O)}return O}function R4(d,h,v){d.flags|=16384,d={getSnapshot:h,value:v},h=Zn.updateQueue,h===null?(h={lastEffect:null,stores:null},Zn.updateQueue=h,h.stores=[d]):(v=h.stores,v===null?h.stores=[d]:v.push(d))}function j4(d,h,v,S){h.value=v,h.getSnapshot=S,M4(h)&&L4(d)}function $4(d,h,v){return v(function(){M4(h)&&L4(d)})}function M4(d){var h=d.getSnapshot;d=d.value;try{var v=h();return!Hs(d,v)}catch{return!0}}function L4(d){var h=Wl(d,1);h!==null&&Zs(h,d,1,-1)}function D4(d){var h=Ko();return typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jm,lastRenderedState:d},h.queue=d,d=d.dispatch=cce.bind(null,Zn,d),[h.memoizedState,d]}function Ym(d,h,v,S){return d={tag:d,create:h,destroy:v,deps:S,next:null},h=Zn.updateQueue,h===null?(h={lastEffect:null,stores:null},Zn.updateQueue=h,h.lastEffect=d.next=d):(v=h.lastEffect,v===null?h.lastEffect=d.next=d:(S=v.next,v.next=d,d.next=S,h.lastEffect=d)),d}function B4(){return fs().memoizedState}function u0(d,h,v,S){var O=Ko();Zn.flags|=d,O.memoizedState=Ym(1|h,v,void 0,S===void 0?null:S)}function d0(d,h,v,S){var O=fs();S=S===void 0?null:S;var I=void 0;if(xr!==null){var F=xr.memoizedState;if(I=F.destroy,S!==null&&_E(S,F.deps)){O.memoizedState=Ym(h,v,I,S);return}}Zn.flags|=d,O.memoizedState=Ym(1|h,v,I,S)}function F4(d,h){return u0(8390656,8,d,h)}function EE(d,h){return d0(2048,8,d,h)}function U4(d,h){return d0(4,2,d,h)}function z4(d,h){return d0(4,4,d,h)}function q4(d,h){if(typeof h=="function")return d=d(),h(d),function(){h(null)};if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function H4(d,h,v){return v=v!=null?v.concat([d]):null,d0(4,4,q4.bind(null,h,d),v)}function AE(){}function W4(d,h){var v=fs();h=h===void 0?null:h;var S=v.memoizedState;return S!==null&&h!==null&&_E(h,S[1])?S[0]:(v.memoizedState=[d,h],d)}function V4(d,h){var v=fs();h=h===void 0?null:h;var S=v.memoizedState;return S!==null&&h!==null&&_E(h,S[1])?S[0]:(d=d(),v.memoizedState=[d,h],d)}function G4(d,h,v){return(pd&21)===0?(d.baseState&&(d.baseState=!1,ta=!0),d.memoizedState=v):(Hs(v,h)||(v=Pf(),Zn.lanes|=v,md|=v,d.baseState=!0),h)}function oce(d,h){var v=Nt;Nt=v!==0&&4>v?v:4,d(!0);var S=bE.transition;bE.transition={};try{d(!1),h()}finally{Nt=v,bE.transition=S}}function K4(){return fs().memoizedState}function lce(d,h,v){var S=nu(d);if(v={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null},Z4(d))X4(h,v);else if(v=A4(d,h,v,S),v!==null){var O=Ci();Zs(v,d,S,O),J4(v,h,S)}}function cce(d,h,v){var S=nu(d),O={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null};if(Z4(d))X4(h,O);else{var I=d.alternate;if(d.lanes===0&&(I===null||I.lanes===0)&&(I=h.lastRenderedReducer,I!==null))try{var F=h.lastRenderedState,te=I(F,v);if(O.hasEagerState=!0,O.eagerState=te,Hs(te,F)){var ie=h.interleaved;ie===null?(O.next=O,hE(h)):(O.next=ie.next,ie.next=O),h.interleaved=O;return}}catch{}finally{}v=A4(d,h,O,S),v!==null&&(O=Ci(),Zs(v,d,S,O),J4(v,h,S))}}function Z4(d){var h=d.alternate;return d===Zn||h!==null&&h===Zn}function X4(d,h){Zm=c0=!0;var v=d.pending;v===null?h.next=h:(h.next=v.next,v.next=h),d.pending=h}function J4(d,h,v){if((v&4194240)!==0){var S=h.lanes;S&=d.pendingLanes,v|=S,h.lanes=v,zs(d,v)}}var f0={readContext:ds,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},uce={readContext:ds,useCallback:function(d,h){return Ko().memoizedState=[d,h===void 0?null:h],d},useContext:ds,useEffect:F4,useImperativeHandle:function(d,h,v){return v=v!=null?v.concat([d]):null,u0(4194308,4,q4.bind(null,h,d),v)},useLayoutEffect:function(d,h){return u0(4194308,4,d,h)},useInsertionEffect:function(d,h){return u0(4,2,d,h)},useMemo:function(d,h){var v=Ko();return h=h===void 0?null:h,d=d(),v.memoizedState=[d,h],d},useReducer:function(d,h,v){var S=Ko();return h=v!==void 0?v(h):h,S.memoizedState=S.baseState=h,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:h},S.queue=d,d=d.dispatch=lce.bind(null,Zn,d),[S.memoizedState,d]},useRef:function(d){var h=Ko();return d={current:d},h.memoizedState=d},useState:D4,useDebugValue:AE,useDeferredValue:function(d){return Ko().memoizedState=d},useTransition:function(){var d=D4(!1),h=d[0];return d=oce.bind(null,d[1]),Ko().memoizedState=d,[h,d]},useMutableSource:function(){},useSyncExternalStore:function(d,h,v){var S=Zn,O=Ko();if(qn){if(v===void 0)throw Error(n(407));v=v()}else{if(v=h(),Lr===null)throw Error(n(349));(pd&30)!==0||R4(S,h,v)}O.memoizedState=v;var I={value:v,getSnapshot:h};return O.queue=I,F4($4.bind(null,S,I,d),[d]),S.flags|=2048,Ym(9,j4.bind(null,S,I,v,h),void 0,null),v},useId:function(){var d=Ko(),h=Lr.identifierPrefix;if(qn){var v=Hl,S=ql;v=(S&~(1<<32-Ei(S)-1)).toString(32)+v,h=":"+h+"R"+v,v=Xm++,0<v&&(h+="H"+v.toString(32)),h+=":"}else v=sce++,h=":"+h+"r"+v.toString(32)+":";return d.memoizedState=h},unstable_isNewReconciler:!1},dce={readContext:ds,useCallback:W4,useContext:ds,useEffect:EE,useImperativeHandle:H4,useInsertionEffect:U4,useLayoutEffect:z4,useMemo:V4,useReducer:SE,useRef:B4,useState:function(){return SE(Jm)},useDebugValue:AE,useDeferredValue:function(d){var h=fs();return G4(h,xr.memoizedState,d)},useTransition:function(){var d=SE(Jm)[0],h=fs().memoizedState;return[d,h]},useMutableSource:I4,useSyncExternalStore:P4,useId:K4,unstable_isNewReconciler:!1},fce={readContext:ds,useCallback:W4,useContext:ds,useEffect:EE,useImperativeHandle:H4,useInsertionEffect:U4,useLayoutEffect:z4,useMemo:V4,useReducer:TE,useRef:B4,useState:function(){return TE(Jm)},useDebugValue:AE,useDeferredValue:function(d){var h=fs();return xr===null?h.memoizedState=d:G4(h,xr.memoizedState,d)},useTransition:function(){var d=TE(Jm)[0],h=fs().memoizedState;return[d,h]},useMutableSource:I4,useSyncExternalStore:P4,useId:K4,unstable_isNewReconciler:!1};function Vs(d,h){if(d&&d.defaultProps){h=Q({},h),d=d.defaultProps;for(var v in d)h[v]===void 0&&(h[v]=d[v]);return h}return h}function OE(d,h,v,S){h=d.memoizedState,v=v(S,h),v=v==null?h:Q({},h,v),d.memoizedState=v,d.lanes===0&&(d.updateQueue.baseState=v)}var h0={isMounted:function(d){return(d=d._reactInternals)?Ji(d)===d:!1},enqueueSetState:function(d,h,v){d=d._reactInternals;var S=Ci(),O=nu(d),I=Vl(S,O);I.payload=h,v!=null&&(I.callback=v),h=Yc(d,I,O),h!==null&&(Zs(h,d,O,S),a0(h,d,O))},enqueueReplaceState:function(d,h,v){d=d._reactInternals;var S=Ci(),O=nu(d),I=Vl(S,O);I.tag=1,I.payload=h,v!=null&&(I.callback=v),h=Yc(d,I,O),h!==null&&(Zs(h,d,O,S),a0(h,d,O))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var v=Ci(),S=nu(d),O=Vl(v,S);O.tag=2,h!=null&&(O.callback=h),h=Yc(d,O,S),h!==null&&(Zs(h,d,S,v),a0(h,d,S))}};function Y4(d,h,v,S,O,I,F){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(S,I,F):h.prototype&&h.prototype.isPureReactComponent?!Dm(v,S)||!Dm(O,I):!0}function Q4(d,h,v){var S=!1,O=Zc,I=h.contextType;return typeof I=="object"&&I!==null?I=ds(I):(O=ea(h)?cd:ui.current,S=h.contextTypes,I=(S=S!=null)?Hf(d,O):Zc),h=new h(v,I),d.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=h0,d.stateNode=h,h._reactInternals=d,S&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=O,d.__reactInternalMemoizedMaskedChildContext=I),h}function e3(d,h,v,S){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,S),h.state!==d&&h0.enqueueReplaceState(h,h.state,null)}function CE(d,h,v,S){var O=d.stateNode;O.props=v,O.state=d.memoizedState,O.refs={},pE(d);var I=h.contextType;typeof I=="object"&&I!==null?O.context=ds(I):(I=ea(h)?cd:ui.current,O.context=Hf(d,I)),O.state=d.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(OE(d,h,I,v),O.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(h=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),h!==O.state&&h0.enqueueReplaceState(O,O.state,null),s0(d,v,O,S),O.state=d.memoizedState),typeof O.componentDidMount=="function"&&(d.flags|=4194308)}function Yf(d,h){try{var v="",S=h;do v+=ue(S),S=S.return;while(S);var O=v}catch(I){O=`
Error generating stack: `+I.message+`
`+I.stack}return{value:d,source:h,stack:O,digest:null}}function kE(d,h,v){return{value:d,source:null,stack:v??null,digest:h??null}}function NE(d,h){try{console.error(h.value)}catch(v){setTimeout(function(){throw v})}}var hce=typeof WeakMap=="function"?WeakMap:Map;function t3(d,h,v){v=Vl(-1,v),v.tag=3,v.payload={element:null};var S=h.value;return v.callback=function(){_0||(_0=!0,WE=S),NE(d,h)},v}function n3(d,h,v){v=Vl(-1,v),v.tag=3;var S=d.type.getDerivedStateFromError;if(typeof S=="function"){var O=h.value;v.payload=function(){return S(O)},v.callback=function(){NE(d,h)}}var I=d.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(v.callback=function(){NE(d,h),typeof S!="function"&&(eu===null?eu=new Set([this]):eu.add(this));var F=h.stack;this.componentDidCatch(h.value,{componentStack:F!==null?F:""})}),v}function r3(d,h,v){var S=d.pingCache;if(S===null){S=d.pingCache=new hce;var O=new Set;S.set(h,O)}else O=S.get(h),O===void 0&&(O=new Set,S.set(h,O));O.has(v)||(O.add(v),d=Oce.bind(null,d,h,v),h.then(d,d))}function i3(d){do{var h;if((h=d.tag===13)&&(h=d.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return d;d=d.return}while(d!==null);return null}function a3(d,h,v,S,O){return(d.mode&1)===0?(d===h?d.flags|=65536:(d.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(h=Vl(-1,1),h.tag=2,Yc(v,h,1))),v.lanes|=1),d):(d.flags|=65536,d.lanes=O,d)}var pce=A.ReactCurrentOwner,ta=!1;function Oi(d,h,v,S){h.child=d===null?E4(h,null,v,S):Kf(h,d.child,v,S)}function s3(d,h,v,S,O){v=v.render;var I=h.ref;return Xf(h,O),S=wE(d,h,v,S,I,O),v=xE(),d!==null&&!ta?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~O,Gl(d,h,O)):(qn&&v&&iE(h),h.flags|=1,Oi(d,h,S,O),h.child)}function o3(d,h,v,S,O){if(d===null){var I=v.type;return typeof I=="function"&&!YE(I)&&I.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(h.tag=15,h.type=I,l3(d,h,I,S,O)):(d=A0(v.type,null,S,h,h.mode,O),d.ref=h.ref,d.return=h,h.child=d)}if(I=d.child,(d.lanes&O)===0){var F=I.memoizedProps;if(v=v.compare,v=v!==null?v:Dm,v(F,S)&&d.ref===h.ref)return Gl(d,h,O)}return h.flags|=1,d=iu(I,S),d.ref=h.ref,d.return=h,h.child=d}function l3(d,h,v,S,O){if(d!==null){var I=d.memoizedProps;if(Dm(I,S)&&d.ref===h.ref)if(ta=!1,h.pendingProps=S=I,(d.lanes&O)!==0)(d.flags&131072)!==0&&(ta=!0);else return h.lanes=d.lanes,Gl(d,h,O)}return IE(d,h,v,S,O)}function c3(d,h,v){var S=h.pendingProps,O=S.children,I=d!==null?d.memoizedState:null;if(S.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn(eh,Aa),Aa|=v;else{if((v&1073741824)===0)return d=I!==null?I.baseLanes|v:v,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:d,cachePool:null,transitions:null},h.updateQueue=null,xn(eh,Aa),Aa|=d,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=I!==null?I.baseLanes:v,xn(eh,Aa),Aa|=S}else I!==null?(S=I.baseLanes|v,h.memoizedState=null):S=v,xn(eh,Aa),Aa|=S;return Oi(d,h,O,v),h.child}function u3(d,h){var v=h.ref;(d===null&&v!==null||d!==null&&d.ref!==v)&&(h.flags|=512,h.flags|=2097152)}function IE(d,h,v,S,O){var I=ea(v)?cd:ui.current;return I=Hf(h,I),Xf(h,O),v=wE(d,h,v,S,I,O),S=xE(),d!==null&&!ta?(h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~O,Gl(d,h,O)):(qn&&S&&iE(h),h.flags|=1,Oi(d,h,v,O),h.child)}function d3(d,h,v,S,O){if(ea(v)){var I=!0;Jb(h)}else I=!1;if(Xf(h,O),h.stateNode===null)m0(d,h),Q4(h,v,S),CE(h,v,S,O),S=!0;else if(d===null){var F=h.stateNode,te=h.memoizedProps;F.props=te;var ie=F.context,me=v.contextType;typeof me=="object"&&me!==null?me=ds(me):(me=ea(v)?cd:ui.current,me=Hf(h,me));var Ce=v.getDerivedStateFromProps,ke=typeof Ce=="function"||typeof F.getSnapshotBeforeUpdate=="function";ke||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(te!==S||ie!==me)&&e3(h,F,S,me),Jc=!1;var Oe=h.memoizedState;F.state=Oe,s0(h,S,F,O),ie=h.memoizedState,te!==S||Oe!==ie||Qi.current||Jc?(typeof Ce=="function"&&(OE(h,v,Ce,S),ie=h.memoizedState),(te=Jc||Y4(h,v,te,S,Oe,ie,me))?(ke||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(h.flags|=4194308)):(typeof F.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=ie),F.props=S,F.state=ie,F.context=me,S=te):(typeof F.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{F=h.stateNode,O4(d,h),te=h.memoizedProps,me=h.type===h.elementType?te:Vs(h.type,te),F.props=me,ke=h.pendingProps,Oe=F.context,ie=v.contextType,typeof ie=="object"&&ie!==null?ie=ds(ie):(ie=ea(v)?cd:ui.current,ie=Hf(h,ie));var Me=v.getDerivedStateFromProps;(Ce=typeof Me=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(te!==ke||Oe!==ie)&&e3(h,F,S,ie),Jc=!1,Oe=h.memoizedState,F.state=Oe,s0(h,S,F,O);var He=h.memoizedState;te!==ke||Oe!==He||Qi.current||Jc?(typeof Me=="function"&&(OE(h,v,Me,S),He=h.memoizedState),(me=Jc||Y4(h,v,me,S,Oe,He,ie)||!1)?(Ce||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(S,He,ie),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(S,He,ie)),typeof F.componentDidUpdate=="function"&&(h.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof F.componentDidUpdate!="function"||te===d.memoizedProps&&Oe===d.memoizedState||(h.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||te===d.memoizedProps&&Oe===d.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=He),F.props=S,F.state=He,F.context=ie,S=me):(typeof F.componentDidUpdate!="function"||te===d.memoizedProps&&Oe===d.memoizedState||(h.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||te===d.memoizedProps&&Oe===d.memoizedState||(h.flags|=1024),S=!1)}return PE(d,h,v,S,I,O)}function PE(d,h,v,S,O,I){u3(d,h);var F=(h.flags&128)!==0;if(!S&&!F)return O&&g4(h,v,!1),Gl(d,h,I);S=h.stateNode,pce.current=h;var te=F&&typeof v.getDerivedStateFromError!="function"?null:S.render();return h.flags|=1,d!==null&&F?(h.child=Kf(h,d.child,null,I),h.child=Kf(h,null,te,I)):Oi(d,h,te,I),h.memoizedState=S.state,O&&g4(h,v,!0),h.child}function f3(d){var h=d.stateNode;h.pendingContext?p4(d,h.pendingContext,h.pendingContext!==h.context):h.context&&p4(d,h.context,!1),mE(d,h.containerInfo)}function h3(d,h,v,S,O){return Gf(),lE(O),h.flags|=256,Oi(d,h,v,S),h.child}var RE={dehydrated:null,treeContext:null,retryLane:0};function jE(d){return{baseLanes:d,cachePool:null,transitions:null}}function p3(d,h,v){var S=h.pendingProps,O=Kn.current,I=!1,F=(h.flags&128)!==0,te;if((te=F)||(te=d!==null&&d.memoizedState===null?!1:(O&2)!==0),te?(I=!0,h.flags&=-129):(d===null||d.memoizedState!==null)&&(O|=1),xn(Kn,O&1),d===null)return oE(h),d=h.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((h.mode&1)===0?h.lanes=1:d.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(F=S.children,d=S.fallback,I?(S=h.mode,I=h.child,F={mode:"hidden",children:F},(S&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=F):I=O0(F,S,0,null),d=bd(d,S,v,null),I.return=h,d.return=h,I.sibling=d,h.child=I,h.child.memoizedState=jE(v),h.memoizedState=RE,d):$E(h,F));if(O=d.memoizedState,O!==null&&(te=O.dehydrated,te!==null))return mce(d,h,F,S,te,O,v);if(I){I=S.fallback,F=h.mode,O=d.child,te=O.sibling;var ie={mode:"hidden",children:S.children};return(F&1)===0&&h.child!==O?(S=h.child,S.childLanes=0,S.pendingProps=ie,h.deletions=null):(S=iu(O,ie),S.subtreeFlags=O.subtreeFlags&14680064),te!==null?I=iu(te,I):(I=bd(I,F,v,null),I.flags|=2),I.return=h,S.return=h,S.sibling=I,h.child=S,S=I,I=h.child,F=d.child.memoizedState,F=F===null?jE(v):{baseLanes:F.baseLanes|v,cachePool:null,transitions:F.transitions},I.memoizedState=F,I.childLanes=d.childLanes&~v,h.memoizedState=RE,S}return I=d.child,d=I.sibling,S=iu(I,{mode:"visible",children:S.children}),(h.mode&1)===0&&(S.lanes=v),S.return=h,S.sibling=null,d!==null&&(v=h.deletions,v===null?(h.deletions=[d],h.flags|=16):v.push(d)),h.child=S,h.memoizedState=null,S}function $E(d,h){return h=O0({mode:"visible",children:h},d.mode,0,null),h.return=d,d.child=h}function p0(d,h,v,S){return S!==null&&lE(S),Kf(h,d.child,null,v),d=$E(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function mce(d,h,v,S,O,I,F){if(v)return h.flags&256?(h.flags&=-257,S=kE(Error(n(422))),p0(d,h,F,S)):h.memoizedState!==null?(h.child=d.child,h.flags|=128,null):(I=S.fallback,O=h.mode,S=O0({mode:"visible",children:S.children},O,0,null),I=bd(I,O,F,null),I.flags|=2,S.return=h,I.return=h,S.sibling=I,h.child=S,(h.mode&1)!==0&&Kf(h,d.child,null,F),h.child.memoizedState=jE(F),h.memoizedState=RE,I);if((h.mode&1)===0)return p0(d,h,F,null);if(O.data==="$!"){if(S=O.nextSibling&&O.nextSibling.dataset,S)var te=S.dgst;return S=te,I=Error(n(419)),S=kE(I,S,void 0),p0(d,h,F,S)}if(te=(F&d.childLanes)!==0,ta||te){if(S=Lr,S!==null){switch(F&-F){case 4:O=2;break;case 16:O=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:O=32;break;case 536870912:O=268435456;break;default:O=0}O=(O&(S.suspendedLanes|F))!==0?0:O,O!==0&&O!==I.retryLane&&(I.retryLane=O,Wl(d,O),Zs(S,d,O,-1))}return JE(),S=kE(Error(n(421))),p0(d,h,F,S)}return O.data==="$?"?(h.flags|=128,h.child=d.child,h=Cce.bind(null,d),O._reactRetry=h,null):(d=I.treeContext,Ea=Gc(O.nextSibling),Ta=h,qn=!0,Ws=null,d!==null&&(cs[us++]=ql,cs[us++]=Hl,cs[us++]=ud,ql=d.id,Hl=d.overflow,ud=h),h=$E(h,S.children),h.flags|=4096,h)}function m3(d,h,v){d.lanes|=h;var S=d.alternate;S!==null&&(S.lanes|=h),fE(d.return,h,v)}function ME(d,h,v,S,O){var I=d.memoizedState;I===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:v,tailMode:O}:(I.isBackwards=h,I.rendering=null,I.renderingStartTime=0,I.last=S,I.tail=v,I.tailMode=O)}function g3(d,h,v){var S=h.pendingProps,O=S.revealOrder,I=S.tail;if(Oi(d,h,S.children,v),S=Kn.current,(S&2)!==0)S=S&1|2,h.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&m3(d,v,h);else if(d.tag===19)m3(d,v,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}S&=1}if(xn(Kn,S),(h.mode&1)===0)h.memoizedState=null;else switch(O){case"forwards":for(v=h.child,O=null;v!==null;)d=v.alternate,d!==null&&o0(d)===null&&(O=v),v=v.sibling;v=O,v===null?(O=h.child,h.child=null):(O=v.sibling,v.sibling=null),ME(h,!1,O,v,I);break;case"backwards":for(v=null,O=h.child,h.child=null;O!==null;){if(d=O.alternate,d!==null&&o0(d)===null){h.child=O;break}d=O.sibling,O.sibling=v,v=O,O=d}ME(h,!0,v,null,I);break;case"together":ME(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function m0(d,h){(h.mode&1)===0&&d!==null&&(d.alternate=null,h.alternate=null,h.flags|=2)}function Gl(d,h,v){if(d!==null&&(h.dependencies=d.dependencies),md|=h.lanes,(v&h.childLanes)===0)return null;if(d!==null&&h.child!==d.child)throw Error(n(153));if(h.child!==null){for(d=h.child,v=iu(d,d.pendingProps),h.child=v,v.return=h;d.sibling!==null;)d=d.sibling,v=v.sibling=iu(d,d.pendingProps),v.return=h;v.sibling=null}return h.child}function gce(d,h,v){switch(h.tag){case 3:f3(h),Gf();break;case 5:N4(h);break;case 1:ea(h.type)&&Jb(h);break;case 4:mE(h,h.stateNode.containerInfo);break;case 10:var S=h.type._context,O=h.memoizedProps.value;xn(r0,S._currentValue),S._currentValue=O;break;case 13:if(S=h.memoizedState,S!==null)return S.dehydrated!==null?(xn(Kn,Kn.current&1),h.flags|=128,null):(v&h.child.childLanes)!==0?p3(d,h,v):(xn(Kn,Kn.current&1),d=Gl(d,h,v),d!==null?d.sibling:null);xn(Kn,Kn.current&1);break;case 19:if(S=(v&h.childLanes)!==0,(d.flags&128)!==0){if(S)return g3(d,h,v);h.flags|=128}if(O=h.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),xn(Kn,Kn.current),S)break;return null;case 22:case 23:return h.lanes=0,c3(d,h,v)}return Gl(d,h,v)}var y3,LE,v3,b3;y3=function(d,h){for(var v=h.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===h)break;for(;v.sibling===null;){if(v.return===null||v.return===h)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},LE=function(){},v3=function(d,h,v,S){var O=d.memoizedProps;if(O!==S){d=h.stateNode,hd(Go.current);var I=null;switch(v){case"input":O=je(d,O),S=je(d,S),I=[];break;case"select":O=Q({},O,{value:void 0}),S=Q({},S,{value:void 0}),I=[];break;case"textarea":O=br(d,O),S=br(d,S),I=[];break;default:typeof O.onClick!="function"&&typeof S.onClick=="function"&&(d.onclick=Kb)}_i(v,S);var F;v=null;for(me in O)if(!S.hasOwnProperty(me)&&O.hasOwnProperty(me)&&O[me]!=null)if(me==="style"){var te=O[me];for(F in te)te.hasOwnProperty(F)&&(v||(v={}),v[F]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(i.hasOwnProperty(me)?I||(I=[]):(I=I||[]).push(me,null));for(me in S){var ie=S[me];if(te=O!=null?O[me]:void 0,S.hasOwnProperty(me)&&ie!==te&&(ie!=null||te!=null))if(me==="style")if(te){for(F in te)!te.hasOwnProperty(F)||ie&&ie.hasOwnProperty(F)||(v||(v={}),v[F]="");for(F in ie)ie.hasOwnProperty(F)&&te[F]!==ie[F]&&(v||(v={}),v[F]=ie[F])}else v||(I||(I=[]),I.push(me,v)),v=ie;else me==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,te=te?te.__html:void 0,ie!=null&&te!==ie&&(I=I||[]).push(me,ie)):me==="children"?typeof ie!="string"&&typeof ie!="number"||(I=I||[]).push(me,""+ie):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(i.hasOwnProperty(me)?(ie!=null&&me==="onScroll"&&Pn("scroll",d),I||te===ie||(I=[])):(I=I||[]).push(me,ie))}v&&(I=I||[]).push("style",v);var me=I;(h.updateQueue=me)&&(h.flags|=4)}},b3=function(d,h,v,S){v!==S&&(h.flags|=4)};function Qm(d,h){if(!qn)switch(d.tailMode){case"hidden":h=d.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?d.tail=null:v.sibling=null;break;case"collapsed":v=d.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:S.sibling=null}}function fi(d){var h=d.alternate!==null&&d.alternate.child===d.child,v=0,S=0;if(h)for(var O=d.child;O!==null;)v|=O.lanes|O.childLanes,S|=O.subtreeFlags&14680064,S|=O.flags&14680064,O.return=d,O=O.sibling;else for(O=d.child;O!==null;)v|=O.lanes|O.childLanes,S|=O.subtreeFlags,S|=O.flags,O.return=d,O=O.sibling;return d.subtreeFlags|=S,d.childLanes=v,h}function yce(d,h,v){var S=h.pendingProps;switch(aE(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fi(h),null;case 1:return ea(h.type)&&Xb(),fi(h),null;case 3:return S=h.stateNode,Jf(),Rn(Qi),Rn(ui),vE(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(d===null||d.child===null)&&(t0(h)?h.flags|=4:d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Ws!==null&&(KE(Ws),Ws=null))),LE(d,h),fi(h),null;case 5:gE(h);var O=hd(Km.current);if(v=h.type,d!==null&&h.stateNode!=null)v3(d,h,v,S,O),d.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!S){if(h.stateNode===null)throw Error(n(166));return fi(h),null}if(d=hd(Go.current),t0(h)){S=h.stateNode,v=h.type;var I=h.memoizedProps;switch(S[Vo]=h,S[qm]=I,d=(h.mode&1)!==0,v){case"dialog":Pn("cancel",S),Pn("close",S);break;case"iframe":case"object":case"embed":Pn("load",S);break;case"video":case"audio":for(O=0;O<Fm.length;O++)Pn(Fm[O],S);break;case"source":Pn("error",S);break;case"img":case"image":case"link":Pn("error",S),Pn("load",S);break;case"details":Pn("toggle",S);break;case"input":Xe(S,I),Pn("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!I.multiple},Pn("invalid",S);break;case"textarea":ya(S,I),Pn("invalid",S)}_i(v,I),O=null;for(var F in I)if(I.hasOwnProperty(F)){var te=I[F];F==="children"?typeof te=="string"?S.textContent!==te&&(I.suppressHydrationWarning!==!0&&Gb(S.textContent,te,d),O=["children",te]):typeof te=="number"&&S.textContent!==""+te&&(I.suppressHydrationWarning!==!0&&Gb(S.textContent,te,d),O=["children",""+te]):i.hasOwnProperty(F)&&te!=null&&F==="onScroll"&&Pn("scroll",S)}switch(v){case"input":ye(S),vn(S,I,!0);break;case"textarea":ye(S),Rr(S);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(S.onclick=Kb)}S=O,h.updateQueue=S,S!==null&&(h.flags|=4)}else{F=O.nodeType===9?O:O.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=va(v)),d==="http://www.w3.org/1999/xhtml"?v==="script"?(d=F.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof S.is=="string"?d=F.createElement(v,{is:S.is}):(d=F.createElement(v),v==="select"&&(F=d,S.multiple?F.multiple=!0:S.size&&(F.size=S.size))):d=F.createElementNS(d,v),d[Vo]=h,d[qm]=S,y3(d,h,!1,!1),h.stateNode=d;e:{switch(F=Ki(v,S),v){case"dialog":Pn("cancel",d),Pn("close",d),O=S;break;case"iframe":case"object":case"embed":Pn("load",d),O=S;break;case"video":case"audio":for(O=0;O<Fm.length;O++)Pn(Fm[O],d);O=S;break;case"source":Pn("error",d),O=S;break;case"img":case"image":case"link":Pn("error",d),Pn("load",d),O=S;break;case"details":Pn("toggle",d),O=S;break;case"input":Xe(d,S),O=je(d,S),Pn("invalid",d);break;case"option":O=S;break;case"select":d._wrapperState={wasMultiple:!!S.multiple},O=Q({},S,{value:void 0}),Pn("invalid",d);break;case"textarea":ya(d,S),O=br(d,S),Pn("invalid",d);break;default:O=S}_i(v,O),te=O;for(I in te)if(te.hasOwnProperty(I)){var ie=te[I];I==="style"?ba(d,ie):I==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ie!=null&&Fs(d,ie)):I==="children"?typeof ie=="string"?(v!=="textarea"||ie!=="")&&sr(d,ie):typeof ie=="number"&&sr(d,""+ie):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(i.hasOwnProperty(I)?ie!=null&&I==="onScroll"&&Pn("scroll",d):ie!=null&&T(d,I,ie,F))}switch(v){case"input":ye(d),vn(d,S,!1);break;case"textarea":ye(d),Rr(d);break;case"option":S.value!=null&&d.setAttribute("value",""+ne(S.value));break;case"select":d.multiple=!!S.multiple,I=S.value,I!=null?_n(d,!!S.multiple,I,!1):S.defaultValue!=null&&_n(d,!!S.multiple,S.defaultValue,!0);break;default:typeof O.onClick=="function"&&(d.onclick=Kb)}switch(v){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return fi(h),null;case 6:if(d&&h.stateNode!=null)b3(d,h,d.memoizedProps,S);else{if(typeof S!="string"&&h.stateNode===null)throw Error(n(166));if(v=hd(Km.current),hd(Go.current),t0(h)){if(S=h.stateNode,v=h.memoizedProps,S[Vo]=h,(I=S.nodeValue!==v)&&(d=Ta,d!==null))switch(d.tag){case 3:Gb(S.nodeValue,v,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Gb(S.nodeValue,v,(d.mode&1)!==0)}I&&(h.flags|=4)}else S=(v.nodeType===9?v:v.ownerDocument).createTextNode(S),S[Vo]=h,h.stateNode=S}return fi(h),null;case 13:if(Rn(Kn),S=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(qn&&Ea!==null&&(h.mode&1)!==0&&(h.flags&128)===0)x4(),Gf(),h.flags|=98560,I=!1;else if(I=t0(h),S!==null&&S.dehydrated!==null){if(d===null){if(!I)throw Error(n(318));if(I=h.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(n(317));I[Vo]=h}else Gf(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;fi(h),I=!1}else Ws!==null&&(KE(Ws),Ws=null),I=!0;if(!I)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=v,h):(S=S!==null,S!==(d!==null&&d.memoizedState!==null)&&S&&(h.child.flags|=8192,(h.mode&1)!==0&&(d===null||(Kn.current&1)!==0?Sr===0&&(Sr=3):JE())),h.updateQueue!==null&&(h.flags|=4),fi(h),null);case 4:return Jf(),LE(d,h),d===null&&Um(h.stateNode.containerInfo),fi(h),null;case 10:return dE(h.type._context),fi(h),null;case 17:return ea(h.type)&&Xb(),fi(h),null;case 19:if(Rn(Kn),I=h.memoizedState,I===null)return fi(h),null;if(S=(h.flags&128)!==0,F=I.rendering,F===null)if(S)Qm(I,!1);else{if(Sr!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(F=o0(d),F!==null){for(h.flags|=128,Qm(I,!1),S=F.updateQueue,S!==null&&(h.updateQueue=S,h.flags|=4),h.subtreeFlags=0,S=v,v=h.child;v!==null;)I=v,d=S,I.flags&=14680066,F=I.alternate,F===null?(I.childLanes=0,I.lanes=d,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=F.childLanes,I.lanes=F.lanes,I.child=F.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=F.memoizedProps,I.memoizedState=F.memoizedState,I.updateQueue=F.updateQueue,I.type=F.type,d=F.dependencies,I.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),v=v.sibling;return xn(Kn,Kn.current&1|2),h.child}d=d.sibling}I.tail!==null&&Ot()>th&&(h.flags|=128,S=!0,Qm(I,!1),h.lanes=4194304)}else{if(!S)if(d=o0(F),d!==null){if(h.flags|=128,S=!0,v=d.updateQueue,v!==null&&(h.updateQueue=v,h.flags|=4),Qm(I,!0),I.tail===null&&I.tailMode==="hidden"&&!F.alternate&&!qn)return fi(h),null}else 2*Ot()-I.renderingStartTime>th&&v!==1073741824&&(h.flags|=128,S=!0,Qm(I,!1),h.lanes=4194304);I.isBackwards?(F.sibling=h.child,h.child=F):(v=I.last,v!==null?v.sibling=F:h.child=F,I.last=F)}return I.tail!==null?(h=I.tail,I.rendering=h,I.tail=h.sibling,I.renderingStartTime=Ot(),h.sibling=null,v=Kn.current,xn(Kn,S?v&1|2:v&1),h):(fi(h),null);case 22:case 23:return XE(),S=h.memoizedState!==null,d!==null&&d.memoizedState!==null!==S&&(h.flags|=8192),S&&(h.mode&1)!==0?(Aa&1073741824)!==0&&(fi(h),h.subtreeFlags&6&&(h.flags|=8192)):fi(h),null;case 24:return null;case 25:return null}throw Error(n(156,h.tag))}function vce(d,h){switch(aE(h),h.tag){case 1:return ea(h.type)&&Xb(),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return Jf(),Rn(Qi),Rn(ui),vE(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 5:return gE(h),null;case 13:if(Rn(Kn),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(n(340));Gf()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return Rn(Kn),null;case 4:return Jf(),null;case 10:return dE(h.type._context),null;case 22:case 23:return XE(),null;case 24:return null;default:return null}}var g0=!1,hi=!1,bce=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Qf(d,h){var v=d.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(S){tr(d,h,S)}else v.current=null}function DE(d,h,v){try{v()}catch(S){tr(d,h,S)}}var _3=!1;function _ce(d,h){if(XT=G,d=YD(),zT(d)){if("selectionStart"in d)var v={start:d.selectionStart,end:d.selectionEnd};else e:{v=(v=d.ownerDocument)&&v.defaultView||window;var S=v.getSelection&&v.getSelection();if(S&&S.rangeCount!==0){v=S.anchorNode;var O=S.anchorOffset,I=S.focusNode;S=S.focusOffset;try{v.nodeType,I.nodeType}catch{v=null;break e}var F=0,te=-1,ie=-1,me=0,Ce=0,ke=d,Oe=null;t:for(;;){for(var Me;ke!==v||O!==0&&ke.nodeType!==3||(te=F+O),ke!==I||S!==0&&ke.nodeType!==3||(ie=F+S),ke.nodeType===3&&(F+=ke.nodeValue.length),(Me=ke.firstChild)!==null;)Oe=ke,ke=Me;for(;;){if(ke===d)break t;if(Oe===v&&++me===O&&(te=F),Oe===I&&++Ce===S&&(ie=F),(Me=ke.nextSibling)!==null)break;ke=Oe,Oe=ke.parentNode}ke=Me}v=te===-1||ie===-1?null:{start:te,end:ie}}else v=null}v=v||{start:0,end:0}}else v=null;for(JT={focusedElem:d,selectionRange:v},G=!1,Ue=h;Ue!==null;)if(h=Ue,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,Ue=d;else for(;Ue!==null;){h=Ue;try{var He=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var Ke=He.memoizedProps,ur=He.memoizedState,ce=h.stateNode,oe=ce.getSnapshotBeforeUpdate(h.elementType===h.type?Ke:Vs(h.type,Ke),ur);ce.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var de=h.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ie){tr(h,h.return,Ie)}if(d=h.sibling,d!==null){d.return=h.return,Ue=d;break}Ue=h.return}return He=_3,_3=!1,He}function eg(d,h,v){var S=h.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var O=S=S.next;do{if((O.tag&d)===d){var I=O.destroy;O.destroy=void 0,I!==void 0&&DE(h,v,I)}O=O.next}while(O!==S)}}function y0(d,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var v=h=h.next;do{if((v.tag&d)===d){var S=v.create;v.destroy=S()}v=v.next}while(v!==h)}}function BE(d){var h=d.ref;if(h!==null){var v=d.stateNode;switch(d.tag){case 5:d=v;break;default:d=v}typeof h=="function"?h(d):h.current=d}}function w3(d){var h=d.alternate;h!==null&&(d.alternate=null,w3(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&(delete h[Vo],delete h[qm],delete h[tE],delete h[nce],delete h[rce])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function x3(d){return d.tag===5||d.tag===3||d.tag===4}function S3(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||x3(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function FE(d,h,v){var S=d.tag;if(S===5||S===6)d=d.stateNode,h?v.nodeType===8?v.parentNode.insertBefore(d,h):v.insertBefore(d,h):(v.nodeType===8?(h=v.parentNode,h.insertBefore(d,v)):(h=v,h.appendChild(d)),v=v._reactRootContainer,v!=null||h.onclick!==null||(h.onclick=Kb));else if(S!==4&&(d=d.child,d!==null))for(FE(d,h,v),d=d.sibling;d!==null;)FE(d,h,v),d=d.sibling}function UE(d,h,v){var S=d.tag;if(S===5||S===6)d=d.stateNode,h?v.insertBefore(d,h):v.appendChild(d);else if(S!==4&&(d=d.child,d!==null))for(UE(d,h,v),d=d.sibling;d!==null;)UE(d,h,v),d=d.sibling}var Xr=null,Gs=!1;function Qc(d,h,v){for(v=v.child;v!==null;)T3(d,h,v),v=v.sibling}function T3(d,h,v){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(_a,v)}catch{}switch(v.tag){case 5:hi||Qf(v,h);case 6:var S=Xr,O=Gs;Xr=null,Qc(d,h,v),Xr=S,Gs=O,Xr!==null&&(Gs?(d=Xr,v=v.stateNode,d.nodeType===8?d.parentNode.removeChild(v):d.removeChild(v)):Xr.removeChild(v.stateNode));break;case 18:Xr!==null&&(Gs?(d=Xr,v=v.stateNode,d.nodeType===8?eE(d.parentNode,v):d.nodeType===1&&eE(d,v),Fl(d)):eE(Xr,v.stateNode));break;case 4:S=Xr,O=Gs,Xr=v.stateNode.containerInfo,Gs=!0,Qc(d,h,v),Xr=S,Gs=O;break;case 0:case 11:case 14:case 15:if(!hi&&(S=v.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){O=S=S.next;do{var I=O,F=I.destroy;I=I.tag,F!==void 0&&((I&2)!==0||(I&4)!==0)&&DE(v,h,F),O=O.next}while(O!==S)}Qc(d,h,v);break;case 1:if(!hi&&(Qf(v,h),S=v.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=v.memoizedProps,S.state=v.memoizedState,S.componentWillUnmount()}catch(te){tr(v,h,te)}Qc(d,h,v);break;case 21:Qc(d,h,v);break;case 22:v.mode&1?(hi=(S=hi)||v.memoizedState!==null,Qc(d,h,v),hi=S):Qc(d,h,v);break;default:Qc(d,h,v)}}function E3(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var v=d.stateNode;v===null&&(v=d.stateNode=new bce),h.forEach(function(S){var O=kce.bind(null,d,S);v.has(S)||(v.add(S),S.then(O,O))})}}function Ks(d,h){var v=h.deletions;if(v!==null)for(var S=0;S<v.length;S++){var O=v[S];try{var I=d,F=h,te=F;e:for(;te!==null;){switch(te.tag){case 5:Xr=te.stateNode,Gs=!1;break e;case 3:Xr=te.stateNode.containerInfo,Gs=!0;break e;case 4:Xr=te.stateNode.containerInfo,Gs=!0;break e}te=te.return}if(Xr===null)throw Error(n(160));T3(I,F,O),Xr=null,Gs=!1;var ie=O.alternate;ie!==null&&(ie.return=null),O.return=null}catch(me){tr(O,h,me)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)A3(h,d),h=h.sibling}function A3(d,h){var v=d.alternate,S=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Ks(h,d),Zo(d),S&4){try{eg(3,d,d.return),y0(3,d)}catch(Ke){tr(d,d.return,Ke)}try{eg(5,d,d.return)}catch(Ke){tr(d,d.return,Ke)}}break;case 1:Ks(h,d),Zo(d),S&512&&v!==null&&Qf(v,v.return);break;case 5:if(Ks(h,d),Zo(d),S&512&&v!==null&&Qf(v,v.return),d.flags&32){var O=d.stateNode;try{sr(O,"")}catch(Ke){tr(d,d.return,Ke)}}if(S&4&&(O=d.stateNode,O!=null)){var I=d.memoizedProps,F=v!==null?v.memoizedProps:I,te=d.type,ie=d.updateQueue;if(d.updateQueue=null,ie!==null)try{te==="input"&&I.type==="radio"&&I.name!=null&&st(O,I),Ki(te,F);var me=Ki(te,I);for(F=0;F<ie.length;F+=2){var Ce=ie[F],ke=ie[F+1];Ce==="style"?ba(O,ke):Ce==="dangerouslySetInnerHTML"?Fs(O,ke):Ce==="children"?sr(O,ke):T(O,Ce,ke,me)}switch(te){case"input":kt(O,I);break;case"textarea":dr(O,I);break;case"select":var Oe=O._wrapperState.wasMultiple;O._wrapperState.wasMultiple=!!I.multiple;var Me=I.value;Me!=null?_n(O,!!I.multiple,Me,!1):Oe!==!!I.multiple&&(I.defaultValue!=null?_n(O,!!I.multiple,I.defaultValue,!0):_n(O,!!I.multiple,I.multiple?[]:"",!1))}O[qm]=I}catch(Ke){tr(d,d.return,Ke)}}break;case 6:if(Ks(h,d),Zo(d),S&4){if(d.stateNode===null)throw Error(n(162));O=d.stateNode,I=d.memoizedProps;try{O.nodeValue=I}catch(Ke){tr(d,d.return,Ke)}}break;case 3:if(Ks(h,d),Zo(d),S&4&&v!==null&&v.memoizedState.isDehydrated)try{Fl(h.containerInfo)}catch(Ke){tr(d,d.return,Ke)}break;case 4:Ks(h,d),Zo(d);break;case 13:Ks(h,d),Zo(d),O=d.child,O.flags&8192&&(I=O.memoizedState!==null,O.stateNode.isHidden=I,!I||O.alternate!==null&&O.alternate.memoizedState!==null||(HE=Ot())),S&4&&E3(d);break;case 22:if(Ce=v!==null&&v.memoizedState!==null,d.mode&1?(hi=(me=hi)||Ce,Ks(h,d),hi=me):Ks(h,d),Zo(d),S&8192){if(me=d.memoizedState!==null,(d.stateNode.isHidden=me)&&!Ce&&(d.mode&1)!==0)for(Ue=d,Ce=d.child;Ce!==null;){for(ke=Ue=Ce;Ue!==null;){switch(Oe=Ue,Me=Oe.child,Oe.tag){case 0:case 11:case 14:case 15:eg(4,Oe,Oe.return);break;case 1:Qf(Oe,Oe.return);var He=Oe.stateNode;if(typeof He.componentWillUnmount=="function"){S=Oe,v=Oe.return;try{h=S,He.props=h.memoizedProps,He.state=h.memoizedState,He.componentWillUnmount()}catch(Ke){tr(S,v,Ke)}}break;case 5:Qf(Oe,Oe.return);break;case 22:if(Oe.memoizedState!==null){k3(ke);continue}}Me!==null?(Me.return=Oe,Ue=Me):k3(ke)}Ce=Ce.sibling}e:for(Ce=null,ke=d;;){if(ke.tag===5){if(Ce===null){Ce=ke;try{O=ke.stateNode,me?(I=O.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(te=ke.stateNode,ie=ke.memoizedProps.style,F=ie!=null&&ie.hasOwnProperty("display")?ie.display:null,te.style.display=Us("display",F))}catch(Ke){tr(d,d.return,Ke)}}}else if(ke.tag===6){if(Ce===null)try{ke.stateNode.nodeValue=me?"":ke.memoizedProps}catch(Ke){tr(d,d.return,Ke)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===d)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===d)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===d)break e;Ce===ke&&(Ce=null),ke=ke.return}Ce===ke&&(Ce=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:Ks(h,d),Zo(d),S&4&&E3(d);break;case 21:break;default:Ks(h,d),Zo(d)}}function Zo(d){var h=d.flags;if(h&2){try{e:{for(var v=d.return;v!==null;){if(x3(v)){var S=v;break e}v=v.return}throw Error(n(160))}switch(S.tag){case 5:var O=S.stateNode;S.flags&32&&(sr(O,""),S.flags&=-33);var I=S3(d);UE(d,I,O);break;case 3:case 4:var F=S.stateNode.containerInfo,te=S3(d);FE(d,te,F);break;default:throw Error(n(161))}}catch(ie){tr(d,d.return,ie)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function wce(d,h,v){Ue=d,O3(d)}function O3(d,h,v){for(var S=(d.mode&1)!==0;Ue!==null;){var O=Ue,I=O.child;if(O.tag===22&&S){var F=O.memoizedState!==null||g0;if(!F){var te=O.alternate,ie=te!==null&&te.memoizedState!==null||hi;te=g0;var me=hi;if(g0=F,(hi=ie)&&!me)for(Ue=O;Ue!==null;)F=Ue,ie=F.child,F.tag===22&&F.memoizedState!==null?N3(O):ie!==null?(ie.return=F,Ue=ie):N3(O);for(;I!==null;)Ue=I,O3(I),I=I.sibling;Ue=O,g0=te,hi=me}C3(d)}else(O.subtreeFlags&8772)!==0&&I!==null?(I.return=O,Ue=I):C3(d)}}function C3(d){for(;Ue!==null;){var h=Ue;if((h.flags&8772)!==0){var v=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:hi||y0(5,h);break;case 1:var S=h.stateNode;if(h.flags&4&&!hi)if(v===null)S.componentDidMount();else{var O=h.elementType===h.type?v.memoizedProps:Vs(h.type,v.memoizedProps);S.componentDidUpdate(O,v.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var I=h.updateQueue;I!==null&&k4(h,I,S);break;case 3:var F=h.updateQueue;if(F!==null){if(v=null,h.child!==null)switch(h.child.tag){case 5:v=h.child.stateNode;break;case 1:v=h.child.stateNode}k4(h,F,v)}break;case 5:var te=h.stateNode;if(v===null&&h.flags&4){v=te;var ie=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ie.autoFocus&&v.focus();break;case"img":ie.src&&(v.src=ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var me=h.alternate;if(me!==null){var Ce=me.memoizedState;if(Ce!==null){var ke=Ce.dehydrated;ke!==null&&Fl(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}hi||h.flags&512&&BE(h)}catch(Oe){tr(h,h.return,Oe)}}if(h===d){Ue=null;break}if(v=h.sibling,v!==null){v.return=h.return,Ue=v;break}Ue=h.return}}function k3(d){for(;Ue!==null;){var h=Ue;if(h===d){Ue=null;break}var v=h.sibling;if(v!==null){v.return=h.return,Ue=v;break}Ue=h.return}}function N3(d){for(;Ue!==null;){var h=Ue;try{switch(h.tag){case 0:case 11:case 15:var v=h.return;try{y0(4,h)}catch(ie){tr(h,v,ie)}break;case 1:var S=h.stateNode;if(typeof S.componentDidMount=="function"){var O=h.return;try{S.componentDidMount()}catch(ie){tr(h,O,ie)}}var I=h.return;try{BE(h)}catch(ie){tr(h,I,ie)}break;case 5:var F=h.return;try{BE(h)}catch(ie){tr(h,F,ie)}}}catch(ie){tr(h,h.return,ie)}if(h===d){Ue=null;break}var te=h.sibling;if(te!==null){te.return=h.return,Ue=te;break}Ue=h.return}}var xce=Math.ceil,v0=A.ReactCurrentDispatcher,zE=A.ReactCurrentOwner,hs=A.ReactCurrentBatchConfig,Gt=0,Lr=null,hr=null,Jr=0,Aa=0,eh=Kc(0),Sr=0,tg=null,md=0,b0=0,qE=0,ng=null,na=null,HE=0,th=1/0,Kl=null,_0=!1,WE=null,eu=null,w0=!1,tu=null,x0=0,rg=0,VE=null,S0=-1,T0=0;function Ci(){return(Gt&6)!==0?Ot():S0!==-1?S0:S0=Ot()}function nu(d){return(d.mode&1)===0?1:(Gt&2)!==0&&Jr!==0?Jr&-Jr:ace.transition!==null?(T0===0&&(T0=Pf()),T0):(d=Nt,d!==0||(d=window.event,d=d===void 0?16:qt(d.type)),d)}function Zs(d,h,v,S){if(50<rg)throw rg=0,VE=null,Error(n(185));Dl(d,v,S),((Gt&2)===0||d!==Lr)&&(d===Lr&&((Gt&2)===0&&(b0|=v),Sr===4&&ru(d,Jr)),ra(d,S),v===1&&Gt===0&&(h.mode&1)===0&&(th=Ot()+500,Yb&&Xc()))}function ra(d,h){var v=d.callbackNode;Pm(d,h);var S=Ml(d,d===Lr?Jr:0);if(S===0)v!==null&&Te(v),d.callbackNode=null,d.callbackPriority=0;else if(h=S&-S,d.callbackPriority!==h){if(v!=null&&Te(v),h===1)d.tag===0?ice(P3.bind(null,d)):y4(P3.bind(null,d)),ece(function(){(Gt&6)===0&&Xc()}),v=null;else{switch(ss(S)){case 1:v=Qn;break;case 4:v=wr;break;case 16:v=li;break;case 536870912:v=tn;break;default:v=li}v=F3(v,I3.bind(null,d))}d.callbackPriority=h,d.callbackNode=v}}function I3(d,h){if(S0=-1,T0=0,(Gt&6)!==0)throw Error(n(327));var v=d.callbackNode;if(nh()&&d.callbackNode!==v)return null;var S=Ml(d,d===Lr?Jr:0);if(S===0)return null;if((S&30)!==0||(S&d.expiredLanes)!==0||h)h=E0(d,S);else{h=S;var O=Gt;Gt|=2;var I=j3();(Lr!==d||Jr!==h)&&(Kl=null,th=Ot()+500,yd(d,h));do try{Ece();break}catch(te){R3(d,te)}while(!0);uE(),v0.current=I,Gt=O,hr!==null?h=0:(Lr=null,Jr=0,h=Sr)}if(h!==0){if(h===2&&(O=td(d),O!==0&&(S=O,h=GE(d,O))),h===1)throw v=tg,yd(d,0),ru(d,S),ra(d,Ot()),v;if(h===6)ru(d,S);else{if(O=d.current.alternate,(S&30)===0&&!Sce(O)&&(h=E0(d,S),h===2&&(I=td(d),I!==0&&(S=I,h=GE(d,I))),h===1))throw v=tg,yd(d,0),ru(d,S),ra(d,Ot()),v;switch(d.finishedWork=O,d.finishedLanes=S,h){case 0:case 1:throw Error(n(345));case 2:vd(d,na,Kl);break;case 3:if(ru(d,S),(S&130023424)===S&&(h=HE+500-Ot(),10<h)){if(Ml(d,0)!==0)break;if(O=d.suspendedLanes,(O&S)!==S){Ci(),d.pingedLanes|=d.suspendedLanes&O;break}d.timeoutHandle=QT(vd.bind(null,d,na,Kl),h);break}vd(d,na,Kl);break;case 4:if(ru(d,S),(S&4194240)===S)break;for(h=d.eventTimes,O=-1;0<S;){var F=31-Ei(S);I=1<<F,F=h[F],F>O&&(O=F),S&=~I}if(S=O,S=Ot()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*xce(S/1960))-S,10<S){d.timeoutHandle=QT(vd.bind(null,d,na,Kl),S);break}vd(d,na,Kl);break;case 5:vd(d,na,Kl);break;default:throw Error(n(329))}}}return ra(d,Ot()),d.callbackNode===v?I3.bind(null,d):null}function GE(d,h){var v=ng;return d.current.memoizedState.isDehydrated&&(yd(d,h).flags|=256),d=E0(d,h),d!==2&&(h=na,na=v,h!==null&&KE(h)),d}function KE(d){na===null?na=d:na.push.apply(na,d)}function Sce(d){for(var h=d;;){if(h.flags&16384){var v=h.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var S=0;S<v.length;S++){var O=v[S],I=O.getSnapshot;O=O.value;try{if(!Hs(I(),O))return!1}catch{return!1}}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ru(d,h){for(h&=~qE,h&=~b0,d.suspendedLanes|=h,d.pingedLanes&=~h,d=d.expirationTimes;0<h;){var v=31-Ei(h),S=1<<v;d[v]=-1,h&=~S}}function P3(d){if((Gt&6)!==0)throw Error(n(327));nh();var h=Ml(d,0);if((h&1)===0)return ra(d,Ot()),null;var v=E0(d,h);if(d.tag!==0&&v===2){var S=td(d);S!==0&&(h=S,v=GE(d,S))}if(v===1)throw v=tg,yd(d,0),ru(d,h),ra(d,Ot()),v;if(v===6)throw Error(n(345));return d.finishedWork=d.current.alternate,d.finishedLanes=h,vd(d,na,Kl),ra(d,Ot()),null}function ZE(d,h){var v=Gt;Gt|=1;try{return d(h)}finally{Gt=v,Gt===0&&(th=Ot()+500,Yb&&Xc())}}function gd(d){tu!==null&&tu.tag===0&&(Gt&6)===0&&nh();var h=Gt;Gt|=1;var v=hs.transition,S=Nt;try{if(hs.transition=null,Nt=1,d)return d()}finally{Nt=S,hs.transition=v,Gt=h,(Gt&6)===0&&Xc()}}function XE(){Aa=eh.current,Rn(eh)}function yd(d,h){d.finishedWork=null,d.finishedLanes=0;var v=d.timeoutHandle;if(v!==-1&&(d.timeoutHandle=-1,Qle(v)),hr!==null)for(v=hr.return;v!==null;){var S=v;switch(aE(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Xb();break;case 3:Jf(),Rn(Qi),Rn(ui),vE();break;case 5:gE(S);break;case 4:Jf();break;case 13:Rn(Kn);break;case 19:Rn(Kn);break;case 10:dE(S.type._context);break;case 22:case 23:XE()}v=v.return}if(Lr=d,hr=d=iu(d.current,null),Jr=Aa=h,Sr=0,tg=null,qE=b0=md=0,na=ng=null,fd!==null){for(h=0;h<fd.length;h++)if(v=fd[h],S=v.interleaved,S!==null){v.interleaved=null;var O=S.next,I=v.pending;if(I!==null){var F=I.next;I.next=O,S.next=F}v.pending=S}fd=null}return d}function R3(d,h){do{var v=hr;try{if(uE(),l0.current=f0,c0){for(var S=Zn.memoizedState;S!==null;){var O=S.queue;O!==null&&(O.pending=null),S=S.next}c0=!1}if(pd=0,Mr=xr=Zn=null,Zm=!1,Xm=0,zE.current=null,v===null||v.return===null){Sr=1,tg=h,hr=null;break}e:{var I=d,F=v.return,te=v,ie=h;if(h=Jr,te.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var me=ie,Ce=te,ke=Ce.tag;if((Ce.mode&1)===0&&(ke===0||ke===11||ke===15)){var Oe=Ce.alternate;Oe?(Ce.updateQueue=Oe.updateQueue,Ce.memoizedState=Oe.memoizedState,Ce.lanes=Oe.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var Me=i3(F);if(Me!==null){Me.flags&=-257,a3(Me,F,te,I,h),Me.mode&1&&r3(I,me,h),h=Me,ie=me;var He=h.updateQueue;if(He===null){var Ke=new Set;Ke.add(ie),h.updateQueue=Ke}else He.add(ie);break e}else{if((h&1)===0){r3(I,me,h),JE();break e}ie=Error(n(426))}}else if(qn&&te.mode&1){var ur=i3(F);if(ur!==null){(ur.flags&65536)===0&&(ur.flags|=256),a3(ur,F,te,I,h),lE(Yf(ie,te));break e}}I=ie=Yf(ie,te),Sr!==4&&(Sr=2),ng===null?ng=[I]:ng.push(I),I=F;do{switch(I.tag){case 3:I.flags|=65536,h&=-h,I.lanes|=h;var ce=t3(I,ie,h);C4(I,ce);break e;case 1:te=ie;var oe=I.type,de=I.stateNode;if((I.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(eu===null||!eu.has(de)))){I.flags|=65536,h&=-h,I.lanes|=h;var Ie=n3(I,te,h);C4(I,Ie);break e}}I=I.return}while(I!==null)}M3(v)}catch(tt){h=tt,hr===v&&v!==null&&(hr=v=v.return);continue}break}while(!0)}function j3(){var d=v0.current;return v0.current=f0,d===null?f0:d}function JE(){(Sr===0||Sr===3||Sr===2)&&(Sr=4),Lr===null||(md&268435455)===0&&(b0&268435455)===0||ru(Lr,Jr)}function E0(d,h){var v=Gt;Gt|=2;var S=j3();(Lr!==d||Jr!==h)&&(Kl=null,yd(d,h));do try{Tce();break}catch(O){R3(d,O)}while(!0);if(uE(),Gt=v,v0.current=S,hr!==null)throw Error(n(261));return Lr=null,Jr=0,Sr}function Tce(){for(;hr!==null;)$3(hr)}function Ece(){for(;hr!==null&&!Be();)$3(hr)}function $3(d){var h=B3(d.alternate,d,Aa);d.memoizedProps=d.pendingProps,h===null?M3(d):hr=h,zE.current=null}function M3(d){var h=d;do{var v=h.alternate;if(d=h.return,(h.flags&32768)===0){if(v=yce(v,h,Aa),v!==null){hr=v;return}}else{if(v=vce(v,h),v!==null){v.flags&=32767,hr=v;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Sr=6,hr=null;return}}if(h=h.sibling,h!==null){hr=h;return}hr=h=d}while(h!==null);Sr===0&&(Sr=5)}function vd(d,h,v){var S=Nt,O=hs.transition;try{hs.transition=null,Nt=1,Ace(d,h,v,S)}finally{hs.transition=O,Nt=S}return null}function Ace(d,h,v,S){do nh();while(tu!==null);if((Gt&6)!==0)throw Error(n(327));v=d.finishedWork;var O=d.finishedLanes;if(v===null)return null;if(d.finishedWork=null,d.finishedLanes=0,v===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0;var I=v.lanes|v.childLanes;if(Rm(d,I),d===Lr&&(hr=Lr=null,Jr=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||w0||(w0=!0,F3(li,function(){return nh(),null})),I=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||I){I=hs.transition,hs.transition=null;var F=Nt;Nt=1;var te=Gt;Gt|=4,zE.current=null,_ce(d,v),A3(v,d),Vle(JT),G=!!XT,JT=XT=null,d.current=v,wce(v),nn(),Gt=te,Nt=F,hs.transition=I}else d.current=v;if(w0&&(w0=!1,tu=d,x0=O),I=d.pendingLanes,I===0&&(eu=null),Cm(v.stateNode),ra(d,Ot()),h!==null)for(S=d.onRecoverableError,v=0;v<h.length;v++)O=h[v],S(O.value,{componentStack:O.stack,digest:O.digest});if(_0)throw _0=!1,d=WE,WE=null,d;return(x0&1)!==0&&d.tag!==0&&nh(),I=d.pendingLanes,(I&1)!==0?d===VE?rg++:(rg=0,VE=d):rg=0,Xc(),null}function nh(){if(tu!==null){var d=ss(x0),h=hs.transition,v=Nt;try{if(hs.transition=null,Nt=16>d?16:d,tu===null)var S=!1;else{if(d=tu,tu=null,x0=0,(Gt&6)!==0)throw Error(n(331));var O=Gt;for(Gt|=4,Ue=d.current;Ue!==null;){var I=Ue,F=I.child;if((Ue.flags&16)!==0){var te=I.deletions;if(te!==null){for(var ie=0;ie<te.length;ie++){var me=te[ie];for(Ue=me;Ue!==null;){var Ce=Ue;switch(Ce.tag){case 0:case 11:case 15:eg(8,Ce,I)}var ke=Ce.child;if(ke!==null)ke.return=Ce,Ue=ke;else for(;Ue!==null;){Ce=Ue;var Oe=Ce.sibling,Me=Ce.return;if(w3(Ce),Ce===me){Ue=null;break}if(Oe!==null){Oe.return=Me,Ue=Oe;break}Ue=Me}}}var He=I.alternate;if(He!==null){var Ke=He.child;if(Ke!==null){He.child=null;do{var ur=Ke.sibling;Ke.sibling=null,Ke=ur}while(Ke!==null)}}Ue=I}}if((I.subtreeFlags&2064)!==0&&F!==null)F.return=I,Ue=F;else e:for(;Ue!==null;){if(I=Ue,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:eg(9,I,I.return)}var ce=I.sibling;if(ce!==null){ce.return=I.return,Ue=ce;break e}Ue=I.return}}var oe=d.current;for(Ue=oe;Ue!==null;){F=Ue;var de=F.child;if((F.subtreeFlags&2064)!==0&&de!==null)de.return=F,Ue=de;else e:for(F=oe;Ue!==null;){if(te=Ue,(te.flags&2048)!==0)try{switch(te.tag){case 0:case 11:case 15:y0(9,te)}}catch(tt){tr(te,te.return,tt)}if(te===F){Ue=null;break e}var Ie=te.sibling;if(Ie!==null){Ie.return=te.return,Ue=Ie;break e}Ue=te.return}}if(Gt=O,Xc(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(_a,d)}catch{}S=!0}return S}finally{Nt=v,hs.transition=h}}return!1}function L3(d,h,v){h=Yf(v,h),h=t3(d,h,1),d=Yc(d,h,1),h=Ci(),d!==null&&(Dl(d,1,h),ra(d,h))}function tr(d,h,v){if(d.tag===3)L3(d,d,v);else for(;h!==null;){if(h.tag===3){L3(h,d,v);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(eu===null||!eu.has(S))){d=Yf(v,d),d=n3(h,d,1),h=Yc(h,d,1),d=Ci(),h!==null&&(Dl(h,1,d),ra(h,d));break}}h=h.return}}function Oce(d,h,v){var S=d.pingCache;S!==null&&S.delete(h),h=Ci(),d.pingedLanes|=d.suspendedLanes&v,Lr===d&&(Jr&v)===v&&(Sr===4||Sr===3&&(Jr&130023424)===Jr&&500>Ot()-HE?yd(d,0):qE|=v),ra(d,h)}function D3(d,h){h===0&&((d.mode&1)===0?h=1:(h=as,as<<=1,(as&130023424)===0&&(as=4194304)));var v=Ci();d=Wl(d,h),d!==null&&(Dl(d,h,v),ra(d,v))}function Cce(d){var h=d.memoizedState,v=0;h!==null&&(v=h.retryLane),D3(d,v)}function kce(d,h){var v=0;switch(d.tag){case 13:var S=d.stateNode,O=d.memoizedState;O!==null&&(v=O.retryLane);break;case 19:S=d.stateNode;break;default:throw Error(n(314))}S!==null&&S.delete(h),D3(d,v)}var B3;B3=function(d,h,v){if(d!==null)if(d.memoizedProps!==h.pendingProps||Qi.current)ta=!0;else{if((d.lanes&v)===0&&(h.flags&128)===0)return ta=!1,gce(d,h,v);ta=(d.flags&131072)!==0}else ta=!1,qn&&(h.flags&1048576)!==0&&v4(h,e0,h.index);switch(h.lanes=0,h.tag){case 2:var S=h.type;m0(d,h),d=h.pendingProps;var O=Hf(h,ui.current);Xf(h,v),O=wE(null,h,S,d,O,v);var I=xE();return h.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,ea(S)?(I=!0,Jb(h)):I=!1,h.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,pE(h),O.updater=h0,h.stateNode=O,O._reactInternals=h,CE(h,S,d,v),h=PE(null,h,S,!0,I,v)):(h.tag=0,qn&&I&&iE(h),Oi(null,h,O,v),h=h.child),h;case 16:S=h.elementType;e:{switch(m0(d,h),d=h.pendingProps,O=S._init,S=O(S._payload),h.type=S,O=h.tag=Ice(S),d=Vs(S,d),O){case 0:h=IE(null,h,S,d,v);break e;case 1:h=d3(null,h,S,d,v);break e;case 11:h=s3(null,h,S,d,v);break e;case 14:h=o3(null,h,S,Vs(S.type,d),v);break e}throw Error(n(306,S,""))}return h;case 0:return S=h.type,O=h.pendingProps,O=h.elementType===S?O:Vs(S,O),IE(d,h,S,O,v);case 1:return S=h.type,O=h.pendingProps,O=h.elementType===S?O:Vs(S,O),d3(d,h,S,O,v);case 3:e:{if(f3(h),d===null)throw Error(n(387));S=h.pendingProps,I=h.memoizedState,O=I.element,O4(d,h),s0(h,S,null,v);var F=h.memoizedState;if(S=F.element,I.isDehydrated)if(I={element:S,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},h.updateQueue.baseState=I,h.memoizedState=I,h.flags&256){O=Yf(Error(n(423)),h),h=h3(d,h,S,v,O);break e}else if(S!==O){O=Yf(Error(n(424)),h),h=h3(d,h,S,v,O);break e}else for(Ea=Gc(h.stateNode.containerInfo.firstChild),Ta=h,qn=!0,Ws=null,v=E4(h,null,S,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Gf(),S===O){h=Gl(d,h,v);break e}Oi(d,h,S,v)}h=h.child}return h;case 5:return N4(h),d===null&&oE(h),S=h.type,O=h.pendingProps,I=d!==null?d.memoizedProps:null,F=O.children,YT(S,O)?F=null:I!==null&&YT(S,I)&&(h.flags|=32),u3(d,h),Oi(d,h,F,v),h.child;case 6:return d===null&&oE(h),null;case 13:return p3(d,h,v);case 4:return mE(h,h.stateNode.containerInfo),S=h.pendingProps,d===null?h.child=Kf(h,null,S,v):Oi(d,h,S,v),h.child;case 11:return S=h.type,O=h.pendingProps,O=h.elementType===S?O:Vs(S,O),s3(d,h,S,O,v);case 7:return Oi(d,h,h.pendingProps,v),h.child;case 8:return Oi(d,h,h.pendingProps.children,v),h.child;case 12:return Oi(d,h,h.pendingProps.children,v),h.child;case 10:e:{if(S=h.type._context,O=h.pendingProps,I=h.memoizedProps,F=O.value,xn(r0,S._currentValue),S._currentValue=F,I!==null)if(Hs(I.value,F)){if(I.children===O.children&&!Qi.current){h=Gl(d,h,v);break e}}else for(I=h.child,I!==null&&(I.return=h);I!==null;){var te=I.dependencies;if(te!==null){F=I.child;for(var ie=te.firstContext;ie!==null;){if(ie.context===S){if(I.tag===1){ie=Vl(-1,v&-v),ie.tag=2;var me=I.updateQueue;if(me!==null){me=me.shared;var Ce=me.pending;Ce===null?ie.next=ie:(ie.next=Ce.next,Ce.next=ie),me.pending=ie}}I.lanes|=v,ie=I.alternate,ie!==null&&(ie.lanes|=v),fE(I.return,v,h),te.lanes|=v;break}ie=ie.next}}else if(I.tag===10)F=I.type===h.type?null:I.child;else if(I.tag===18){if(F=I.return,F===null)throw Error(n(341));F.lanes|=v,te=F.alternate,te!==null&&(te.lanes|=v),fE(F,v,h),F=I.sibling}else F=I.child;if(F!==null)F.return=I;else for(F=I;F!==null;){if(F===h){F=null;break}if(I=F.sibling,I!==null){I.return=F.return,F=I;break}F=F.return}I=F}Oi(d,h,O.children,v),h=h.child}return h;case 9:return O=h.type,S=h.pendingProps.children,Xf(h,v),O=ds(O),S=S(O),h.flags|=1,Oi(d,h,S,v),h.child;case 14:return S=h.type,O=Vs(S,h.pendingProps),O=Vs(S.type,O),o3(d,h,S,O,v);case 15:return l3(d,h,h.type,h.pendingProps,v);case 17:return S=h.type,O=h.pendingProps,O=h.elementType===S?O:Vs(S,O),m0(d,h),h.tag=1,ea(S)?(d=!0,Jb(h)):d=!1,Xf(h,v),Q4(h,S,O),CE(h,S,O,v),PE(null,h,S,!0,d,v);case 19:return g3(d,h,v);case 22:return c3(d,h,v)}throw Error(n(156,h.tag))};function F3(d,h){return ae(d,h)}function Nce(d,h,v,S){this.tag=d,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(d,h,v,S){return new Nce(d,h,v,S)}function YE(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Ice(d){if(typeof d=="function")return YE(d)?1:0;if(d!=null){if(d=d.$$typeof,d===L)return 11;if(d===W)return 14}return 2}function iu(d,h){var v=d.alternate;return v===null?(v=ps(d.tag,h,d.key,d.mode),v.elementType=d.elementType,v.type=d.type,v.stateNode=d.stateNode,v.alternate=d,d.alternate=v):(v.pendingProps=h,v.type=d.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=d.flags&14680064,v.childLanes=d.childLanes,v.lanes=d.lanes,v.child=d.child,v.memoizedProps=d.memoizedProps,v.memoizedState=d.memoizedState,v.updateQueue=d.updateQueue,h=d.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=d.sibling,v.index=d.index,v.ref=d.ref,v}function A0(d,h,v,S,O,I){var F=2;if(S=d,typeof d=="function")YE(d)&&(F=1);else if(typeof d=="string")F=5;else e:switch(d){case R:return bd(v.children,O,I,h);case N:F=8,O|=8;break;case D:return d=ps(12,v,h,O|2),d.elementType=D,d.lanes=I,d;case B:return d=ps(13,v,h,O),d.elementType=B,d.lanes=I,d;case z:return d=ps(19,v,h,O),d.elementType=z,d.lanes=I,d;case K:return O0(v,O,I,h);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case Z:F=10;break e;case j:F=9;break e;case L:F=11;break e;case W:F=14;break e;case q:F=16,S=null;break e}throw Error(n(130,d==null?d:typeof d,""))}return h=ps(F,v,h,O),h.elementType=d,h.type=S,h.lanes=I,h}function bd(d,h,v,S){return d=ps(7,d,S,h),d.lanes=v,d}function O0(d,h,v,S){return d=ps(22,d,S,h),d.elementType=K,d.lanes=v,d.stateNode={isHidden:!1},d}function QE(d,h,v){return d=ps(6,d,null,h),d.lanes=v,d}function eA(d,h,v){return h=ps(4,d.children!==null?d.children:[],d.key,h),h.lanes=v,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}function Pce(d,h,v,S,O){this.tag=h,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ll(0),this.expirationTimes=Ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.identifierPrefix=S,this.onRecoverableError=O,this.mutableSourceEagerHydrationData=null}function tA(d,h,v,S,O,I,F,te,ie){return d=new Pce(d,h,v,te,ie),h===1?(h=1,I===!0&&(h|=8)):h=0,I=ps(3,null,null,h),d.current=I,I.stateNode=d,I.memoizedState={element:S,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},pE(I),d}function Rce(d,h,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:S==null?null:""+S,children:d,containerInfo:h,implementation:v}}function U3(d){if(!d)return Zc;d=d._reactInternals;e:{if(Ji(d)!==d||d.tag!==1)throw Error(n(170));var h=d;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(ea(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(n(171))}if(d.tag===1){var v=d.type;if(ea(v))return m4(d,v,h)}return h}function z3(d,h,v,S,O,I,F,te,ie){return d=tA(v,S,!0,d,O,I,F,te,ie),d.context=U3(null),v=d.current,S=Ci(),O=nu(v),I=Vl(S,O),I.callback=h??null,Yc(v,I,O),d.current.lanes=O,Dl(d,O,S),ra(d,S),d}function C0(d,h,v,S){var O=h.current,I=Ci(),F=nu(O);return v=U3(v),h.context===null?h.context=v:h.pendingContext=v,h=Vl(I,F),h.payload={element:d},S=S===void 0?null:S,S!==null&&(h.callback=S),d=Yc(O,h,F),d!==null&&(Zs(d,O,F,I),a0(d,O,F)),F}function k0(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function q3(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var v=d.retryLane;d.retryLane=v!==0&&v<h?v:h}}function nA(d,h){q3(d,h),(d=d.alternate)&&q3(d,h)}function jce(){return null}var H3=typeof reportError=="function"?reportError:function(d){console.error(d)};function rA(d){this._internalRoot=d}N0.prototype.render=rA.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(n(409));C0(d,h,null,null)},N0.prototype.unmount=rA.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;gd(function(){C0(null,d,null,null)}),h[Ul]=null}};function N0(d){this._internalRoot=d}N0.prototype.unstable_scheduleHydration=function(d){if(d){var h=Rf();d={blockedOn:null,target:d,priority:h};for(var v=0;v<Yi.length&&h!==0&&h<Yi[v].priority;v++);Yi.splice(v,0,d),v===0&&ad(d)}};function iA(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function I0(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function W3(){}function $ce(d,h,v,S,O){if(O){if(typeof S=="function"){var I=S;S=function(){var me=k0(F);I.call(me)}}var F=z3(h,S,d,0,null,!1,!1,"",W3);return d._reactRootContainer=F,d[Ul]=F.current,Um(d.nodeType===8?d.parentNode:d),gd(),F}for(;O=d.lastChild;)d.removeChild(O);if(typeof S=="function"){var te=S;S=function(){var me=k0(ie);te.call(me)}}var ie=tA(d,0,!1,null,null,!1,!1,"",W3);return d._reactRootContainer=ie,d[Ul]=ie.current,Um(d.nodeType===8?d.parentNode:d),gd(function(){C0(h,ie,v,S)}),ie}function P0(d,h,v,S,O){var I=v._reactRootContainer;if(I){var F=I;if(typeof O=="function"){var te=O;O=function(){var ie=k0(F);te.call(ie)}}C0(h,F,d,O)}else F=$ce(v,h,d,O,S);return k0(F)}os=function(d){switch(d.tag){case 3:var h=d.stateNode;if(h.current.memoizedState.isDehydrated){var v=qo(h.pendingLanes);v!==0&&(zs(h,v|1),ra(h,Ot()),(Gt&6)===0&&(th=Ot()+500,Xc()))}break;case 13:gd(function(){var S=Wl(d,1);if(S!==null){var O=Ci();Zs(S,d,1,O)}}),nA(d,1)}},nd=function(d){if(d.tag===13){var h=Wl(d,134217728);if(h!==null){var v=Ci();Zs(h,d,134217728,v)}nA(d,134217728)}},wa=function(d){if(d.tag===13){var h=nu(d),v=Wl(d,h);if(v!==null){var S=Ci();Zs(v,d,h,S)}nA(d,h)}},Rf=function(){return Nt},jf=function(d,h){var v=Nt;try{return Nt=d,h()}finally{Nt=v}},xi=function(d,h,v){switch(h){case"input":if(kt(d,v),h=v.name,v.type==="radio"&&h!=null){for(v=d;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<v.length;h++){var S=v[h];if(S!==d&&S.form===d.form){var O=Zb(S);if(!O)throw Error(n(90));le(S),kt(S,O)}}}break;case"textarea":dr(d,v);break;case"select":h=v.value,h!=null&&_n(d,!!v.multiple,h,!1)}},hn=ZE,Si=gd;var Mce={usingClientEntryPoint:!1,Events:[Hm,zf,Zb,ns,Do,ZE]},ig={findFiberByHostInstance:ld,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lce={bundleType:ig.bundleType,version:ig.version,rendererPackageName:ig.rendererPackageName,rendererConfig:ig.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Fc(d),d===null?null:d.stateNode},findFiberByHostInstance:ig.findFiberByHostInstance||jce,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var R0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!R0.isDisabled&&R0.supportsFiber)try{_a=R0.inject(Lce),Kr=R0}catch{}}return ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mce,ia.createPortal=function(d,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iA(h))throw Error(n(200));return Rce(d,h,null,v)},ia.createRoot=function(d,h){if(!iA(d))throw Error(n(299));var v=!1,S="",O=H3;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onRecoverableError!==void 0&&(O=h.onRecoverableError)),h=tA(d,1,!1,null,null,v,!1,S,O),d[Ul]=h.current,Um(d.nodeType===8?d.parentNode:d),new rA(h)},ia.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=Fc(h),d=d===null?null:d.stateNode,d},ia.flushSync=function(d){return gd(d)},ia.hydrate=function(d,h,v){if(!I0(h))throw Error(n(200));return P0(null,d,h,!0,v)},ia.hydrateRoot=function(d,h,v){if(!iA(d))throw Error(n(405));var S=v!=null&&v.hydratedSources||null,O=!1,I="",F=H3;if(v!=null&&(v.unstable_strictMode===!0&&(O=!0),v.identifierPrefix!==void 0&&(I=v.identifierPrefix),v.onRecoverableError!==void 0&&(F=v.onRecoverableError)),h=z3(h,null,d,1,v??null,O,!1,I,F),d[Ul]=h.current,Um(d),S)for(d=0;d<S.length;d++)v=S[d],O=v._getVersion,O=O(v._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[v,O]:h.mutableSourceEagerHydrationData.push(v,O);return new N0(h)},ia.render=function(d,h,v){if(!I0(h))throw Error(n(200));return P0(null,d,h,!1,v)},ia.unmountComponentAtNode=function(d){if(!I0(d))throw Error(n(40));return d._reactRootContainer?(gd(function(){P0(null,null,d,!1,function(){d._reactRootContainer=null,d[Ul]=null})}),!0):!1},ia.unstable_batchedUpdates=ZE,ia.unstable_renderSubtreeIntoContainer=function(d,h,v,S){if(!I0(v))throw Error(n(200));if(d==null||d._reactInternals===void 0)throw Error(n(38));return P0(d,h,v,!1,S)},ia.version="18.3.1-next-f1338f8080-20240426",ia}var Q3;function IG(){if(Q3)return oA.exports;Q3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),oA.exports=Kce(),oA.exports}var e5;function Zce(){if(e5)return j0;e5=1;var t=IG();return j0.createRoot=t.createRoot,j0.hydrateRoot=t.hydrateRoot,j0}var Xce=Zce();const Jce=Ut(Xce);function lt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Yce(t,e){const n=k.createContext(e),r=a=>{const{children:s,...o}=a,l=k.useMemo(()=>o,Object.values(o));return g.jsx(n.Provider,{value:l,children:s})};r.displayName=t+"Provider";function i(a){const s=k.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function js(t,e=[]){let n=[];function r(a,s){const o=k.createContext(s),l=n.length;n=[...n,s];const c=f=>{var x;const{scope:p,children:m,..._}=f,y=((x=p==null?void 0:p[t])==null?void 0:x[l])||o,b=k.useMemo(()=>_,Object.values(_));return g.jsx(y.Provider,{value:b,children:m})};c.displayName=a+"Provider";function u(f,p){var y;const m=((y=p==null?void 0:p[t])==null?void 0:y[l])||o,_=k.useContext(m);if(_)return _;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[c,u]}const i=()=>{const a=n.map(s=>k.createContext(s));return function(o){const l=(o==null?void 0:o[t])||a;return k.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return i.scopeName=t,[r,Qce(i,...e)]}function Qce(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((o,{useScope:l,scopeName:c})=>{const f=l(a)[`__scope${c}`];return{...o,...f}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function t5(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function PG(...t){return e=>{let n=!1;const r=t.map(i=>{const a=t5(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():t5(t[i],null)}}}}function jt(...t){return k.useCallback(PG(...t),t)}function op(t){const e=eue(t),n=k.forwardRef((r,i)=>{const{children:a,...s}=r,o=k.Children.toArray(a),l=o.find(tue);if(l){const c=l.props.children,u=o.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return g.jsx(e,{...s,ref:i,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return g.jsx(e,{...s,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}var F1=op("Slot");function eue(t){const e=k.forwardRef((n,r)=>{const{children:i,...a}=n;if(k.isValidElement(i)){const s=rue(i),o=nue(a,i.props);return i.type!==k.Fragment&&(o.ref=r?PG(r,s):s),k.cloneElement(i,o)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var RG=Symbol("radix.slottable");function jG(t){const e=({children:n})=>g.jsx(g.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=RG,e}function tue(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===RG}function nue(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function rue(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function r$(t){const e=t+"CollectionProvider",[n,r]=js(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=y=>{const{scope:b,children:x}=y,w=ee.useRef(null),T=ee.useRef(new Map).current;return g.jsx(i,{scope:b,itemMap:T,collectionRef:w,children:x})};s.displayName=e;const o=t+"CollectionSlot",l=op(o),c=ee.forwardRef((y,b)=>{const{scope:x,children:w}=y,T=a(o,x),A=jt(b,T.collectionRef);return g.jsx(l,{ref:A,children:w})});c.displayName=o;const u=t+"CollectionItemSlot",f="data-radix-collection-item",p=op(u),m=ee.forwardRef((y,b)=>{const{scope:x,children:w,...T}=y,A=ee.useRef(null),E=jt(b,A),C=a(u,x);return ee.useEffect(()=>(C.itemMap.set(A,{ref:A,...T}),()=>void C.itemMap.delete(A))),g.jsx(p,{[f]:"",ref:E,children:w})});m.displayName=u;function _(y){const b=a(t+"CollectionConsumer",y);return ee.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const T=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((C,R)=>T.indexOf(C.ref.current)-T.indexOf(R.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:s,Slot:c,ItemSlot:m},_,r]}var si=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},iue=NG[" useId ".trim().toString()]||(()=>{}),aue=0;function uc(t){const[e,n]=k.useState(iue());return si(()=>{n(r=>r??String(aue++))},[t]),e?`radix-${e}`:""}var Qv=IG();const sue=Ut(Qv);var oue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vt=oue.reduce((t,e)=>{const n=op(`Primitive.${e}`),r=k.forwardRef((i,a)=>{const{asChild:s,...o}=i,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function lue(t,e){t&&Qv.flushSync(()=>t.dispatchEvent(e))}function Li(t){const e=k.useRef(t);return k.useEffect(()=>{e.current=t}),k.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var cue=NG[" useInsertionEffect ".trim().toString()]||si;function Pu({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,a,s]=uue({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:i;{const u=k.useRef(t!==void 0);k.useEffect(()=>{const f=u.current;f!==o&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,r])}const c=k.useCallback(u=>{var f;if(o){const p=due(u)?u(t):u;p!==t&&((f=s.current)==null||f.call(s,p))}else a(u)},[o,t,a,s]);return[l,c]}function uue({defaultProp:t,onChange:e}){const[n,r]=k.useState(t),i=k.useRef(n),a=k.useRef(e);return cue(()=>{a.current=e},[e]),k.useEffect(()=>{var s;i.current!==n&&((s=a.current)==null||s.call(a,n),i.current=n)},[n,i]),[n,r,a]}function due(t){return typeof t=="function"}var $G=k.createContext(void 0),fue=t=>{const{dir:e,children:n}=t;return g.jsx($G.Provider,{value:e,children:n})};function eb(t){const e=k.useContext($G);return t||e||"ltr"}var hue=fue,uA="rovingFocusGroup.onEntryFocus",pue={bubbles:!1,cancelable:!0},tb="RovingFocusGroup",[zP,MG,mue]=r$(tb),[gue,LG]=js(tb,[mue]),[yue,vue]=gue(tb),DG=k.forwardRef((t,e)=>g.jsx(zP.Provider,{scope:t.__scopeRovingFocusGroup,children:g.jsx(zP.Slot,{scope:t.__scopeRovingFocusGroup,children:g.jsx(bue,{...t,ref:e})})}));DG.displayName=tb;var bue=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=t,p=k.useRef(null),m=jt(e,p),_=eb(a),[y,b]=Pu({prop:s,defaultProp:o??null,onChange:l,caller:tb}),[x,w]=k.useState(!1),T=Li(c),A=MG(n),E=k.useRef(!1),[C,R]=k.useState(0);return k.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(uA,T),()=>N.removeEventListener(uA,T)},[T]),g.jsx(yue,{scope:n,orientation:r,dir:_,loop:i,currentTabStopId:y,onItemFocus:k.useCallback(N=>b(N),[b]),onItemShiftTab:k.useCallback(()=>w(!0),[]),onFocusableItemAdd:k.useCallback(()=>R(N=>N+1),[]),onFocusableItemRemove:k.useCallback(()=>R(N=>N-1),[]),children:g.jsx(vt.div,{tabIndex:x||C===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...t.style},onMouseDown:lt(t.onMouseDown,()=>{E.current=!0}),onFocus:lt(t.onFocus,N=>{const D=!E.current;if(N.target===N.currentTarget&&D&&!x){const Z=new CustomEvent(uA,pue);if(N.currentTarget.dispatchEvent(Z),!Z.defaultPrevented){const j=A().filter(q=>q.focusable),L=j.find(q=>q.active),B=j.find(q=>q.id===y),W=[L,B,...j].filter(Boolean).map(q=>q.ref.current);UG(W,u)}}E.current=!1}),onBlur:lt(t.onBlur,()=>w(!1))})})}),BG="RovingFocusGroupItem",FG=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:s,...o}=t,l=uc(),c=a||l,u=vue(BG,n),f=u.currentTabStopId===c,p=MG(n),{onFocusableItemAdd:m,onFocusableItemRemove:_,currentTabStopId:y}=u;return k.useEffect(()=>{if(r)return m(),()=>_()},[r,m,_]),g.jsx(zP.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:g.jsx(vt.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:lt(t.onMouseDown,b=>{r?u.onItemFocus(c):b.preventDefault()}),onFocus:lt(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:lt(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=xue(b,u.orientation,u.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let T=p().filter(A=>A.focusable).map(A=>A.ref.current);if(x==="last")T.reverse();else if(x==="prev"||x==="next"){x==="prev"&&T.reverse();const A=T.indexOf(b.currentTarget);T=u.loop?Sue(T,A+1):T.slice(A+1)}setTimeout(()=>UG(T))}}),children:typeof s=="function"?s({isCurrentTabStop:f,hasTabStop:y!=null}):s})})});FG.displayName=BG;var _ue={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function wue(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function xue(t,e,n){const r=wue(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return _ue[r]}function UG(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Sue(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Tue=DG,Eue=FG;function Aue(t,e){return k.useReducer((n,r)=>e[n][r]??n,t)}var Co=t=>{const{present:e,children:n}=t,r=Oue(e),i=typeof n=="function"?n({present:r.isPresent}):k.Children.only(n),a=jt(r.ref,Cue(i));return typeof n=="function"||r.isPresent?k.cloneElement(i,{ref:a}):null};Co.displayName="Presence";function Oue(t){const[e,n]=k.useState(),r=k.useRef(null),i=k.useRef(t),a=k.useRef("none"),s=t?"mounted":"unmounted",[o,l]=Aue(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const c=$0(r.current);a.current=o==="mounted"?c:"none"},[o]),si(()=>{const c=r.current,u=i.current;if(u!==t){const p=a.current,m=$0(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),si(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=m=>{const y=$0(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&y&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=m=>{m.target===e&&(a.current=$0(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:k.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function $0(t){return(t==null?void 0:t.animationName)||"none"}function Cue(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var U1="Tabs",[kue,tYe]=js(U1,[LG]),zG=LG(),[Nue,i$]=kue(U1),qG=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:s="horizontal",dir:o,activationMode:l="automatic",...c}=t,u=eb(o),[f,p]=Pu({prop:r,onChange:i,defaultProp:a??"",caller:U1});return g.jsx(Nue,{scope:n,baseId:uc(),value:f,onValueChange:p,orientation:s,dir:u,activationMode:l,children:g.jsx(vt.div,{dir:u,"data-orientation":s,...c,ref:e})})});qG.displayName=U1;var HG="TabsList",WG=k.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=i$(HG,n),s=zG(n);return g.jsx(Tue,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:r,children:g.jsx(vt.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});WG.displayName=HG;var VG="TabsTrigger",GG=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,s=i$(VG,n),o=zG(n),l=XG(s.baseId,r),c=JG(s.baseId,r),u=r===s.value;return g.jsx(Eue,{asChild:!0,...o,focusable:!i,active:u,children:g.jsx(vt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...a,ref:e,onMouseDown:lt(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?s.onValueChange(r):f.preventDefault()}),onKeyDown:lt(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&s.onValueChange(r)}),onFocus:lt(t.onFocus,()=>{const f=s.activationMode!=="manual";!u&&!i&&f&&s.onValueChange(r)})})})});GG.displayName=VG;var KG="TabsContent",ZG=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...s}=t,o=i$(KG,n),l=XG(o.baseId,r),c=JG(o.baseId,r),u=r===o.value,f=k.useRef(u);return k.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),g.jsx(Co,{present:i||u,children:({present:p})=>g.jsx(vt.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0,...s,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&a})})});ZG.displayName=KG;function XG(t,e){return`${t}-trigger-${e}`}function JG(t,e){return`${t}-content-${e}`}var Iue=qG,YG=WG,QG=GG,eK=ZG;function tK(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=tK(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ct(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=tK(t))&&(r&&(r+=" "),r+=e);return r}const a$="-",Pue=t=>{const e=jue(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const o=s.split(a$);return o[0]===""&&o.length!==1&&o.shift(),nK(o,e)||Rue(s)},getConflictingClassGroupIds:(s,o)=>{const l=n[s]||[];return o&&r[s]?[...l,...r[s]]:l}}},nK=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?nK(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(a$);return(s=e.validators.find(({validator:o})=>o(a)))==null?void 0:s.classGroupId},n5=/^\[(.+)\]$/,Rue=t=>{if(n5.test(t)){const e=n5.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},jue=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Mue(Object.entries(t.classGroups),n).forEach(([a,s])=>{qP(s,r,a,e)}),r},qP=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:r5(e,i);a.classGroupId=n;return}if(typeof i=="function"){if($ue(i)){qP(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,s])=>{qP(s,r5(e,a),n,r)})})},r5=(t,e)=>{let n=t;return e.split(a$).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$ue=t=>t.isThemeGetter,Mue=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([s,o])=>[e+s,o])):a);return[n,i]}):t,Lue=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,s)=>{n.set(a,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let s=n.get(a);if(s!==void 0)return s;if((s=r.get(a))!==void 0)return i(a,s),s},set(a,s){n.has(a)?n.set(a,s):i(a,s)}}},rK="!",Due=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,s=o=>{const l=[];let c=0,u=0,f;for(let b=0;b<o.length;b++){let x=o[b];if(c===0){if(x===i&&(r||o.slice(b,b+a)===e)){l.push(o.slice(u,b)),u=b+a;continue}if(x==="/"){f=b;continue}}x==="["?c++:x==="]"&&c--}const p=l.length===0?o:o.substring(u),m=p.startsWith(rK),_=m?p.substring(1):p,y=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:_,maybePostfixModifierPosition:y}};return n?o=>n({className:o,parseClassName:s}):s},Bue=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Fue=t=>({cache:Lue(t.cacheSize),parseClassName:Due(t),...Pue(t)}),Uue=/\s+/,zue=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],s=t.trim().split(Uue);let o="";for(let l=s.length-1;l>=0;l-=1){const c=s[l],{modifiers:u,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=n(c);let _=!!m,y=r(_?p.substring(0,m):p);if(!y){if(!_){o=c+(o.length>0?" "+o:o);continue}if(y=r(p),!y){o=c+(o.length>0?" "+o:o);continue}_=!1}const b=Bue(u).join(":"),x=f?b+rK:b,w=x+y;if(a.includes(w))continue;a.push(w);const T=i(y,_);for(let A=0;A<T.length;++A){const E=T[A];a.push(x+E)}o=c+(o.length>0?" "+o:o)}return o};function que(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=iK(e))&&(r&&(r+=" "),r+=n);return r}const iK=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=iK(t[r]))&&(n&&(n+=" "),n+=e);return n};function Hue(t,...e){let n,r,i,a=s;function s(l){const c=e.reduce((u,f)=>f(u),t());return n=Fue(c),r=n.cache.get,i=n.cache.set,a=o,o(l)}function o(l){const c=r(l);if(c)return c;const u=zue(l,n);return i(l,u),u}return function(){return a(que.apply(null,arguments))}}const jn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},aK=/^\[(?:([a-z-]+):)?(.+)\]$/i,Wue=/^\d+\/\d+$/,Vue=new Set(["px","full","screen"]),Gue=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Kue=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zue=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Xue=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Jue=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zl=t=>Hh(t)||Vue.has(t)||Wue.test(t),su=t=>am(t,"length",ade),Hh=t=>!!t&&!Number.isNaN(Number(t)),dA=t=>am(t,"number",Hh),sg=t=>!!t&&Number.isInteger(Number(t)),Yue=t=>t.endsWith("%")&&Hh(t.slice(0,-1)),It=t=>aK.test(t),ou=t=>Gue.test(t),Que=new Set(["length","size","percentage"]),ede=t=>am(t,Que,sK),tde=t=>am(t,"position",sK),nde=new Set(["image","url"]),rde=t=>am(t,nde,ode),ide=t=>am(t,"",sde),og=()=>!0,am=(t,e,n)=>{const r=aK.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},ade=t=>Kue.test(t)&&!Zue.test(t),sK=()=>!1,sde=t=>Xue.test(t),ode=t=>Jue.test(t),lde=()=>{const t=jn("colors"),e=jn("spacing"),n=jn("blur"),r=jn("brightness"),i=jn("borderColor"),a=jn("borderRadius"),s=jn("borderSpacing"),o=jn("borderWidth"),l=jn("contrast"),c=jn("grayscale"),u=jn("hueRotate"),f=jn("invert"),p=jn("gap"),m=jn("gradientColorStops"),_=jn("gradientColorStopPositions"),y=jn("inset"),b=jn("margin"),x=jn("opacity"),w=jn("padding"),T=jn("saturate"),A=jn("scale"),E=jn("sepia"),C=jn("skew"),R=jn("space"),N=jn("translate"),D=()=>["auto","contain","none"],Z=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",It,e],L=()=>[It,e],B=()=>["",Zl,su],z=()=>["auto",Hh,It],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",It],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[Hh,It];return{cacheSize:500,separator:":",theme:{colors:[og],spacing:[Zl,su],blur:["none","",ou,It],brightness:M(),borderColor:[t],borderRadius:["none","","full",ou,It],borderSpacing:L(),borderWidth:B(),contrast:M(),grayscale:J(),hueRotate:M(),invert:J(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[Yue,su],inset:j(),margin:j(),opacity:M(),padding:L(),saturate:M(),scale:M(),sepia:J(),skew:M(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",It]}],container:["container"],columns:[{columns:[ou]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),It]}],overflow:[{overflow:Z()}],"overflow-x":[{"overflow-x":Z()}],"overflow-y":[{"overflow-y":Z()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sg,It]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",It]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",sg,It]}],"grid-cols":[{"grid-cols":[og]}],"col-start-end":[{col:["auto",{span:["full",sg,It]},It]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[og]}],"row-start-end":[{row:["auto",{span:[sg,It]},It]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",It]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",It]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",It,e]}],"min-w":[{"min-w":[It,e,"min","max","fit"]}],"max-w":[{"max-w":[It,e,"none","full","min","max","fit","prose",{screen:[ou]},ou]}],h:[{h:[It,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[It,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[It,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[It,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ou,su]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",dA]}],"font-family":[{font:[og]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",It]}],"line-clamp":[{"line-clamp":["none",Hh,dA]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zl,It]}],"list-image":[{"list-image":["none",It]}],"list-style-type":[{list:["none","disc","decimal",It]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zl,su]}],"underline-offset":[{"underline-offset":["auto",Zl,It]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",It]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",It]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),tde]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ede]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},rde]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[Zl,It]}],"outline-w":[{outline:[Zl,su]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Zl,su]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ou,ide]}],"shadow-color":[{shadow:[og]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ou,It]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[T]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",It]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",It]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",It]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[sg,It]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",It]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",It]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",It]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Zl,su,dA]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},cde=Hue(lde);function ct(...t){return cde(Ct(t))}function za(t){const e=t<0,n=Math.abs(t),r=Math.floor(n/3600),i=Math.floor(n%3600/60),a=n%60,s=r>0?`${r}:${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`;return e?`-${s}`:s}const lp=Iue,cp=k.forwardRef(({className:t,...e},n)=>g.jsx(YG,{ref:n,className:ct("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));cp.displayName=YG.displayName;const go=k.forwardRef(({className:t,...e},n)=>g.jsx(QG,{ref:n,className:ct("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));go.displayName=QG.displayName;const ri=k.forwardRef(({className:t,...e},n)=>g.jsx(eK,{ref:n,className:ct("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ri.displayName=eK.displayName;const i5=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,a5=Ct,s$=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return a5(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=e,s=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],f=a==null?void 0:a[c];if(u===null)return null;const p=i5(u)||i5(f);return i[c][p]}),o=n&&Object.entries(n).reduce((c,u)=>{let[f,p]=u;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:p,...m}=u;return Object.entries(m).every(_=>{let[y,b]=_;return Array.isArray(b)?b.includes({...a,...o}[y]):{...a,...o}[y]===b})?[...c,f,p]:c},[]);return a5(t,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},ude=s$("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Se=k.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const s=r?F1:"button";return g.jsx(s,{className:ct(ude({variant:e,size:n,className:t})),ref:a,...i})});Se.displayName="Button";var oK=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),dde="VisuallyHidden",lK=k.forwardRef((t,e)=>g.jsx(vt.span,{...t,ref:e,style:{...oK,...t.style}}));lK.displayName=dde;var fde=lK;function hde(t,e=globalThis==null?void 0:globalThis.document){const n=Li(t);k.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var pde="DismissableLayer",HP="dismissableLayer.update",mde="dismissableLayer.pointerDownOutside",gde="dismissableLayer.focusOutside",s5,cK=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),z1=k.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:s,onDismiss:o,...l}=t,c=k.useContext(cK),[u,f]=k.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=k.useState({}),_=jt(e,R=>f(R)),y=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(b),w=u?y.indexOf(u):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,A=w>=x,E=bde(R=>{const N=R.target,D=[...c.branches].some(Z=>Z.contains(N));!A||D||(i==null||i(R),s==null||s(R),R.defaultPrevented||o==null||o())},p),C=_de(R=>{const N=R.target;[...c.branches].some(Z=>Z.contains(N))||(a==null||a(R),s==null||s(R),R.defaultPrevented||o==null||o())},p);return hde(R=>{w===c.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&o&&(R.preventDefault(),o()))},p),k.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(s5=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),o5(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=s5)}},[u,p,n,c]),k.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),o5())},[u,c]),k.useEffect(()=>{const R=()=>m({});return document.addEventListener(HP,R),()=>document.removeEventListener(HP,R)},[]),g.jsx(vt.div,{...l,ref:_,style:{pointerEvents:T?A?"auto":"none":void 0,...t.style},onFocusCapture:lt(t.onFocusCapture,C.onFocusCapture),onBlurCapture:lt(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:lt(t.onPointerDownCapture,E.onPointerDownCapture)})});z1.displayName=pde;var yde="DismissableLayerBranch",vde=k.forwardRef((t,e)=>{const n=k.useContext(cK),r=k.useRef(null),i=jt(e,r);return k.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),g.jsx(vt.div,{...t,ref:i})});vde.displayName=yde;function bde(t,e=globalThis==null?void 0:globalThis.document){const n=Li(t),r=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{const a=o=>{if(o.target&&!r.current){let l=function(){uK(mde,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function _de(t,e=globalThis==null?void 0:globalThis.document){const n=Li(t),r=k.useRef(!1);return k.useEffect(()=>{const i=a=>{a.target&&!r.current&&uK(gde,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function o5(){const t=new CustomEvent(HP);document.dispatchEvent(t)}function uK(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?lue(i,a):i.dispatchEvent(a)}var fA="focusScope.autoFocusOnMount",hA="focusScope.autoFocusOnUnmount",l5={bubbles:!1,cancelable:!0},wde="FocusScope",o$=k.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...s}=t,[o,l]=k.useState(null),c=Li(i),u=Li(a),f=k.useRef(null),p=jt(e,y=>l(y)),m=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let y=function(T){if(m.paused||!o)return;const A=T.target;o.contains(A)?f.current=A:gu(f.current,{select:!0})},b=function(T){if(m.paused||!o)return;const A=T.relatedTarget;A!==null&&(o.contains(A)||gu(f.current,{select:!0}))},x=function(T){if(document.activeElement===document.body)for(const E of T)E.removedNodes.length>0&&gu(o)};document.addEventListener("focusin",y),document.addEventListener("focusout",b);const w=new MutationObserver(x);return o&&w.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),w.disconnect()}}},[r,o,m.paused]),k.useEffect(()=>{if(o){u5.add(m);const y=document.activeElement;if(!o.contains(y)){const x=new CustomEvent(fA,l5);o.addEventListener(fA,c),o.dispatchEvent(x),x.defaultPrevented||(xde(Ode(dK(o)),{select:!0}),document.activeElement===y&&gu(o))}return()=>{o.removeEventListener(fA,c),setTimeout(()=>{const x=new CustomEvent(hA,l5);o.addEventListener(hA,u),o.dispatchEvent(x),x.defaultPrevented||gu(y??document.body,{select:!0}),o.removeEventListener(hA,u),u5.remove(m)},0)}}},[o,c,u,m]);const _=k.useCallback(y=>{if(!n&&!r||m.paused)return;const b=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(b&&x){const w=y.currentTarget,[T,A]=Sde(w);T&&A?!y.shiftKey&&x===A?(y.preventDefault(),n&&gu(T,{select:!0})):y.shiftKey&&x===T&&(y.preventDefault(),n&&gu(A,{select:!0})):x===w&&y.preventDefault()}},[n,r,m.paused]);return g.jsx(vt.div,{tabIndex:-1,...s,ref:p,onKeyDown:_})});o$.displayName=wde;function xde(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(gu(r,{select:e}),document.activeElement!==n)return}function Sde(t){const e=dK(t),n=c5(e,t),r=c5(e.reverse(),t);return[n,r]}function dK(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function c5(t,e){for(const n of t)if(!Tde(n,{upTo:e}))return n}function Tde(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Ede(t){return t instanceof HTMLInputElement&&"select"in t}function gu(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Ede(t)&&e&&t.select()}}var u5=Ade();function Ade(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=d5(t,e),t.unshift(e)},remove(e){var n;t=d5(t,e),(n=t[0])==null||n.resume()}}}function d5(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Ode(t){return t.filter(e=>e.tagName!=="A")}var Cde="Portal",q1=k.forwardRef((t,e)=>{var o;const{container:n,...r}=t,[i,a]=k.useState(!1);si(()=>a(!0),[]);const s=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?sue.createPortal(g.jsx(vt.div,{...r,ref:e}),s):null});q1.displayName=Cde;var pA=0;function fK(){k.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??f5()),document.body.insertAdjacentElement("beforeend",t[1]??f5()),pA++,()=>{pA===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),pA--}},[])}function f5(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var nl=function(){return nl=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nl.apply(this,arguments)};function hK(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function kde(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var cw="right-scroll-bar-position",uw="width-before-scroll-bar",Nde="with-scroll-bars-hidden",Ide="--removed-body-scroll-bar-size";function mA(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Pde(t,e){var n=k.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Rde=typeof window<"u"?k.useLayoutEffect:k.useEffect,h5=new WeakMap;function jde(t,e){var n=Pde(null,function(r){return t.forEach(function(i){return mA(i,r)})});return Rde(function(){var r=h5.get(n);if(r){var i=new Set(r),a=new Set(t),s=n.current;i.forEach(function(o){a.has(o)||mA(o,null)}),a.forEach(function(o){i.has(o)||mA(o,s)})}h5.set(n,t)},[t]),n}function $de(t){return t}function Mde(t,e){e===void 0&&(e=$de);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var s=e(a,r);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(a){for(r=!0;n.length;){var s=n;n=[],s.forEach(a)}n={push:function(o){return a(o)},filter:function(){return n}}},assignMedium:function(a){r=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(a),s=n}var l=function(){var u=s;s=[],u.forEach(a)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return i}function Lde(t){t===void 0&&(t={});var e=Mde(null);return e.options=nl({async:!0,ssr:!1},t),e}var pK=function(t){var e=t.sideCar,n=hK(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,nl({},n))};pK.isSideCarExport=!0;function Dde(t,e){return t.useMedium(e),pK}var mK=Lde(),gA=function(){},H1=k.forwardRef(function(t,e){var n=k.useRef(null),r=k.useState({onScrollCapture:gA,onWheelCapture:gA,onTouchMoveCapture:gA}),i=r[0],a=r[1],s=t.forwardProps,o=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,f=t.shards,p=t.sideCar,m=t.noRelative,_=t.noIsolation,y=t.inert,b=t.allowPinchZoom,x=t.as,w=x===void 0?"div":x,T=t.gapMode,A=hK(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=p,C=jde([n,e]),R=nl(nl({},A),i);return k.createElement(k.Fragment,null,u&&k.createElement(E,{sideCar:mK,removeScrollBar:c,shards:f,noRelative:m,noIsolation:_,inert:y,setCallbacks:a,allowPinchZoom:!!b,lockRef:n,gapMode:T}),s?k.cloneElement(k.Children.only(o),nl(nl({},R),{ref:C})):k.createElement(w,nl({},R,{className:l,ref:C}),o))});H1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};H1.classNames={fullWidth:uw,zeroRight:cw};var Bde=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Fde(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Bde();return e&&t.setAttribute("nonce",e),t}function Ude(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function zde(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var qde=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Fde())&&(Ude(e,n),zde(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Hde=function(){var t=qde();return function(e,n){k.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},gK=function(){var t=Hde(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Wde={left:0,top:0,right:0,gap:0},yA=function(t){return parseInt(t||"",10)||0},Vde=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[yA(n),yA(r),yA(i)]},Gde=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Wde;var e=Vde(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Kde=gK(),Wh="data-scroll-locked",Zde=function(t,e,n,r){var i=t.left,a=t.top,s=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Nde,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Wh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cw,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(uw,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(cw," .").concat(cw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(uw," .").concat(uw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Wh,`] {
    `).concat(Ide,": ").concat(o,`px;
  }
`)},p5=function(){var t=parseInt(document.body.getAttribute(Wh)||"0",10);return isFinite(t)?t:0},Xde=function(){k.useEffect(function(){return document.body.setAttribute(Wh,(p5()+1).toString()),function(){var t=p5()-1;t<=0?document.body.removeAttribute(Wh):document.body.setAttribute(Wh,t.toString())}},[])},Jde=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Xde();var a=k.useMemo(function(){return Gde(i)},[i]);return k.createElement(Kde,{styles:Zde(a,!e,i,n?"":"!important")})},WP=!1;if(typeof window<"u")try{var M0=Object.defineProperty({},"passive",{get:function(){return WP=!0,!0}});window.addEventListener("test",M0,M0),window.removeEventListener("test",M0,M0)}catch{WP=!1}var rh=WP?{passive:!1}:!1,Yde=function(t){return t.tagName==="TEXTAREA"},yK=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Yde(t)&&n[e]==="visible")},Qde=function(t){return yK(t,"overflowY")},efe=function(t){return yK(t,"overflowX")},m5=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=vK(t,r);if(i){var a=bK(t,r),s=a[1],o=a[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},tfe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},nfe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},vK=function(t,e){return t==="v"?Qde(e):efe(e)},bK=function(t,e){return t==="v"?tfe(e):nfe(e)},rfe=function(t,e){return t==="h"&&e==="rtl"?-1:1},ife=function(t,e,n,r,i){var a=rfe(t,window.getComputedStyle(e).direction),s=a*r,o=n.target,l=e.contains(o),c=!1,u=s>0,f=0,p=0;do{if(!o)break;var m=bK(t,o),_=m[0],y=m[1],b=m[2],x=y-b-a*_;(_||x)&&vK(t,o)&&(f+=x,p+=_);var w=o.parentNode;o=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&Math.abs(f)<1||!u&&Math.abs(p)<1)&&(c=!0),c},L0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},g5=function(t){return[t.deltaX,t.deltaY]},y5=function(t){return t&&"current"in t?t.current:t},afe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},sfe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},ofe=0,ih=[];function lfe(t){var e=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),i=k.useState(ofe++)[0],a=k.useState(gK)[0],s=k.useRef(t);k.useEffect(function(){s.current=t},[t]),k.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=kde([t.lockRef.current],(t.shards||[]).map(y5),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=k.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!s.current.allowPinchZoom;var x=L0(y),w=n.current,T="deltaX"in y?y.deltaX:w[0]-x[0],A="deltaY"in y?y.deltaY:w[1]-x[1],E,C=y.target,R=Math.abs(T)>Math.abs(A)?"h":"v";if("touches"in y&&R==="h"&&C.type==="range")return!1;var N=m5(R,C);if(!N)return!0;if(N?E=R:(E=R==="v"?"h":"v",N=m5(R,C)),!N)return!1;if(!r.current&&"changedTouches"in y&&(T||A)&&(r.current=E),!E)return!0;var D=r.current||E;return ife(D,b,y,D==="h"?T:A)},[]),l=k.useCallback(function(y){var b=y;if(!(!ih.length||ih[ih.length-1]!==a)){var x="deltaY"in b?g5(b):L0(b),w=e.current.filter(function(E){return E.name===b.type&&(E.target===b.target||b.target===E.shadowParent)&&afe(E.delta,x)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var T=(s.current.shards||[]).map(y5).filter(Boolean).filter(function(E){return E.contains(b.target)}),A=T.length>0?o(b,T[0]):!s.current.noIsolation;A&&b.cancelable&&b.preventDefault()}}},[]),c=k.useCallback(function(y,b,x,w){var T={name:y,delta:b,target:x,should:w,shadowParent:cfe(x)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(A){return A!==T})},1)},[]),u=k.useCallback(function(y){n.current=L0(y),r.current=void 0},[]),f=k.useCallback(function(y){c(y.type,g5(y),y.target,o(y,t.lockRef.current))},[]),p=k.useCallback(function(y){c(y.type,L0(y),y.target,o(y,t.lockRef.current))},[]);k.useEffect(function(){return ih.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,rh),document.addEventListener("touchmove",l,rh),document.addEventListener("touchstart",u,rh),function(){ih=ih.filter(function(y){return y!==a}),document.removeEventListener("wheel",l,rh),document.removeEventListener("touchmove",l,rh),document.removeEventListener("touchstart",u,rh)}},[]);var m=t.removeScrollBar,_=t.inert;return k.createElement(k.Fragment,null,_?k.createElement(a,{styles:sfe(i)}):null,m?k.createElement(Jde,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function cfe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const ufe=Dde(mK,lfe);var l$=k.forwardRef(function(t,e){return k.createElement(H1,nl({},t,{ref:e,sideCar:ufe}))});l$.classNames=H1.classNames;var dfe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ah=new WeakMap,D0=new WeakMap,B0={},vA=0,_K=function(t){return t&&(t.host||_K(t.parentNode))},ffe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=_K(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},hfe=function(t,e,n,r){var i=ffe(e,Array.isArray(t)?t:[t]);B0[n]||(B0[n]=new WeakMap);var a=B0[n],s=[],o=new Set,l=new Set(i),c=function(f){!f||o.has(f)||(o.add(f),c(f.parentNode))};i.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(o.has(p))u(p);else try{var m=p.getAttribute(r),_=m!==null&&m!=="false",y=(ah.get(p)||0)+1,b=(a.get(p)||0)+1;ah.set(p,y),a.set(p,b),s.push(p),y===1&&_&&D0.set(p,!0),b===1&&p.setAttribute(n,"true"),_||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return u(e),o.clear(),vA++,function(){s.forEach(function(f){var p=ah.get(f)-1,m=a.get(f)-1;ah.set(f,p),a.set(f,m),p||(D0.has(f)||f.removeAttribute(r),D0.delete(f)),m||f.removeAttribute(n)}),vA--,vA||(ah=new WeakMap,ah=new WeakMap,D0=new WeakMap,B0={})}},wK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=dfe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),hfe(r,i,n,"aria-hidden")):function(){return null}},W1="Dialog",[xK,SK]=js(W1),[pfe,ko]=xK(W1),TK=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:s=!0}=t,o=k.useRef(null),l=k.useRef(null),[c,u]=Pu({prop:r,defaultProp:i??!1,onChange:a,caller:W1});return g.jsx(pfe,{scope:e,triggerRef:o,contentRef:l,contentId:uc(),titleId:uc(),descriptionId:uc(),open:c,onOpenChange:u,onOpenToggle:k.useCallback(()=>u(f=>!f),[u]),modal:s,children:n})};TK.displayName=W1;var EK="DialogTrigger",AK=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ko(EK,n),a=jt(e,i.triggerRef);return g.jsx(vt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":d$(i.open),...r,ref:a,onClick:lt(t.onClick,i.onOpenToggle)})});AK.displayName=EK;var c$="DialogPortal",[mfe,OK]=xK(c$,{forceMount:void 0}),CK=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,a=ko(c$,e);return g.jsx(mfe,{scope:e,forceMount:n,children:k.Children.map(r,s=>g.jsx(Co,{present:n||a.open,children:g.jsx(q1,{asChild:!0,container:i,children:s})}))})};CK.displayName=c$;var Lw="DialogOverlay",kK=k.forwardRef((t,e)=>{const n=OK(Lw,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=ko(Lw,t.__scopeDialog);return a.modal?g.jsx(Co,{present:r||a.open,children:g.jsx(yfe,{...i,ref:e})}):null});kK.displayName=Lw;var gfe=op("DialogOverlay.RemoveScroll"),yfe=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ko(Lw,n);return g.jsx(l$,{as:gfe,allowPinchZoom:!0,shards:[i.contentRef],children:g.jsx(vt.div,{"data-state":d$(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ef="DialogContent",NK=k.forwardRef((t,e)=>{const n=OK(ef,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=ko(ef,t.__scopeDialog);return g.jsx(Co,{present:r||a.open,children:a.modal?g.jsx(vfe,{...i,ref:e}):g.jsx(bfe,{...i,ref:e})})});NK.displayName=ef;var vfe=k.forwardRef((t,e)=>{const n=ko(ef,t.__scopeDialog),r=k.useRef(null),i=jt(e,n.contentRef,r);return k.useEffect(()=>{const a=r.current;if(a)return wK(a)},[]),g.jsx(IK,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:lt(t.onCloseAutoFocus,a=>{var s;a.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:lt(t.onPointerDownOutside,a=>{const s=a.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&a.preventDefault()}),onFocusOutside:lt(t.onFocusOutside,a=>a.preventDefault())})}),bfe=k.forwardRef((t,e)=>{const n=ko(ef,t.__scopeDialog),r=k.useRef(!1),i=k.useRef(!1);return g.jsx(IK,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var s,o;(s=t.onCloseAutoFocus)==null||s.call(t,a),a.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=a.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),IK=k.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...s}=t,o=ko(ef,n),l=k.useRef(null),c=jt(e,l);return fK(),g.jsxs(g.Fragment,{children:[g.jsx(o$,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:g.jsx(z1,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":d$(o.open),...s,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(wfe,{titleId:o.titleId}),g.jsx(Sfe,{contentRef:l,descriptionId:o.descriptionId})]})]})}),u$="DialogTitle",PK=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ko(u$,n);return g.jsx(vt.h2,{id:i.titleId,...r,ref:e})});PK.displayName=u$;var RK="DialogDescription",jK=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ko(RK,n);return g.jsx(vt.p,{id:i.descriptionId,...r,ref:e})});jK.displayName=RK;var $K="DialogClose",MK=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ko($K,n);return g.jsx(vt.button,{type:"button",...r,ref:e,onClick:lt(t.onClick,()=>i.onOpenChange(!1))})});MK.displayName=$K;function d$(t){return t?"open":"closed"}var LK="DialogTitleWarning",[_fe,DK]=Yce(LK,{contentName:ef,titleName:u$,docsSlug:"dialog"}),wfe=({titleId:t})=>{const e=DK(LK),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},xfe="DialogDescriptionWarning",Sfe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${DK(xfe).contentName}}.`;return k.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},BK=TK,FK=AK,UK=CK,f$=kK,h$=NK,p$=PK,m$=jK,g$=MK,zK="AlertDialog",[Tfe,nYe]=js(zK,[SK]),Nc=SK(),qK=t=>{const{__scopeAlertDialog:e,...n}=t,r=Nc(e);return g.jsx(BK,{...r,...n,modal:!0})};qK.displayName=zK;var Efe="AlertDialogTrigger",HK=k.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Nc(n);return g.jsx(FK,{...i,...r,ref:e})});HK.displayName=Efe;var Afe="AlertDialogPortal",WK=t=>{const{__scopeAlertDialog:e,...n}=t,r=Nc(e);return g.jsx(UK,{...r,...n})};WK.displayName=Afe;var Ofe="AlertDialogOverlay",VK=k.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Nc(n);return g.jsx(f$,{...i,...r,ref:e})});VK.displayName=Ofe;var Vh="AlertDialogContent",[Cfe,kfe]=Tfe(Vh),Nfe=jG("AlertDialogContent"),GK=k.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,a=Nc(n),s=k.useRef(null),o=jt(e,s),l=k.useRef(null);return g.jsx(_fe,{contentName:Vh,titleName:KK,docsSlug:"alert-dialog",children:g.jsx(Cfe,{scope:n,cancelRef:l,children:g.jsxs(h$,{role:"alertdialog",...a,...i,ref:o,onOpenAutoFocus:lt(i.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[g.jsx(Nfe,{children:r}),g.jsx(Pfe,{contentRef:s})]})})})});GK.displayName=Vh;var KK="AlertDialogTitle",ZK=k.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Nc(n);return g.jsx(p$,{...i,...r,ref:e})});ZK.displayName=KK;var XK="AlertDialogDescription",JK=k.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Nc(n);return g.jsx(m$,{...i,...r,ref:e})});JK.displayName=XK;var Ife="AlertDialogAction",YK=k.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Nc(n);return g.jsx(g$,{...i,...r,ref:e})});YK.displayName=Ife;var QK="AlertDialogCancel",eZ=k.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=kfe(QK,n),a=Nc(n),s=jt(e,i);return g.jsx(g$,{...a,...r,ref:s})});eZ.displayName=QK;var Pfe=({contentRef:t})=>{const e=`\`${Vh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Vh}\` by passing a \`${XK}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Vh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return k.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Rfe=qK,jfe=HK,$fe=WK,Mfe=VK,Lfe=GK,Dfe=YK,Bfe=eZ,Ffe=ZK,Ufe=JK,bA={exports:{}},_A={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v5;function zfe(){if(v5)return _A;v5=1;var t=Yv();function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(f,p){var m=p(),_=r({inst:{value:m,getSnapshot:p}}),y=_[0].inst,b=_[1];return a(function(){y.value=m,y.getSnapshot=p,l(y)&&b({inst:y})},[f,m,p]),i(function(){return l(y)&&b({inst:y}),f(function(){l(y)&&b({inst:y})})},[f]),s(m),m}function l(f){var p=f.getSnapshot;f=f.value;try{var m=p();return!n(f,m)}catch{return!0}}function c(f,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return _A.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,_A}var b5;function qfe(){return b5||(b5=1,bA.exports=zfe()),bA.exports}function y$(t){const e=k.useRef({value:t,previous:t});return k.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function v$(t){const[e,n]=k.useState(void 0);return si(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let s,o;if("borderBoxSize"in a){const l=a.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,o=c.blockSize}else s=t.offsetWidth,o=t.offsetHeight;n({width:s,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const Hfe=["top","right","bottom","left"],Ru=Math.min,Da=Math.max,Dw=Math.round,F0=Math.floor,dl=t=>({x:t,y:t}),Wfe={left:"right",right:"left",bottom:"top",top:"bottom"},Vfe={start:"end",end:"start"};function VP(t,e,n){return Da(t,Ru(e,n))}function gc(t,e){return typeof t=="function"?t(e):t}function yc(t){return t.split("-")[0]}function sm(t){return t.split("-")[1]}function b$(t){return t==="x"?"y":"x"}function _$(t){return t==="y"?"height":"width"}const Gfe=new Set(["top","bottom"]);function al(t){return Gfe.has(yc(t))?"y":"x"}function w$(t){return b$(al(t))}function Kfe(t,e,n){n===void 0&&(n=!1);const r=sm(t),i=w$(t),a=_$(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=Bw(s)),[s,Bw(s)]}function Zfe(t){const e=Bw(t);return[GP(t),e,GP(e)]}function GP(t){return t.replace(/start|end/g,e=>Vfe[e])}const _5=["left","right"],w5=["right","left"],Xfe=["top","bottom"],Jfe=["bottom","top"];function Yfe(t,e,n){switch(t){case"top":case"bottom":return n?e?w5:_5:e?_5:w5;case"left":case"right":return e?Xfe:Jfe;default:return[]}}function Qfe(t,e,n,r){const i=sm(t);let a=Yfe(yc(t),n==="start",r);return i&&(a=a.map(s=>s+"-"+i),e&&(a=a.concat(a.map(GP)))),a}function Bw(t){return t.replace(/left|right|bottom|top/g,e=>Wfe[e])}function ehe(t){return{top:0,right:0,bottom:0,left:0,...t}}function tZ(t){return typeof t!="number"?ehe(t):{top:t,right:t,bottom:t,left:t}}function Fw(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function x5(t,e,n){let{reference:r,floating:i}=t;const a=al(e),s=w$(e),o=_$(s),l=yc(e),c=a==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[o]/2-i[o]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(sm(e)){case"start":m[s]-=p*(n&&c?-1:1);break;case"end":m[s]+=p*(n&&c?-1:1);break}return m}const the=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=n,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:f}=x5(c,r,l),p=r,m={},_=0;for(let y=0;y<o.length;y++){const{name:b,fn:x}=o[y],{x:w,y:T,data:A,reset:E}=await x({x:u,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:s,elements:{reference:t,floating:e}});u=w??u,f=T??f,m={...m,[b]:{...m[b],...A}},E&&_<=50&&(_++,typeof E=="object"&&(E.placement&&(p=E.placement),E.rects&&(c=E.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):E.rects),{x:u,y:f}=x5(c,p,l)),y=-1)}return{x:u,y:f,placement:p,strategy:i,middlewareData:m}};async function Dy(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:s,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=gc(e,t),_=tZ(m),b=o[p?f==="floating"?"reference":"floating":f],x=Fw(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),w=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),A=await(a.isElement==null?void 0:a.isElement(T))?await(a.getScale==null?void 0:a.getScale(T))||{x:1,y:1}:{x:1,y:1},E=Fw(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:w,offsetParent:T,strategy:l}):w);return{top:(x.top-E.top+_.top)/A.y,bottom:(E.bottom-x.bottom+_.bottom)/A.y,left:(x.left-E.left+_.left)/A.x,right:(E.right-x.right+_.right)/A.x}}const nhe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:s,elements:o,middlewareData:l}=e,{element:c,padding:u=0}=gc(t,e)||{};if(c==null)return{};const f=tZ(u),p={x:n,y:r},m=w$(i),_=_$(m),y=await s.getDimensions(c),b=m==="y",x=b?"top":"left",w=b?"bottom":"right",T=b?"clientHeight":"clientWidth",A=a.reference[_]+a.reference[m]-p[m]-a.floating[_],E=p[m]-a.reference[m],C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let R=C?C[T]:0;(!R||!await(s.isElement==null?void 0:s.isElement(C)))&&(R=o.floating[T]||a.floating[_]);const N=A/2-E/2,D=R/2-y[_]/2-1,Z=Ru(f[x],D),j=Ru(f[w],D),L=Z,B=R-y[_]-j,z=R/2-y[_]/2+N,W=VP(L,z,B),q=!l.arrow&&sm(i)!=null&&z!==W&&a.reference[_]/2-(z<L?Z:j)-y[_]/2<0,K=q?z<L?z-L:z-B:0;return{[m]:p[m]+K,data:{[m]:W,centerOffset:z-W-K,...q&&{alignmentOffset:K}},reset:q}}}),rhe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:y=!0,...b}=gc(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=yc(i),w=al(o),T=yc(o)===o,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=p||(T||!y?[Bw(o)]:Zfe(o)),C=_!=="none";!p&&C&&E.push(...Qfe(o,y,_,A));const R=[o,...E],N=await Dy(e,b),D=[];let Z=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&D.push(N[x]),f){const z=Kfe(i,s,A);D.push(N[z[0]],N[z[1]])}if(Z=[...Z,{placement:i,overflows:D}],!D.every(z=>z<=0)){var j,L;const z=(((j=a.flip)==null?void 0:j.index)||0)+1,W=R[z];if(W&&(!(f==="alignment"?w!==al(W):!1)||Z.every(V=>al(V.placement)===w?V.overflows[0]>0:!0)))return{data:{index:z,overflows:Z},reset:{placement:W}};let q=(L=Z.filter(K=>K.overflows[0]<=0).sort((K,V)=>K.overflows[1]-V.overflows[1])[0])==null?void 0:L.placement;if(!q)switch(m){case"bestFit":{var B;const K=(B=Z.filter(V=>{if(C){const J=al(V.placement);return J===w||J==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(J=>J>0).reduce((J,Q)=>J+Q,0)]).sort((V,J)=>V[1]-J[1])[0])==null?void 0:B[0];K&&(q=K);break}case"initialPlacement":q=o;break}if(i!==q)return{reset:{placement:q}}}return{}}}};function S5(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function T5(t){return Hfe.some(e=>t[e]>=0)}const ihe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=gc(t,e);switch(r){case"referenceHidden":{const a=await Dy(e,{...i,elementContext:"reference"}),s=S5(a,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:T5(s)}}}case"escaped":{const a=await Dy(e,{...i,altBoundary:!0}),s=S5(a,n.floating);return{data:{escapedOffsets:s,escaped:T5(s)}}}default:return{}}}}},nZ=new Set(["left","top"]);async function ahe(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=yc(n),o=sm(n),l=al(n)==="y",c=nZ.has(s)?-1:1,u=a&&l?-1:1,f=gc(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:_}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof _=="number"&&(m=o==="end"?_*-1:_),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const she=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:s,middlewareData:o}=e,l=await ahe(e,t);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:s}}}}},ohe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:b=>{let{x,y:w}=b;return{x,y:w}}},...l}=gc(t,e),c={x:n,y:r},u=await Dy(e,l),f=al(yc(i)),p=b$(f);let m=c[p],_=c[f];if(a){const b=p==="y"?"top":"left",x=p==="y"?"bottom":"right",w=m+u[b],T=m-u[x];m=VP(w,m,T)}if(s){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=_+u[b],T=_-u[x];_=VP(w,_,T)}const y=o.fn({...e,[p]:m,[f]:_});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:a,[f]:s}}}}}},lhe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:s}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=gc(t,e),u={x:n,y:r},f=al(i),p=b$(f);let m=u[p],_=u[f];const y=gc(o,e),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const T=p==="y"?"height":"width",A=a.reference[p]-a.floating[T]+b.mainAxis,E=a.reference[p]+a.reference[T]-b.mainAxis;m<A?m=A:m>E&&(m=E)}if(c){var x,w;const T=p==="y"?"width":"height",A=nZ.has(yc(i)),E=a.reference[f]-a.floating[T]+(A&&((x=s.offset)==null?void 0:x[f])||0)+(A?0:b.crossAxis),C=a.reference[f]+a.reference[T]+(A?0:((w=s.offset)==null?void 0:w[f])||0)-(A?b.crossAxis:0);_<E?_=E:_>C&&(_=C)}return{[p]:m,[f]:_}}}},che=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:a,platform:s,elements:o}=e,{apply:l=()=>{},...c}=gc(t,e),u=await Dy(e,c),f=yc(i),p=sm(i),m=al(i)==="y",{width:_,height:y}=a.floating;let b,x;f==="top"||f==="bottom"?(b=f,x=p===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(x=f,b=p==="end"?"top":"bottom");const w=y-u.top-u.bottom,T=_-u.left-u.right,A=Ru(y-u[b],w),E=Ru(_-u[x],T),C=!e.middlewareData.shift;let R=A,N=E;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=w),C&&!p){const Z=Da(u.left,0),j=Da(u.right,0),L=Da(u.top,0),B=Da(u.bottom,0);m?N=_-2*(Z!==0||j!==0?Z+j:Da(u.left,u.right)):R=y-2*(L!==0||B!==0?L+B:Da(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:R});const D=await s.getDimensions(o.floating);return _!==D.width||y!==D.height?{reset:{rects:!0}}:{}}}};function V1(){return typeof window<"u"}function om(t){return rZ(t)?(t.nodeName||"").toLowerCase():"#document"}function Va(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ol(t){var e;return(e=(rZ(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function rZ(t){return V1()?t instanceof Node||t instanceof Va(t).Node:!1}function So(t){return V1()?t instanceof Element||t instanceof Va(t).Element:!1}function vl(t){return V1()?t instanceof HTMLElement||t instanceof Va(t).HTMLElement:!1}function E5(t){return!V1()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Va(t).ShadowRoot}const uhe=new Set(["inline","contents"]);function nb(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=To(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!uhe.has(i)}const dhe=new Set(["table","td","th"]);function fhe(t){return dhe.has(om(t))}const hhe=[":popover-open",":modal"];function G1(t){return hhe.some(e=>{try{return t.matches(e)}catch{return!1}})}const phe=["transform","translate","scale","rotate","perspective"],mhe=["transform","translate","scale","rotate","perspective","filter"],ghe=["paint","layout","strict","content"];function x$(t){const e=S$(),n=So(t)?To(t):t;return phe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||mhe.some(r=>(n.willChange||"").includes(r))||ghe.some(r=>(n.contain||"").includes(r))}function yhe(t){let e=ju(t);for(;vl(e)&&!up(e);){if(x$(e))return e;if(G1(e))return null;e=ju(e)}return null}function S$(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vhe=new Set(["html","body","#document"]);function up(t){return vhe.has(om(t))}function To(t){return Va(t).getComputedStyle(t)}function K1(t){return So(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ju(t){if(om(t)==="html")return t;const e=t.assignedSlot||t.parentNode||E5(t)&&t.host||Ol(t);return E5(e)?e.host:e}function iZ(t){const e=ju(t);return up(e)?t.ownerDocument?t.ownerDocument.body:t.body:vl(e)&&nb(e)?e:iZ(e)}function By(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=iZ(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),s=Va(i);if(a){const o=KP(s);return e.concat(s,s.visualViewport||[],nb(i)?i:[],o&&n?By(o):[])}return e.concat(i,By(i,[],n))}function KP(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function aZ(t){const e=To(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=vl(t),a=i?t.offsetWidth:n,s=i?t.offsetHeight:r,o=Dw(n)!==a||Dw(r)!==s;return o&&(n=a,r=s),{width:n,height:r,$:o}}function T$(t){return So(t)?t:t.contextElement}function Gh(t){const e=T$(t);if(!vl(e))return dl(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=aZ(e);let s=(a?Dw(n.width):n.width)/r,o=(a?Dw(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const bhe=dl(0);function sZ(t){const e=Va(t);return!S$()||!e.visualViewport?bhe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _he(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Va(t)?!1:e}function tf(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=T$(t);let s=dl(1);e&&(r?So(r)&&(s=Gh(r)):s=Gh(t));const o=_he(a,n,r)?sZ(a):dl(0);let l=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,u=i.width/s.x,f=i.height/s.y;if(a){const p=Va(a),m=r&&So(r)?Va(r):r;let _=p,y=KP(_);for(;y&&r&&m!==_;){const b=Gh(y),x=y.getBoundingClientRect(),w=To(y),T=x.left+(y.clientLeft+parseFloat(w.paddingLeft))*b.x,A=x.top+(y.clientTop+parseFloat(w.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,f*=b.y,l+=T,c+=A,_=Va(y),y=KP(_)}}return Fw({width:u,height:f,x:l,y:c})}function E$(t,e){const n=K1(t).scrollLeft;return e?e.left+n:tf(Ol(t)).left+n}function oZ(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:E$(t,r)),a=r.top+e.scrollTop;return{x:i,y:a}}function whe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",s=Ol(r),o=e?G1(e.floating):!1;if(r===s||o&&a)return n;let l={scrollLeft:0,scrollTop:0},c=dl(1);const u=dl(0),f=vl(r);if((f||!f&&!a)&&((om(r)!=="body"||nb(s))&&(l=K1(r)),vl(r))){const m=tf(r);c=Gh(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const p=s&&!f&&!a?oZ(s,l,!0):dl(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}}function xhe(t){return Array.from(t.getClientRects())}function She(t){const e=Ol(t),n=K1(t),r=t.ownerDocument.body,i=Da(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Da(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+E$(t);const o=-n.scrollTop;return To(r).direction==="rtl"&&(s+=Da(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:s,y:o}}function The(t,e){const n=Va(t),r=Ol(t),i=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const c=S$();(!c||c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o,y:l}}const Ehe=new Set(["absolute","fixed"]);function Ahe(t,e){const n=tf(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=vl(t)?Gh(t):dl(1),s=t.clientWidth*a.x,o=t.clientHeight*a.y,l=i*a.x,c=r*a.y;return{width:s,height:o,x:l,y:c}}function A5(t,e,n){let r;if(e==="viewport")r=The(t,n);else if(e==="document")r=She(Ol(t));else if(So(e))r=Ahe(e,n);else{const i=sZ(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Fw(r)}function lZ(t,e){const n=ju(t);return n===e||!So(n)||up(n)?!1:To(n).position==="fixed"||lZ(n,e)}function Ohe(t,e){const n=e.get(t);if(n)return n;let r=By(t,[],!1).filter(o=>So(o)&&om(o)!=="body"),i=null;const a=To(t).position==="fixed";let s=a?ju(t):t;for(;So(s)&&!up(s);){const o=To(s),l=x$(s);!l&&o.position==="fixed"&&(i=null),(a?!l&&!i:!l&&o.position==="static"&&!!i&&Ehe.has(i.position)||nb(s)&&!l&&lZ(t,s))?r=r.filter(u=>u!==s):i=o,s=ju(s)}return e.set(t,r),r}function Che(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?G1(e)?[]:Ohe(e,this._c):[].concat(n),r],o=s[0],l=s.reduce((c,u)=>{const f=A5(e,u,i);return c.top=Da(f.top,c.top),c.right=Ru(f.right,c.right),c.bottom=Ru(f.bottom,c.bottom),c.left=Da(f.left,c.left),c},A5(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function khe(t){const{width:e,height:n}=aZ(t);return{width:e,height:n}}function Nhe(t,e,n){const r=vl(e),i=Ol(e),a=n==="fixed",s=tf(t,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=dl(0);function c(){l.x=E$(i)}if(r||!r&&!a)if((om(e)!=="body"||nb(i))&&(o=K1(e)),r){const m=tf(e,!0,a,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&c();a&&!r&&i&&c();const u=i&&!r&&!a?oZ(i,o):dl(0),f=s.left+o.scrollLeft-l.x-u.x,p=s.top+o.scrollTop-l.y-u.y;return{x:f,y:p,width:s.width,height:s.height}}function wA(t){return To(t).position==="static"}function O5(t,e){if(!vl(t)||To(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ol(t)===n&&(n=n.ownerDocument.body),n}function cZ(t,e){const n=Va(t);if(G1(t))return n;if(!vl(t)){let i=ju(t);for(;i&&!up(i);){if(So(i)&&!wA(i))return i;i=ju(i)}return n}let r=O5(t,e);for(;r&&fhe(r)&&wA(r);)r=O5(r,e);return r&&up(r)&&wA(r)&&!x$(r)?n:r||yhe(t)||n}const Ihe=async function(t){const e=this.getOffsetParent||cZ,n=this.getDimensions,r=await n(t.floating);return{reference:Nhe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Phe(t){return To(t).direction==="rtl"}const Rhe={convertOffsetParentRelativeRectToViewportRelativeRect:whe,getDocumentElement:Ol,getClippingRect:Che,getOffsetParent:cZ,getElementRects:Ihe,getClientRects:xhe,getDimensions:khe,getScale:Gh,isElement:So,isRTL:Phe};function uZ(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function jhe(t,e){let n=null,r;const i=Ol(t);function a(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const c=t.getBoundingClientRect(),{left:u,top:f,width:p,height:m}=c;if(o||e(),!p||!m)return;const _=F0(f),y=F0(i.clientWidth-(u+p)),b=F0(i.clientHeight-(f+m)),x=F0(u),T={rootMargin:-_+"px "+-y+"px "+-b+"px "+-x+"px",threshold:Da(0,Ru(1,l))||1};let A=!0;function E(C){const R=C[0].intersectionRatio;if(R!==l){if(!A)return s();R?s(!1,R):r=setTimeout(()=>{s(!1,1e-7)},1e3)}R===1&&!uZ(c,t.getBoundingClientRect())&&s(),A=!1}try{n=new IntersectionObserver(E,{...T,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,T)}n.observe(t)}return s(!0),a}function $he(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=T$(t),u=i||a?[...c?By(c):[],...By(e)]:[];u.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const f=c&&o?jhe(c,n):null;let p=-1,m=null;s&&(m=new ResizeObserver(x=>{let[w]=x;w&&w.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var T;(T=m)==null||T.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let _,y=l?tf(t):null;l&&b();function b(){const x=tf(t);y&&!uZ(y,x)&&n(),y=x,_=requestAnimationFrame(b)}return n(),()=>{var x;u.forEach(w=>{i&&w.removeEventListener("scroll",n),a&&w.removeEventListener("resize",n)}),f==null||f(),(x=m)==null||x.disconnect(),m=null,l&&cancelAnimationFrame(_)}}const Mhe=she,Lhe=ohe,Dhe=rhe,Bhe=che,Fhe=ihe,C5=nhe,Uhe=lhe,zhe=(t,e,n)=>{const r=new Map,i={platform:Rhe,...n},a={...i.platform,_c:r};return the(t,e,{...i,platform:a})};var qhe=typeof document<"u",Hhe=function(){},dw=qhe?k.useLayoutEffect:Hhe;function Uw(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Uw(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!Uw(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function dZ(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function k5(t,e){const n=dZ(t);return Math.round(e*n)/n}function xA(t){const e=k.useRef(t);return dw(()=>{e.current=t}),e}function Whe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[u,f]=k.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=k.useState(r);Uw(p,r)||m(r);const[_,y]=k.useState(null),[b,x]=k.useState(null),w=k.useCallback(V=>{V!==C.current&&(C.current=V,y(V))},[]),T=k.useCallback(V=>{V!==R.current&&(R.current=V,x(V))},[]),A=a||_,E=s||b,C=k.useRef(null),R=k.useRef(null),N=k.useRef(u),D=l!=null,Z=xA(l),j=xA(i),L=xA(c),B=k.useCallback(()=>{if(!C.current||!R.current)return;const V={placement:e,strategy:n,middleware:p};j.current&&(V.platform=j.current),zhe(C.current,R.current,V).then(J=>{const Q={...J,isPositioned:L.current!==!1};z.current&&!Uw(N.current,Q)&&(N.current=Q,Qv.flushSync(()=>{f(Q)}))})},[p,e,n,j,L]);dw(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[c]);const z=k.useRef(!1);dw(()=>(z.current=!0,()=>{z.current=!1}),[]),dw(()=>{if(A&&(C.current=A),E&&(R.current=E),A&&E){if(Z.current)return Z.current(A,E,B);B()}},[A,E,B,Z,D]);const W=k.useMemo(()=>({reference:C,floating:R,setReference:w,setFloating:T}),[w,T]),q=k.useMemo(()=>({reference:A,floating:E}),[A,E]),K=k.useMemo(()=>{const V={position:n,left:0,top:0};if(!q.floating)return V;const J=k5(q.floating,u.x),Q=k5(q.floating,u.y);return o?{...V,transform:"translate("+J+"px, "+Q+"px)",...dZ(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:J,top:Q}},[n,o,q.floating,u.x,u.y]);return k.useMemo(()=>({...u,update:B,refs:W,elements:q,floatingStyles:K}),[u,B,W,q,K])}const Vhe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?C5({element:r.current,padding:i}).fn(n):{}:r?C5({element:r,padding:i}).fn(n):{}}}},Ghe=(t,e)=>({...Mhe(t),options:[t,e]}),Khe=(t,e)=>({...Lhe(t),options:[t,e]}),Zhe=(t,e)=>({...Uhe(t),options:[t,e]}),Xhe=(t,e)=>({...Dhe(t),options:[t,e]}),Jhe=(t,e)=>({...Bhe(t),options:[t,e]}),Yhe=(t,e)=>({...Fhe(t),options:[t,e]}),Qhe=(t,e)=>({...Vhe(t),options:[t,e]});var epe="Arrow",fZ=k.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...a}=t;return g.jsx(vt.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});fZ.displayName=epe;var tpe=fZ,A$="Popper",[hZ,Z1]=js(A$),[npe,pZ]=hZ(A$),mZ=t=>{const{__scopePopper:e,children:n}=t,[r,i]=k.useState(null);return g.jsx(npe,{scope:e,anchor:r,onAnchorChange:i,children:n})};mZ.displayName=A$;var gZ="PopperAnchor",yZ=k.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=pZ(gZ,n),s=k.useRef(null),o=jt(e,s),l=k.useRef(null);return k.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||s.current,c!==l.current&&a.onAnchorChange(l.current)}),r?null:g.jsx(vt.div,{...i,ref:o})});yZ.displayName=gZ;var O$="PopperContent",[rpe,ipe]=hZ(O$),vZ=k.forwardRef((t,e)=>{var $,ne,X,pe,ye,le;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:_,...y}=t,b=pZ(O$,n),[x,w]=k.useState(null),T=jt(e,Ne=>w(Ne)),[A,E]=k.useState(null),C=v$(A),R=(C==null?void 0:C.width)??0,N=(C==null?void 0:C.height)??0,D=r+(a!=="center"?"-"+a:""),Z=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},j=Array.isArray(c)?c:[c],L=j.length>0,B={padding:Z,boundary:j.filter(spe),altBoundary:L},{refs:z,floatingStyles:W,placement:q,isPositioned:K,middlewareData:V}=Whe({strategy:"fixed",placement:D,whileElementsMounted:(...Ne)=>$he(...Ne,{animationFrame:m==="always"}),elements:{reference:b.anchor},middleware:[Ghe({mainAxis:i+N,alignmentAxis:s}),l&&Khe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Zhe():void 0,...B}),l&&Xhe({...B}),Jhe({...B,apply:({elements:Ne,rects:je,availableWidth:Xe,availableHeight:st})=>{const{width:kt,height:vn}=je.reference,gn=Ne.floating.style;gn.setProperty("--radix-popper-available-width",`${Xe}px`),gn.setProperty("--radix-popper-available-height",`${st}px`),gn.setProperty("--radix-popper-anchor-width",`${kt}px`),gn.setProperty("--radix-popper-anchor-height",`${vn}px`)}}),A&&Qhe({element:A,padding:o}),ope({arrowWidth:R,arrowHeight:N}),p&&Yhe({strategy:"referenceHidden",...B})]}),[J,Q]=wZ(q),M=Li(_);si(()=>{K&&(M==null||M())},[K,M]);const Y=($=V.arrow)==null?void 0:$.x,se=(ne=V.arrow)==null?void 0:ne.y,ge=((X=V.arrow)==null?void 0:X.centerOffset)!==0,[ue,H]=k.useState();return si(()=>{x&&H(window.getComputedStyle(x).zIndex)},[x]),g.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:K?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ue,"--radix-popper-transform-origin":[(pe=V.transformOrigin)==null?void 0:pe.x,(ye=V.transformOrigin)==null?void 0:ye.y].join(" "),...((le=V.hide)==null?void 0:le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:g.jsx(rpe,{scope:n,placedSide:J,onArrowChange:E,arrowX:Y,arrowY:se,shouldHideArrow:ge,children:g.jsx(vt.div,{"data-side":J,"data-align":Q,...y,ref:T,style:{...y.style,animation:K?void 0:"none"}})})})});vZ.displayName=O$;var bZ="PopperArrow",ape={top:"bottom",right:"left",bottom:"top",left:"right"},_Z=k.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,a=ipe(bZ,r),s=ape[a.placedSide];return g.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:g.jsx(tpe,{...i,ref:n,style:{...i.style,display:"block"}})})});_Z.displayName=bZ;function spe(t){return t!==null}var ope=t=>({name:"transformOrigin",options:t,fn(e){var b,x,w;const{placement:n,rects:r,middlewareData:i}=e,s=((b=i.arrow)==null?void 0:b.centerOffset)!==0,o=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,u]=wZ(n),f={start:"0%",center:"50%",end:"100%"}[u],p=(((x=i.arrow)==null?void 0:x.x)??0)+o/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let _="",y="";return c==="bottom"?(_=s?f:`${p}px`,y=`${-l}px`):c==="top"?(_=s?f:`${p}px`,y=`${r.floating.height+l}px`):c==="right"?(_=`${-l}px`,y=s?f:`${m}px`):c==="left"&&(_=`${r.floating.width+l}px`,y=s?f:`${m}px`),{data:{x:_,y}}}});function wZ(t){const[e,n="center"]=t.split("-");return[e,n]}var xZ=mZ,SZ=yZ,TZ=vZ,EZ=_Z,lpe="Label",AZ=k.forwardRef((t,e)=>g.jsx(vt.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));AZ.displayName=lpe;var OZ=AZ;function Fy(t,[e,n]){return Math.min(n,Math.max(e,t))}var C$="Progress",k$=100,[cpe,rYe]=js(C$),[upe,dpe]=cpe(C$),CZ=k.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=fpe,...s}=t;(i||i===0)&&!N5(i)&&console.error(hpe(`${i}`,"Progress"));const o=N5(i)?i:k$;r!==null&&!I5(r,o)&&console.error(ppe(`${r}`,"Progress"));const l=I5(r,o)?r:null,c=zw(l)?a(l,o):void 0;return g.jsx(upe,{scope:n,value:l,max:o,children:g.jsx(vt.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":zw(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":IZ(l,o),"data-value":l??void 0,"data-max":o,...s,ref:e})})});CZ.displayName=C$;var kZ="ProgressIndicator",NZ=k.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=dpe(kZ,n);return g.jsx(vt.div,{"data-state":IZ(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});NZ.displayName=kZ;function fpe(t,e){return`${Math.round(t/e*100)}%`}function IZ(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function zw(t){return typeof t=="number"}function N5(t){return zw(t)&&!isNaN(t)&&t>0}function I5(t,e){return zw(t)&&!isNaN(t)&&t<=e&&t>=0}function hpe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${k$}\`.`}function ppe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${k$} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var PZ=CZ,mpe=NZ;function gpe(t,e){return k.useReducer((n,r)=>e[n][r]??n,t)}var N$="ScrollArea",[RZ,iYe]=js(N$),[ype,$s]=RZ(N$),jZ=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...s}=t,[o,l]=k.useState(null),[c,u]=k.useState(null),[f,p]=k.useState(null),[m,_]=k.useState(null),[y,b]=k.useState(null),[x,w]=k.useState(0),[T,A]=k.useState(0),[E,C]=k.useState(!1),[R,N]=k.useState(!1),D=jt(e,j=>l(j)),Z=eb(i);return g.jsx(ype,{scope:n,type:r,dir:Z,scrollHideDelay:a,scrollArea:o,viewport:c,onViewportChange:u,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:_,scrollbarXEnabled:E,onScrollbarXEnabledChange:C,scrollbarY:y,onScrollbarYChange:b,scrollbarYEnabled:R,onScrollbarYEnabledChange:N,onCornerWidthChange:w,onCornerHeightChange:A,children:g.jsx(vt.div,{dir:Z,...s,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":T+"px",...t.style}})})});jZ.displayName=N$;var $Z="ScrollAreaViewport",MZ=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=t,s=$s($Z,n),o=k.useRef(null),l=jt(e,o,s.onViewportChange);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),g.jsx(vt.div,{"data-radix-scroll-area-viewport":"",...a,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t.style},children:g.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});MZ.displayName=$Z;var Cl="ScrollAreaScrollbar",I$=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=$s(Cl,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:s}=i,o=t.orientation==="horizontal";return k.useEffect(()=>(o?a(!0):s(!0),()=>{o?a(!1):s(!1)}),[o,a,s]),i.type==="hover"?g.jsx(vpe,{...r,ref:e,forceMount:n}):i.type==="scroll"?g.jsx(bpe,{...r,ref:e,forceMount:n}):i.type==="auto"?g.jsx(LZ,{...r,ref:e,forceMount:n}):i.type==="always"?g.jsx(P$,{...r,ref:e}):null});I$.displayName=Cl;var vpe=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=$s(Cl,t.__scopeScrollArea),[a,s]=k.useState(!1);return k.useEffect(()=>{const o=i.scrollArea;let l=0;if(o){const c=()=>{window.clearTimeout(l),s(!0)},u=()=>{l=window.setTimeout(()=>s(!1),i.scrollHideDelay)};return o.addEventListener("pointerenter",c),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",c),o.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),g.jsx(Co,{present:n||a,children:g.jsx(LZ,{"data-state":a?"visible":"hidden",...r,ref:e})})}),bpe=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=$s(Cl,t.__scopeScrollArea),a=t.orientation==="horizontal",s=J1(()=>l("SCROLL_END"),100),[o,l]=gpe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return k.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,i.scrollHideDelay,l]),k.useEffect(()=>{const c=i.viewport,u=a?"scrollLeft":"scrollTop";if(c){let f=c[u];const p=()=>{const m=c[u];f!==m&&(l("SCROLL"),s()),f=m};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[i.viewport,a,l,s]),g.jsx(Co,{present:n||o!=="hidden",children:g.jsx(P$,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:lt(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:lt(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),LZ=k.forwardRef((t,e)=>{const n=$s(Cl,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,s]=k.useState(!1),o=t.orientation==="horizontal",l=J1(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?c:u)}},10);return dp(n.viewport,l),dp(n.content,l),g.jsx(Co,{present:r||a,children:g.jsx(P$,{"data-state":a?"visible":"hidden",...i,ref:e})})}),P$=k.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=$s(Cl,t.__scopeScrollArea),a=k.useRef(null),s=k.useRef(0),[o,l]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=zZ(o.viewport,o.content),u={...r,sizes:o,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:p=>s.current=p};function f(p,m){return Epe(p,s.current,o,m)}return n==="horizontal"?g.jsx(_pe,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollLeft,m=P5(p,o,i.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=f(p,i.dir))}}):n==="vertical"?g.jsx(wpe,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollTop,m=P5(p,o);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=f(p))}}):null}),_pe=k.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=$s(Cl,t.__scopeScrollArea),[s,o]=k.useState(),l=k.useRef(null),c=jt(e,l,a.onScrollbarXChange);return k.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),g.jsx(BZ,{"data-orientation":"horizontal",...i,ref:c,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":X1(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(a.viewport){const p=a.viewport.scrollLeft+u.deltaX;t.onWheelScroll(p),HZ(p,f)&&u.preventDefault()}},onResize:()=>{l.current&&a.viewport&&s&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Hw(s.paddingLeft),paddingEnd:Hw(s.paddingRight)}})}})}),wpe=k.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=$s(Cl,t.__scopeScrollArea),[s,o]=k.useState(),l=k.useRef(null),c=jt(e,l,a.onScrollbarYChange);return k.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),g.jsx(BZ,{"data-orientation":"vertical",...i,ref:c,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":X1(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(a.viewport){const p=a.viewport.scrollTop+u.deltaY;t.onWheelScroll(p),HZ(p,f)&&u.preventDefault()}},onResize:()=>{l.current&&a.viewport&&s&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Hw(s.paddingTop),paddingEnd:Hw(s.paddingBottom)}})}})}),[xpe,DZ]=RZ(Cl),BZ=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:f,...p}=t,m=$s(Cl,n),[_,y]=k.useState(null),b=jt(e,D=>y(D)),x=k.useRef(null),w=k.useRef(""),T=m.viewport,A=r.content-r.viewport,E=Li(u),C=Li(l),R=J1(f,10);function N(D){if(x.current){const Z=D.clientX-x.current.left,j=D.clientY-x.current.top;c({x:Z,y:j})}}return k.useEffect(()=>{const D=Z=>{const j=Z.target;(_==null?void 0:_.contains(j))&&E(Z,A)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[T,_,A,E]),k.useEffect(C,[r,C]),dp(_,R),dp(m.content,R),g.jsx(xpe,{scope:n,scrollbar:_,hasThumb:i,onThumbChange:Li(a),onThumbPointerUp:Li(s),onThumbPositionChange:C,onThumbPointerDown:Li(o),children:g.jsx(vt.div,{...p,ref:b,style:{position:"absolute",...p.style},onPointerDown:lt(t.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),x.current=_.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),N(D))}),onPointerMove:lt(t.onPointerMove,N),onPointerUp:lt(t.onPointerUp,D=>{const Z=D.target;Z.hasPointerCapture(D.pointerId)&&Z.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})})})}),qw="ScrollAreaThumb",FZ=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=DZ(qw,t.__scopeScrollArea);return g.jsx(Co,{present:n||i.hasThumb,children:g.jsx(Spe,{ref:e,...r})})}),Spe=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,a=$s(qw,n),s=DZ(qw,n),{onThumbPositionChange:o}=s,l=jt(e,f=>s.onThumbChange(f)),c=k.useRef(void 0),u=J1(()=>{c.current&&(c.current(),c.current=void 0)},100);return k.useEffect(()=>{const f=a.viewport;if(f){const p=()=>{if(u(),!c.current){const m=Ape(f,o);c.current=m,o()}};return o(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[a.viewport,u,o]),g.jsx(vt.div,{"data-state":s.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:lt(t.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),_=f.clientX-m.left,y=f.clientY-m.top;s.onThumbPointerDown({x:_,y})}),onPointerUp:lt(t.onPointerUp,s.onThumbPointerUp)})});FZ.displayName=qw;var R$="ScrollAreaCorner",UZ=k.forwardRef((t,e)=>{const n=$s(R$,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?g.jsx(Tpe,{...t,ref:e}):null});UZ.displayName=R$;var Tpe=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=$s(R$,n),[a,s]=k.useState(0),[o,l]=k.useState(0),c=!!(a&&o);return dp(i.scrollbarX,()=>{var f;const u=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(u),l(u)}),dp(i.scrollbarY,()=>{var f;const u=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(u),s(u)}),c?g.jsx(vt.div,{...r,ref:e,style:{width:a,height:o,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Hw(t){return t?parseInt(t,10):0}function zZ(t,e){const n=t/e;return isNaN(n)?0:n}function X1(t){const e=zZ(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Epe(t,e,n,r="ltr"){const i=X1(n),a=i/2,s=e||a,o=i-s,l=n.scrollbar.paddingStart+s,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,f=r==="ltr"?[0,u]:[u*-1,0];return qZ([l,c],f)(t)}function P5(t,e,n="ltr"){const r=X1(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,s=e.content-e.viewport,o=a-r,l=n==="ltr"?[0,s]:[s*-1,0],c=Fy(t,l);return qZ([0,s],[0,o])(c)}function qZ(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function HZ(t,e){return t>0&&t<e}var Ape=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function i(){const a={left:t.scrollLeft,top:t.scrollTop},s=n.left!==a.left,o=n.top!==a.top;(s||o)&&e(),n=a,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)};function J1(t,e){const n=Li(t),r=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),k.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function dp(t,e){const n=Li(e);si(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var WZ=jZ,Ope=MZ,Cpe=UZ,kpe=[" ","Enter","ArrowUp","ArrowDown"],Npe=[" ","Enter"],nf="Select",[Y1,Q1,Ipe]=r$(nf),[lm,aYe]=js(nf,[Ipe,Z1]),eS=Z1(),[Ppe,Hu]=lm(nf),[Rpe,jpe]=lm(nf),VZ=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:s,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:p,required:m,form:_}=t,y=eS(e),[b,x]=k.useState(null),[w,T]=k.useState(null),[A,E]=k.useState(!1),C=eb(c),[R,N]=Pu({prop:r,defaultProp:i??!1,onChange:a,caller:nf}),[D,Z]=Pu({prop:s,defaultProp:o,onChange:l,caller:nf}),j=k.useRef(null),L=b?_||!!b.closest("form"):!0,[B,z]=k.useState(new Set),W=Array.from(B).map(q=>q.props.value).join(";");return g.jsx(xZ,{...y,children:g.jsxs(Ppe,{required:m,scope:e,trigger:b,onTriggerChange:x,valueNode:w,onValueNodeChange:T,valueNodeHasChildren:A,onValueNodeHasChildrenChange:E,contentId:uc(),value:D,onValueChange:Z,open:R,onOpenChange:N,dir:C,triggerPointerDownPosRef:j,disabled:p,children:[g.jsx(Y1.Provider,{scope:e,children:g.jsx(Rpe,{scope:t.__scopeSelect,onNativeOptionAdd:k.useCallback(q=>{z(K=>new Set(K).add(q))},[]),onNativeOptionRemove:k.useCallback(q=>{z(K=>{const V=new Set(K);return V.delete(q),V})},[]),children:n})}),L?g.jsxs(gX,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:f,value:D,onChange:q=>Z(q.target.value),disabled:p,form:_,children:[D===void 0?g.jsx("option",{value:""}):null,Array.from(B)]},W):null]})})};VZ.displayName=nf;var GZ="SelectTrigger",KZ=k.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=eS(n),s=Hu(GZ,n),o=s.disabled||r,l=jt(e,s.onTriggerChange),c=Q1(n),u=k.useRef("touch"),[f,p,m]=vX(y=>{const b=c().filter(T=>!T.disabled),x=b.find(T=>T.value===s.value),w=bX(b,y,x);w!==void 0&&s.onValueChange(w.value)}),_=y=>{o||(s.onOpenChange(!0),m()),y&&(s.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return g.jsx(SZ,{asChild:!0,...a,children:g.jsx(vt.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":yX(s.value)?"":void 0,...i,ref:l,onClick:lt(i.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&_(y)}),onPointerDown:lt(i.onPointerDown,y=>{u.current=y.pointerType;const b=y.target;b.hasPointerCapture(y.pointerId)&&b.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(_(y),y.preventDefault())}),onKeyDown:lt(i.onKeyDown,y=>{const b=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(b&&y.key===" ")&&kpe.includes(y.key)&&(_(),y.preventDefault())})})})});KZ.displayName=GZ;var ZZ="SelectValue",XZ=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:s="",...o}=t,l=Hu(ZZ,n),{onValueNodeHasChildrenChange:c}=l,u=a!==void 0,f=jt(e,l.onValueNodeChange);return si(()=>{c(u)},[c,u]),g.jsx(vt.span,{...o,ref:f,style:{pointerEvents:"none"},children:yX(l.value)?g.jsx(g.Fragment,{children:s}):a})});XZ.displayName=ZZ;var $pe="SelectIcon",JZ=k.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return g.jsx(vt.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});JZ.displayName=$pe;var Mpe="SelectPortal",YZ=t=>g.jsx(q1,{asChild:!0,...t});YZ.displayName=Mpe;var rf="SelectContent",QZ=k.forwardRef((t,e)=>{const n=Hu(rf,t.__scopeSelect),[r,i]=k.useState();if(si(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?Qv.createPortal(g.jsx(eX,{scope:t.__scopeSelect,children:g.jsx(Y1.Slot,{scope:t.__scopeSelect,children:g.jsx("div",{children:t.children})})}),a):null}return g.jsx(tX,{...t,ref:e})});QZ.displayName=rf;var io=10,[eX,Wu]=lm(rf),Lpe="SelectContentImpl",Dpe=op("SelectContent.RemoveScroll"),tX=k.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:s,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:_,hideWhenDetached:y,avoidCollisions:b,...x}=t,w=Hu(rf,n),[T,A]=k.useState(null),[E,C]=k.useState(null),R=jt(e,$=>A($)),[N,D]=k.useState(null),[Z,j]=k.useState(null),L=Q1(n),[B,z]=k.useState(!1),W=k.useRef(!1);k.useEffect(()=>{if(T)return wK(T)},[T]),fK();const q=k.useCallback($=>{const[ne,...X]=L().map(le=>le.ref.current),[pe]=X.slice(-1),ye=document.activeElement;for(const le of $)if(le===ye||(le==null||le.scrollIntoView({block:"nearest"}),le===ne&&E&&(E.scrollTop=0),le===pe&&E&&(E.scrollTop=E.scrollHeight),le==null||le.focus(),document.activeElement!==ye))return},[L,E]),K=k.useCallback(()=>q([N,T]),[q,N,T]);k.useEffect(()=>{B&&K()},[B,K]);const{onOpenChange:V,triggerPointerDownPosRef:J}=w;k.useEffect(()=>{if(T){let $={x:0,y:0};const ne=pe=>{var ye,le;$={x:Math.abs(Math.round(pe.pageX)-(((ye=J.current)==null?void 0:ye.x)??0)),y:Math.abs(Math.round(pe.pageY)-(((le=J.current)==null?void 0:le.y)??0))}},X=pe=>{$.x<=10&&$.y<=10?pe.preventDefault():T.contains(pe.target)||V(!1),document.removeEventListener("pointermove",ne),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",X,{capture:!0})}}},[T,V,J]),k.useEffect(()=>{const $=()=>V(!1);return window.addEventListener("blur",$),window.addEventListener("resize",$),()=>{window.removeEventListener("blur",$),window.removeEventListener("resize",$)}},[V]);const[Q,M]=vX($=>{const ne=L().filter(ye=>!ye.disabled),X=ne.find(ye=>ye.ref.current===document.activeElement),pe=bX(ne,$,X);pe&&setTimeout(()=>pe.ref.current.focus())}),Y=k.useCallback(($,ne,X)=>{const pe=!W.current&&!X;(w.value!==void 0&&w.value===ne||pe)&&(D($),pe&&(W.current=!0))},[w.value]),se=k.useCallback(()=>T==null?void 0:T.focus(),[T]),ge=k.useCallback(($,ne,X)=>{const pe=!W.current&&!X;(w.value!==void 0&&w.value===ne||pe)&&j($)},[w.value]),ue=r==="popper"?ZP:nX,H=ue===ZP?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:_,hideWhenDetached:y,avoidCollisions:b}:{};return g.jsx(eX,{scope:n,content:T,viewport:E,onViewportChange:C,itemRefCallback:Y,selectedItem:N,onItemLeave:se,itemTextRefCallback:ge,focusSelectedItem:K,selectedItemText:Z,position:r,isPositioned:B,searchRef:Q,children:g.jsx(l$,{as:Dpe,allowPinchZoom:!0,children:g.jsx(o$,{asChild:!0,trapped:w.open,onMountAutoFocus:$=>{$.preventDefault()},onUnmountAutoFocus:lt(i,$=>{var ne;(ne=w.trigger)==null||ne.focus({preventScroll:!0}),$.preventDefault()}),children:g.jsx(z1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:$=>$.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:g.jsx(ue,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:$=>$.preventDefault(),...x,...H,onPlaced:()=>z(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:lt(x.onKeyDown,$=>{const ne=$.ctrlKey||$.altKey||$.metaKey;if($.key==="Tab"&&$.preventDefault(),!ne&&$.key.length===1&&M($.key),["ArrowUp","ArrowDown","Home","End"].includes($.key)){let pe=L().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes($.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes($.key)){const ye=$.target,le=pe.indexOf(ye);pe=pe.slice(le+1)}setTimeout(()=>q(pe)),$.preventDefault()}})})})})})})});tX.displayName=Lpe;var Bpe="SelectItemAlignedPosition",nX=k.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=Hu(rf,n),s=Wu(rf,n),[o,l]=k.useState(null),[c,u]=k.useState(null),f=jt(e,R=>u(R)),p=Q1(n),m=k.useRef(!1),_=k.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:x,focusSelectedItem:w}=s,T=k.useCallback(()=>{if(a.trigger&&a.valueNode&&o&&c&&y&&b&&x){const R=a.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),Z=x.getBoundingClientRect();if(a.dir!=="rtl"){const ye=Z.left-N.left,le=D.left-ye,Ne=R.left-le,je=R.width+Ne,Xe=Math.max(je,N.width),st=window.innerWidth-io,kt=Fy(le,[io,Math.max(io,st-Xe)]);o.style.minWidth=je+"px",o.style.left=kt+"px"}else{const ye=N.right-Z.right,le=window.innerWidth-D.right-ye,Ne=window.innerWidth-R.right-le,je=R.width+Ne,Xe=Math.max(je,N.width),st=window.innerWidth-io,kt=Fy(le,[io,Math.max(io,st-Xe)]);o.style.minWidth=je+"px",o.style.right=kt+"px"}const j=p(),L=window.innerHeight-io*2,B=y.scrollHeight,z=window.getComputedStyle(c),W=parseInt(z.borderTopWidth,10),q=parseInt(z.paddingTop,10),K=parseInt(z.borderBottomWidth,10),V=parseInt(z.paddingBottom,10),J=W+q+B+V+K,Q=Math.min(b.offsetHeight*5,J),M=window.getComputedStyle(y),Y=parseInt(M.paddingTop,10),se=parseInt(M.paddingBottom,10),ge=R.top+R.height/2-io,ue=L-ge,H=b.offsetHeight/2,$=b.offsetTop+H,ne=W+q+$,X=J-ne;if(ne<=ge){const ye=j.length>0&&b===j[j.length-1].ref.current;o.style.bottom="0px";const le=c.clientHeight-y.offsetTop-y.offsetHeight,Ne=Math.max(ue,H+(ye?se:0)+le+K),je=ne+Ne;o.style.height=je+"px"}else{const ye=j.length>0&&b===j[0].ref.current;o.style.top="0px";const Ne=Math.max(ge,W+y.offsetTop+(ye?Y:0)+H)+X;o.style.height=Ne+"px",y.scrollTop=ne-ge+y.offsetTop}o.style.margin=`${io}px 0`,o.style.minHeight=Q+"px",o.style.maxHeight=L+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[p,a.trigger,a.valueNode,o,c,y,b,x,a.dir,r]);si(()=>T(),[T]);const[A,E]=k.useState();si(()=>{c&&E(window.getComputedStyle(c).zIndex)},[c]);const C=k.useCallback(R=>{R&&_.current===!0&&(T(),w==null||w(),_.current=!1)},[T,w]);return g.jsx(Upe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:C,children:g.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:g.jsx(vt.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});nX.displayName=Bpe;var Fpe="SelectPopperPosition",ZP=k.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=io,...a}=t,s=eS(n);return g.jsx(TZ,{...s,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ZP.displayName=Fpe;var[Upe,j$]=lm(rf,{}),XP="SelectViewport",rX=k.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,a=Wu(XP,n),s=j$(XP,n),o=jt(e,a.onViewportChange),l=k.useRef(0);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),g.jsx(Y1.Slot,{scope:n,children:g.jsx(vt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:lt(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=s;if(p!=null&&p.current&&f){const m=Math.abs(l.current-u.scrollTop);if(m>0){const _=window.innerHeight-io*2,y=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),x=Math.max(y,b);if(x<_){const w=x+m,T=Math.min(_,w),A=w-T;f.style.height=T+"px",f.style.bottom==="0px"&&(u.scrollTop=A>0?A:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});rX.displayName=XP;var iX="SelectGroup",[zpe,qpe]=lm(iX),Hpe=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=uc();return g.jsx(zpe,{scope:n,id:i,children:g.jsx(vt.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Hpe.displayName=iX;var aX="SelectLabel",sX=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=qpe(aX,n);return g.jsx(vt.div,{id:i.id,...r,ref:e})});sX.displayName=aX;var Ww="SelectItem",[Wpe,oX]=lm(Ww),lX=k.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...s}=t,o=Hu(Ww,n),l=Wu(Ww,n),c=o.value===r,[u,f]=k.useState(a??""),[p,m]=k.useState(!1),_=jt(e,w=>{var T;return(T=l.itemRefCallback)==null?void 0:T.call(l,w,r,i)}),y=uc(),b=k.useRef("touch"),x=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.jsx(Wpe,{scope:n,value:r,disabled:i,textId:y,isSelected:c,onItemTextChange:k.useCallback(w=>{f(T=>T||((w==null?void 0:w.textContent)??"").trim())},[]),children:g.jsx(Y1.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:g.jsx(vt.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:_,onFocus:lt(s.onFocus,()=>m(!0)),onBlur:lt(s.onBlur,()=>m(!1)),onClick:lt(s.onClick,()=>{b.current!=="mouse"&&x()}),onPointerUp:lt(s.onPointerUp,()=>{b.current==="mouse"&&x()}),onPointerDown:lt(s.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:lt(s.onPointerMove,w=>{var T;b.current=w.pointerType,i?(T=l.onItemLeave)==null||T.call(l):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:lt(s.onPointerLeave,w=>{var T;w.currentTarget===document.activeElement&&((T=l.onItemLeave)==null||T.call(l))}),onKeyDown:lt(s.onKeyDown,w=>{var A;((A=l.searchRef)==null?void 0:A.current)!==""&&w.key===" "||(Npe.includes(w.key)&&x(),w.key===" "&&w.preventDefault())})})})})});lX.displayName=Ww;var Vg="SelectItemText",cX=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,s=Hu(Vg,n),o=Wu(Vg,n),l=oX(Vg,n),c=jpe(Vg,n),[u,f]=k.useState(null),p=jt(e,x=>f(x),l.onItemTextChange,x=>{var w;return(w=o.itemTextRefCallback)==null?void 0:w.call(o,x,l.value,l.disabled)}),m=u==null?void 0:u.textContent,_=k.useMemo(()=>g.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=c;return si(()=>(y(_),()=>b(_)),[y,b,_]),g.jsxs(g.Fragment,{children:[g.jsx(vt.span,{id:l.textId,...a,ref:p}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Qv.createPortal(a.children,s.valueNode):null]})});cX.displayName=Vg;var uX="SelectItemIndicator",dX=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return oX(uX,n).isSelected?g.jsx(vt.span,{"aria-hidden":!0,...r,ref:e}):null});dX.displayName=uX;var JP="SelectScrollUpButton",fX=k.forwardRef((t,e)=>{const n=Wu(JP,t.__scopeSelect),r=j$(JP,t.__scopeSelect),[i,a]=k.useState(!1),s=jt(e,r.onScrollButtonChange);return si(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollTop>0;a(c)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?g.jsx(pX,{...t,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});fX.displayName=JP;var YP="SelectScrollDownButton",hX=k.forwardRef((t,e)=>{const n=Wu(YP,t.__scopeSelect),r=j$(YP,t.__scopeSelect),[i,a]=k.useState(!1),s=jt(e,r.onScrollButtonChange);return si(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;a(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?g.jsx(pX,{...t,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});hX.displayName=YP;var pX=k.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=Wu("SelectScrollButton",n),s=k.useRef(null),o=Q1(n),l=k.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return k.useEffect(()=>()=>l(),[l]),si(()=>{var u;const c=o().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),g.jsx(vt.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:lt(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:lt(i.onPointerMove,()=>{var c;(c=a.onItemLeave)==null||c.call(a),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:lt(i.onPointerLeave,()=>{l()})})}),Vpe="SelectSeparator",mX=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return g.jsx(vt.div,{"aria-hidden":!0,...r,ref:e})});mX.displayName=Vpe;var QP="SelectArrow",Gpe=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=eS(n),a=Hu(QP,n),s=Wu(QP,n);return a.open&&s.position==="popper"?g.jsx(EZ,{...i,...r,ref:e}):null});Gpe.displayName=QP;var Kpe="SelectBubbleInput",gX=k.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=k.useRef(null),a=jt(r,i),s=y$(e);return k.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&u){const f=new Event("change",{bubbles:!0});u.call(o,e),o.dispatchEvent(f)}},[s,e]),g.jsx(vt.select,{...n,style:{...oK,...n.style},ref:a,defaultValue:e})});gX.displayName=Kpe;function yX(t){return t===""||t===void 0}function vX(t){const e=Li(t),n=k.useRef(""),r=k.useRef(0),i=k.useCallback(s=>{const o=n.current+s;e(o),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(o)},[e]),a=k.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function bX(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let s=Zpe(t,Math.max(a,0));i.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Zpe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Xpe=VZ,_X=KZ,Jpe=XZ,Ype=JZ,Qpe=YZ,wX=QZ,eme=rX,xX=sX,SX=lX,tme=cX,nme=dX,TX=fX,EX=hX,AX=mX,OX=["PageUp","PageDown"],CX=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],kX={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},cm="Slider",[eR,rme,ime]=r$(cm),[NX,sYe]=js(cm,[ime]),[ame,tS]=NX(cm),IX=k.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:a=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:f=()=>{},onValueCommit:p=()=>{},inverted:m=!1,form:_,...y}=t,b=k.useRef(new Set),x=k.useRef(0),T=s==="horizontal"?sme:ome,[A=[],E]=Pu({prop:u,defaultProp:c,onChange:j=>{var B;(B=[...b.current][x.current])==null||B.focus(),f(j)}}),C=k.useRef(A);function R(j){const L=fme(A,j);Z(j,L)}function N(j){Z(j,x.current)}function D(){const j=C.current[x.current];A[x.current]!==j&&p(A)}function Z(j,L,{commit:B}={commit:!1}){const z=gme(a),W=yme(Math.round((j-r)/a)*a+r,z),q=Fy(W,[r,i]);E((K=[])=>{const V=ume(K,q,L);if(mme(V,l*a)){x.current=V.indexOf(q);const J=String(V)!==String(K);return J&&B&&p(V),J?V:K}else return K})}return g.jsx(ame,{scope:t.__scopeSlider,name:n,disabled:o,min:r,max:i,valueIndexToChangeRef:x,thumbs:b.current,values:A,orientation:s,form:_,children:g.jsx(eR.Provider,{scope:t.__scopeSlider,children:g.jsx(eR.Slot,{scope:t.__scopeSlider,children:g.jsx(T,{"aria-disabled":o,"data-disabled":o?"":void 0,...y,ref:e,onPointerDown:lt(y.onPointerDown,()=>{o||(C.current=A)}),min:r,max:i,inverted:m,onSlideStart:o?void 0:R,onSlideMove:o?void 0:N,onSlideEnd:o?void 0:D,onHomeKeyDown:()=>!o&&Z(r,0,{commit:!0}),onEndKeyDown:()=>!o&&Z(i,A.length-1,{commit:!0}),onStepKeyDown:({event:j,direction:L})=>{if(!o){const W=OX.includes(j.key)||j.shiftKey&&CX.includes(j.key)?10:1,q=x.current,K=A[q],V=a*W*L;Z(K+V,q,{commit:!0})}}})})})})});IX.displayName=cm;var[PX,RX]=NX(cm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),sme=k.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:a,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,[f,p]=k.useState(null),m=jt(e,T=>p(T)),_=k.useRef(void 0),y=eb(i),b=y==="ltr",x=b&&!a||!b&&a;function w(T){const A=_.current||f.getBoundingClientRect(),E=[0,A.width],R=$$(E,x?[n,r]:[r,n]);return _.current=A,R(T-A.left)}return g.jsx(PX,{scope:t.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:g.jsx(jX,{dir:y,"data-orientation":"horizontal",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:T=>{const A=w(T.clientX);s==null||s(A)},onSlideMove:T=>{const A=w(T.clientX);o==null||o(A)},onSlideEnd:()=>{_.current=void 0,l==null||l()},onStepKeyDown:T=>{const E=kX[x?"from-left":"from-right"].includes(T.key);c==null||c({event:T,direction:E?-1:1})}})})}),ome=k.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:a,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...c}=t,u=k.useRef(null),f=jt(e,u),p=k.useRef(void 0),m=!i;function _(y){const b=p.current||u.current.getBoundingClientRect(),x=[0,b.height],T=$$(x,m?[r,n]:[n,r]);return p.current=b,T(y-b.top)}return g.jsx(PX,{scope:t.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:g.jsx(jX,{"data-orientation":"vertical",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const b=_(y.clientY);a==null||a(b)},onSlideMove:y=>{const b=_(y.clientY);s==null||s(b)},onSlideEnd:()=>{p.current=void 0,o==null||o()},onStepKeyDown:y=>{const x=kX[m?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:x?-1:1})}})})}),jX=k.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...c}=t,u=tS(cm,n);return g.jsx(vt.span,{...c,ref:e,onKeyDown:lt(t.onKeyDown,f=>{f.key==="Home"?(s(f),f.preventDefault()):f.key==="End"?(o(f),f.preventDefault()):OX.concat(CX).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:lt(t.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(p)?p.focus():r(f)}),onPointerMove:lt(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:lt(t.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),a(f))})})}),$X="SliderTrack",MX=k.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=tS($X,n);return g.jsx(vt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});MX.displayName=$X;var tR="SliderRange",LX=k.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=tS(tR,n),a=RX(tR,n),s=k.useRef(null),o=jt(e,s),l=i.values.length,c=i.values.map(p=>FX(p,i.min,i.max)),u=l>1?Math.min(...c):0,f=100-Math.max(...c);return g.jsx(vt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:o,style:{...t.style,[a.startEdge]:u+"%",[a.endEdge]:f+"%"}})});LX.displayName=tR;var nR="SliderThumb",DX=k.forwardRef((t,e)=>{const n=rme(t.__scopeSlider),[r,i]=k.useState(null),a=jt(e,o=>i(o)),s=k.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return g.jsx(lme,{...t,ref:a,index:s})}),lme=k.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...a}=t,s=tS(nR,n),o=RX(nR,n),[l,c]=k.useState(null),u=jt(e,w=>c(w)),f=l?s.form||!!l.closest("form"):!0,p=v$(l),m=s.values[r],_=m===void 0?0:FX(m,s.min,s.max),y=dme(r,s.values.length),b=p==null?void 0:p[o.size],x=b?hme(b,_,o.direction):0;return k.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),g.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${_}% + ${x}px)`},children:[g.jsx(eR.ItemSlot,{scope:t.__scopeSlider,children:g.jsx(vt.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":s.min,"aria-valuenow":m,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...a,ref:u,style:m===void 0?{display:"none"}:t.style,onFocus:lt(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),f&&g.jsx(BX,{name:i??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:m},r)]})});DX.displayName=nR;var cme="RadioBubbleInput",BX=k.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=k.useRef(null),a=jt(i,r),s=y$(e);return k.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&u){const f=new Event("input",{bubbles:!0});u.call(o,e),o.dispatchEvent(f)}},[s,e]),g.jsx(vt.input,{style:{display:"none"},...n,ref:a,defaultValue:e})});BX.displayName=cme;function ume(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,a)=>i-a)}function FX(t,e,n){const a=100/(n-e)*(t-e);return Fy(a,[0,100])}function dme(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function fme(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function hme(t,e,n){const r=t/2,a=$$([0,50],[0,r]);return(r-a(e)*n)*n}function pme(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function mme(t,e){if(e>0){const n=pme(t);return Math.min(...n)>=e}return!0}function $$(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function gme(t){return(String(t).split(".")[1]||"").length}function yme(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var UX=IX,vme=MX,bme=LX,_me=DX,nS="Switch",[wme,oYe]=js(nS),[xme,Sme]=wme(nS),zX=k.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:s,disabled:o,value:l="on",onCheckedChange:c,form:u,...f}=t,[p,m]=k.useState(null),_=jt(e,T=>m(T)),y=k.useRef(!1),b=p?u||!!p.closest("form"):!0,[x,w]=Pu({prop:i,defaultProp:a??!1,onChange:c,caller:nS});return g.jsxs(xme,{scope:n,checked:x,disabled:o,children:[g.jsx(vt.button,{type:"button",role:"switch","aria-checked":x,"aria-required":s,"data-state":VX(x),"data-disabled":o?"":void 0,disabled:o,value:l,...f,ref:_,onClick:lt(t.onClick,T=>{w(A=>!A),b&&(y.current=T.isPropagationStopped(),y.current||T.stopPropagation())})}),b&&g.jsx(WX,{control:p,bubbles:!y.current,name:r,value:l,checked:x,required:s,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});zX.displayName=nS;var qX="SwitchThumb",HX=k.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=Sme(qX,n);return g.jsx(vt.span,{"data-state":VX(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});HX.displayName=qX;var Tme="SwitchBubbleInput",WX=k.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},a)=>{const s=k.useRef(null),o=jt(s,a),l=y$(n),c=v$(e);return k.useEffect(()=>{const u=s.current;if(!u)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&m){const _=new Event("click",{bubbles:r});m.call(u,n),u.dispatchEvent(_)}},[l,n,r]),g.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});WX.displayName=Tme;function VX(t){return t?"checked":"unchecked"}var GX=zX,Eme=HX,[rS,lYe]=js("Tooltip",[Z1]),iS=Z1(),KX="TooltipProvider",Ame=700,rR="tooltip.open",[Ome,M$]=rS(KX),ZX=t=>{const{__scopeTooltip:e,delayDuration:n=Ame,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=t,s=k.useRef(!0),o=k.useRef(!1),l=k.useRef(0);return k.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),g.jsx(Ome,{scope:e,isOpenDelayedRef:s,delayDuration:n,onOpen:k.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:k.useCallback(c=>{o.current=c},[]),disableHoverableContent:i,children:a})};ZX.displayName=KX;var Uy="Tooltip",[Cme,rb]=rS(Uy),XX=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:a,disableHoverableContent:s,delayDuration:o}=t,l=M$(Uy,t.__scopeTooltip),c=iS(e),[u,f]=k.useState(null),p=uc(),m=k.useRef(0),_=s??l.disableHoverableContent,y=o??l.delayDuration,b=k.useRef(!1),[x,w]=Pu({prop:r,defaultProp:i??!1,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent(rR))):l.onClose(),a==null||a(R)},caller:Uy}),T=k.useMemo(()=>x?b.current?"delayed-open":"instant-open":"closed",[x]),A=k.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b.current=!1,w(!0)},[w]),E=k.useCallback(()=>{window.clearTimeout(m.current),m.current=0,w(!1)},[w]),C=k.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{b.current=!0,w(!0),m.current=0},y)},[y,w]);return k.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),g.jsx(xZ,{...c,children:g.jsx(Cme,{scope:e,contentId:p,open:x,stateAttribute:T,trigger:u,onTriggerChange:f,onTriggerEnter:k.useCallback(()=>{l.isOpenDelayedRef.current?C():A()},[l.isOpenDelayedRef,C,A]),onTriggerLeave:k.useCallback(()=>{_?E():(window.clearTimeout(m.current),m.current=0)},[E,_]),onOpen:A,onClose:E,disableHoverableContent:_,children:n})})};XX.displayName=Uy;var iR="TooltipTrigger",JX=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=rb(iR,n),a=M$(iR,n),s=iS(n),o=k.useRef(null),l=jt(e,o,i.onTriggerChange),c=k.useRef(!1),u=k.useRef(!1),f=k.useCallback(()=>c.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),g.jsx(SZ,{asChild:!0,...s,children:g.jsx(vt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:lt(t.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:lt(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:lt(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:lt(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:lt(t.onBlur,i.onClose),onClick:lt(t.onClick,i.onClose)})})});JX.displayName=iR;var L$="TooltipPortal",[kme,Nme]=rS(L$,{forceMount:void 0}),YX=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,a=rb(L$,e);return g.jsx(kme,{scope:e,forceMount:n,children:g.jsx(Co,{present:n||a.open,children:g.jsx(q1,{asChild:!0,container:i,children:r})})})};YX.displayName=L$;var fp="TooltipContent",QX=k.forwardRef((t,e)=>{const n=Nme(fp,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=t,s=rb(fp,t.__scopeTooltip);return g.jsx(Co,{present:r||s.open,children:s.disableHoverableContent?g.jsx(eJ,{side:i,...a,ref:e}):g.jsx(Ime,{side:i,...a,ref:e})})}),Ime=k.forwardRef((t,e)=>{const n=rb(fp,t.__scopeTooltip),r=M$(fp,t.__scopeTooltip),i=k.useRef(null),a=jt(e,i),[s,o]=k.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:f}=r,p=k.useCallback(()=>{o(null),f(!1)},[f]),m=k.useCallback((_,y)=>{const b=_.currentTarget,x={x:_.clientX,y:_.clientY},w=$me(x,b.getBoundingClientRect()),T=Mme(x,w),A=Lme(y.getBoundingClientRect()),E=Bme([...T,...A]);o(E),f(!0)},[f]);return k.useEffect(()=>()=>p(),[p]),k.useEffect(()=>{if(l&&u){const _=b=>m(b,u),y=b=>m(b,l);return l.addEventListener("pointerleave",_),u.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",_),u.removeEventListener("pointerleave",y)}}},[l,u,m,p]),k.useEffect(()=>{if(s){const _=y=>{const b=y.target,x={x:y.clientX,y:y.clientY},w=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),T=!Dme(x,s);w?p():T&&(p(),c())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[l,u,s,c,p]),g.jsx(eJ,{...t,ref:a})}),[Pme,Rme]=rS(Uy,{isInside:!1}),jme=jG("TooltipContent"),eJ=k.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:s,...o}=t,l=rb(fp,n),c=iS(n),{onClose:u}=l;return k.useEffect(()=>(document.addEventListener(rR,u),()=>document.removeEventListener(rR,u)),[u]),k.useEffect(()=>{if(l.trigger){const f=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),g.jsx(z1,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:g.jsxs(TZ,{"data-state":l.stateAttribute,...c,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(jme,{children:r}),g.jsx(Pme,{scope:n,isInside:!0,children:g.jsx(fde,{id:l.contentId,role:"tooltip",children:i||r})})]})})});QX.displayName=fp;var tJ="TooltipArrow",nJ=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=iS(n);return Rme(tJ,n).isInside?null:g.jsx(EZ,{...i,...r,ref:e})});nJ.displayName=tJ;function $me(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Mme(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Lme(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function Dme(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const o=e[a],l=e[s],c=o.x,u=o.y,f=l.x,p=l.y;u>r!=p>r&&n<(f-c)*(r-u)/(p-u)+c&&(i=!i)}return i}function Bme(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Fme(e)}function Fme(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const a=e[e.length-1],s=e[e.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const a=n[n.length-1],s=n[n.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Ume=ZX,zme=XX,qme=JX,Hme=YX,Wme=QX,Vme=nJ,SA={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var R5;function Gme(){return R5||(R5=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(a=i(a,r(o)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var s="";for(var o in a)e.call(a,o)&&a[o]&&(s=i(s,o));return s}function i(a,s){return s?a?a+" "+s:a+s:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(SA)),SA.exports}var Kme=Gme();const sc=Ut(Kme),D$={asChild:{type:"boolean"}},Kh={width:{type:"string",className:"rt-r-w",customProperties:["--width"],responsive:!0},minWidth:{type:"string",className:"rt-r-min-w",customProperties:["--min-width"],responsive:!0},maxWidth:{type:"string",className:"rt-r-max-w",customProperties:["--max-width"],responsive:!0}},Zme={height:{type:"string",className:"rt-r-h",customProperties:["--height"],responsive:!0},minHeight:{type:"string",className:"rt-r-min-h",customProperties:["--min-height"],responsive:!0},maxHeight:{type:"string",className:"rt-r-max-h",customProperties:["--max-height"],responsive:!0}},Xme=["1","2","3","4"],Jme={...D$,align:{type:"enum",className:"rt-r-align",values:["start","center"],default:"center"},size:{type:"enum",className:"rt-r-size",values:Xme,default:"3",responsive:!0},width:Kh.width,minWidth:Kh.minWidth,maxWidth:{...Kh.maxWidth,default:"600px"},...Zme},Yme=["gray","gold","bronze","brown","yellow","amber","orange","tomato","red","ruby","crimson","pink","plum","purple","violet","iris","indigo","blue","cyan","teal","jade","green","grass","lime","mint","sky"],rJ={color:{type:"enum",values:Yme,default:void 0}},iJ={highContrast:{type:"boolean",className:"rt-high-contrast",default:void 0}},Qme=["normal","start","end","both"],aJ={trim:{type:"enum",className:"rt-r-lt",values:Qme,responsive:!0}},ege=["left","center","right"],sJ={align:{type:"enum",className:"rt-r-ta",values:ege,responsive:!0}},tge=["wrap","nowrap","pretty","balance"],oJ={wrap:{type:"enum",className:"rt-r-tw",values:tge,responsive:!0}},lJ={truncate:{type:"boolean",className:"rt-truncate"}},nge=["light","regular","medium","bold"],cJ={weight:{type:"enum",className:"rt-r-weight",values:nge,responsive:!0}},rge=["h1","h2","h3","h4","h5","h6"],ige=["1","2","3","4","5","6","7","8","9"],age={as:{type:"enum",values:rge,default:"h1"},...D$,size:{type:"enum",className:"rt-r-size",values:ige,default:"6",responsive:!0},...cJ,...sJ,...aJ,...lJ,...oJ,...rJ,...iJ},sge=["initial","xs","sm","md","lg","xl"],B$=new Set(sge);function uJ(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vy(t){return typeof t=="object"&&t!==null&&Object.keys(t).some(e=>B$.has(e))}function oge({className:t,customProperties:e,...n}){const r=dJ({allowArbitraryValues:!0,className:t,...n}),i=lge({customProperties:e,...n});return[r,i]}function dJ({allowArbitraryValues:t,value:e,className:n,propValues:r,parseValue:i=a=>a}){const a=[];if(e){if(typeof e=="string"&&r.includes(e))return j5(n,e,i);if(vy(e)){const s=e;for(const o in s){if(!uJ(s,o)||!B$.has(o))continue;const l=s[o];if(l!==void 0){if(r.includes(l)){const c=j5(n,l,i),u=o==="initial"?c:`${o}:${c}`;a.push(u)}else if(t){const c=o==="initial"?n:`${o}:${n}`;a.push(c)}}}return a.join(" ")}if(t)return n}}function j5(t,e,n){const r=t?"-":"",i=n(e),a=i==null?void 0:i.startsWith("-"),s=a?"-":"",o=a?i==null?void 0:i.substring(1):i;return`${s}${t}${r}${o}`}function lge({customProperties:t,value:e,propValues:n,parseValue:r=i=>i}){let i={};if(!(!e||typeof e=="string"&&n.includes(e))){if(typeof e=="string"&&(i=Object.fromEntries(t.map(a=>[a,e]))),vy(e)){const a=e;for(const s in a){if(!uJ(a,s)||!B$.has(s))continue;const o=a[s];if(!n.includes(o))for(const l of t)i={[s==="initial"?l:`${l}-${s}`]:o,...i}}}for(const a in i){const s=i[a];s!==void 0&&(i[a]=r(s))}return i}}function $5(...t){let e={};for(const n of t)n&&(e={...e,...n});return Object.keys(e).length?e:void 0}function cge(...t){return Object.assign({},...t)}function zy(t,...e){let n,r;const i={...t},a=cge(...e);for(const s in a){let o=i[s];const l=a[s];if(l.default!==void 0&&o===void 0&&(o=l.default),l.type==="enum"&&![l.default,...l.values].includes(o)&&!vy(o)&&(o=l.default),i[s]=o,"className"in l&&l.className){delete i[s];const c="responsive"in l;if(!o||vy(o)&&!c)continue;if(vy(o)&&(l.default!==void 0&&o.initial===void 0&&(o.initial=l.default),l.type==="enum"&&([l.default,...l.values].includes(o.initial)||(o.initial=l.default))),l.type==="enum"){const u=dJ({allowArbitraryValues:!1,value:o,className:l.className,propValues:l.values,parseValue:l.parseValue});n=sc(n,u);continue}if(l.type==="string"||l.type==="enum | string"){const u=l.type==="string"?[]:l.values,[f,p]=oge({className:l.className,customProperties:l.customProperties,propValues:u,parseValue:l.parseValue,value:o});r=$5(r,p),n=sc(n,f);continue}if(l.type==="boolean"&&o){n=sc(n,l.className);continue}}}return i.className=sc(n,t.className),i.style=$5(r,t.style),i}const _d=["0","1","2","3","4","5","6","7","8","9","-1","-2","-3","-4","-5","-6","-7","-8","-9"],fJ={m:{type:"enum | string",values:_d,responsive:!0,className:"rt-r-m",customProperties:["--m"]},mx:{type:"enum | string",values:_d,responsive:!0,className:"rt-r-mx",customProperties:["--ml","--mr"]},my:{type:"enum | string",values:_d,responsive:!0,className:"rt-r-my",customProperties:["--mt","--mb"]},mt:{type:"enum | string",values:_d,responsive:!0,className:"rt-r-mt",customProperties:["--mt"]},mr:{type:"enum | string",values:_d,responsive:!0,className:"rt-r-mr",customProperties:["--mr"]},mb:{type:"enum | string",values:_d,responsive:!0,className:"rt-r-mb",customProperties:["--mb"]},ml:{type:"enum | string",values:_d,responsive:!0,className:"rt-r-ml",customProperties:["--ml"]}},hJ=k.forwardRef((t,e)=>{const{children:n,className:r,asChild:i,as:a="h1",color:s,...o}=zy(t,age,fJ);return k.createElement(F1,{"data-accent-color":s,...o,ref:e,className:sc("rt-Heading",r)},i?n:k.createElement(a,null,n))});hJ.displayName="Heading";const uge=["span","div","label","p"],dge=["1","2","3","4","5","6","7","8","9"],fge={as:{type:"enum",values:uge,default:"span"},...D$,size:{type:"enum",className:"rt-r-size",values:dge,responsive:!0},...cJ,...sJ,...aJ,...lJ,...oJ,...rJ,...iJ},F$=k.forwardRef((t,e)=>{const{children:n,className:r,asChild:i,as:a="span",color:s,...o}=zy(t,fge,fJ);return k.createElement(F1,{"data-accent-color":s,...o,ref:e,className:sc("rt-Text",r)},i?n:k.createElement(a,null,n))});F$.displayName="Text";function hge(t){switch(t){case"tomato":case"red":case"ruby":case"crimson":case"pink":case"plum":case"purple":case"violet":return"mauve";case"iris":case"indigo":case"blue":case"sky":case"cyan":return"slate";case"teal":case"jade":case"mint":case"green":return"sage";case"grass":case"lime":return"olive";case"yellow":case"amber":case"orange":case"brown":case"gold":case"bronze":return"sand";case"gray":return"gray"}}const La={hasBackground:{default:!0},appearance:{default:"inherit"},accentColor:{default:"indigo"},grayColor:{default:"auto"},panelBackground:{default:"translucent"},radius:{default:"medium"},scaling:{default:"100%"}},sh=()=>{},aR=k.createContext(void 0),aS=k.forwardRef((t,e)=>k.useContext(aR)===void 0?k.createElement(Ume,{delayDuration:200},k.createElement(hue,{dir:"ltr"},k.createElement(pJ,{...t,ref:e}))):k.createElement(U$,{...t,ref:e}));aS.displayName="Theme";const pJ=k.forwardRef((t,e)=>{const{appearance:n=La.appearance.default,accentColor:r=La.accentColor.default,grayColor:i=La.grayColor.default,panelBackground:a=La.panelBackground.default,radius:s=La.radius.default,scaling:o=La.scaling.default,hasBackground:l=La.hasBackground.default,...c}=t,[u,f]=k.useState(n);k.useEffect(()=>f(n),[n]);const[p,m]=k.useState(r);k.useEffect(()=>m(r),[r]);const[_,y]=k.useState(i);k.useEffect(()=>y(i),[i]);const[b,x]=k.useState(a);k.useEffect(()=>x(a),[a]);const[w,T]=k.useState(s);k.useEffect(()=>T(s),[s]);const[A,E]=k.useState(o);return k.useEffect(()=>E(o),[o]),k.createElement(U$,{...c,ref:e,isRoot:!0,hasBackground:l,appearance:u,accentColor:p,grayColor:_,panelBackground:b,radius:w,scaling:A,onAppearanceChange:f,onAccentColorChange:m,onGrayColorChange:y,onPanelBackgroundChange:x,onRadiusChange:T,onScalingChange:E})});pJ.displayName="ThemeRoot";const U$=k.forwardRef((t,e)=>{const n=k.useContext(aR),{asChild:r,isRoot:i,hasBackground:a,appearance:s=(n==null?void 0:n.appearance)??La.appearance.default,accentColor:o=(n==null?void 0:n.accentColor)??La.accentColor.default,grayColor:l=(n==null?void 0:n.resolvedGrayColor)??La.grayColor.default,panelBackground:c=(n==null?void 0:n.panelBackground)??La.panelBackground.default,radius:u=(n==null?void 0:n.radius)??La.radius.default,scaling:f=(n==null?void 0:n.scaling)??La.scaling.default,onAppearanceChange:p=sh,onAccentColorChange:m=sh,onGrayColorChange:_=sh,onPanelBackgroundChange:y=sh,onRadiusChange:b=sh,onScalingChange:x=sh,...w}=t,T=r?F1:"div",A=l==="auto"?hge(o):l,E=t.appearance==="light"||t.appearance==="dark",C=a===void 0?i||E:a;return k.createElement(aR.Provider,{value:k.useMemo(()=>({appearance:s,accentColor:o,grayColor:l,resolvedGrayColor:A,panelBackground:c,radius:u,scaling:f,onAppearanceChange:p,onAccentColorChange:m,onGrayColorChange:_,onPanelBackgroundChange:y,onRadiusChange:b,onScalingChange:x}),[s,o,l,A,c,u,f,p,m,_,y,b,x])},k.createElement(T,{"data-is-root-theme":i?"true":"false","data-accent-color":o,"data-gray-color":A,"data-has-background":C?"true":"false","data-panel-background":c,"data-radius":u,"data-scaling":f,ref:e,...w,className:sc("radix-themes",{light:s==="light",dark:s==="dark"},w.className)}))});U$.displayName="ThemeImpl";const z$=t=>{if(!k.isValidElement(t))throw Error(`Expected a single React Element child, but got: ${k.Children.toArray(t).map(e=>typeof e=="object"&&"type"in e&&typeof e.type=="string"?e.type:typeof e).join(", ")}`);return t},mJ=t=>k.createElement(Rfe,{...t});mJ.displayName="AlertDialog.Root";const pge=k.forwardRef(({children:t,...e},n)=>k.createElement(jfe,{...e,ref:n,asChild:!0},z$(t)));pge.displayName="AlertDialog.Trigger";const gJ=k.forwardRef(({align:t,...e},n)=>{const{align:r,...i}=Jme,{className:a}=zy({align:t},{align:r}),{className:s,forceMount:o,container:l,...c}=zy(e,i);return k.createElement($fe,{container:l,forceMount:o},k.createElement(aS,{asChild:!0},k.createElement(Mfe,{className:"rt-BaseDialogOverlay rt-AlertDialogOverlay"},k.createElement("div",{className:"rt-BaseDialogScroll rt-AlertDialogScroll"},k.createElement("div",{className:`rt-BaseDialogScrollPadding rt-AlertDialogScrollPadding ${a}`},k.createElement(Lfe,{...c,ref:n,className:sc("rt-BaseDialogContent","rt-AlertDialogContent",s)}))))))});gJ.displayName="AlertDialog.Content";const yJ=k.forwardRef((t,e)=>k.createElement(Ffe,{asChild:!0},k.createElement(hJ,{size:"5",mb:"3",trim:"start",...t,asChild:!1,ref:e})));yJ.displayName="AlertDialog.Title";const vJ=k.forwardRef((t,e)=>k.createElement(Ufe,{asChild:!0},k.createElement(F$,{as:"p",size:"3",...t,asChild:!1,ref:e})));vJ.displayName="AlertDialog.Description";const bJ=k.forwardRef(({children:t,...e},n)=>k.createElement(Dfe,{...e,ref:n,asChild:!0},z$(t)));bJ.displayName="AlertDialog.Action";const _J=k.forwardRef(({children:t,...e},n)=>k.createElement(Bfe,{...e,ref:n,asChild:!0},z$(t)));_J.displayName="AlertDialog.Cancel";const mge={content:{type:"ReactNode",required:!0},width:Kh.width,minWidth:Kh.minWidth,maxWidth:{...Kh.maxWidth,default:"360px"}},ni=k.forwardRef((t,e)=>{const{children:n,className:r,open:i,defaultOpen:a,onOpenChange:s,delayDuration:o,disableHoverableContent:l,content:c,container:u,forceMount:f,...p}=zy(t,mge),m={open:i,defaultOpen:a,onOpenChange:s,delayDuration:o,disableHoverableContent:l};return k.createElement(zme,{...m},k.createElement(qme,{asChild:!0},n),k.createElement(Hme,{container:u,forceMount:f},k.createElement(aS,{asChild:!0},k.createElement(Wme,{sideOffset:4,collisionPadding:10,...p,asChild:!1,ref:e,className:sc("rt-TooltipContent",r)},k.createElement(F$,{as:"p",className:"rt-TooltipText",size:"1"},c),k.createElement(Vme,{className:"rt-TooltipArrow"})))))});ni.displayName="Tooltip";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gge=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wJ=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vge=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},l)=>k.createElement("svg",{ref:l,...yge,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:wJ("lucide",i),...o},[...s.map(([c,u])=>k.createElement(c,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(t,e)=>{const n=k.forwardRef(({className:r,...i},a)=>k.createElement(vge,{ref:a,iconNode:e,className:wJ(`lucide-${gge(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=ut("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=ut("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=ut("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bge=ut("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ge=ut("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=ut("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wge=ut("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=ut("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=ut("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=ut("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xge=ut("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sge=ut("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tge=ut("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ege=ut("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=ut("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=ut("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=ut("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=ut("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=ut("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=ut("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=ut("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=ut("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=ut("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=ut("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=ut("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Age=ut("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oge=ut("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cge=ut("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kge=ut("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=ut("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nge=ut("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ige=ut("PanelLeftOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pge=ut("PanelRightClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=ut("PanelRightOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=ut("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=ut("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=ut("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=ut("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=ut("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rge=ut("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=ut("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jge=ut("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=ut("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=ut("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=ut("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ge=ut("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=ut("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=ut("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mge=ut("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=ut("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=ut("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lge=ut("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dge=ut("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=ut("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=ut("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),dt={idle:{color:"text-muted-foreground",bgColor:"bg-muted",borderColor:"border-muted",surfaceClass:"bg-muted/40 border-border",badgeVariant:"outline",icon:ee.createElement(SJ,{className:"w-4 h-4"}),label:""},running:{color:"text-blue-600",bgColor:"bg-blue-500",borderColor:"border-blue-200",surfaceClass:"bg-blue-50 border-blue-200",badgeVariant:"default",icon:ee.createElement(ab,{className:"w-4 h-4"}),label:""},paused:{color:"text-amber-600",bgColor:"bg-amber-500",borderColor:"border-amber-200",surfaceClass:"bg-amber-50 border-amber-200",badgeVariant:"secondary",icon:ee.createElement(ib,{className:"w-4 h-4"}),label:""},completed:{color:"text-green-600",bgColor:"bg-green-500",borderColor:"border-green-200",surfaceClass:"bg-green-50 border-green-200",badgeVariant:"secondary",icon:ee.createElement(Hy,{className:"w-4 h-4"}),label:""},overtime:{color:"text-red-600",bgColor:"bg-red-500",borderColor:"border-red-200",surfaceClass:"bg-red-50 border-red-200",badgeVariant:"destructive",icon:ee.createElement(qy,{className:"w-4 h-4"}),label:""},warning:{color:"text-amber-600",bgColor:"bg-amber-500",borderColor:"border-amber-200",surfaceClass:"bg-amber-50 border-amber-200",badgeVariant:"destructive",icon:ee.createElement(qy,{className:"w-4 h-4"}),label:""}},Bge=(t,e,n,r=!1)=>r?"overtime":n?"completed":t?"running":e?"paused":"idle",ms={work:{text:"text-blue-600",bg:"bg-blue-100",border:"border-blue-200",progress:"bg-blue-500"},shortBreak:{text:"text-green-600",bg:"bg-green-100",border:"border-green-200",progress:"bg-green-500"},longBreak:{text:"text-green-600",bg:"bg-green-100",border:"border-green-200",progress:"bg-green-500"}},Mt=k.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:ct("rounded-lg bg-card text-card-foreground shadow-sm",t),...e}));Mt.displayName="Card";const On=k.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:ct("flex flex-col space-y-1.5 p-6",t),...e}));On.displayName="CardHeader";const Cn=k.forwardRef(({className:t,...e},n)=>g.jsx("h3",{ref:n,className:ct("text-2xl font-semibold leading-none tracking-tight",t),...e}));Cn.displayName="CardTitle";const K$=k.forwardRef(({className:t,...e},n)=>g.jsx("p",{ref:n,className:ct("text-sm text-muted-foreground",t),...e}));K$.displayName="CardDescription";const Vt=k.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:ct("p-6 pt-0",t),...e}));Vt.displayName="CardContent";const Fge=k.forwardRef(({className:t,...e},n)=>g.jsx("div",{ref:n,className:ct("flex items-center p-6 pt-0",t),...e}));Fge.displayName="CardFooter";const Bn=k.forwardRef(({className:t,type:e,...n},r)=>g.jsx("input",{type:e,className:ct("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Bn.displayName="Input";const Uge=s$("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),at=k.forwardRef(({className:t,...e},n)=>g.jsx(OZ,{ref:n,className:ct(Uge(),t),...e}));at.displayName=OZ.displayName;const um=k.forwardRef(({className:t,value:e,indicatorClassName:n,...r},i)=>g.jsx(PZ,{ref:i,className:ct("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...r,children:g.jsx(mpe,{className:ct("h-full w-full flex-1 bg-primary transition-all",n),style:{transform:`translateX(-${100-(e||0)}%)`}})}));um.displayName=PZ.displayName;const zge=s$("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ir({className:t,variant:e,...n}){return g.jsx("div",{className:ct(zge({variant:e}),t),...n})}const Ms=BK,ub=FK,qge=UK,CJ=k.forwardRef(({className:t,...e},n)=>g.jsx(f$,{ref:n,className:ct("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));CJ.displayName=f$.displayName;const Ja=k.forwardRef(({className:t,children:e,...n},r)=>g.jsxs(qge,{children:[g.jsx(CJ,{}),g.jsxs(h$,{ref:r,className:ct("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,g.jsxs(g$,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(cb,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ja.displayName=h$.displayName;const Ya=({className:t,...e})=>g.jsx("div",{className:ct("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ya.displayName="DialogHeader";const Qa=k.forwardRef(({className:t,...e},n)=>g.jsx(p$,{ref:n,className:ct("text-lg font-semibold leading-none tracking-tight",t),...e}));Qa.displayName=p$.displayName;const kJ=k.forwardRef(({className:t,...e},n)=>g.jsx(m$,{ref:n,className:ct("text-sm text-muted-foreground",t),...e}));kJ.displayName=m$.displayName;const Hge=({duration:t,onDurationChange:e,disabled:n=!1})=>{const[r,i]=k.useState(!1),[a,s]=k.useState(Math.floor(t/60)),[o,l]=k.useState(t%60),c=()=>{const p=a*60+o;p>0&&(e(p),i(!1))},u=[{label:"5",value:300},{label:"10",value:600},{label:"15",value:900},{label:"25",value:1500},{label:"30",value:1800},{label:"45",value:2700},{label:"60",value:3600}],f=p=>{s(Math.floor(p/60)),l(p%60)};return g.jsxs(Ms,{open:r,onOpenChange:i,children:[g.jsx(ub,{asChild:!0,children:g.jsxs(Se,{variant:"outline",size:"sm",disabled:n,children:[g.jsx(bc,{className:"w-4 h-4 mr-2"}),""]})}),g.jsxs(Ja,{className:"sm:max-w-md",children:[g.jsx(Ya,{children:g.jsxs(Qa,{className:"flex items-center gap-2",children:[g.jsx(vc,{className:"w-5 h-5"}),""]})}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx(at,{className:"text-sm font-medium mb-3 block",children:""}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:u.map(p=>g.jsx(Se,{variant:"outline",size:"sm",onClick:()=>f(p.value),className:"text-xs",children:p.label},p.label))})]}),g.jsxs("div",{children:[g.jsx(at,{className:"text-sm font-medium mb-3 block",children:""}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx(at,{htmlFor:"minutes",className:"text-xs text-muted-foreground",children:""}),g.jsx(Bn,{id:"minutes",type:"number",min:"0",max:"999",value:a,onChange:p=>s(Math.max(0,parseInt(p.target.value)||0)),className:"text-center"})]}),g.jsx("span",{className:"text-2xl font-mono text-muted-foreground",children:":"}),g.jsxs("div",{className:"flex-1",children:[g.jsx(at,{htmlFor:"seconds",className:"text-xs text-muted-foreground",children:""}),g.jsx(Bn,{id:"seconds",type:"number",min:"0",max:"59",value:o,onChange:p=>l(Math.max(0,Math.min(59,parseInt(p.target.value)||0))),className:"text-center"})]})]})]}),g.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[g.jsxs("div",{className:"text-2xl font-mono font-bold",children:[a.toString().padStart(2,"0"),":",o.toString().padStart(2,"0")]}),g.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[": ",a*60+o,""]})]}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx(Se,{variant:"outline",onClick:()=>i(!1),children:""}),g.jsx(Se,{onClick:c,disabled:a===0&&o===0,children:""})]})]})]})]})},af=k.forwardRef(({className:t,children:e,...n},r)=>g.jsxs(WZ,{ref:r,className:ct("relative overflow-hidden",t),...n,children:[g.jsx(Ope,{className:"h-full w-full rounded-[inherit]",children:e}),g.jsx(NJ,{}),g.jsx(Cpe,{})]}));af.displayName=WZ.displayName;const NJ=k.forwardRef(({className:t,orientation:e="vertical",...n},r)=>g.jsx(I$,{ref:r,orientation:e,className:ct("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:g.jsx(FZ,{className:"relative flex-1 rounded-full bg-border"})}));NJ.displayName=I$.displayName;function Nr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function IJ(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Wge(t,e){const n=Nr(t);return isNaN(e)?IJ(t,NaN):(n.setDate(n.getDate()+e),n)}const U0=43200,U5=1440;let Vge={};function Gge(){return Vge}function Kge(t){const e=Nr(t);return e.setHours(0,0,0,0),e}function z5(t){const e=Nr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function fw(t,e){const n=Nr(t),r=Nr(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function Zge(t){return IJ(t,Date.now())}function Xge(t,e){const n=Nr(t),r=Nr(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function Jge(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Yge(t,e){return+Nr(t)-+Nr(e)}function PJ(t){const e=Nr(t);return e.setHours(23,59,59,999),e}function Qge(t){const e=Nr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function eye(t){const e=Nr(t);return+PJ(e)==+Qge(e)}function tye(t,e){const n=Nr(t),r=Nr(e),i=fw(n,r),a=Math.abs(Xge(n,r));let s;if(a<1)s=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let o=fw(n,r)===-i;eye(Nr(t))&&a===1&&fw(t,r)===1&&(o=!1),s=i*(a-Number(o))}return s===0?0:s}function nye(t,e,n){const r=Yge(t,e)/1e3;return Jge(n==null?void 0:n.roundingMethod)(r)}const rye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iye=(t,e,n)=>{let r;const i=rye[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Zh(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const aye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lye={date:Zh({formats:aye,defaultWidth:"full"}),time:Zh({formats:sye,defaultWidth:"full"}),dateTime:Zh({formats:oye,defaultWidth:"full"})},cye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uye=(t,e,n,r)=>cye[t];function rl(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const dye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pye={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yye=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},vye={ordinalNumber:yye,era:rl({values:dye,defaultWidth:"wide"}),quarter:rl({values:fye,defaultWidth:"wide",argumentCallback:t=>t-1}),month:rl({values:hye,defaultWidth:"wide"}),day:rl({values:pye,defaultWidth:"wide"}),dayPeriod:rl({values:mye,defaultWidth:"wide",formattingValues:gye,defaultFormattingWidth:"wide"})};function il(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?_ye(o,f=>f.test(s)):bye(o,f=>f.test(s));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}function bye(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function _ye(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function RJ(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const wye=/^(\d+)(th|st|nd|rd)?/i,xye=/\d+/i,Sye={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tye={any:[/^b/i,/^(a|c)/i]},Eye={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Aye={any:[/1/i,/2/i,/3/i,/4/i]},Oye={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cye={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kye={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Nye={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Iye={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Pye={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Rye={ordinalNumber:RJ({matchPattern:wye,parsePattern:xye,valueCallback:t=>parseInt(t,10)}),era:il({matchPatterns:Sye,defaultMatchWidth:"wide",parsePatterns:Tye,defaultParseWidth:"any"}),quarter:il({matchPatterns:Eye,defaultMatchWidth:"wide",parsePatterns:Aye,defaultParseWidth:"any",valueCallback:t=>t+1}),month:il({matchPatterns:Oye,defaultMatchWidth:"wide",parsePatterns:Cye,defaultParseWidth:"any"}),day:il({matchPatterns:kye,defaultMatchWidth:"wide",parsePatterns:Nye,defaultParseWidth:"any"}),dayPeriod:il({matchPatterns:Iye,defaultMatchWidth:"any",parsePatterns:Pye,defaultParseWidth:"any"})},jye={code:"en-US",formatDistance:iye,formatLong:lye,formatRelative:uye,localize:vye,match:Rye,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $ye(t,e,n){const r=Gge(),i=(n==null?void 0:n.locale)??r.locale??jye,a=2520,s=fw(t,e);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s});let l,c;s>0?(l=Nr(e),c=Nr(t)):(l=Nr(t),c=Nr(e));const u=nye(c,l),f=(z5(c)-z5(l))/1e3,p=Math.round((u-f)/60);let m;if(p<2)return n!=null&&n.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,o):u<10?i.formatDistance("lessThanXSeconds",10,o):u<20?i.formatDistance("lessThanXSeconds",20,o):u<40?i.formatDistance("halfAMinute",0,o):u<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):p===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",p,o);if(p<45)return i.formatDistance("xMinutes",p,o);if(p<90)return i.formatDistance("aboutXHours",1,o);if(p<U5){const _=Math.round(p/60);return i.formatDistance("aboutXHours",_,o)}else{if(p<a)return i.formatDistance("xDays",1,o);if(p<U0){const _=Math.round(p/U5);return i.formatDistance("xDays",_,o)}else if(p<U0*2)return m=Math.round(p/U0),i.formatDistance("aboutXMonths",m,o)}if(m=tye(c,l),m<12){const _=Math.round(p/U0);return i.formatDistance("xMonths",_,o)}else{const _=m%12,y=Math.trunc(m/12);return _<3?i.formatDistance("aboutXYears",y,o):_<9?i.formatDistance("overXYears",y,o):i.formatDistance("almostXYears",y+1,o)}}function Mye(t,e){return $ye(t,Zge(t),e)}function Lye(t,e){return Wge(t,-29)}const Dye={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},Bye=(t,e,n)=>{n=n||{};let r;const i=Dye[t];return typeof i=="string"?r=i:e===1?n.addSuffix&&i.oneWithSuffix?r=i.oneWithSuffix:r=i.one:n.addSuffix&&i.otherWithSuffix?r=i.otherWithSuffix.replace("{{count}}",String(e)):r=i.other.replace("{{count}}",String(e)),n.addSuffix?n.comparison&&n.comparison>0?r+"":r+"":r},Fye={full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},Uye={full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},zye={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},qye={date:Zh({formats:Fye,defaultWidth:"full"}),time:Zh({formats:Uye,defaultWidth:"full"}),dateTime:Zh({formats:zye,defaultWidth:"full"})},Hye={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},Wye=(t,e,n,r)=>Hye[t],Vye={narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},Gye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},Kye={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},Zye={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},Xye={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},Jye={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},Yye=(t,e)=>{const n=Number(t);switch(String(e==null?void 0:e.unit)){case"year":return`${n}`;case"quarter":return`${n}`;case"month":return`${n}`;case"week":return`${n}`;case"date":return`${n}`;case"hour":return`${n}`;case"minute":return`${n}`;case"second":return`${n}`;default:return`${n}`}},Qye={ordinalNumber:Yye,era:rl({values:Vye,defaultWidth:"wide"}),quarter:rl({values:Gye,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:rl({values:Kye,defaultWidth:"wide"}),day:rl({values:Zye,defaultWidth:"wide"}),dayPeriod:rl({values:Xye,defaultWidth:"wide",formattingValues:Jye,defaultFormattingWidth:"wide"})},eve=/^?\d+(|||||||)?/i,tve=/\d+/i,nve={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},rve={narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},ive={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},ave={any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},sve={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},ove={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},lve={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},cve={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},uve={any:/^(AM|PM|||||||)/i},dve={any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},fve={ordinalNumber:RJ({matchPattern:eve,parsePattern:tve,valueCallback:function(t){return parseInt(t,10)}}),era:il({matchPatterns:nve,defaultMatchWidth:"wide",parsePatterns:rve,defaultParseWidth:"any"}),quarter:il({matchPatterns:ive,defaultMatchWidth:"wide",parsePatterns:ave,defaultParseWidth:"any",valueCallback:t=>t+1}),month:il({matchPatterns:sve,defaultMatchWidth:"wide",parsePatterns:ove,defaultParseWidth:"any"}),day:il({matchPatterns:lve,defaultMatchWidth:"wide",parsePatterns:cve,defaultParseWidth:"any"}),dayPeriod:il({matchPatterns:uve,defaultMatchWidth:"any",parsePatterns:dve,defaultParseWidth:"any"})},hve={code:"ja",formatDistance:Bye,formatLong:qye,formatRelative:Wye,localize:Qye,match:fve,options:{weekStartsOn:0,firstWeekContainsDate:1}},pve={},q5=t=>{let e;const n=new Set,r=(u,f)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const m=e;e=f??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(_=>_(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(pve?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},mve=t=>t?q5(t):q5;var TA={exports:{}},EA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H5;function gve(){if(H5)return EA;H5=1;var t=Yv(),e=qfe();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,l=t.useDebugValue;return EA.useSyncExternalStoreWithSelector=function(c,u,f,p,m){var _=a(null);if(_.current===null){var y={hasValue:!1,value:null};_.current=y}else y=_.current;_=o(function(){function x(C){if(!w){if(w=!0,T=C,C=p(C),m!==void 0&&y.hasValue){var R=y.value;if(m(R,C))return A=R}return A=C}if(R=A,r(T,C))return R;var N=p(C);return m!==void 0&&m(R,N)?(T=C,R):(T=C,A=N)}var w=!1,T,A,E=f===void 0?null:f;return[function(){return x(u())},E===null?void 0:function(){return x(E())}]},[u,f,p,m]);var b=i(c,_[0],_[1]);return s(function(){y.hasValue=!0,y.value=b},[b]),l(b),b},EA}var W5;function yve(){return W5||(W5=1,TA.exports=gve()),TA.exports}var vve=yve();const bve=Ut(vve),jJ={},{useDebugValue:_ve}=ee,{useSyncExternalStoreWithSelector:wve}=bve;let V5=!1;const xve=t=>t;function Sve(t,e=xve,n){(jJ?"production":void 0)!=="production"&&n&&!V5&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),V5=!0);const r=wve(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return _ve(r),r}const G5=t=>{(jJ?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?mve(t):t,n=(r,i)=>Sve(e,r,i);return Object.assign(n,e),n},Vu=t=>t?G5(t):G5,Tve={};function uS(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=l=>l===null?null:JSON.parse(l,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const Wy=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Wy(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Wy(r)(n)}}}},Eve=(t,e)=>(n,r,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,x)=>({...x,...b}),...e},s=!1;const o=new Set,l=new Set;let c;try{c=a.getStorage()}catch{}if(!c)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},r,i);const u=Wy(a.serialize),f=()=>{const b=a.partialize({...r()});let x;const w=u({state:b,version:a.version}).then(T=>c.setItem(a.name,T)).catch(T=>{x=T});if(x)throw x;return w},p=i.setState;i.setState=(b,x)=>{p(b,x),f()};const m=t((...b)=>{n(...b),f()},r,i);let _;const y=()=>{var b;if(!c)return;s=!1,o.forEach(w=>w(r()));const x=((b=a.onRehydrateStorage)==null?void 0:b.call(a,r()))||void 0;return Wy(c.getItem.bind(c))(a.name).then(w=>{if(w)return a.deserialize(w)}).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==a.version){if(a.migrate)return a.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var T;return _=a.merge(w,(T=r())!=null?T:m),n(_,!0),f()}).then(()=>{x==null||x(_,void 0),s=!0,l.forEach(w=>w(_))}).catch(w=>{x==null||x(void 0,w)})};return i.persist={setOptions:b=>{a={...a,...b},b.getStorage&&(c=b.getStorage())},clearStorage:()=>{c==null||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>s,onHydrate:b=>(o.add(b),()=>{o.delete(b)}),onFinishHydration:b=>(l.add(b),()=>{l.delete(b)})},y(),_||m},Ave=(t,e)=>(n,r,i)=>{let a={storage:uS(()=>localStorage),partialize:y=>y,version:0,merge:(y,b)=>({...b,...y}),...e},s=!1;const o=new Set,l=new Set;let c=a.storage;if(!c)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...y)},r,i);const u=()=>{const y=a.partialize({...r()});return c.setItem(a.name,{state:y,version:a.version})},f=i.setState;i.setState=(y,b)=>{f(y,b),u()};const p=t((...y)=>{n(...y),u()},r,i);i.getInitialState=()=>p;let m;const _=()=>{var y,b;if(!c)return;s=!1,o.forEach(w=>{var T;return w((T=r())!=null?T:p)});const x=((b=a.onRehydrateStorage)==null?void 0:b.call(a,(y=r())!=null?y:p))||void 0;return Wy(c.getItem.bind(c))(a.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==a.version){if(a.migrate)return[!0,a.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var T;const[A,E]=w;if(m=a.merge(E,(T=r())!=null?T:p),n(m,!0),A)return u()}).then(()=>{x==null||x(m,void 0),m=r(),s=!0,l.forEach(w=>w(m))}).catch(w=>{x==null||x(void 0,w)})};return i.persist={setOptions:y=>{a={...a,...y},y.storage&&(c=y.storage)},clearStorage:()=>{c==null||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>s,onHydrate:y=>(o.add(y),()=>{o.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},a.skipHydration||_(),m||p},Ove=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Tve?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Eve(t,e)):Ave(t,e),dS=Ove,dm=Vu()(dS((t,e)=>({linksByLogId:{},githubPat:null,aiProviderConfig:null,addLink:(n,r)=>{const i={...r,id:crypto.randomUUID(),createdAt:new Date().toISOString()};t(a=>({linksByLogId:{...a.linksByLogId,[n]:[...a.linksByLogId[n]??[],i]}}))},removeLink:(n,r)=>{t(i=>({linksByLogId:{...i.linksByLogId,[n]:(i.linksByLogId[n]??[]).filter(a=>a.id!==r)}}))},getLinks:n=>e().linksByLogId[n]??[],setGithubPat:n=>t({githubPat:n}),setAiProviderConfig:n=>t({aiProviderConfig:n})}),{name:"integration-links",partialize:t=>({linksByLogId:t.linksByLogId})})),$J="2022-11-28",Z$=async({owner:t,repo:e,issueNumber:n,pat:r})=>{const i={Accept:"application/vnd.github+json","X-GitHub-Api-Version":$J};r!=null&&r.trim()&&(i.Authorization=`Bearer ${r.trim()}`);const a=await fetch(`https://api.github.com/repos/${encodeURIComponent(t)}/${encodeURIComponent(e)}/issues/${n}`,{headers:i});if(!a.ok)throw a.status===404?new Error("Issue owner/repo  Issue "):a.status===401||a.status===403?new Error("PAT "):new Error(`GitHub API : ${a.status}`);const s=await a.json();if(typeof s.title!="string"||typeof s.html_url!="string")throw new Error("GitHub API ");return{title:s.title,issueUrl:s.html_url,body:typeof s.body=="string"?s.body:""}},Cve=async({owner:t,repo:e,issueNumber:n,body:r,pat:i})=>{const a={Accept:"application/vnd.github+json","X-GitHub-Api-Version":$J,"Content-Type":"application/json"};i!=null&&i.trim()&&(a.Authorization=`Bearer ${i.trim()}`);const s=await fetch(`https://api.github.com/repos/${encodeURIComponent(t)}/${encodeURIComponent(e)}/issues/${n}/comments`,{method:"POST",headers:a,body:JSON.stringify({body:r})});if(!s.ok)throw s.status===404?new Error(" Issue "):s.status===401||s.status===403?new Error("PAT "):new Error(`GitHub API : ${s.status}`);const o=await s.json();if(typeof o.html_url!="string")throw new Error(" html_url ");return{commentUrl:o.html_url}};function we(t,e,n){function r(o,l){if(o._zod||Object.defineProperty(o,"_zod",{value:{def:l,constr:s,traits:new Set},enumerable:!1}),o._zod.traits.has(t))return;o._zod.traits.add(t),e(o,l);const c=s.prototype,u=Object.keys(c);for(let f=0;f<u.length;f++){const p=u[f];p in o||(o[p]=c[p].bind(o))}}const i=(n==null?void 0:n.Parent)??Object;class a extends i{}Object.defineProperty(a,"name",{value:t});function s(o){var l;const c=n!=null&&n.Parent?new a:this;r(c,o),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:o=>{var l,c;return n!=null&&n.Parent&&o instanceof n.Parent?!0:(c=(l=o==null?void 0:o._zod)==null?void 0:l.traits)==null?void 0:c.has(t)}}),Object.defineProperty(s,"name",{value:t}),s}class Xh extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class MJ extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const LJ={};function $u(t){return LJ}function DJ(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function sR(t,e){return typeof e=="bigint"?e.toString():e}function fS(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function X$(t){return t==null}function J$(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function kve(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let i=(r.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(r)){const l=r.match(/\d?e-(\d?)/);l!=null&&l[1]&&(i=Number.parseInt(l[1]))}const a=n>i?n:i,s=Number.parseInt(t.toFixed(a).replace(".","")),o=Number.parseInt(e.toFixed(a).replace(".",""));return s%o/10**a}const K5=Symbol("evaluating");function sn(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==K5)return r===void 0&&(r=K5,r=n()),r},set(i){Object.defineProperty(t,e,{value:i})},configurable:!0})}function yf(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Gu(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function Z5(t){return JSON.stringify(t)}function Nve(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const BJ="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Vy(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const Ive=fS(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function hp(t){if(Vy(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Vy(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function FJ(t){return hp(t)?{...t}:Array.isArray(t)?[...t]:t}const Pve=new Set(["string","number","symbol"]);function pp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ua(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function it(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Rve(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const jve={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function $ve(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=Gu(t._zod.def,{get shape(){const s={};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(s[o]=n.shape[o])}return yf(this,"shape",s),s},checks:[]});return ua(t,a)}function Mve(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=Gu(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete s[o]}return yf(this,"shape",s),s},checks:[]});return ua(t,a)}function Lve(t,e){if(!hp(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const s in e)if(Object.getOwnPropertyDescriptor(a,s)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const i=Gu(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return yf(this,"shape",a),a}});return ua(t,i)}function Dve(t,e){if(!hp(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=Gu(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return yf(this,"shape",r),r}});return ua(t,n)}function Bve(t,e){const n=Gu(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return yf(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return ua(t,n)}function Fve(t,e,n){const i=e._zod.def.checks;if(i&&i.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const s=Gu(e._zod.def,{get shape(){const o=e._zod.def.shape,l={...o};if(n)for(const c in n){if(!(c in o))throw new Error(`Unrecognized key: "${c}"`);n[c]&&(l[c]=t?new t({type:"optional",innerType:o[c]}):o[c])}else for(const c in o)l[c]=t?new t({type:"optional",innerType:o[c]}):o[c];return yf(this,"shape",l),l},checks:[]});return ua(e,s)}function Uve(t,e,n){const r=Gu(e._zod.def,{get shape(){const i=e._zod.def.shape,a={...i};if(n)for(const s in n){if(!(s in a))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(a[s]=new t({type:"nonoptional",innerType:i[s]}))}else for(const s in i)a[s]=new t({type:"nonoptional",innerType:i[s]});return yf(this,"shape",a),a}});return ua(e,r)}function Ph(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Fd(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function z0(t){return typeof t=="string"?t:t==null?void 0:t.message}function Mu(t,e,n){var i,a,s,o,l,c;const r={...t,path:t.path??[]};if(!t.message){const u=z0((s=(a=(i=t.inst)==null?void 0:i._zod.def)==null?void 0:a.error)==null?void 0:s.call(a,t))??z0((o=e==null?void 0:e.error)==null?void 0:o.call(e,t))??z0((l=n.customError)==null?void 0:l.call(n,t))??z0((c=n.localeError)==null?void 0:c.call(n,t))??"Invalid input";r.message=u}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function Y$(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Gy(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const UJ=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,sR,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},zJ=we("$ZodError",UJ),hS=we("$ZodError",UJ,{Parent:Error});function zve(t,e=n=>n.message){const n={},r=[];for(const i of t.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}function qve(t,e=n=>n.message){const n={_errors:[]},r=i=>{for(const a of i.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(s=>r({issues:s}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let s=n,o=0;for(;o<a.path.length;){const l=a.path[o];o===a.path.length-1?(s[l]=s[l]||{_errors:[]},s[l]._errors.push(e(a))):s[l]=s[l]||{_errors:[]},s=s[l],o++}}};return r(t),n}const pS=t=>(e,n,r,i)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},s=e._zod.run({value:n,issues:[]},a);if(s instanceof Promise)throw new Xh;if(s.issues.length){const o=new((i==null?void 0:i.Err)??t)(s.issues.map(l=>Mu(l,a,$u())));throw BJ(o,i==null?void 0:i.callee),o}return s.value},Hve=pS(hS),mS=t=>async(e,n,r,i)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:n,issues:[]},a);if(s instanceof Promise&&(s=await s),s.issues.length){const o=new((i==null?void 0:i.Err)??t)(s.issues.map(l=>Mu(l,a,$u())));throw BJ(o,i==null?void 0:i.callee),o}return s.value},qJ=mS(hS),gS=t=>(e,n,r)=>{const i=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new Xh;return a.issues.length?{success:!1,error:new(t??zJ)(a.issues.map(s=>Mu(s,i,$u())))}:{success:!0,data:a.value}},Wve=gS(hS),yS=t=>async(e,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(s=>Mu(s,i,$u())))}:{success:!0,data:a.value}},Vve=yS(hS),Gve=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return pS(t)(e,n,i)},Kve=t=>(e,n,r)=>pS(t)(e,n,r),Zve=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return mS(t)(e,n,i)},Xve=t=>async(e,n,r)=>mS(t)(e,n,r),Jve=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return gS(t)(e,n,i)},Yve=t=>(e,n,r)=>gS(t)(e,n,r),Qve=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return yS(t)(e,n,i)},ebe=t=>async(e,n,r)=>yS(t)(e,n,r),tbe=/^[cC][^\s-]{8,}$/,nbe=/^[0-9a-z]+$/,rbe=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ibe=/^[0-9a-vA-V]{20}$/,abe=/^[A-Za-z0-9]{27}$/,sbe=/^[a-zA-Z0-9_-]{21}$/,obe=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,lbe=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,X5=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,cbe=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ube="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function dbe(){return new RegExp(ube,"u")}const fbe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,hbe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,pbe=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,mbe=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gbe=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,HJ=/^[A-Za-z0-9_-]*$/,ybe=/^\+[1-9]\d{6,14}$/,WJ="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",vbe=new RegExp(`^${WJ}$`);function VJ(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function bbe(t){return new RegExp(`^${VJ(t)}$`)}function _be(t){const e=VJ({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${WJ}T(?:${r})$`)}const wbe=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},xbe=/^-?\d+$/,GJ=/^-?\d+(?:\.\d+)?$/,Sbe=/^(?:true|false)$/i,Tbe=/^[^A-Z]*$/,Ebe=/^[^a-z]*$/,ma=we("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),KJ={number:"number",bigint:"bigint",object:"date"},ZJ=we("$ZodCheckLessThan",(t,e)=>{ma.init(t,e);const n=KJ[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,a=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<a&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:typeof e.value=="object"?e.value.getTime():e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),XJ=we("$ZodCheckGreaterThan",(t,e)=>{ma.init(t,e);const n=KJ[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,a=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>a&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:typeof e.value=="object"?e.value.getTime():e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Abe=we("$ZodCheckMultipleOf",(t,e)=>{ma.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):kve(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),Obe=we("$ZodCheckNumberFormat",(t,e)=>{var s;ma.init(t,e),e.format=e.format||"float64";const n=(s=e.format)==null?void 0:s.includes("int"),r=n?"int":"number",[i,a]=jve[e.format];t._zod.onattach.push(o=>{const l=o._zod.bag;l.format=e.format,l.minimum=i,l.maximum=a,n&&(l.pattern=xbe)}),t._zod.check=o=>{const l=o.value;if(n){if(!Number.isInteger(l)){o.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:l,inst:t});return}if(!Number.isSafeInteger(l)){l>0?o.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,inclusive:!0,continue:!e.abort}):o.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,inclusive:!0,continue:!e.abort});return}}l<i&&o.issues.push({origin:"number",input:l,code:"too_small",minimum:i,inclusive:!0,inst:t,continue:!e.abort}),l>a&&o.issues.push({origin:"number",input:l,code:"too_big",maximum:a,inclusive:!0,inst:t,continue:!e.abort})}}),Cbe=we("$ZodCheckMaxLength",(t,e)=>{var n;ma.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!X$(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const i=r.value;if(i.length<=e.maximum)return;const s=Y$(i);r.issues.push({origin:s,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),kbe=we("$ZodCheckMinLength",(t,e)=>{var n;ma.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!X$(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const i=r.value;if(i.length>=e.minimum)return;const s=Y$(i);r.issues.push({origin:s,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),Nbe=we("$ZodCheckLengthEquals",(t,e)=>{var n;ma.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!X$(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),t._zod.check=r=>{const i=r.value,a=i.length;if(a===e.length)return;const s=Y$(i),o=a>e.length;r.issues.push({origin:s,...o?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),vS=we("$ZodCheckStringFormat",(t,e)=>{var n,r;ma.init(t,e),t._zod.onattach.push(i=>{const a=i._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),Ibe=we("$ZodCheckRegex",(t,e)=>{vS.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Pbe=we("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=Tbe),vS.init(t,e)}),Rbe=we("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=Ebe),vS.init(t,e)}),jbe=we("$ZodCheckIncludes",(t,e)=>{ma.init(t,e);const n=pp(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(i=>{const a=i._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:t,continue:!e.abort})}}),$be=we("$ZodCheckStartsWith",(t,e)=>{ma.init(t,e);const n=new RegExp(`^${pp(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),Mbe=we("$ZodCheckEndsWith",(t,e)=>{ma.init(t,e);const n=new RegExp(`.*${pp(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),Lbe=we("$ZodCheckOverwrite",(t,e)=>{ma.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class Dbe{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(s=>s),i=Math.min(...r.map(s=>s.length-s.trimStart().length)),a=r.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(const s of a)this.content.push(s)}compile(){const e=Function,n=this==null?void 0:this.args,i=[...((this==null?void 0:this.content)??[""]).map(a=>`  ${a}`)];return new e(...n,i.join(`
`))}}const Bbe={major:4,minor:3,patch:6},Fn=we("$ZodType",(t,e)=>{var i;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=Bbe;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)for(const s of a._zod.onattach)s(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(i=t._zod.deferred)==null||i.push(()=>{t._zod.run=t._zod.parse});else{const a=(o,l,c)=>{let u=Ph(o),f;for(const p of l){if(p._zod.def.when){if(!p._zod.def.when(o))continue}else if(u)continue;const m=o.issues.length,_=p._zod.check(o);if(_ instanceof Promise&&(c==null?void 0:c.async)===!1)throw new Xh;if(f||_ instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await _,o.issues.length!==m&&(u||(u=Ph(o,m)))});else{if(o.issues.length===m)continue;u||(u=Ph(o,m))}}return f?f.then(()=>o):o},s=(o,l,c)=>{if(Ph(o))return o.aborted=!0,o;const u=a(l,r,c);if(u instanceof Promise){if(c.async===!1)throw new Xh;return u.then(f=>t._zod.parse(f,c))}return t._zod.parse(u,c)};t._zod.run=(o,l)=>{if(l.skipChecks)return t._zod.parse(o,l);if(l.direction==="backward"){const u=t._zod.parse({value:o.value,issues:[]},{...l,skipChecks:!0});return u instanceof Promise?u.then(f=>s(f,o,l)):s(u,o,l)}const c=t._zod.parse(o,l);if(c instanceof Promise){if(l.async===!1)throw new Xh;return c.then(u=>a(u,r,l))}return a(c,r,l)}}sn(t,"~standard",()=>({validate:a=>{var s;try{const o=Wve(t,a);return o.success?{value:o.data}:{issues:(s=o.error)==null?void 0:s.issues}}catch{return Vve(t,a).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}))}),Q$=we("$ZodString",(t,e)=>{var n;Fn.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??wbe(t._zod.bag),t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),Vn=we("$ZodStringFormat",(t,e)=>{vS.init(t,e),Q$.init(t,e)}),Fbe=we("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=lbe),Vn.init(t,e)}),Ube=we("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=X5(r))}else e.pattern??(e.pattern=X5());Vn.init(t,e)}),zbe=we("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=cbe),Vn.init(t,e)}),qbe=we("$ZodURL",(t,e)=>{Vn.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),i=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),Hbe=we("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=dbe()),Vn.init(t,e)}),Wbe=we("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=sbe),Vn.init(t,e)}),Vbe=we("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=tbe),Vn.init(t,e)}),Gbe=we("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=nbe),Vn.init(t,e)}),Kbe=we("$ZodULID",(t,e)=>{e.pattern??(e.pattern=rbe),Vn.init(t,e)}),Zbe=we("$ZodXID",(t,e)=>{e.pattern??(e.pattern=ibe),Vn.init(t,e)}),Xbe=we("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=abe),Vn.init(t,e)}),Jbe=we("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=_be(e)),Vn.init(t,e)}),Ybe=we("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=vbe),Vn.init(t,e)}),Qbe=we("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=bbe(e)),Vn.init(t,e)}),e0e=we("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=obe),Vn.init(t,e)}),t0e=we("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=fbe),Vn.init(t,e),t._zod.bag.format="ipv4"}),n0e=we("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=hbe),Vn.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),r0e=we("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=pbe),Vn.init(t,e)}),i0e=we("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=mbe),Vn.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[i,a]=r;if(!a)throw new Error;const s=Number(a);if(`${s}`!==a)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function JJ(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const a0e=we("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=gbe),Vn.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{JJ(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function s0e(t){if(!HJ.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return JJ(n)}const o0e=we("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=HJ),Vn.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{s0e(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),l0e=we("$ZodE164",(t,e)=>{e.pattern??(e.pattern=ybe),Vn.init(t,e)});function c0e(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const u0e=we("$ZodJWT",(t,e)=>{Vn.init(t,e),t._zod.check=n=>{c0e(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),YJ=we("$ZodNumber",(t,e)=>{Fn.init(t,e),t._zod.pattern=t._zod.bag.pattern??GJ,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const a=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:t,...a?{received:a}:{}}),n}}),d0e=we("$ZodNumberFormat",(t,e)=>{Obe.init(t,e),YJ.init(t,e)}),f0e=we("$ZodBoolean",(t,e)=>{Fn.init(t,e),t._zod.pattern=Sbe,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:t}),n}}),h0e=we("$ZodUnknown",(t,e)=>{Fn.init(t,e),t._zod.parse=n=>n}),QJ=we("$ZodNever",(t,e)=>{Fn.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function J5(t,e,n){t.issues.length&&e.issues.push(...Fd(n,t.issues)),e.value[n]=t.value}const p0e=we("$ZodArray",(t,e)=>{Fn.init(t,e),t._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),n;n.value=Array(i.length);const a=[];for(let s=0;s<i.length;s++){const o=i[s],l=e.element._zod.run({value:o,issues:[]},r);l instanceof Promise?a.push(l.then(c=>J5(c,n,s))):J5(l,n,s)}return a.length?Promise.all(a).then(()=>n):n}});function Xw(t,e,n,r,i){if(t.issues.length){if(i&&!(n in r))return;e.issues.push(...Fd(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function eY(t){var r,i,a,s;const e=Object.keys(t.shape);for(const o of e)if(!((s=(a=(i=(r=t.shape)==null?void 0:r[o])==null?void 0:i._zod)==null?void 0:a.traits)!=null&&s.has("$ZodType")))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const n=Rve(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function tY(t,e,n,r,i,a){const s=[],o=i.keySet,l=i.catchall._zod,c=l.def.type,u=l.optout==="optional";for(const f in e){if(o.has(f))continue;if(c==="never"){s.push(f);continue}const p=l.run({value:e[f],issues:[]},r);p instanceof Promise?t.push(p.then(m=>Xw(m,n,f,e,u))):Xw(p,n,f,e,u)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const m0e=we("$ZodObject",(t,e)=>{Fn.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const o=e.shape;Object.defineProperty(e,"shape",{get:()=>{const l={...o};return Object.defineProperty(e,"shape",{value:l}),l}})}const r=fS(()=>eY(e));sn(t._zod,"propValues",()=>{const o=e.shape,l={};for(const c in o){const u=o[c]._zod;if(u.values){l[c]??(l[c]=new Set);for(const f of u.values)l[c].add(f)}}return l});const i=Vy,a=e.catchall;let s;t._zod.parse=(o,l)=>{s??(s=r.value);const c=o.value;if(!i(c))return o.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),o;o.value={};const u=[],f=s.shape;for(const p of s.keys){const m=f[p],_=m._zod.optout==="optional",y=m._zod.run({value:c[p],issues:[]},l);y instanceof Promise?u.push(y.then(b=>Xw(b,o,p,c,_))):Xw(y,o,p,c,_)}return a?tY(u,c,o,l,r.value,t):u.length?Promise.all(u).then(()=>o):o}}),g0e=we("$ZodObjectJIT",(t,e)=>{m0e.init(t,e);const n=t._zod.parse,r=fS(()=>eY(e)),i=p=>{var T;const m=new Dbe(["shape","payload","ctx"]),_=r.value,y=A=>{const E=Z5(A);return`shape[${E}]._zod.run({ value: input[${E}], issues: [] }, ctx)`};m.write("const input = payload.value;");const b=Object.create(null);let x=0;for(const A of _.keys)b[A]=`key_${x++}`;m.write("const newResult = {};");for(const A of _.keys){const E=b[A],C=Z5(A),R=p[A],N=((T=R==null?void 0:R._zod)==null?void 0:T.optout)==="optional";m.write(`const ${E} = ${y(A)};`),N?m.write(`
        if (${E}.issues.length) {
          if (${C} in input) {
            payload.issues = payload.issues.concat(${E}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${C}, ...iss.path] : [${C}]
            })));
          }
        }
        
        if (${E}.value === undefined) {
          if (${C} in input) {
            newResult[${C}] = undefined;
          }
        } else {
          newResult[${C}] = ${E}.value;
        }
        
      `):m.write(`
        if (${E}.issues.length) {
          payload.issues = payload.issues.concat(${E}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${C}, ...iss.path] : [${C}]
          })));
        }
        
        if (${E}.value === undefined) {
          if (${C} in input) {
            newResult[${C}] = undefined;
          }
        } else {
          newResult[${C}] = ${E}.value;
        }
        
      `)}m.write("payload.value = newResult;"),m.write("return payload;");const w=m.compile();return(A,E)=>w(p,A,E)};let a;const s=Vy,o=!LJ.jitless,c=o&&Ive.value,u=e.catchall;let f;t._zod.parse=(p,m)=>{f??(f=r.value);const _=p.value;return s(_)?o&&c&&(m==null?void 0:m.async)===!1&&m.jitless!==!0?(a||(a=i(e.shape)),p=a(p,m),u?tY([],_,p,m,f,t):p):n(p,m):(p.issues.push({expected:"object",code:"invalid_type",input:_,inst:t}),p)}});function Y5(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const i=t.filter(a=>!Ph(a));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(s=>Mu(s,r,$u())))}),e)}const nY=we("$ZodUnion",(t,e)=>{Fn.init(t,e),sn(t._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),sn(t._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),sn(t._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),sn(t._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${i.map(a=>J$(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(i,a)=>{if(n)return r(i,a);let s=!1;const o=[];for(const l of e.options){const c=l._zod.run({value:i.value,issues:[]},a);if(c instanceof Promise)o.push(c),s=!0;else{if(c.issues.length===0)return c;o.push(c)}}return s?Promise.all(o).then(l=>Y5(l,i,t,a)):Y5(o,i,t,a)}}),y0e=we("$ZodDiscriminatedUnion",(t,e)=>{e.inclusive=!1,nY.init(t,e);const n=t._zod.parse;sn(t._zod,"propValues",()=>{const i={};for(const a of e.options){const s=a._zod.propValues;if(!s||Object.keys(s).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(a)}"`);for(const[o,l]of Object.entries(s)){i[o]||(i[o]=new Set);for(const c of l)i[o].add(c)}}return i});const r=fS(()=>{var s;const i=e.options,a=new Map;for(const o of i){const l=(s=o._zod.propValues)==null?void 0:s[e.discriminator];if(!l||l.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(o)}"`);for(const c of l){if(a.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);a.set(c,o)}}return a});t._zod.parse=(i,a)=>{const s=i.value;if(!Vy(s))return i.issues.push({code:"invalid_type",expected:"object",input:s,inst:t}),i;const o=r.value.get(s==null?void 0:s[e.discriminator]);return o?o._zod.run(i,a):e.unionFallback?n(i,a):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:s,path:[e.discriminator],inst:t}),i)}}),v0e=we("$ZodIntersection",(t,e)=>{Fn.init(t,e),t._zod.parse=(n,r)=>{const i=n.value,a=e.left._zod.run({value:i,issues:[]},r),s=e.right._zod.run({value:i,issues:[]},r);return a instanceof Promise||s instanceof Promise?Promise.all([a,s]).then(([l,c])=>Q5(n,l,c)):Q5(n,a,s)}});function oR(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(hp(t)&&hp(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),i={...t,...e};for(const a of r){const s=oR(t[a],e[a]);if(!s.valid)return{valid:!1,mergeErrorPath:[a,...s.mergeErrorPath]};i[a]=s.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const i=t[r],a=e[r],s=oR(i,a);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Q5(t,e,n){const r=new Map;let i;for(const o of e.issues)if(o.code==="unrecognized_keys"){i??(i=o);for(const l of o.keys)r.has(l)||r.set(l,{}),r.get(l).l=!0}else t.issues.push(o);for(const o of n.issues)if(o.code==="unrecognized_keys")for(const l of o.keys)r.has(l)||r.set(l,{}),r.get(l).r=!0;else t.issues.push(o);const a=[...r].filter(([,o])=>o.l&&o.r).map(([o])=>o);if(a.length&&i&&t.issues.push({...i,keys:a}),Ph(t))return t;const s=oR(e.value,n.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return t.value=s.data,t}const b0e=we("$ZodTuple",(t,e)=>{Fn.init(t,e);const n=e.items;t._zod.parse=(r,i)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({input:a,inst:t,expected:"tuple",code:"invalid_type"}),r;r.value=[];const s=[],o=[...n].reverse().findIndex(u=>u._zod.optin!=="optional"),l=o===-1?0:n.length-o;if(!e.rest){const u=a.length>n.length,f=a.length<l-1;if(u||f)return r.issues.push({...u?{code:"too_big",maximum:n.length,inclusive:!0}:{code:"too_small",minimum:n.length},input:a,inst:t,origin:"array"}),r}let c=-1;for(const u of n){if(c++,c>=a.length&&c>=l)continue;const f=u._zod.run({value:a[c],issues:[]},i);f instanceof Promise?s.push(f.then(p=>q0(p,r,c))):q0(f,r,c)}if(e.rest){const u=a.slice(n.length);for(const f of u){c++;const p=e.rest._zod.run({value:f,issues:[]},i);p instanceof Promise?s.push(p.then(m=>q0(m,r,c))):q0(p,r,c)}}return s.length?Promise.all(s).then(()=>r):r}});function q0(t,e,n){t.issues.length&&e.issues.push(...Fd(n,t.issues)),e.value[n]=t.value}const _0e=we("$ZodRecord",(t,e)=>{Fn.init(t,e),t._zod.parse=(n,r)=>{const i=n.value;if(!hp(i))return n.issues.push({expected:"record",code:"invalid_type",input:i,inst:t}),n;const a=[],s=e.keyType._zod.values;if(s){n.value={};const o=new Set;for(const c of s)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){o.add(typeof c=="number"?c.toString():c);const u=e.valueType._zod.run({value:i[c],issues:[]},r);u instanceof Promise?a.push(u.then(f=>{f.issues.length&&n.issues.push(...Fd(c,f.issues)),n.value[c]=f.value})):(u.issues.length&&n.issues.push(...Fd(c,u.issues)),n.value[c]=u.value)}let l;for(const c in i)o.has(c)||(l=l??[],l.push(c));l&&l.length>0&&n.issues.push({code:"unrecognized_keys",input:i,inst:t,keys:l})}else{n.value={};for(const o of Reflect.ownKeys(i)){if(o==="__proto__")continue;let l=e.keyType._zod.run({value:o,issues:[]},r);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof o=="string"&&GJ.test(o)&&l.issues.length){const f=e.keyType._zod.run({value:Number(o),issues:[]},r);if(f instanceof Promise)throw new Error("Async schemas not supported in object keys currently");f.issues.length===0&&(l=f)}if(l.issues.length){e.mode==="loose"?n.value[o]=i[o]:n.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(f=>Mu(f,r,$u())),input:o,path:[o],inst:t});continue}const u=e.valueType._zod.run({value:i[o],issues:[]},r);u instanceof Promise?a.push(u.then(f=>{f.issues.length&&n.issues.push(...Fd(o,f.issues)),n.value[l.value]=f.value})):(u.issues.length&&n.issues.push(...Fd(o,u.issues)),n.value[l.value]=u.value)}}return a.length?Promise.all(a).then(()=>n):n}}),w0e=we("$ZodEnum",(t,e)=>{Fn.init(t,e);const n=DJ(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(i=>Pve.has(typeof i)).map(i=>typeof i=="string"?pp(i):i.toString()).join("|")})$`),t._zod.parse=(i,a)=>{const s=i.value;return r.has(s)||i.issues.push({code:"invalid_value",values:n,input:s,inst:t}),i}}),x0e=we("$ZodLiteral",(t,e)=>{if(Fn.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(e.values);t._zod.values=n,t._zod.pattern=new RegExp(`^(${e.values.map(r=>typeof r=="string"?pp(r):r?pp(r.toString()):String(r)).join("|")})$`),t._zod.parse=(r,i)=>{const a=r.value;return n.has(a)||r.issues.push({code:"invalid_value",values:e.values,input:a,inst:t}),r}}),S0e=we("$ZodTransform",(t,e)=>{Fn.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new MJ(t.constructor.name);const i=e.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(n.value=s,n));if(i instanceof Promise)throw new Xh;return n.value=i,n}});function eB(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const rY=we("$ZodOptional",(t,e)=>{Fn.init(t,e),t._zod.optin="optional",t._zod.optout="optional",sn(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),sn(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${J$(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>eB(a,n.value)):eB(i,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),T0e=we("$ZodExactOptional",(t,e)=>{rY.init(t,e),sn(t._zod,"values",()=>e.innerType._zod.values),sn(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),E0e=we("$ZodNullable",(t,e)=>{Fn.init(t,e),sn(t._zod,"optin",()=>e.innerType._zod.optin),sn(t._zod,"optout",()=>e.innerType._zod.optout),sn(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${J$(n.source)}|null)$`):void 0}),sn(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),A0e=we("$ZodDefault",(t,e)=>{Fn.init(t,e),t._zod.optin="optional",sn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>tB(a,e)):tB(i,e)}});function tB(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const O0e=we("$ZodPrefault",(t,e)=>{Fn.init(t,e),t._zod.optin="optional",sn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),C0e=we("$ZodNonOptional",(t,e)=>{Fn.init(t,e),sn(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>nB(a,t)):nB(i,t)}});function nB(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const k0e=we("$ZodCatch",(t,e)=>{Fn.init(t,e),sn(t._zod,"optin",()=>e.innerType._zod.optin),sn(t._zod,"optout",()=>e.innerType._zod.optout),sn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(s=>Mu(s,r,$u()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(a=>Mu(a,r,$u()))},input:n.value}),n.issues=[]),n)}}),N0e=we("$ZodPipe",(t,e)=>{Fn.init(t,e),sn(t._zod,"values",()=>e.in._zod.values),sn(t._zod,"optin",()=>e.in._zod.optin),sn(t._zod,"optout",()=>e.out._zod.optout),sn(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(s=>H0(s,e.in,r)):H0(a,e.in,r)}const i=e.in._zod.run(n,r);return i instanceof Promise?i.then(a=>H0(a,e.out,r)):H0(i,e.out,r)}});function H0(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const I0e=we("$ZodReadonly",(t,e)=>{Fn.init(t,e),sn(t._zod,"propValues",()=>e.innerType._zod.propValues),sn(t._zod,"values",()=>e.innerType._zod.values),sn(t._zod,"optin",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),sn(t._zod,"optout",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(rB):rB(i)}});function rB(t){return t.value=Object.freeze(t.value),t}const P0e=we("$ZodCustom",(t,e)=>{ma.init(t,e),Fn.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,i=e.fn(r);if(i instanceof Promise)return i.then(a=>iB(a,n,r,t));iB(i,n,r,t)}});function iB(t,e,n,r){if(!t){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(Gy(i))}}var aB;class R0e{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function j0e(){return new R0e}(aB=globalThis).__zod_globalRegistry??(aB.__zod_globalRegistry=j0e());const ks=globalThis.__zod_globalRegistry;function $0e(t,e){return new t({type:"string",...it(e)})}function M0e(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...it(e)})}function sB(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...it(e)})}function L0e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...it(e)})}function D0e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...it(e)})}function B0e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...it(e)})}function F0e(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...it(e)})}function U0e(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...it(e)})}function z0e(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...it(e)})}function q0e(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...it(e)})}function H0e(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...it(e)})}function W0e(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...it(e)})}function V0e(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...it(e)})}function G0e(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...it(e)})}function K0e(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...it(e)})}function Z0e(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...it(e)})}function X0e(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...it(e)})}function J0e(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...it(e)})}function Y0e(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...it(e)})}function Q0e(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...it(e)})}function e_e(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...it(e)})}function t_e(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...it(e)})}function n_e(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...it(e)})}function r_e(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...it(e)})}function i_e(t,e){return new t({type:"string",format:"date",check:"string_format",...it(e)})}function a_e(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...it(e)})}function s_e(t,e){return new t({type:"string",format:"duration",check:"string_format",...it(e)})}function o_e(t,e){return new t({type:"number",checks:[],...it(e)})}function l_e(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...it(e)})}function c_e(t,e){return new t({type:"boolean",...it(e)})}function u_e(t){return new t({type:"unknown"})}function iY(t,e){return new t({type:"never",...it(e)})}function oB(t,e){return new ZJ({check:"less_than",...it(e),value:t,inclusive:!1})}function AA(t,e){return new ZJ({check:"less_than",...it(e),value:t,inclusive:!0})}function lB(t,e){return new XJ({check:"greater_than",...it(e),value:t,inclusive:!1})}function OA(t,e){return new XJ({check:"greater_than",...it(e),value:t,inclusive:!0})}function cB(t,e){return new Abe({check:"multiple_of",...it(e),value:t})}function aY(t,e){return new Cbe({check:"max_length",...it(e),maximum:t})}function Jw(t,e){return new kbe({check:"min_length",...it(e),minimum:t})}function sY(t,e){return new Nbe({check:"length_equals",...it(e),length:t})}function d_e(t,e){return new Ibe({check:"string_format",format:"regex",...it(e),pattern:t})}function f_e(t){return new Pbe({check:"string_format",format:"lowercase",...it(t)})}function h_e(t){return new Rbe({check:"string_format",format:"uppercase",...it(t)})}function p_e(t,e){return new jbe({check:"string_format",format:"includes",...it(e),includes:t})}function m_e(t,e){return new $be({check:"string_format",format:"starts_with",...it(e),prefix:t})}function g_e(t,e){return new Mbe({check:"string_format",format:"ends_with",...it(e),suffix:t})}function fm(t){return new Lbe({check:"overwrite",tx:t})}function y_e(t){return fm(e=>e.normalize(t))}function v_e(){return fm(t=>t.trim())}function b_e(){return fm(t=>t.toLowerCase())}function __e(){return fm(t=>t.toUpperCase())}function w_e(){return fm(t=>Nve(t))}function x_e(t,e,n){return new t({type:"array",element:e,...it(n)})}function S_e(t,e,n){const r=it(n);return r.abort??(r.abort=!0),new t({type:"custom",check:"custom",fn:e,...r})}function T_e(t,e,n){return new t({type:"custom",check:"custom",fn:e,...it(n)})}function E_e(t){const e=A_e(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Gy(r,n.value,e._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),n.issues.push(Gy(i))}},t(n.value,n)));return e}function A_e(t,e){const n=new ma({check:"custom",...it(e)});return n._zod.check=t,n}function Yw(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??ks,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function Nn(t,e,n={path:[],schemaPath:[]}){var u,f;var r;const i=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const s={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,s);const o=(f=(u=t._zod).toJSONSchema)==null?void 0:f.call(u);if(o)s.schema=o;else{const p={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,s.schema,p);else{const _=s.schema,y=e.processors[i.type];if(!y)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${i.type}`);y(t,e,_,p)}const m=t._zod.parent;m&&(s.ref||(s.ref=m),Nn(m,e,p),e.seen.get(m).isParent=!0)}const l=e.metadataRegistry.get(t);return l&&Object.assign(s.schema,l),e.io==="input"&&Ri(t)&&(delete s.schema.examples,delete s.schema.default),e.io==="input"&&s.schema._prefault&&((r=s.schema).default??(r.default=s.schema._prefault)),delete s.schema._prefault,e.seen.get(t).schema}function Qw(t,e){var s,o,l,c;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const u of t.seen.entries()){const f=(s=t.metadataRegistry.get(u[0]))==null?void 0:s.id;if(f){const p=r.get(f);if(p&&p!==u[0])throw new Error(`Duplicate schema id "${f}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(f,u[0])}}const i=u=>{var y;const f=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const b=(y=t.external.registry.get(u[0]))==null?void 0:y.id,x=t.external.uri??(T=>T);if(b)return{ref:x(b)};const w=u[1].defId??u[1].schema.id??`schema${t.counter++}`;return u[1].defId=w,{defId:w,ref:`${x("__shared")}#/${f}/${w}`}}if(u[1]===n)return{ref:"#"};const m=`#/${f}/`,_=u[1].schema.id??`__schema${t.counter++}`;return{defId:_,ref:m+_}},a=u=>{if(u[1].schema.$ref)return;const f=u[1],{ref:p,defId:m}=i(u);f.def={...f.schema},m&&(f.defId=m);const _=f.schema;for(const y in _)delete _[y];_.$ref=p};if(t.cycles==="throw")for(const u of t.seen.entries()){const f=u[1];if(f.cycle)throw new Error(`Cycle detected: #/${(o=f.cycle)==null?void 0:o.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const u of t.seen.entries()){const f=u[1];if(e===u[0]){a(u);continue}if(t.external){const m=(l=t.external.registry.get(u[0]))==null?void 0:l.id;if(e!==u[0]&&m){a(u);continue}}if((c=t.metadataRegistry.get(u[0]))==null?void 0:c.id){a(u);continue}if(f.cycle){a(u);continue}if(f.count>1&&t.reused==="ref"){a(u);continue}}}function ex(t,e){var s,o,l;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=c=>{const u=t.seen.get(c);if(u.ref===null)return;const f=u.def??u.schema,p={...f},m=u.ref;if(u.ref=null,m){r(m);const y=t.seen.get(m),b=y.schema;if(b.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(b)):Object.assign(f,b),Object.assign(f,p),c._zod.parent===m)for(const w in f)w==="$ref"||w==="allOf"||w in p||delete f[w];if(b.$ref&&y.def)for(const w in f)w==="$ref"||w==="allOf"||w in y.def&&JSON.stringify(f[w])===JSON.stringify(y.def[w])&&delete f[w]}const _=c._zod.parent;if(_&&_!==m){r(_);const y=t.seen.get(_);if(y!=null&&y.schema.$ref&&(f.$ref=y.schema.$ref,y.def))for(const b in f)b==="$ref"||b==="allOf"||b in y.def&&JSON.stringify(f[b])===JSON.stringify(y.def[b])&&delete f[b]}t.override({zodSchema:c,jsonSchema:f,path:u.path??[]})};for(const c of[...t.seen.entries()].reverse())r(c[0]);const i={};if(t.target==="draft-2020-12"?i.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?i.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?i.$schema="http://json-schema.org/draft-04/schema#":t.target,(s=t.external)!=null&&s.uri){const c=(o=t.external.registry.get(e))==null?void 0:o.id;if(!c)throw new Error("Schema is missing an `id` property");i.$id=t.external.uri(c)}Object.assign(i,n.def??n.schema);const a=((l=t.external)==null?void 0:l.defs)??{};for(const c of t.seen.entries()){const u=c[1];u.def&&u.defId&&(a[u.defId]=u.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?i.$defs=a:i.definitions=a);try{const c=JSON.parse(JSON.stringify(i));return Object.defineProperty(c,"~standard",{value:{...e["~standard"],jsonSchema:{input:tx(e,"input",t.processors),output:tx(e,"output",t.processors)}},enumerable:!1,writable:!1}),c}catch{throw new Error("Error converting schema to JSON.")}}function Ri(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Ri(r.element,n);if(r.type==="set")return Ri(r.valueType,n);if(r.type==="lazy")return Ri(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Ri(r.innerType,n);if(r.type==="intersection")return Ri(r.left,n)||Ri(r.right,n);if(r.type==="record"||r.type==="map")return Ri(r.keyType,n)||Ri(r.valueType,n);if(r.type==="pipe")return Ri(r.in,n)||Ri(r.out,n);if(r.type==="object"){for(const i in r.shape)if(Ri(r.shape[i],n))return!0;return!1}if(r.type==="union"){for(const i of r.options)if(Ri(i,n))return!0;return!1}if(r.type==="tuple"){for(const i of r.items)if(Ri(i,n))return!0;return!!(r.rest&&Ri(r.rest,n))}return!1}const O_e=(t,e={})=>n=>{const r=Yw({...n,processors:e});return Nn(t,r),Qw(r,t),ex(r,t)},tx=(t,e,n={})=>r=>{const{libraryOptions:i,target:a}=r??{},s=Yw({...i??{},target:a,io:e,processors:n});return Nn(t,s),Qw(s,t),ex(s,t)},C_e={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},oY=(t,e,n,r)=>{const i=n;i.type="string";const{minimum:a,maximum:s,format:o,patterns:l,contentEncoding:c}=t._zod.bag;if(typeof a=="number"&&(i.minLength=a),typeof s=="number"&&(i.maxLength=s),o&&(i.format=C_e[o]??o,i.format===""&&delete i.format,o==="time"&&delete i.format),c&&(i.contentEncoding=c),l&&l.size>0){const u=[...l];u.length===1?i.pattern=u[0].source:u.length>1&&(i.allOf=[...u.map(f=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:f.source}))])}},lY=(t,e,n,r)=>{const i=n,{minimum:a,maximum:s,format:o,multipleOf:l,exclusiveMaximum:c,exclusiveMinimum:u}=t._zod.bag;typeof o=="string"&&o.includes("int")?i.type="integer":i.type="number",typeof u=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(i.minimum=u,i.exclusiveMinimum=!0):i.exclusiveMinimum=u),typeof a=="number"&&(i.minimum=a,typeof u=="number"&&e.target!=="draft-04"&&(u>=a?delete i.minimum:delete i.exclusiveMinimum)),typeof c=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(i.maximum=c,i.exclusiveMaximum=!0):i.exclusiveMaximum=c),typeof s=="number"&&(i.maximum=s,typeof c=="number"&&e.target!=="draft-04"&&(c<=s?delete i.maximum:delete i.exclusiveMaximum)),typeof l=="number"&&(i.multipleOf=l)},cY=(t,e,n,r)=>{n.type="boolean"},k_e=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},N_e=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},I_e=(t,e,n,r)=>{e.target==="openapi-3.0"?(n.type="string",n.nullable=!0,n.enum=[null]):n.type="null"},P_e=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},R_e=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},uY=(t,e,n,r)=>{n.not={}},j_e=(t,e,n,r)=>{},dY=(t,e,n,r)=>{},$_e=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},fY=(t,e,n,r)=>{const i=t._zod.def,a=DJ(i.entries);a.every(s=>typeof s=="number")&&(n.type="number"),a.every(s=>typeof s=="string")&&(n.type="string"),n.enum=a},hY=(t,e,n,r)=>{const i=t._zod.def,a=[];for(const s of i.values)if(s===void 0){if(e.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof s=="bigint"){if(e.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");a.push(Number(s))}else a.push(s);if(a.length!==0)if(a.length===1){const s=a[0];n.type=s===null?"null":typeof s,e.target==="draft-04"||e.target==="openapi-3.0"?n.enum=[s]:n.const=s}else a.every(s=>typeof s=="number")&&(n.type="number"),a.every(s=>typeof s=="string")&&(n.type="string"),a.every(s=>typeof s=="boolean")&&(n.type="boolean"),a.every(s=>s===null)&&(n.type="null"),n.enum=a},M_e=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},L_e=(t,e,n,r)=>{const i=n,a=t._zod.pattern;if(!a)throw new Error("Pattern not found in template literal");i.type="string",i.pattern=a.source},D_e=(t,e,n,r)=>{const i=n,a={type:"string",format:"binary",contentEncoding:"binary"},{minimum:s,maximum:o,mime:l}=t._zod.bag;s!==void 0&&(a.minLength=s),o!==void 0&&(a.maxLength=o),l?l.length===1?(a.contentMediaType=l[0],Object.assign(i,a)):(Object.assign(i,a),i.anyOf=l.map(c=>({contentMediaType:c}))):Object.assign(i,a)},B_e=(t,e,n,r)=>{n.type="boolean"},pY=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},F_e=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},mY=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},U_e=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},z_e=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},gY=(t,e,n,r)=>{const i=n,a=t._zod.def,{minimum:s,maximum:o}=t._zod.bag;typeof s=="number"&&(i.minItems=s),typeof o=="number"&&(i.maxItems=o),i.type="array",i.items=Nn(a.element,e,{...r,path:[...r.path,"items"]})},yY=(t,e,n,r)=>{var c;const i=n,a=t._zod.def;i.type="object",i.properties={};const s=a.shape;for(const u in s)i.properties[u]=Nn(s[u],e,{...r,path:[...r.path,"properties",u]});const o=new Set(Object.keys(s)),l=new Set([...o].filter(u=>{const f=a.shape[u]._zod;return e.io==="input"?f.optin===void 0:f.optout===void 0}));l.size>0&&(i.required=Array.from(l)),((c=a.catchall)==null?void 0:c._zod.def.type)==="never"?i.additionalProperties=!1:a.catchall?a.catchall&&(i.additionalProperties=Nn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(i.additionalProperties=!1)},vY=(t,e,n,r)=>{const i=t._zod.def,a=i.inclusive===!1,s=i.options.map((o,l)=>Nn(o,e,{...r,path:[...r.path,a?"oneOf":"anyOf",l]}));a?n.oneOf=s:n.anyOf=s},bY=(t,e,n,r)=>{const i=t._zod.def,a=Nn(i.left,e,{...r,path:[...r.path,"allOf",0]}),s=Nn(i.right,e,{...r,path:[...r.path,"allOf",1]}),o=c=>"allOf"in c&&Object.keys(c).length===1,l=[...o(a)?a.allOf:[a],...o(s)?s.allOf:[s]];n.allOf=l},_Y=(t,e,n,r)=>{const i=n,a=t._zod.def;i.type="array";const s=e.target==="draft-2020-12"?"prefixItems":"items",o=e.target==="draft-2020-12"||e.target==="openapi-3.0"?"items":"additionalItems",l=a.items.map((p,m)=>Nn(p,e,{...r,path:[...r.path,s,m]})),c=a.rest?Nn(a.rest,e,{...r,path:[...r.path,o,...e.target==="openapi-3.0"?[a.items.length]:[]]}):null;e.target==="draft-2020-12"?(i.prefixItems=l,c&&(i.items=c)):e.target==="openapi-3.0"?(i.items={anyOf:l},c&&i.items.anyOf.push(c),i.minItems=l.length,c||(i.maxItems=l.length)):(i.items=l,c&&(i.additionalItems=c));const{minimum:u,maximum:f}=t._zod.bag;typeof u=="number"&&(i.minItems=u),typeof f=="number"&&(i.maxItems=f)},wY=(t,e,n,r)=>{const i=n,a=t._zod.def;i.type="object";const s=a.keyType,o=s._zod.bag,l=o==null?void 0:o.patterns;if(a.mode==="loose"&&l&&l.size>0){const u=Nn(a.valueType,e,{...r,path:[...r.path,"patternProperties","*"]});i.patternProperties={};for(const f of l)i.patternProperties[f.source]=u}else(e.target==="draft-07"||e.target==="draft-2020-12")&&(i.propertyNames=Nn(a.keyType,e,{...r,path:[...r.path,"propertyNames"]})),i.additionalProperties=Nn(a.valueType,e,{...r,path:[...r.path,"additionalProperties"]});const c=s._zod.values;if(c){const u=[...c].filter(f=>typeof f=="string"||typeof f=="number");u.length>0&&(i.required=u)}},xY=(t,e,n,r)=>{const i=t._zod.def,a=Nn(i.innerType,e,r),s=e.seen.get(t);e.target==="openapi-3.0"?(s.ref=i.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},SY=(t,e,n,r)=>{const i=t._zod.def;Nn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType},TY=(t,e,n,r)=>{const i=t._zod.def;Nn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType,n.default=JSON.parse(JSON.stringify(i.defaultValue))},EY=(t,e,n,r)=>{const i=t._zod.def;Nn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(i.defaultValue)))},AY=(t,e,n,r)=>{const i=t._zod.def;Nn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType;let s;try{s=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=s},OY=(t,e,n,r)=>{const i=t._zod.def,a=e.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;Nn(a,e,r);const s=e.seen.get(t);s.ref=a},CY=(t,e,n,r)=>{const i=t._zod.def;Nn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType,n.readOnly=!0},q_e=(t,e,n,r)=>{const i=t._zod.def;Nn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType},eM=(t,e,n,r)=>{const i=t._zod.def;Nn(i.innerType,e,r);const a=e.seen.get(t);a.ref=i.innerType},H_e=(t,e,n,r)=>{const i=t._zod.innerType;Nn(i,e,r);const a=e.seen.get(t);a.ref=i},uB={string:oY,number:lY,boolean:cY,bigint:k_e,symbol:N_e,null:I_e,undefined:P_e,void:R_e,never:uY,any:j_e,unknown:dY,date:$_e,enum:fY,literal:hY,nan:M_e,template_literal:L_e,file:D_e,success:B_e,custom:pY,function:F_e,transform:mY,map:U_e,set:z_e,array:gY,object:yY,union:vY,intersection:bY,tuple:_Y,record:wY,nullable:xY,nonoptional:SY,default:TY,prefault:EY,catch:AY,pipe:OY,readonly:CY,promise:q_e,optional:eM,lazy:H_e};function lR(t,e){if("_idmap"in t){const r=t,i=Yw({...e,processors:uB}),a={};for(const l of r._idmap.entries()){const[c,u]=l;Nn(u,i)}const s={},o={registry:r,uri:e==null?void 0:e.uri,defs:a};i.external=o;for(const l of r._idmap.entries()){const[c,u]=l;Qw(i,u),s[c]=ex(i,u)}if(Object.keys(a).length>0){const l=i.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[l]:a}}return{schemas:s}}const n=Yw({...e,processors:uB});return Nn(t,n),Qw(n,t),ex(n,t)}const W_e=we("ZodISODateTime",(t,e)=>{Jbe.init(t,e),Xn.init(t,e)});function V_e(t){return r_e(W_e,t)}const G_e=we("ZodISODate",(t,e)=>{Ybe.init(t,e),Xn.init(t,e)});function K_e(t){return i_e(G_e,t)}const Z_e=we("ZodISOTime",(t,e)=>{Qbe.init(t,e),Xn.init(t,e)});function X_e(t){return a_e(Z_e,t)}const J_e=we("ZodISODuration",(t,e)=>{e0e.init(t,e),Xn.init(t,e)});function Y_e(t){return s_e(J_e,t)}const Q_e=(t,e)=>{zJ.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>qve(t,n)},flatten:{value:n=>zve(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,sR,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,sR,2)}},isEmpty:{get(){return t.issues.length===0}}})},Ls=we("ZodError",Q_e,{Parent:Error}),ewe=pS(Ls),twe=mS(Ls),nwe=gS(Ls),rwe=yS(Ls),iwe=Gve(Ls),awe=Kve(Ls),swe=Zve(Ls),owe=Xve(Ls),lwe=Jve(Ls),cwe=Yve(Ls),uwe=Qve(Ls),dwe=ebe(Ls),Gn=we("ZodType",(t,e)=>(Fn.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:tx(t,"input"),output:tx(t,"output")}}),t.toJSONSchema=O_e(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Gu(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>ua(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>ewe(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>nwe(t,n,r),t.parseAsync=async(n,r)=>twe(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>rwe(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>iwe(t,n,r),t.decode=(n,r)=>awe(t,n,r),t.encodeAsync=async(n,r)=>swe(t,n,r),t.decodeAsync=async(n,r)=>owe(t,n,r),t.safeEncode=(n,r)=>lwe(t,n,r),t.safeDecode=(n,r)=>cwe(t,n,r),t.safeEncodeAsync=async(n,r)=>uwe(t,n,r),t.safeDecodeAsync=async(n,r)=>dwe(t,n,r),t.refine=(n,r)=>t.check(oxe(n,r)),t.superRefine=n=>t.check(lxe(n)),t.overwrite=n=>t.check(fm(n)),t.optional=()=>hB(t),t.exactOptional=()=>Kwe(t),t.nullable=()=>pB(t),t.nullish=()=>hB(pB(t)),t.nonoptional=n=>exe(t,n),t.array=()=>sf(t),t.or=n=>db([t,n]),t.and=n=>Fwe(t,n),t.transform=n=>mB(t,Vwe(n)),t.default=n=>Jwe(t,n),t.prefault=n=>Qwe(t,n),t.catch=n=>nxe(t,n),t.pipe=n=>mB(t,n),t.readonly=()=>axe(t),t.describe=n=>{const r=t.clone();return ks.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=ks.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return ks.get(t);const r=t.clone();return ks.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),kY=we("_ZodString",(t,e)=>{Q$.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(r,i,a)=>oY(t,r,i);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(d_e(...r)),t.includes=(...r)=>t.check(p_e(...r)),t.startsWith=(...r)=>t.check(m_e(...r)),t.endsWith=(...r)=>t.check(g_e(...r)),t.min=(...r)=>t.check(Jw(...r)),t.max=(...r)=>t.check(aY(...r)),t.length=(...r)=>t.check(sY(...r)),t.nonempty=(...r)=>t.check(Jw(1,...r)),t.lowercase=r=>t.check(f_e(r)),t.uppercase=r=>t.check(h_e(r)),t.trim=()=>t.check(v_e()),t.normalize=(...r)=>t.check(y_e(...r)),t.toLowerCase=()=>t.check(b_e()),t.toUpperCase=()=>t.check(__e()),t.slugify=()=>t.check(w_e())}),fwe=we("ZodString",(t,e)=>{Q$.init(t,e),kY.init(t,e),t.email=n=>t.check(M0e(hwe,n)),t.url=n=>t.check(U0e(pwe,n)),t.jwt=n=>t.check(n_e(kwe,n)),t.emoji=n=>t.check(z0e(mwe,n)),t.guid=n=>t.check(sB(dB,n)),t.uuid=n=>t.check(L0e(W0,n)),t.uuidv4=n=>t.check(D0e(W0,n)),t.uuidv6=n=>t.check(B0e(W0,n)),t.uuidv7=n=>t.check(F0e(W0,n)),t.nanoid=n=>t.check(q0e(gwe,n)),t.guid=n=>t.check(sB(dB,n)),t.cuid=n=>t.check(H0e(ywe,n)),t.cuid2=n=>t.check(W0e(vwe,n)),t.ulid=n=>t.check(V0e(bwe,n)),t.base64=n=>t.check(Q0e(Awe,n)),t.base64url=n=>t.check(e_e(Owe,n)),t.xid=n=>t.check(G0e(_we,n)),t.ksuid=n=>t.check(K0e(wwe,n)),t.ipv4=n=>t.check(Z0e(xwe,n)),t.ipv6=n=>t.check(X0e(Swe,n)),t.cidrv4=n=>t.check(J0e(Twe,n)),t.cidrv6=n=>t.check(Y0e(Ewe,n)),t.e164=n=>t.check(t_e(Cwe,n)),t.datetime=n=>t.check(V_e(n)),t.date=n=>t.check(K_e(n)),t.time=n=>t.check(X_e(n)),t.duration=n=>t.check(Y_e(n))});function Lt(t){return $0e(fwe,t)}const Xn=we("ZodStringFormat",(t,e)=>{Vn.init(t,e),kY.init(t,e)}),hwe=we("ZodEmail",(t,e)=>{zbe.init(t,e),Xn.init(t,e)}),dB=we("ZodGUID",(t,e)=>{Fbe.init(t,e),Xn.init(t,e)}),W0=we("ZodUUID",(t,e)=>{Ube.init(t,e),Xn.init(t,e)}),pwe=we("ZodURL",(t,e)=>{qbe.init(t,e),Xn.init(t,e)}),mwe=we("ZodEmoji",(t,e)=>{Hbe.init(t,e),Xn.init(t,e)}),gwe=we("ZodNanoID",(t,e)=>{Wbe.init(t,e),Xn.init(t,e)}),ywe=we("ZodCUID",(t,e)=>{Vbe.init(t,e),Xn.init(t,e)}),vwe=we("ZodCUID2",(t,e)=>{Gbe.init(t,e),Xn.init(t,e)}),bwe=we("ZodULID",(t,e)=>{Kbe.init(t,e),Xn.init(t,e)}),_we=we("ZodXID",(t,e)=>{Zbe.init(t,e),Xn.init(t,e)}),wwe=we("ZodKSUID",(t,e)=>{Xbe.init(t,e),Xn.init(t,e)}),xwe=we("ZodIPv4",(t,e)=>{t0e.init(t,e),Xn.init(t,e)}),Swe=we("ZodIPv6",(t,e)=>{n0e.init(t,e),Xn.init(t,e)}),Twe=we("ZodCIDRv4",(t,e)=>{r0e.init(t,e),Xn.init(t,e)}),Ewe=we("ZodCIDRv6",(t,e)=>{i0e.init(t,e),Xn.init(t,e)}),Awe=we("ZodBase64",(t,e)=>{a0e.init(t,e),Xn.init(t,e)}),Owe=we("ZodBase64URL",(t,e)=>{o0e.init(t,e),Xn.init(t,e)}),Cwe=we("ZodE164",(t,e)=>{l0e.init(t,e),Xn.init(t,e)}),kwe=we("ZodJWT",(t,e)=>{u0e.init(t,e),Xn.init(t,e)}),NY=we("ZodNumber",(t,e)=>{YJ.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(r,i,a)=>lY(t,r,i),t.gt=(r,i)=>t.check(lB(r,i)),t.gte=(r,i)=>t.check(OA(r,i)),t.min=(r,i)=>t.check(OA(r,i)),t.lt=(r,i)=>t.check(oB(r,i)),t.lte=(r,i)=>t.check(AA(r,i)),t.max=(r,i)=>t.check(AA(r,i)),t.int=r=>t.check(fB(r)),t.safe=r=>t.check(fB(r)),t.positive=r=>t.check(lB(0,r)),t.nonnegative=r=>t.check(OA(0,r)),t.negative=r=>t.check(oB(0,r)),t.nonpositive=r=>t.check(AA(0,r)),t.multipleOf=(r,i)=>t.check(cB(r,i)),t.step=(r,i)=>t.check(cB(r,i)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function fn(t){return o_e(NY,t)}const Nwe=we("ZodNumberFormat",(t,e)=>{d0e.init(t,e),NY.init(t,e)});function fB(t){return l_e(Nwe,t)}const Iwe=we("ZodBoolean",(t,e)=>{f0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>cY(t,n,r)});function Pwe(t){return c_e(Iwe,t)}const Rwe=we("ZodUnknown",(t,e)=>{h0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>dY()});function nx(){return u_e(Rwe)}const jwe=we("ZodNever",(t,e)=>{QJ.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>uY(t,n,r)});function $we(t){return iY(jwe,t)}const Mwe=we("ZodArray",(t,e)=>{p0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>gY(t,n,r,i),t.element=e.element,t.min=(n,r)=>t.check(Jw(n,r)),t.nonempty=n=>t.check(Jw(1,n)),t.max=(n,r)=>t.check(aY(n,r)),t.length=(n,r)=>t.check(sY(n,r)),t.unwrap=()=>t.element});function sf(t,e){return x_e(Mwe,t,e)}const Lwe=we("ZodObject",(t,e)=>{g0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>yY(t,n,r,i),sn(t,"shape",()=>e.shape),t.keyof=()=>_S(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:nx()}),t.loose=()=>t.clone({...t._zod.def,catchall:nx()}),t.strict=()=>t.clone({...t._zod.def,catchall:$we()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>Lve(t,n),t.safeExtend=n=>Dve(t,n),t.merge=n=>Bve(t,n),t.pick=n=>$ve(t,n),t.omit=n=>Mve(t,n),t.partial=(...n)=>Fve(PY,t,n[0]),t.required=(...n)=>Uve(RY,t,n[0])});function St(t,e){const n={type:"object",shape:t??{},...it(e)};return new Lwe(n)}const IY=we("ZodUnion",(t,e)=>{nY.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>vY(t,n,r,i),t.options=e.options});function db(t,e){return new IY({type:"union",options:t,...it(e)})}const Dwe=we("ZodDiscriminatedUnion",(t,e)=>{IY.init(t,e),y0e.init(t,e)});function bS(t,e,n){return new Dwe({type:"union",options:e,discriminator:t,...it(n)})}const Bwe=we("ZodIntersection",(t,e)=>{v0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>bY(t,n,r,i)});function Fwe(t,e){return new Bwe({type:"intersection",left:t,right:e})}const Uwe=we("ZodTuple",(t,e)=>{b0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>_Y(t,n,r,i),t.rest=n=>t.clone({...t._zod.def,rest:n})});function tM(t,e,n){const r=e instanceof Fn,i=r?n:e,a=r?e:null;return new Uwe({type:"tuple",items:t,rest:a,...it(i)})}const zwe=we("ZodRecord",(t,e)=>{_0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>wY(t,n,r,i),t.keyType=e.keyType,t.valueType=e.valueType});function qwe(t,e,n){return new zwe({type:"record",keyType:t,valueType:e,...it(n)})}const cR=we("ZodEnum",(t,e)=>{w0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(r,i,a)=>fY(t,r,i),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,i)=>{const a={};for(const s of r)if(n.has(s))a[s]=e.entries[s];else throw new Error(`Key ${s} not found in enum`);return new cR({...e,checks:[],...it(i),entries:a})},t.exclude=(r,i)=>{const a={...e.entries};for(const s of r)if(n.has(s))delete a[s];else throw new Error(`Key ${s} not found in enum`);return new cR({...e,checks:[],...it(i),entries:a})}});function _S(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new cR({type:"enum",entries:n,...it(e)})}const Hwe=we("ZodLiteral",(t,e)=>{x0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>hY(t,n,r),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function $t(t,e){return new Hwe({type:"literal",values:Array.isArray(t)?t:[t],...it(e)})}const Wwe=we("ZodTransform",(t,e)=>{S0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>mY(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new MJ(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Gy(a,n.value,e));else{const s=a;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),n.issues.push(Gy(s))}};const i=e.transform(n.value,n);return i instanceof Promise?i.then(a=>(n.value=a,n)):(n.value=i,n)}});function Vwe(t){return new Wwe({type:"transform",transform:t})}const PY=we("ZodOptional",(t,e)=>{rY.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>eM(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function hB(t){return new PY({type:"optional",innerType:t})}const Gwe=we("ZodExactOptional",(t,e)=>{T0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>eM(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function Kwe(t){return new Gwe({type:"optional",innerType:t})}const Zwe=we("ZodNullable",(t,e)=>{E0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>xY(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function pB(t){return new Zwe({type:"nullable",innerType:t})}const Xwe=we("ZodDefault",(t,e)=>{A0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>TY(t,n,r,i),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function Jwe(t,e){return new Xwe({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():FJ(e)}})}const Ywe=we("ZodPrefault",(t,e)=>{O0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>EY(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function Qwe(t,e){return new Ywe({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():FJ(e)}})}const RY=we("ZodNonOptional",(t,e)=>{C0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>SY(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function exe(t,e){return new RY({type:"nonoptional",innerType:t,...it(e)})}const txe=we("ZodCatch",(t,e)=>{k0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>AY(t,n,r,i),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function nxe(t,e){return new txe({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const rxe=we("ZodPipe",(t,e)=>{N0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>OY(t,n,r,i),t.in=e.in,t.out=e.out});function mB(t,e){return new rxe({type:"pipe",in:t,out:e})}const ixe=we("ZodReadonly",(t,e)=>{I0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>CY(t,n,r,i),t.unwrap=()=>t._zod.def.innerType});function axe(t){return new ixe({type:"readonly",innerType:t})}const jY=we("ZodCustom",(t,e)=>{P0e.init(t,e),Gn.init(t,e),t._zod.processJSONSchema=(n,r,i)=>pY(t,n)});function sxe(t,e){return S_e(jY,(()=>!0),e)}function oxe(t,e={}){return T_e(jY,t,e)}function lxe(t){return E_e(t)}const cxe=Lt().min(1,"owner ").max(39,"owner 39").refine(t=>/^[a-zA-Z0-9-]+$/.test(t),"owner ").refine(t=>!t.startsWith("-")&&!t.endsWith("-"),"owner "),uxe=Lt().min(1,"repo ").max(100,"repo 100").regex(/^[a-zA-Z0-9_.-]+$/,"repo "),dxe=fn().int("Issue ").min(1,"Issue 1").max(999999,"Issue : 999999");function $Y(t){var o,l;const e=t.trim(),n=e.indexOf("/");if(n===-1||e.indexOf("/",n+1)!==-1)return{error:'Owner/Repo  "owner/repo" '};const r=e.slice(0,n),i=e.slice(n+1),a=cxe.safeParse(r);if(!a.success)return{error:((o=a.error.issues[0])==null?void 0:o.message)??"owner "};const s=uxe.safeParse(i);return s.success?{owner:a.data,repo:s.data}:{error:((l=s.error.issues[0])==null?void 0:l.message)??"repo "}}function MY(t){var i;const e=t.trim();if(!e)return{error:"Issue "};const n=Number.parseInt(e,10);if(!Number.isFinite(n)||String(n)!==e)return{error:"Issue "};const r=dxe.safeParse(n);return r.success?{value:r.data}:{error:((i=r.error.issues[0])==null?void 0:i.message)??"Issue "}}const LY=Lt().min(1,"").max(200,"200").regex(/^[^\x00-\x1f\x7f]*$/,""),DY=({timeLogId:t})=>{const{getLinks:e,addLink:n,removeLink:r,githubPat:i}=dm(),a=e(t),[s,o]=k.useState(!1),[l,c]=k.useState(!1),[u,f]=k.useState(""),[p,m]=k.useState(""),[_,y]=k.useState(""),[b,x]=k.useState(""),[w,T]=k.useState(!1),A=async()=>{x("");const C=$Y(u);if("error"in C){x(C.error);return}const R=MY(p);if("error"in R){x(R.error);return}const{owner:N,repo:D}=C,Z=R.value;let j=_.trim()||void 0,L=`https://github.com/${N}/${D}/issues/${Z}`;if(!j){T(!0);try{const B=await Z$({owner:N,repo:D,issueNumber:Z,pat:i??void 0});j=B.title,L=B.issueUrl}catch(B){x(B instanceof Error?B.message:"Issue ");return}finally{T(!1)}}n(t,{owner:N,repo:D,issueNumber:Z,issueTitle:j,issueUrl:L}),f(""),m(""),y(""),c(!1),o(!0)},E=()=>{f(""),m(""),y(""),x(""),c(!1)};return g.jsxs("div",{className:"mt-3 pt-3 space-y-2",children:[g.jsxs("button",{type:"button",onClick:()=>o(C=>!C),className:"flex items-center gap-1.5 text-xs text-muted-foreground hover:text-foreground w-full text-left","aria-expanded":s,children:[g.jsx(V$,{className:"w-3.5 h-3.5"}),g.jsx("span",{children:"GitHub Issue "}),a.length>0&&g.jsx(ir,{variant:"secondary",className:"text-xs px-1.5 py-0 h-4",children:a.length}),s?g.jsx(q$,{className:"w-3 h-3 ml-auto"}):g.jsx(sS,{className:"w-3 h-3 ml-auto"})]}),s&&g.jsxs("div",{className:"space-y-2",children:[!i&&g.jsx("p",{className:"text-xs text-muted-foreground",children:" GitHub PAT "}),a.length>0&&g.jsx("ul",{className:"space-y-1",children:a.map(C=>g.jsxs("li",{className:"flex min-w-0 items-start gap-2 text-xs",children:[g.jsx(Age,{className:"w-3 h-3 text-muted-foreground shrink-0"}),g.jsxs("a",{href:C.issueUrl,target:"_blank",rel:"noopener noreferrer",className:"min-w-0 flex-1 break-all text-blue-600 hover:underline",children:[C.owner,"/",C.repo," #",C.issueNumber,C.issueTitle&&g.jsxs("span",{className:"text-muted-foreground ml-1",children:[" ",C.issueTitle]})]}),g.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>r(t,C.id),className:"h-5 w-5 p-0 text-muted-foreground hover:text-destructive shrink-0","aria-label":`${C.owner}/${C.repo} #${C.issueNumber} `,children:g.jsx(No,{className:"w-3 h-3"})})]},C.id))}),l?g.jsxs("div",{className:"space-y-2 p-2 bg-muted rounded-md",children:[g.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx(at,{htmlFor:`owner-repo-${t}`,className:"text-xs",children:"Owner/Repo"}),g.jsx(Bn,{id:`owner-repo-${t}`,placeholder:"owner/repo",value:u,onChange:C=>f(C.target.value),className:"h-7 text-xs",maxLength:141})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx(at,{htmlFor:`issue-num-${t}`,className:"text-xs",children:"Issue #"}),g.jsx(Bn,{id:`issue-num-${t}`,placeholder:"36",value:p,onChange:C=>m(C.target.value),type:"number",min:"1",max:"999999",className:"h-7 text-xs"})]})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx(at,{htmlFor:`issue-title-${t}`,className:"text-xs",children:"Issue "}),g.jsx(Bn,{id:`issue-title-${t}`,placeholder:"Issue ",value:_,onChange:C=>y(C.target.value),className:"h-7 text-xs"})]}),b&&g.jsx("p",{className:"text-xs text-destructive",children:b}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Se,{size:"sm",onClick:A,className:"h-6 text-xs px-2",children:w?"...":""}),g.jsx(Se,{size:"sm",variant:"ghost",onClick:E,className:"h-6 text-xs px-2",disabled:w,children:""})]})]}):g.jsxs(Se,{variant:"ghost",size:"sm",onClick:()=>c(!0),className:"h-6 text-xs px-2 text-muted-foreground hover:text-foreground",disabled:w,children:[g.jsx(sb,{className:"w-3 h-3 mr-1"}),"GitHub Issue "]})]})]})},fxe=(t,e)=>{const n=new Map;for(const r of t){const i=e[r.id]??[];if(i.length===0)continue;const a=new Set(i.map(s=>s.issueUrl));for(const s of a){const o=i.find(u=>u.issueUrl===s);if(!o)continue;const l=`${o.owner}/${o.repo} #${o.issueNumber}`,c=n.get(s);c?(c.totalActualDuration+=r.actualDuration,c.sessionCount+=1):n.set(s,{issueUrl:s,issueTitle:o.issueTitle||l,totalActualDuration:r.actualDuration,sessionCount:1})}}return Array.from(n.values()).sort((r,i)=>i.totalActualDuration!==r.totalActualDuration?i.totalActualDuration-r.totalActualDuration:i.sessionCount-r.sessionCount)},Jh=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}:${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},hxe=t=>new Intl.DateTimeFormat("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t),pxe=({entry:t,onDelete:e})=>{const n=t.duration>0?t.actualDuration/t.duration*100:0,r=t.actualDuration>t.duration;return g.jsx(Mt,{className:"relative",children:g.jsx(Vt,{className:"p-4",children:g.jsxs("div",{className:"flex items-start justify-between gap-3",children:[g.jsxs("div",{className:"flex-1 space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[t.completed?g.jsx(Hy,{className:`w-4 h-4 ${dt.completed.color}`}):g.jsx(Ege,{className:`w-4 h-4 ${dt.paused.color}`}),g.jsx("span",{className:"font-medium text-sm",children:t.label}),g.jsx(ir,{variant:t.completed?"secondary":"outline",className:"text-xs",children:t.completed?"":""})]}),g.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm sm:grid-cols-2 sm:gap-4",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-muted-foreground text-xs",children:""}),g.jsx("div",{className:"font-mono",children:Jh(t.duration)})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-muted-foreground text-xs",children:""}),g.jsx("div",{className:`font-mono ${r?dt.warning.color:dt.completed.color}`,children:Jh(t.actualDuration)})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"text-xs text-muted-foreground",children:":"}),g.jsxs(ir,{variant:n<=100?"secondary":"outline",className:"text-xs",children:[Math.round(n),"%"]}),r&&g.jsxs("span",{className:`text-xs ${dt.warning.color}`,children:["(+",Jh(t.actualDuration-t.duration),")"]})]}),g.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[g.jsx(xJ,{className:"w-3 h-3"}),g.jsx("span",{children:hxe(t.startTime)}),g.jsx("span",{className:"mx-1",children:""}),g.jsx("span",{children:Mye(t.startTime,{locale:hve,addSuffix:!0})})]}),g.jsx(DY,{timeLogId:t.id})]}),g.jsx(Se,{variant:"ghost",size:"sm",onClick:e,className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",children:g.jsx(No,{className:"w-4 h-4"})})]})})})},mxe=({history:t,onDeleteEntry:e,onClearHistory:n})=>{const[r,i]=ee.useState(!1),a=dm(f=>f.linksByLogId),s=t.length,o=t.filter(f=>f.completed).length,l=t.reduce((f,p)=>f+p.actualDuration,0),c=s>0?l/s:0,u=ee.useMemo(()=>fxe(t,a),[t,a]);return g.jsxs(Ms,{open:r,onOpenChange:i,children:[g.jsx(ub,{asChild:!0,children:g.jsxs(Se,{variant:"outline",size:"sm",children:[g.jsx(D5,{className:"w-4 h-4 mr-2"})," (",s,")"]})}),g.jsxs(Ja,{className:"w-[calc(100vw-1rem)] max-w-[calc(100vw-1rem)] max-h-[85vh] p-4 sm:max-w-2xl sm:p-6",children:[g.jsx(Ya,{children:g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 pr-8",children:[g.jsxs(Qa,{className:"flex items-center gap-2",children:[g.jsx(D5,{className:"w-5 h-5"}),""]}),s>0&&g.jsxs(Se,{variant:"outline",size:"sm",onClick:n,className:"text-destructive hover:text-destructive",children:[g.jsx(No,{className:"w-4 h-4 mr-1"}),""]})]})}),g.jsxs("div",{className:"space-y-4",children:[s>0&&g.jsxs("div",{className:"grid grid-cols-2 gap-3 rounded-lg bg-muted p-3 sm:grid-cols-4 sm:gap-4 sm:p-4",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-lg font-bold",children:s}),g.jsx("div",{className:"text-xs text-muted-foreground",children:""})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-lg font-bold",children:o}),g.jsx("div",{className:"text-xs text-muted-foreground",children:""})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-lg font-bold",children:Jh(l)}),g.jsx("div",{className:"text-xs text-muted-foreground",children:""})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-lg font-bold",children:Jh(Math.round(c))}),g.jsx("div",{className:"text-xs text-muted-foreground",children:""})]})]}),u.length>0&&g.jsxs("div",{className:"space-y-2 rounded-lg p-3",children:[g.jsx("h3",{className:"text-sm font-medium",children:"GitHub Issue "}),g.jsx("div",{className:"space-y-2",children:u.slice(0,5).map(f=>g.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[g.jsx("a",{href:f.issueUrl,target:"_blank",rel:"noopener noreferrer",className:"min-w-0 break-all text-xs text-blue-600 hover:underline",children:f.issueTitle}),g.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",Jh(f.totalActualDuration)," /"," ",f.sessionCount,""]})]},f.issueUrl))})]}),s===0?g.jsxs("div",{className:"text-center py-8",children:[g.jsx(vc,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),g.jsx("h3",{className:"text-lg font-medium mb-2",children:""}),g.jsx("p",{className:"text-muted-foreground",children:""})]}):g.jsx(af,{className:"h-[400px]",children:g.jsx("div",{className:"space-y-3 pr-4",children:t.map(f=>g.jsx(pxe,{entry:f,onDelete:()=>e(f.id)},f.id))})})]})]})]})},gxe=({duration:t,remainingTime:e,isRunning:n,isPaused:r,sessionLabel:i,history:a,onSessionLabelChange:s,onDurationChange:o,onStart:l,onPause:c,onStop:u,onReset:f,onDeleteHistoryEntry:p,onClearHistory:m})=>{const _=t>0?(t-e)/t*100:0,y=e===0&&!n,b=()=>n?dt.running.badgeVariant:r?dt.paused.badgeVariant:y?dt.completed.badgeVariant:dt.idle.badgeVariant,x=()=>n?dt.running.label:r?dt.paused.label:y?dt.completed.label:dt.idle.label,w=b(),T=x();return g.jsxs("div",{className:"w-full space-y-6",children:[g.jsxs(Mt,{className:"w-full",children:[g.jsx(On,{children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs(Cn,{className:"flex items-center gap-2",children:[g.jsx(lb,{className:"h-6 w-6"}),""]}),g.jsx(ir,{variant:w,children:T})]})}),g.jsxs(Vt,{className:"space-y-6",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(at,{htmlFor:"session-label",className:"text-sm font-medium",children:""}),g.jsx(Bn,{id:"session-label",placeholder:": ",value:i,onChange:A=>s(A.target.value),disabled:n,className:"text-center"})]}),g.jsxs("div",{className:"text-center space-y-4",children:[g.jsx("div",{className:"timer-display-digit font-mono font-bold tracking-wider",children:za(e)}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(um,{value:_,className:"h-3"}),g.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[g.jsxs("span",{children:[" ",za(t)]}),g.jsxs("span",{children:[Math.round(_),"% "]})]})]})]}),g.jsxs("div",{className:"flex flex-wrap justify-center gap-3 sm:flex-nowrap",children:[n?g.jsxs(Se,{onClick:c,variant:"outline",size:"lg",className:"px-4 sm:px-8",children:[g.jsx(ib,{className:"mr-2 h-5 w-5"}),""]}):g.jsxs(Se,{onClick:l,size:"lg",disabled:e===0,className:"px-4 sm:px-8",children:[g.jsx(ab,{className:"mr-2 h-5 w-5"}),r?"":""]}),g.jsxs(Se,{onClick:u,variant:"destructive",size:"lg",disabled:!n&&!r,className:"px-4 sm:px-8",children:[g.jsx(ob,{className:"mr-2 h-5 w-5"}),""]}),g.jsxs(Se,{onClick:f,variant:"outline",size:"lg",className:"px-4 sm:px-8",children:[g.jsx(lS,{className:"mr-2 h-5 w-5"}),""]})]}),g.jsxs("div",{className:"flex flex-wrap justify-center gap-3 pt-2 sm:flex-nowrap",children:[g.jsx(Hge,{duration:t,onDurationChange:o,disabled:n}),g.jsx(mxe,{history:a,onDeleteEntry:p,onClearHistory:m})]})]})]}),a.length>0&&g.jsxs(Mt,{children:[g.jsx(On,{children:g.jsx(Cn,{className:"text-lg",children:""})}),g.jsx(Vt,{children:g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.slice(0,3).map(A=>{const E=A.duration>0?A.actualDuration/A.duration*100:0;return g.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-sm font-medium truncate",children:A.label}),g.jsx(ir,{variant:A.completed?"secondary":"outline",className:"text-xs",children:A.completed?"":""})]}),g.jsxs("div",{className:"text-xs text-muted-foreground",children:[za(A.actualDuration)," /"," ",za(A.duration)]}),g.jsxs("div",{className:"text-xs",children:[""," ",g.jsxs("span",{className:E<=100?"text-green-600":"text-orange-600",children:[Math.round(E),"%"]})]})]},A.id)})})})]})]})},Bd=class Bd{constructor(){U(this,"audioContext",null);U(this,"soundBuffers",new Map);U(this,"currentSource",null);U(this,"isInitialized",!1)}static getInstance(){return Bd.instance||(Bd.instance=new Bd),Bd.instance}async ensureInitialized(){var e;if(!(this.isInitialized&&((e=this.audioContext)==null?void 0:e.state)==="running"))try{if(!this.audioContext){const n=window.AudioContext||window.webkitAudioContext;if(typeof n!="function")return;this.audioContext=new n}this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.isInitialized=!0,"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()}catch(n){console.warn("Failed to initialize AudioContext",n)}}getSoundBuffer(e){if(!this.audioContext)return null;if(this.soundBuffers.has(e))return this.soundBuffers.get(e);const n=this.createSyntheticSound(e);return n&&this.soundBuffers.set(e,n),n}createSyntheticSound(e){if(!this.audioContext)return null;const n=this.audioContext.sampleRate;let r=.5;switch(e){case"loop":r=2;break;case"double":r=1;break;case"complete":r=1.5;break;case"start":r=.8;break;default:r=.5}const i=n*r,a=this.audioContext.createBuffer(1,i,n),s=a.getChannelData(0),o=e==="warning"?440:e==="complete"?880:800,l=[1,1.5,2,2.5,3];for(let c=0;c<i;c++){const u=c/n;let f=0;if(e==="start")f=Math.sin(2*Math.PI*523.25*u)*Math.exp(-u*3)*.5+Math.sin(2*Math.PI*659.25*u)*Math.exp(-(u-.1)*3)*(u>.1?.5:0);else if(e==="complete")[523.25,659.25,783.99,1046.5].forEach((m,_)=>{const y=_*.1;u>y&&(f+=Math.sin(2*Math.PI*m*u)*Math.exp(-(u-y)*2)*.2)});else if(e==="warning")f=Math.sin(2*Math.PI*440*u)*(u<.2?1:0);else{for(const p of l){const m=o*p,_=Math.exp(-u*2)/l.length;f+=Math.sin(2*Math.PI*m*u)*_}if(e==="double"&&u>=.3){const p=u-.3;for(const m of l){const _=o*m,y=Math.exp(-p*2)/l.length;f+=Math.sin(2*Math.PI*_*p)*y}}}s[c]=f*.3}return a}async playSound(e,n=!1){if(n){this.triggerVibration();return}if(await this.ensureInitialized(),!!this.audioContext)try{this.stopSound();const r=this.getSoundBuffer(e);if(!r)return;const i=this.audioContext.createBufferSource();i.buffer=r,i.connect(this.audioContext.destination),e==="loop"&&(i.loop=!0,this.currentSource=i,setTimeout(()=>this.stopSound(),5e3)),i.start()}catch(r){console.warn("Playback failed:",r)}}stopSound(){if(this.currentSource){try{this.currentSource.stop()}catch{return}this.currentSource=null}}triggerVibration(){typeof navigator<"u"&&"vibrate"in navigator&&navigator.vibrate([200,100,200])}async notify(e,n){if(n!=null&&n.sound&&await this.playSound(n.sound,n.silent),typeof window<"u"&&"Notification"in window&&Notification.permission==="granted")try{new Notification(e,{body:n==null?void 0:n.body,icon:(n==null?void 0:n.icon)||"/timer-icon.png",silent:!0})}catch{}}};U(Bd,"instance");let uR=Bd;const yo=uR.getInstance(),BY=Vu((t,e)=>({duration:1500,remainingTime:1500,isRunning:!1,isPaused:!1,sessionId:null,sessionStartTime:null,sessionLabel:"",history:[],showHistory:!1,showSettings:!1,setDuration:n=>{t(r=>({duration:n,remainingTime:r.isRunning?r.remainingTime:n}))},start:()=>{const n=e(),r=new Date;yo.ensureInitialized().catch(console.warn),t({isRunning:!0,isPaused:!1,sessionId:n.sessionId||crypto.randomUUID(),sessionStartTime:n.sessionStartTime||r})},pause:()=>{t({isRunning:!1,isPaused:!0})},stop:()=>{const n=e();if(n.sessionStartTime){const r=new Date,i=Math.floor((r.getTime()-n.sessionStartTime.getTime())/1e3),a=n.sessionLabel||`${Math.ceil(n.duration/60)}`;e().addToHistory({duration:n.duration,actualDuration:i,startTime:n.sessionStartTime,endTime:r,completed:!1,label:a})}t({isRunning:!1,isPaused:!1,remainingTime:n.duration,sessionId:null,sessionStartTime:null,sessionLabel:""})},reset:()=>{const n=e();t({isRunning:!1,isPaused:!1,remainingTime:n.duration,sessionId:null,sessionStartTime:null,sessionLabel:""})},setSessionLabel:n=>{t({sessionLabel:n})},completeSession:()=>{const n=e();if(n.sessionStartTime){const r=new Date,i=Math.floor((r.getTime()-n.sessionStartTime.getTime())/1e3),a=n.sessionLabel||`${Math.ceil(n.duration/60)}`;e().addToHistory({duration:n.duration,actualDuration:i,startTime:n.sessionStartTime,endTime:r,completed:!0,label:a}),yo.notify("",{body:`${a}`,sound:"complete"})}t({isRunning:!1,isPaused:!1,remainingTime:n.duration,sessionId:null,sessionStartTime:null,sessionLabel:""})},addToHistory:n=>{const r={...n,id:crypto.randomUUID()};t(i=>({history:[r,...i.history]}))},clearHistory:()=>{t({history:[]})},deleteHistoryEntry:n=>{t(r=>({history:r.history.filter(i=>i.id!==n)}))},toggleHistory:()=>{t(n=>({showHistory:!n.showHistory}))},toggleSettings:()=>{t(n=>({showSettings:!n.showSettings}))},tick:()=>{const n=e();if(!n.isRunning)return;const r=Math.max(0,n.remainingTime-1);t({remainingTime:r}),r===0&&e().completeSession()}})),yxe=()=>{const{duration:t,remainingTime:e,isRunning:n,isPaused:r,sessionLabel:i,history:a,setDuration:s,start:o,pause:l,stop:c,reset:u,setSessionLabel:f,tick:p,deleteHistoryEntry:m,clearHistory:_}=BY(),[y,b]=k.useState(i);k.useEffect(()=>{b(i)},[i]),k.useEffect(()=>{if(!n)return;const w=setInterval(p,1e3);return()=>clearInterval(w)},[n,p]),k.useEffect(()=>{f(y)},[y,f]);const x=k.useCallback(w=>{b(w)},[]);return g.jsx(gxe,{duration:t,remainingTime:e,isRunning:n,isPaused:r,sessionLabel:y,history:a,onSessionLabelChange:x,onDurationChange:s,onStart:o,onPause:l,onStop:c,onReset:u,onDeleteHistoryEntry:m,onClearHistory:_})},fo=k.forwardRef(({className:t,...e},n)=>g.jsx(GX,{className:ct("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:g.jsx(Eme,{className:ct("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));fo.displayName=GX.displayName;const Gg=k.forwardRef(({className:t,...e},n)=>g.jsxs(UX,{ref:n,className:ct("relative flex w-full touch-none select-none items-center",t),...e,children:[g.jsx(vme,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:g.jsx(bme,{className:"absolute h-full bg-primary"})}),g.jsx(_me,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Gg.displayName=UX.displayName;const vxe=({settings:t,isRunning:e,onSave:n})=>{const[r,i]=k.useState(t),[a,s]=k.useState(!1);k.useEffect(()=>{i(t)},[t]);const o=()=>{n(r),s(!1)},l=[{name:"",work:25,shortBreak:5,longBreak:15,interval:4},{name:"",work:50,shortBreak:10,longBreak:30,interval:3},{name:"",work:15,shortBreak:3,longBreak:10,interval:4},{name:"",work:90,shortBreak:20,longBreak:45,interval:2}];return g.jsxs(Ms,{open:a,onOpenChange:s,children:[g.jsx(ub,{asChild:!0,children:g.jsxs(Se,{variant:"outline",size:"sm",disabled:e,children:[g.jsx(bc,{className:"w-4 h-4 mr-2"}),""]})}),g.jsxs(Ja,{className:"sm:max-w-lg max-h-[80vh] overflow-y-auto",children:[g.jsx(Ya,{children:g.jsxs(Qa,{className:"flex items-center gap-2",children:[g.jsx(bc,{className:"w-5 h-5"}),""]})}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx(at,{className:"text-sm font-medium mb-3 block",children:""}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map(c=>g.jsx(Se,{variant:"outline",size:"sm",onClick:()=>i({...r,workDuration:c.work,shortBreakDuration:c.shortBreak,longBreakDuration:c.longBreak,longBreakInterval:c.interval}),className:"text-xs justify-start",children:g.jsxs("div",{className:"text-left",children:[g.jsx("div",{className:"font-medium",children:c.name}),g.jsxs("div",{className:"text-xs text-muted-foreground",children:[c.work," / ",c.shortBreak,""]})]})},c.name))})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsxs(at,{htmlFor:"work-duration",className:"flex items-center gap-2 mb-2",children:[g.jsx(cS,{className:"w-4 h-4"}),": ",r.workDuration,""]}),g.jsx(Gg,{id:"work-duration",min:5,max:120,step:5,value:[r.workDuration],onValueChange:([c])=>i({...r,workDuration:c}),className:"w-full"})]}),g.jsxs("div",{children:[g.jsxs(at,{htmlFor:"short-break",className:"flex items-center gap-2 mb-2",children:[g.jsx(TJ,{className:"w-4 h-4"}),": ",r.shortBreakDuration,""]}),g.jsx(Gg,{id:"short-break",min:1,max:30,step:1,value:[r.shortBreakDuration],onValueChange:([c])=>i({...r,shortBreakDuration:c}),className:"w-full"})]}),g.jsxs("div",{children:[g.jsxs(at,{htmlFor:"long-break",className:"flex items-center gap-2 mb-2",children:[g.jsx(xJ,{className:"w-4 h-4"}),": ",r.longBreakDuration,""]}),g.jsx(Gg,{id:"long-break",min:10,max:60,step:5,value:[r.longBreakDuration],onValueChange:([c])=>i({...r,longBreakDuration:c}),className:"w-full"})]}),g.jsxs("div",{children:[g.jsxs(at,{htmlFor:"long-break-interval",className:"flex items-center gap-2 mb-2",children:[g.jsx(Mge,{className:"w-4 h-4"}),": ",r.longBreakInterval,""]}),g.jsx(Gg,{id:"long-break-interval",min:2,max:8,step:1,value:[r.longBreakInterval],onValueChange:([c])=>i({...r,longBreakInterval:c}),className:"w-full"})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx(at,{className:"text-sm font-medium",children:""}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(at,{htmlFor:"auto-start-breaks",className:"text-sm",children:""}),g.jsx(fo,{id:"auto-start-breaks",checked:r.autoStartBreaks,onCheckedChange:c=>i({...r,autoStartBreaks:c})})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(at,{htmlFor:"auto-start-work",className:"text-sm",children:""}),g.jsx(fo,{id:"auto-start-work",checked:r.autoStartWork,onCheckedChange:c=>i({...r,autoStartWork:c})})]})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[g.jsx(Se,{variant:"outline",onClick:()=>s(!1),children:""}),g.jsx(Se,{onClick:o,children:""})]})]})]})]})},gB={work:{name:"",color:`${ms.work.bg} ${ms.work.text} ${ms.work.border}`,progressColor:ms.work.progress},"short-break":{name:"",color:`${ms.shortBreak.bg} ${ms.shortBreak.text} ${ms.shortBreak.border}`,progressColor:ms.shortBreak.progress},"long-break":{name:"",color:`${ms.longBreak.bg} ${ms.longBreak.text} ${ms.longBreak.border}`,progressColor:ms.longBreak.progress}},bxe=({currentPhase:t,timeRemaining:e,isRunning:n,isPaused:r,cycle:i,settings:a,todayStats:s,taskName:o,onTaskNameChange:l,onStart:c,onPause:u,onStop:f,onSkip:p,onReset:m,onSettingsSave:_})=>{const y=k.useMemo(()=>{switch(t){case"work":return a.workDuration*60;case"short-break":return a.shortBreakDuration*60;case"long-break":return a.longBreakDuration*60;default:return a.workDuration*60}},[t,a]),b=(y-e)/y*100,x=gB[t]??gB.work,w=n?{text:dt.running.label,variant:dt.running.badgeVariant}:r?{text:dt.paused.label,variant:dt.paused.badgeVariant}:{text:dt.idle.label,variant:dt.idle.badgeVariant};return g.jsxs("div",{className:"w-full space-y-6",children:[g.jsxs(Mt,{className:"w-full",children:[g.jsx(On,{children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs(Cn,{className:"flex items-center gap-2",children:[g.jsx($ge,{className:"h-6 w-6"}),""]}),g.jsx(ir,{variant:w.variant,children:w.text})]})}),g.jsxs(Vt,{className:"space-y-6",children:[g.jsx("div",{className:"text-center",children:g.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[g.jsx("div",{className:`p-3 rounded-full ${x.color}`,children:t==="work"?g.jsx(cS,{className:"w-5 h-5"}):g.jsx(TJ,{className:"w-5 h-5"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-semibold",children:x.name}),g.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",i," / ",a.longBreakInterval]})]})]})}),t==="work"&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(at,{htmlFor:"task-name",className:"text-sm font-medium",children:""}),g.jsx(Bn,{id:"task-name",placeholder:": ",value:o,onChange:T=>l(T.target.value),disabled:n,className:"text-center"})]}),g.jsxs("div",{className:"text-center space-y-4",children:[g.jsx("div",{className:"timer-display-digit font-mono font-bold tracking-wider",children:za(e)}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(um,{value:b,className:"h-3",indicatorClassName:x.progressColor}),g.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[g.jsxs("span",{children:[" ",za(y)]}),g.jsxs("span",{children:[Math.round(b),"% "]})]})]})]}),g.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[g.jsxs("div",{className:"flex gap-2",children:[n?g.jsxs(Se,{onClick:u,variant:"outline",size:"lg",className:"px-6",children:[g.jsx(ib,{className:"mr-2 h-5 w-5"}),""]}):g.jsxs(Se,{onClick:c,size:"lg",className:"px-6",children:[g.jsx(ab,{className:"mr-2 h-5 w-5"}),r?"":""]}),g.jsxs(Se,{onClick:f,variant:"destructive",size:"lg",disabled:!n&&!r,children:[g.jsx(ob,{className:"mr-2 h-5 w-5"}),""]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs(Se,{onClick:p,variant:"outline",size:"lg",children:[g.jsx(jge,{className:"mr-2 h-5 w-5"}),""]}),g.jsxs(Se,{onClick:m,variant:"outline",size:"lg",children:[g.jsx(lS,{className:"mr-2 h-5 w-5"}),""]})]})]}),g.jsx("div",{className:"flex justify-center pt-2",children:g.jsx(vxe,{settings:a,isRunning:n,onSave:_})})]})]}),g.jsxs(Mt,{children:[g.jsx(On,{children:g.jsx(Cn,{className:"text-lg",children:""})}),g.jsx(Vt,{children:g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[g.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[g.jsx("div",{className:`text-2xl font-bold ${dt.running.color}`,children:s.completedPomodoros}),g.jsx("div",{className:"text-sm text-muted-foreground",children:""})]}),g.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[g.jsx("div",{className:`text-2xl font-bold ${dt.completed.color}`,children:s.totalFocusTime}),g.jsx("div",{className:"text-sm text-muted-foreground",children:""})]}),g.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[g.jsx("div",{className:`text-2xl font-bold ${dt.overtime.color}`,children:s.totalBreakTime}),g.jsx("div",{className:"text-sm text-muted-foreground",children:""})]}),g.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[g.jsxs("div",{className:`text-2xl font-bold ${dt.paused.color}`,children:[s.completedPomodoros>0?Math.round(s.totalFocusTime/(s.completedPomodoros*a.workDuration)*100):0,"%"]}),g.jsx("div",{className:"text-sm text-muted-foreground",children:""})]})]})})]})]})},yB={workDuration:25,shortBreakDuration:5,longBreakDuration:15,longBreakInterval:4,autoStartBreaks:!1,autoStartWork:!1},V0=(t,e)=>{switch(t){case"work":return e.workDuration*60;case"short-break":return e.shortBreakDuration*60;case"long-break":return e.longBreakDuration*60;default:return e.workDuration*60}},FY=Vu((t,e)=>({currentPhase:"work",timeRemaining:yB.workDuration*60,isRunning:!1,isPaused:!1,cycle:1,totalCycles:0,taskName:"",settings:yB,todayStats:{completedPomodoros:0,totalFocusTime:0,totalBreakTime:0,efficiency:0},sessions:[],start:()=>{t({isRunning:!0,isPaused:!1}),yo.ensureInitialized().catch(console.warn)},pause:()=>{t({isRunning:!1,isPaused:!0})},stop:()=>{const n=e();t({isRunning:!1,isPaused:!1,timeRemaining:V0(n.currentPhase,n.settings)})},skip:()=>{e().nextPhase()},reset:()=>{const n=e();t({isRunning:!1,isPaused:!1,currentPhase:"work",timeRemaining:n.settings.workDuration*60,cycle:1,taskName:""})},tick:()=>{const n=e();if(!n.isRunning)return;const r=n.timeRemaining-1;r<=0?(t({isRunning:!1,isPaused:!1,timeRemaining:0}),e().completeSession(),yo.notify("",{body:`${n.currentPhase==="work"?"":""}`,sound:"complete"}),n.currentPhase==="work"&&n.settings.autoStartBreaks||n.currentPhase!=="work"&&n.settings.autoStartWork?setTimeout(()=>{e().nextPhase(),e().start()},1e3):e().nextPhase()):t({timeRemaining:r})},setTaskName:n=>{t({taskName:n})},updateSettings:n=>{const r=e();t({settings:n,timeRemaining:r.isRunning?r.timeRemaining:V0(r.currentPhase,n)})},completeSession:()=>{const n=e(),r=new Date,i=V0(n.currentPhase,n.settings),a={id:`${r.getTime()}`,taskName:n.taskName||`${n.currentPhase==="work"?"":""}`,startTime:new Date(r.getTime()-i*1e3),endTime:r,duration:i,phase:n.currentPhase,completed:!0},s={...n.todayStats};n.currentPhase==="work"?(s.completedPomodoros+=1,s.totalFocusTime+=Math.round(i/60)):s.totalBreakTime+=Math.round(i/60),s.efficiency=s.completedPomodoros>0?Math.round(s.completedPomodoros/(s.completedPomodoros+n.sessions.filter(o=>!o.completed).length)*100):0,t({sessions:[...n.sessions,a],todayStats:s})},nextPhase:()=>{const n=e();let r,i=n.cycle;n.currentPhase==="work"?n.cycle>=n.settings.longBreakInterval?(r="long-break",i=1):r="short-break":(r="work",n.currentPhase==="short-break"&&(i=n.cycle+1)),t({currentPhase:r,cycle:i,timeRemaining:V0(r,n.settings),taskName:r==="work"?n.taskName:"",totalCycles:r==="work"?n.totalCycles+1:n.totalCycles})}})),_xe=()=>{const{currentPhase:t,timeRemaining:e,isRunning:n,isPaused:r,cycle:i,taskName:a,todayStats:s,settings:o,start:l,pause:c,stop:u,skip:f,reset:p,setTaskName:m,updateSettings:_,tick:y}=FY(),[b,x]=k.useState(a);k.useEffect(()=>{x(a)},[a]),k.useEffect(()=>{if(!n)return;const A=setInterval(y,1e3);return()=>clearInterval(A)},[n,y]),k.useEffect(()=>{m(b)},[b,m]);const w=k.useCallback(A=>{x(A)},[]),T=k.useCallback(A=>{_(A)},[_]);return g.jsx(bxe,{currentPhase:t,timeRemaining:e,isRunning:n,isPaused:r,cycle:i,settings:o,todayStats:s,taskName:b,onTaskNameChange:w,onStart:l,onPause:c,onStop:u,onSkip:f,onReset:p,onSettingsSave:T})},_c=Xpe,wc=Jpe,bl=k.forwardRef(({className:t,children:e,...n},r)=>g.jsxs(_X,{ref:r,className:ct("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,g.jsx(Ype,{asChild:!0,children:g.jsx(sS,{className:"h-4 w-4 opacity-50"})})]}));bl.displayName=_X.displayName;const UY=k.forwardRef(({className:t,...e},n)=>g.jsx(TX,{ref:n,className:ct("flex cursor-default items-center justify-center py-1",t),...e,children:g.jsx(q$,{className:"h-4 w-4"})}));UY.displayName=TX.displayName;const zY=k.forwardRef(({className:t,...e},n)=>g.jsx(EX,{ref:n,className:ct("flex cursor-default items-center justify-center py-1",t),...e,children:g.jsx(sS,{className:"h-4 w-4"})}));zY.displayName=EX.displayName;const _l=k.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>g.jsx(Qpe,{children:g.jsxs(wX,{ref:i,className:ct("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[g.jsx(UY,{}),g.jsx(eme,{className:ct("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),g.jsx(zY,{})]})}));_l.displayName=wX.displayName;const wxe=k.forwardRef(({className:t,...e},n)=>g.jsx(xX,{ref:n,className:ct("px-2 py-1.5 text-sm font-semibold",t),...e}));wxe.displayName=xX.displayName;const Ln=k.forwardRef(({className:t,children:e,...n},r)=>g.jsxs(SX,{ref:r,className:ct("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[g.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(nme,{children:g.jsx(_ge,{className:"h-4 w-4"})})}),g.jsx(tme,{children:e})]}));Ln.displayName=SX.displayName;const xxe=k.forwardRef(({className:t,...e},n)=>g.jsx(AX,{ref:n,className:ct("-mx-1 my-1 h-px bg-muted",t),...e}));xxe.displayName=AX.displayName;const sl=k.forwardRef(({className:t,...e},n)=>g.jsx("textarea",{className:ct("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));sl.displayName="Textarea";const Sxe=["","","","",""],vB=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),mp=Vu((t,e)=>({timers:[],categories:Sxe,isAnyRunning:!1,globalSettings:{autoStartNext:!1,showNotifications:!0,soundEnabled:!0},currentView:"all",sessions:[],addTimer:n=>{const r={...n,id:vB(),remainingTime:n.duration,isRunning:!1,isPaused:!1,isCompleted:!1,createdAt:new Date};t(i=>({timers:[...i.timers,r]}))},updateTimer:(n,r)=>{t(i=>({timers:i.timers.map(a=>a.id===n?{...a,...r}:a)}))},deleteTimer:n=>{t(r=>({timers:r.timers.filter(i=>i.id!==n)}))},duplicateTimer:n=>{const r=e(),i=r.timers.find(s=>s.id===n);if(!i)return;const a={...i,id:vB(),name:`${i.name} ()`,createdAt:new Date,isRunning:!1,isPaused:!1,isCompleted:!1,remainingTime:i.duration};t({timers:[...r.timers,a]})},startTimer:n=>{const r=e(),i=r.timers.find(s=>s.id===n);if(!i||i.isRunning||i.isCompleted)return;yo.ensureInitialized().catch(console.warn);const a=Date.now();t({timers:r.timers.map(s=>s.id===n?{...s,isRunning:!0,isPaused:!1,startedAt:new Date(a)}:s),isAnyRunning:!0})},pauseTimer:n=>{t(r=>({timers:r.timers.map(i=>i.id===n?{...i,isRunning:!1,isPaused:!0,pausedAt:new Date}:i),isAnyRunning:r.timers.some(i=>i.id!==n&&i.isRunning)}))},stopTimer:n=>{t(r=>({timers:r.timers.map(i=>i.id===n?{...i,isRunning:!1,isPaused:!1,isCompleted:!1,remainingTime:i.duration,startedAt:void 0,pausedAt:void 0,completedAt:void 0}:i),isAnyRunning:r.timers.some(i=>i.id!==n&&i.isRunning)}))},resetTimer:n=>{t(r=>({timers:r.timers.map(i=>i.id===n?{...i,remainingTime:i.duration,isRunning:!1,isPaused:!1,isCompleted:!1,startedAt:void 0,pausedAt:void 0,completedAt:void 0}:i),isAnyRunning:r.timers.some(i=>i.id!==n&&i.isRunning)}))},startAllTimers:()=>{const n=e();yo.ensureInitialized().catch(console.warn);const r=new Date;t({timers:n.timers.map(i=>i.isCompleted?i:{...i,isRunning:!0,isPaused:!1,startedAt:r}),isAnyRunning:n.timers.some(i=>!i.isCompleted)})},pauseAllTimers:()=>{t(n=>({timers:n.timers.map(r=>r.isRunning?{...r,isRunning:!1,isPaused:!0,pausedAt:new Date}:r),isAnyRunning:!1}))},stopAllTimers:()=>{t(n=>({timers:n.timers.map(r=>({...r,isRunning:!1,isPaused:!1,isCompleted:!1,remainingTime:r.duration,startedAt:void 0,pausedAt:void 0,completedAt:void 0})),isAnyRunning:!1}))},resetAllTimers:()=>{t(n=>({timers:n.timers.map(r=>({...r,remainingTime:r.duration,isRunning:!1,isPaused:!1,isCompleted:!1,startedAt:void 0,pausedAt:void 0,completedAt:void 0})),isAnyRunning:!1}))},tick:()=>{const n=e();if(!n.isAnyRunning)return;if(!n.timers.some(s=>s.isRunning)){t({isAnyRunning:!1});return}const i=n.timers.map(s=>{if(!s.isRunning||s.isCompleted)return s;const o=Math.max(0,s.remainingTime-1);return o===0?(n.globalSettings.soundEnabled?yo.notify("",{body:`${s.name}`,sound:"complete"}):n.globalSettings.showNotifications&&yo.notify("",{body:`${s.name}`,silent:!0}),{...s,remainingTime:0,isRunning:!1,isCompleted:!0,completedAt:new Date}):{...s,remainingTime:o}}),a=i.some(s=>s.isRunning);t({timers:i,isAnyRunning:a})},addCategory:n=>{t(r=>({categories:r.categories.includes(n)?r.categories:[...r.categories,n]}))},removeCategory:n=>{t(r=>({categories:r.categories.filter(i=>i!==n)}))},updateGlobalSettings:n=>{t(r=>({globalSettings:{...r.globalSettings,...n}}))},getTimerById:n=>e().timers.find(r=>r.id===n),getRunningTimers:()=>e().timers.filter(n=>n.isRunning),getCompletedTimers:()=>e().timers.filter(n=>n.isCompleted)})),Txe=t=>{const e=t.split(":").map(Number);if(e.length===2)return e[0]*60+e[1];if(e.length===3)return e[0]*3600+e[1]*60+e[2];const n=parseInt(t,10);return isNaN(n)?0:n*60},CA=["bg-blue-500","bg-green-500","bg-amber-500","bg-red-500"],bB=()=>{const{addTimer:t,categories:e,addCategory:n}=mp(),[r,i]=k.useState(!1),[a,s]=k.useState(null),[o,l]=k.useState({name:"",duration:"",category:"",description:"",color:CA[0]}),c=u=>{u.preventDefault();const f=o.name.trim(),p=o.duration.trim();if(!f){s("");return}if(!p){s("");return}const m=Txe(p);if(m<=0){s("MM:SS / H:MM:SS /  ");return}s(null),o.category&&!e.includes(o.category)&&n(o.category),t({name:f,duration:m,category:o.category||void 0,description:o.description||void 0,color:o.color}),l({name:"",duration:"",category:"",description:"",color:CA[0]}),i(!1)};return g.jsxs(Ms,{open:r,onOpenChange:u=>{i(u),u||s(null)},children:[g.jsx(ub,{asChild:!0,children:g.jsxs(Se,{children:[g.jsx(sb,{className:"w-4 h-4 mr-2"}),""]})}),g.jsxs(Ja,{className:"sm:max-w-md",children:[g.jsx(Ya,{children:g.jsx(Qa,{children:""})}),g.jsxs("form",{onSubmit:c,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx(at,{htmlFor:"timer-name",children:""}),g.jsx(Bn,{id:"timer-name",placeholder:": ",value:o.name,onChange:u=>{s(null),l({...o,name:u.target.value})},required:!0})]}),g.jsxs("div",{children:[g.jsx(at,{htmlFor:"timer-duration",children:"MM:SS  "}),g.jsx(Bn,{id:"timer-duration",placeholder:": 25:00, 10:30, 45",value:o.duration,onChange:u=>{s(null),l({...o,duration:u.target.value})},required:!0}),a&&g.jsx("p",{className:"mt-2 text-sm text-destructive",role:"alert",children:a})]}),g.jsxs("div",{children:[g.jsx(at,{htmlFor:"timer-category",children:""}),g.jsxs(_c,{value:o.category,onValueChange:u=>l({...o,category:u}),children:[g.jsx(bl,{children:g.jsx(wc,{placeholder:""})}),g.jsx(_l,{children:e.map(u=>g.jsx(Ln,{value:u,children:u},u))})]})]}),g.jsxs("div",{children:[g.jsx(at,{htmlFor:"timer-description",children:""}),g.jsx(sl,{id:"timer-description",placeholder:"",value:o.description,onChange:u=>l({...o,description:u.target.value}),rows:2})]}),g.jsxs("div",{children:[g.jsx(at,{children:""}),g.jsx("div",{className:"flex gap-2 mt-2",children:CA.map(u=>g.jsx("button",{type:"button",className:`w-8 h-8 rounded-full ${u} ${o.color===u?"ring-2 ring-offset-2 ring-gray-400":""}`,onClick:()=>l({...o,color:u})},u))})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[g.jsx(Se,{type:"button",variant:"outline",onClick:()=>i(!1),children:""}),g.jsx(Se,{type:"submit",children:""})]})]})]})]})},Exe=({timer:t})=>{const{startTimer:e,pauseTimer:n,stopTimer:r,resetTimer:i,deleteTimer:a,duplicateTimer:s}=mp(),o=t.duration>0?(t.duration-t.remainingTime)/t.duration*100:0,l=Bge(t.isRunning,t.isPaused,t.isCompleted),c=dt[l];return g.jsxs(Mt,{className:`${t.isRunning?"ring-2 ring-ring":""} ${t.isCompleted?dt.completed.surfaceClass:""}`,children:[g.jsx(On,{className:"pb-3",children:g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx(Cn,{className:"text-lg truncate",children:t.name}),g.jsxs("div",{className:`flex items-center gap-2 mt-1 ${c.color}`,children:[c.icon,g.jsx("span",{className:"text-sm font-medium",children:c.label}),t.category&&g.jsx(ir,{variant:"secondary",className:"text-xs text-foreground",children:t.category})]})]}),g.jsx("div",{className:`w-4 h-4 rounded-full ${t.color}`})]})}),g.jsxs(Vt,{className:"space-y-4",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-3xl font-mono font-bold",children:za(t.remainingTime)}),g.jsxs("div",{className:"text-sm text-muted-foreground",children:["/ ",za(t.duration)]})]}),g.jsx(um,{value:o,className:"h-2",indicatorClassName:t.color}),t.description&&g.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.description}),g.jsxs("div",{className:"flex justify-center gap-2",children:[!t.isRunning&&!t.isCompleted?g.jsxs(Se,{size:"sm",onClick:()=>e(t.id),disabled:t.isCompleted,children:[g.jsx(ab,{className:"w-4 h-4 mr-1"}),""]}):t.isRunning?g.jsxs(Se,{size:"sm",variant:"outline",onClick:()=>n(t.id),children:[g.jsx(ib,{className:"w-4 h-4 mr-1"}),""]}):null,g.jsxs(Se,{size:"sm",variant:"outline",onClick:()=>r(t.id),disabled:!t.isRunning&&!t.isPaused,children:[g.jsx(ob,{className:"w-4 h-4 mr-1"}),""]}),g.jsxs(Se,{size:"sm",variant:"outline",onClick:()=>i(t.id),children:[g.jsx(lS,{className:"w-4 h-4 mr-1"}),""]})]}),g.jsxs("div",{className:"flex justify-center gap-2 pt-2",children:[g.jsxs(Se,{size:"sm",variant:"ghost",onClick:()=>s(t.id),children:[g.jsx(oS,{className:"w-4 h-4 mr-1"}),""]}),g.jsxs(Se,{size:"sm",variant:"destructive",onClick:()=>{window.confirm(`${t.name}`)&&a(t.id)},children:[g.jsx(No,{className:"w-4 h-4 mr-1"}),""]})]})]})]})},Axe=()=>{const{timers:t,isAnyRunning:e,startAllTimers:n,pauseAllTimers:r,stopAllTimers:i,resetAllTimers:a,globalSettings:s,updateGlobalSettings:o}=mp(),l=t.length>0,c=t.some(f=>!f.isCompleted),u=f=>{f&&yo.ensureInitialized().catch(console.warn),o({showNotifications:f})};return g.jsxs(Mt,{children:[g.jsx(On,{children:g.jsxs(Cn,{className:"flex items-center gap-2",children:[g.jsx(bc,{className:"h-5 w-5"}),""]})}),g.jsxs(Vt,{className:"space-y-4",children:[g.jsxs("div",{className:"flex gap-2 flex-wrap",children:[g.jsxs(Se,{onClick:n,disabled:!c,size:"sm",children:[g.jsx(Tge,{className:"w-4 h-4 mr-1"}),""]}),g.jsxs(Se,{onClick:r,variant:"outline",disabled:!e,size:"sm",children:[g.jsx(Sge,{className:"w-4 h-4 mr-1"}),""]}),g.jsxs(Se,{onClick:i,variant:"outline",disabled:!l,size:"sm",children:[g.jsx(ob,{className:"w-4 h-4 mr-1"}),""]}),g.jsxs(Se,{onClick:a,variant:"outline",disabled:!l,size:"sm",children:[g.jsx(lS,{className:"w-4 h-4 mr-1"}),""]})]}),g.jsxs("div",{className:"space-y-3 pt-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(at,{className:"text-sm",children:""}),g.jsx(fo,{checked:s.showNotifications,onCheckedChange:u})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(at,{className:"text-sm",children:""}),g.jsx(fo,{checked:s.soundEnabled,onCheckedChange:f=>o({soundEnabled:f})})]})]})]})]})},Oxe=()=>{const{timers:t,isAnyRunning:e,tick:n,getRunningTimers:r,getCompletedTimers:i}=mp();k.useEffect(()=>{if(e){const l=setInterval(n,1e3);return()=>clearInterval(l)}},[e,n]);const a=r(),s=i(),o=t.filter(l=>!l.isRunning&&!l.isCompleted);return g.jsxs("div",{className:"w-full space-y-6",children:[g.jsx(Mt,{children:g.jsxs(On,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsxs(Cn,{className:"flex items-center gap-2 text-2xl font-bold",children:[g.jsx(lb,{className:"h-6 w-6"}),""]}),g.jsx(K$,{children:""})]}),g.jsx(bB,{})]})}),g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[g.jsxs(Mt,{className:"text-center p-4",children:[g.jsx("div",{className:`text-2xl font-bold ${dt.running.color}`,children:a.length}),g.jsx("div",{className:"text-sm text-muted-foreground",children:""})]}),g.jsxs(Mt,{className:"text-center p-4",children:[g.jsx("div",{className:`text-2xl font-bold ${dt.idle.color}`,children:o.length}),g.jsx("div",{className:"text-sm text-muted-foreground",children:""})]}),g.jsxs(Mt,{className:"text-center p-4",children:[g.jsx("div",{className:`text-2xl font-bold ${dt.completed.color}`,children:s.length}),g.jsx("div",{className:"text-sm text-muted-foreground",children:""})]}),g.jsxs(Mt,{className:"text-center p-4",children:[g.jsx("div",{className:"text-2xl font-bold text-foreground",children:t.length}),g.jsx("div",{className:"text-sm text-muted-foreground",children:""})]})]}),g.jsx(Axe,{}),t.length===0?g.jsx(Mt,{className:"text-center py-12",children:g.jsxs(Vt,{children:[g.jsx(vc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),g.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),g.jsx("p",{className:"text-muted-foreground mb-4",children:""}),g.jsx(bB,{})]})}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(l=>g.jsx(Exe,{timer:l},l.id))})]})},Cxe=()=>g.jsx(Oxe,{});function kxe(){return{since:Kge(Lye(new Date)),until:PJ(new Date),granularity:"day"}}const Nxe=Vu()(dS(t=>({filter:kxe(),setGranularity:e=>t(n=>({filter:{...n.filter,granularity:e}})),setDateRange:(e,n)=>t(r=>({filter:{...r.filter,since:e,until:n}})),setTimerKind:e=>t(n=>({filter:{...n.filter,timerKind:e}}))}),{name:"dashboard-filter",storage:uS(()=>localStorage),partialize:t=>({filter:{...t.filter,since:t.filter.since.toISOString(),until:t.filter.until.toISOString()}}),merge:(t,e)=>{const n=t;return{...e,filter:{...e.filter,...n.filter,since:new Date(n.filter.since),until:new Date(n.filter.until)}}}}));var pn=(t=>(t[t.ERROR=0]="ERROR",t[t.WARN=1]="WARN",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.TRACE=4]="TRACE",t))(pn||{});const qY=t=>{const e=t.filter(r=>r.level<=1);return e.length===0?["ERROR/WARN",""].join(`
`):["","4","",e.slice(0,20).map((r,i)=>{const a=r.data?JSON.stringify(r.data,null,2):"";return[`#${i+1}`,`- : ${new Date(r.timestamp).toISOString()}`,`- : ${pn[r.level]}`,`- : ${r.category}`,`- : ${r.message}`,`- : ${a}`,`- : ${r.stackTrace??""}`].join(`
`)}).join(`

`)].join(`
`)};class Ixe{constructor(e={}){U(this,"config");U(this,"sessionId");U(this,"storageKey","timer-app-logs");this.config={level:2,enableConsole:!0,enableStorage:!0,maxStorageEntries:1e3,categories:["timer","ui","store","notification","error","performance"],enableStackTrace:!0,...e},this.sessionId=this.generateSessionId(),this.setupErrorHandlers()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setupErrorHandlers(){window.addEventListener("error",e=>{var n;this.error("Global Error",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:(n=e.error)==null?void 0:n.stack},"error")}),window.addEventListener("unhandledrejection",e=>{this.error("Unhandled Promise Rejection",{reason:e.reason,promise:e.promise},"error")})}shouldLog(e){return e<=this.config.level}createLogEntry(e,n,r,i="general"){const a={id:`log_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,level:e,category:i,message:n,data:r,userAgent:navigator.userAgent,url:window.location.href,sessionId:this.sessionId};return this.config.enableStackTrace&&e<=1&&(a.stackTrace=new Error().stack),a}outputToConsole(e){if(!this.config.enableConsole)return;const n=e.timestamp.toISOString(),r=`[${e.category.toUpperCase()}]`,i=`${n} ${r}`;switch(e.level){case 0:console.error(i,e.message,e.data||""),e.stackTrace&&console.error(e.stackTrace);break;case 1:console.warn(i,e.message,e.data||"");break;case 2:console.info(i,e.message,e.data||"");break;case 3:console.debug(i,e.message,e.data||"");break;case 4:console.trace(i,e.message,e.data||"");break}}saveToStorage(e){if(this.config.enableStorage)try{const n=this.getStoredLogs(),r=[e,...n];r.length>this.config.maxStorageEntries&&r.splice(this.config.maxStorageEntries),localStorage.setItem(this.storageKey,JSON.stringify(r))}catch(n){console.error("Failed to save log to storage:",n)}}log(e,n,r,i="general"){if(!this.shouldLog(e))return;const a=this.createLogEntry(e,n,r,i);this.outputToConsole(a),this.saveToStorage(a)}error(e,n,r="error"){this.log(0,e,n,r)}warn(e,n,r="general"){this.log(1,e,n,r)}info(e,n,r="general"){this.log(2,e,n,r)}debug(e,n,r="debug"){this.log(3,e,n,r)}trace(e,n,r="trace"){this.log(4,e,n,r)}timerStart(e,n,r){this.info("Timer started",{timerId:e,timerType:n,duration:r,startTime:new Date().toISOString()},"timer")}timerStop(e,n,r){this.info("Timer stopped",{timerId:e,timerType:n,elapsedTime:r,stopTime:new Date().toISOString()},"timer")}timerComplete(e,n,r){this.info("Timer completed",{timerId:e,timerType:n,actualDuration:r,completionTime:new Date().toISOString()},"timer")}userAction(e,n){this.info("User action",{action:e,context:n,timestamp:new Date().toISOString()},"ui")}stateChange(e,n,r){this.debug("State change",{store:e,previousState:n,newState:r,timestamp:new Date().toISOString()},"store")}notification(e,n,r){this.info("Notification sent",{type:e,message:n,success:r,timestamp:new Date().toISOString()},"notification")}performance(e,n,r){this.info("Performance metric",{operation:e,duration:n,details:r,timestamp:new Date().toISOString()},"performance")}getStoredLogs(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to retrieve logs from storage:",e),[]}}getLogsByCategory(e){return this.getStoredLogs().filter(n=>n.category===e)}getLogsByLevel(e){return this.getStoredLogs().filter(n=>n.level===e)}getLogsByDateRange(e,n){return this.getStoredLogs().filter(r=>{const i=new Date(r.timestamp);return i>=e&&i<=n})}clearLogs(){try{localStorage.removeItem(this.storageKey),this.info("Logs cleared",{},"system")}catch(e){console.error("Failed to clear logs:",e)}}exportLogs(){const e=this.getStoredLogs();return JSON.stringify(e,null,2)}getLogStatistics(){const e=this.getStoredLogs(),n={},r={},i=new Set;e.forEach(s=>{const o=pn[s.level];n[o]=(n[o]||0)+1,r[s.category]=(r[s.category]||0)+1,i.add(s.sessionId)});const a=e.map(s=>new Date(s.timestamp)).sort();return{totalLogs:e.length,logsByLevel:n,logsByCategory:r,sessionCount:i.size,oldestLog:a[0],newestLog:a[a.length-1]}}updateConfig(e){this.config={...this.config,...e},this.info("Logger configuration updated",e,"system")}}const Xt=new Ixe({level:2,enableConsole:!0,enableStorage:!0,maxStorageEntries:1e3,enableStackTrace:!0}),_B=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Pxe=t=>t<=70?"bg-green-500":t<=90?"bg-orange-500":t<=100?"bg-red-500":"bg-purple-500",lg=(t,e,n)=>{var a;const r=t.meetings.map(s=>s.id===e?{...s,currentAgendaId:n}:s),i=((a=t.currentMeeting)==null?void 0:a.id)===e?{...t.currentMeeting,currentAgendaId:n}:t.currentMeeting;return{meetings:r,currentMeeting:i}},G0=(t,e,n)=>{let r=!1;const i=e.bellSettings;switch(t){case"start":r=i.start;break;case"warning":r=i.fiveMinWarning;break;case"end":r=i.end;break;case"overtime":r=i.overtime;break}const a=r?i.soundType:void 0;yo.notify("",{body:n,sound:a,silent:e.silentMode})},Ic=Vu()(dS((t,e)=>({currentMeeting:null,meetings:[],isRunning:!1,currentTime:0,meetingStartTime:void 0,lastTickTime:void 0,createMeeting:n=>{const r={id:_B(),title:n,agenda:[],totalPlannedDuration:0,totalActualDuration:0,status:"not-started",settings:{autoTransition:!1,silentMode:!1,bellSettings:{start:!0,fiveMinWarning:!0,end:!0,overtime:!0,soundType:"single"}}};return t(i=>({meetings:[...i.meetings,r],currentMeeting:r})),Xt.info("Meeting created",{meetingId:r.id,title:r.title},"agenda"),r.id},updateMeetingTitle:(n,r)=>{t(i=>{var a;return{meetings:i.meetings.map(s=>s.id===n?{...s,title:r}:s),currentMeeting:((a=i.currentMeeting)==null?void 0:a.id)===n?{...i.currentMeeting,title:r}:i.currentMeeting}}),Xt.info("Meeting title updated",{meetingId:n,title:r},"agenda")},deleteMeeting:n=>{const i=e().meetings.find(a=>a.id===n);t(a=>{var s;return{meetings:a.meetings.filter(o=>o.id!==n),currentMeeting:((s=a.currentMeeting)==null?void 0:s.id)===n?null:a.currentMeeting}}),Xt.info("Meeting deleted",{meetingId:n,title:i==null?void 0:i.title},"agenda")},setCurrentMeeting:n=>{const r=e().meetings.find(i=>i.id===n);r&&t({currentMeeting:r})},updateMeetingSettings:(n,r)=>{t(i=>{var a;return{meetings:i.meetings.map(s=>s.id===n?{...s,settings:{...s.settings,...r}}:s),currentMeeting:((a=i.currentMeeting)==null?void 0:a.id)===n?{...i.currentMeeting,settings:{...i.currentMeeting.settings,...r}}:i.currentMeeting}})},addAgenda:(n,r,i,a)=>{const s={id:_B(),title:r,plannedDuration:i,memo:a,order:0,actualDuration:0,remainingTime:i,status:"pending",minutesContent:"",minutesFormat:"markdown"};t(o=>{var c;const l=o.meetings.map(u=>{if(u.id===n){const f=u.agenda.map((p,m)=>({...p,order:m}));return{...u,agenda:[...f,{...s,order:f.length}],totalPlannedDuration:u.totalPlannedDuration+i}}return u});return{meetings:l,currentMeeting:((c=o.currentMeeting)==null?void 0:c.id)===n&&l.find(u=>u.id===n)||o.currentMeeting}})},updateAgenda:(n,r,i)=>{t(a=>{var l;const s=a.meetings.map(c=>{if(c.id===n){const u=c.agenda.map(m=>m.id===r?{...m,...i}:m),f=u.reduce((m,_)=>m+_.plannedDuration,0),p=u.reduce((m,_)=>m+_.actualDuration,0);return{...c,agenda:u,totalPlannedDuration:f,totalActualDuration:p}}return c}),o=s.find(c=>c.id===n);return{meetings:s,currentMeeting:((l=a.currentMeeting)==null?void 0:l.id)===n?{...a.currentMeeting,...o||{},currentAgendaId:(o==null?void 0:o.currentAgendaId)||a.currentMeeting.currentAgendaId}:a.currentMeeting}})},updateAgendaMinutes:(n,r,i)=>{e().updateAgenda(n,r,i)},deleteAgenda:(n,r)=>{t(i=>{var u;const a=i.meetings.find(f=>f.id===n),s=a==null?void 0:a.agenda.find(f=>f.id===r),o=(a==null?void 0:a.currentAgendaId)!==void 0&&a.currentAgendaId===r,l=i.meetings.map(f=>{if(f.id===n){const p=f.agenda.filter(y=>y.id!==r),m=o?p.filter(y=>y.order>((s==null?void 0:s.order)??-1)).sort((y,b)=>y.order-b.order)[0]||[...p].sort((y,b)=>y.order-b.order)[0]:void 0,_=p.map((y,b)=>({...y,order:b}));return{...f,agenda:_,totalPlannedDuration:f.totalPlannedDuration-((s==null?void 0:s.plannedDuration)||0),currentAgendaId:o?m==null?void 0:m.id:f.currentAgendaId}}return f}),c=l.find(f=>f.id===n);return{meetings:l,currentMeeting:((u=i.currentMeeting)==null?void 0:u.id)===n&&c||i.currentMeeting}})},selectAgenda:(n,r)=>{t(i=>{var f;const a=i.meetings.find(p=>p.id===n),s=a==null?void 0:a.agenda.find(p=>p.id===r);if(!a||!s)return{};const o=a.currentAgendaId;if(!(i.isRunning&&o!==void 0&&o!==r))return{...lg(i,n,r),currentTime:s.actualDuration,lastTickTime:i.isRunning?Date.now():i.lastTickTime};const c=i.meetings.map(p=>p.id!==n?p:{...p,currentAgendaId:r,agenda:p.agenda.map(m=>m.id===o&&m.status==="running"?{...m,status:"paused"}:m)}),u=c.find(p=>p.id===n)||null;return{meetings:c,currentMeeting:((f=i.currentMeeting)==null?void 0:f.id)===n?u:i.currentMeeting,isRunning:!1,currentTime:s.actualDuration,lastTickTime:void 0}})},reorderAgendas:(n,r)=>{t(i=>{var s;const a=i.meetings.map(o=>{if(o.id===n){const l=r.map((c,u)=>{const f=o.agenda.find(p=>p.id===c);return f?{...f,order:u}:null}).filter(Boolean);return{...o,agenda:l}}return o});return{meetings:a,currentMeeting:((s=i.currentMeeting)==null?void 0:s.id)===n&&a.find(o=>o.id===n)||i.currentMeeting}})},startTimer:()=>{const n=e(),r=e().getCurrentAgenda(),i=n.currentMeeting;if(!r||!i)return;yo.ensureInitialized().catch(console.warn);const a=Date.now(),s=new Date(a);t(o=>lg(o,i.id,r.id)),t({isRunning:!0,currentTime:r.actualDuration,meetingStartTime:n.meetingStartTime||s,lastTickTime:a}),Xt.timerStart(r.id,"agenda",r.plannedDuration*60),Xt.info("Agenda timer started",{meetingId:i.id,meetingTitle:i.title,agendaId:r.id,agendaTitle:r.title,plannedDuration:r.plannedDuration},"agenda"),e().updateAgenda(i.id,r.id,{status:"running",startTime:r.startTime||s}),G0("start",i.settings,`${r.title}`)},pauseTimer:()=>{const n=e(),r=e().getCurrentAgenda();if(r&&n.currentMeeting){const i=Math.max(r.actualDuration,n.currentTime);e().updateAgenda(n.currentMeeting.id,r.id,{actualDuration:i,remainingTime:r.plannedDuration-i,status:"paused"}),t({currentTime:i})}t({isRunning:!1})},stopTimer:()=>{e().isRunning&&t({isRunning:!1,lastTickTime:void 0}),e().nextAgenda()},nextAgenda:()=>{const n=e();if(!n.currentMeeting||n.isRunning)return;const r=e().getCurrentAgenda();if(!r||!(r.status==="running"||r.status==="paused"||r.status==="overtime"))return;e().updateAgenda(n.currentMeeting.id,r.id,{status:"completed",endTime:new Date});const a=n.currentMeeting.agenda.filter(s=>s.status==="pending"&&s.id!==(r==null?void 0:r.id)).sort((s,o)=>s.order-o.order)[0];if(a)t(s=>({...lg(s,n.currentMeeting.id,a.id),currentTime:0})),n.currentMeeting.settings.autoTransition&&n.isRunning&&setTimeout(()=>e().startTimer(),1e3);else{const s=new Date;t(o=>({meetings:o.meetings.map(l=>{var c;return l.id===((c=o.currentMeeting)==null?void 0:c.id)?{...l,status:"completed",endTime:s}:l}),currentMeeting:o.currentMeeting?{...o.currentMeeting,status:"completed",endTime:s}:null,isRunning:!1,currentTime:0,meetingStartTime:void 0,lastTickTime:void 0}))}},tick:()=>{const n=e();if(!n.isRunning||!n.currentMeeting)return;const r=e().getCurrentAgenda();if(!r)return;const i=Date.now(),a=n.lastTickTime?Math.round((i-n.lastTickTime)/1e3):1;if(a<=0)return;const o=Math.max(r.actualDuration,n.currentTime)+a,l=r.plannedDuration-o;t({currentTime:o,lastTickTime:i}),e().updateAgenda(n.currentMeeting.id,r.id,{remainingTime:l,actualDuration:o,status:l<=0?"overtime":"running"}),l===300&&G0("warning",n.currentMeeting.settings,`${r.title}5`),l===0&&G0("end",n.currentMeeting.settings,`${r.title}`),l<0&&Math.abs(l)%60===0&&G0("overtime",n.currentMeeting.settings,`${r.title}${Math.abs(Math.floor(l/60))}`)},getCurrentAgenda:()=>{const n=e();if(!n.currentMeeting)return null;const i=[...n.currentMeeting.agenda].filter(s=>s.status==="pending").sort((s,o)=>s.order-o.order)[0];if(!n.currentMeeting.currentAgendaId)return i&&t(s=>lg(s,n.currentMeeting.id,i.id)),i||null;const a=n.currentMeeting.agenda.find(s=>s.id===n.currentMeeting.currentAgendaId);return a||(i&&t(s=>lg(s,n.currentMeeting.id,i.id)),i||null)},getProgressPercentage:()=>{const n=e().getCurrentAgenda();return n?Math.min(n.actualDuration/n.plannedDuration*100,150):0},getTotalProgressPercentage:()=>{const n=e();return!n.currentMeeting||n.currentMeeting.totalPlannedDuration===0?0:Math.min(n.currentMeeting.totalActualDuration/n.currentMeeting.totalPlannedDuration*100,150)},calculateTimeColor:n=>Pxe(n),syncTime:()=>{const n=e();!n.isRunning||!n.lastTickTime||e().tick()}}),{name:"agenda-timer-store",storage:uS(()=>localStorage),partialize:t=>({currentMeeting:t.currentMeeting,meetings:t.meetings})})),Rxe=864e5;function Ud(t){return Math.round(t/60)}function hw(t,e){const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");if(e==="day")return`${n}-${r}-${i}`;if(e==="month")return`${n}-${r}`;const a=new Date(n,0,1),s=Math.ceil(((t.getTime()-a.getTime())/Rxe+a.getDay()+1)/7);return`${n}-W${String(s).padStart(2,"0")}`}function jxe(t){const e=[],n=new Set,r=new Date(t.since);r.setHours(0,0,0,0);const i=new Date(t.until);for(i.setHours(23,59,59,999);r<=i;){const a=hw(r,t.granularity);n.has(a)||(n.add(a),e.push(a)),t.granularity==="month"?r.setMonth(r.getMonth()+1):t.granularity==="week"?r.setDate(r.getDate()+7):r.setDate(r.getDate()+1)}return e}function Yh(t,e){const n=t.getTime();return n>=e.since.getTime()&&n<=e.until.getTime()}class $xe{compute(e,n){const r=jxe(e),i=new Map(r.map(w=>[w,{label:w,focusMinutes:0,sessions:0,completedSessions:0}])),a=new Map;if(!e.timerKind||e.timerKind==="basic")for(const w of n.basicHistory){const T=new Date(w.startTime);if(!Yh(T,e))continue;const A=hw(T,e.granularity),E=i.get(A);E&&(E.focusMinutes+=Ud(w.actualDuration),E.sessions+=1,w.completed&&(E.completedSessions+=1)),kA(a,T,Ud(w.actualDuration))}const o=!e.timerKind||e.timerKind==="pomodoro";let l=0,c=0;if(o)for(const w of n.pomodoroSessions){if(w.phase!=="work")continue;const T=new Date(w.startTime);if(!Yh(T,e))continue;l+=1;const A=hw(T,e.granularity),E=i.get(A),C=Ud(w.duration);E&&(E.focusMinutes+=C,E.sessions+=1,w.completed&&(E.completedSessions+=1,c+=1)),kA(a,T,C)}const u=!e.timerKind;let f=0,p=0;if(u)for(const w of n.meetings)for(const T of w.agenda){if(!T.startTime)continue;const A=new Date(T.startTime);if(!Yh(A,e))continue;p+=1;const E=hw(A,e.granularity),C=i.get(E),R=Ud(T.actualDuration);C&&(C.focusMinutes+=R,C.sessions+=1,T.status==="completed"&&(C.completedSessions+=1)),T.actualDuration>T.plannedDuration&&(f+=1),kA(a,A,R)}let m=0,_=0,y=0;for(const w of i.values())m+=w.focusMinutes,_+=w.sessions,y+=w.completedSessions;const b={focusMinutes:m,sessions:_,completedSessions:y,pomodoroAchievementRate:l>0?Math.round(c/l*100):0,meetingOvertimeRate:p>0?Math.round(f/p*100):0},x=Mxe(e,n);return{kpi:b,trend:r.map(w=>i.get(w)),heatmap:Array.from(a.values()),donut:x}}}function kA(t,e,n){const r=e.getDay(),i=e.getHours(),a=`${r}-${i}`,s=t.get(a);s?s.minutes+=n:t.set(a,{weekday:r,hour:i,minutes:n})}function Mxe(t,e){const n=[];if(!t.timerKind||t.timerKind==="basic"){const r=e.basicHistory.filter(i=>Yh(new Date(i.startTime),t)).reduce((i,a)=>i+Ud(a.actualDuration),0);r>0&&n.push({name:"",value:r})}if(!t.timerKind||t.timerKind==="pomodoro"){const r=e.pomodoroSessions.filter(i=>i.phase==="work"&&Yh(new Date(i.startTime),t)).reduce((i,a)=>i+Ud(a.duration),0);r>0&&n.push({name:"",value:r})}if(!t.timerKind){const r=e.meetings.flatMap(i=>i.agenda).filter(i=>i.startTime&&Yh(new Date(i.startTime),t)).reduce((i,a)=>i+Ud(a.actualDuration),0);r>0&&n.push({name:"",value:r})}if(!t.timerKind||t.timerKind==="multi")for(const[r,i]of Object.entries(e.multiCategoryMap))i>0&&n.push({name:r,value:i});return n}const Lxe=new $xe,K0=({label:t,value:e,sub:n,className:r})=>g.jsx(Mt,{className:ct("flex-1 min-w-0",r),children:g.jsxs(Vt,{className:"p-4",children:[g.jsx("p",{className:"text-xs text-muted-foreground mb-1 truncate",children:t}),g.jsx("p",{className:"text-2xl font-bold leading-none",children:e}),n&&g.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n})]})});var NA,wB;function ga(){if(wB)return NA;wB=1;var t=Array.isArray;return NA=t,NA}var IA,xB;function HY(){if(xB)return IA;xB=1;var t=typeof Cs=="object"&&Cs&&Cs.Object===Object&&Cs;return IA=t,IA}var PA,SB;function kl(){if(SB)return PA;SB=1;var t=HY(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return PA=n,PA}var RA,TB;function fb(){if(TB)return RA;TB=1;var t=kl(),e=t.Symbol;return RA=e,RA}var jA,EB;function Dxe(){if(EB)return jA;EB=1;var t=fb(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function a(s){var o=n.call(s,i),l=s[i];try{s[i]=void 0;var c=!0}catch{}var u=r.call(s);return c&&(o?s[i]=l:delete s[i]),u}return jA=a,jA}var $A,AB;function Bxe(){if(AB)return $A;AB=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return $A=n,$A}var MA,OB;function Pc(){if(OB)return MA;OB=1;var t=fb(),e=Dxe(),n=Bxe(),r="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?e(o):n(o)}return MA=s,MA}var LA,CB;function Rc(){if(CB)return LA;CB=1;function t(e){return e!=null&&typeof e=="object"}return LA=t,LA}var DA,kB;function hm(){if(kB)return DA;kB=1;var t=Pc(),e=Rc(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return DA=r,DA}var BA,NB;function nM(){if(NB)return BA;NB=1;var t=ga(),e=hm(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(t(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return BA=i,BA}var FA,IB;function Ku(){if(IB)return FA;IB=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return FA=t,FA}var UA,PB;function rM(){if(PB)return UA;PB=1;var t=Pc(),e=Ku(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var l=t(o);return l==r||l==i||l==n||l==a}return UA=s,UA}var zA,RB;function Fxe(){if(RB)return zA;RB=1;var t=kl(),e=t["__core-js_shared__"];return zA=e,zA}var qA,jB;function Uxe(){if(jB)return qA;jB=1;var t=Fxe(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return qA=n,qA}var HA,$B;function WY(){if($B)return HA;$B=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return HA=n,HA}var WA,MB;function zxe(){if(MB)return WA;MB=1;var t=rM(),e=Uxe(),n=Ku(),r=WY(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,c=o.hasOwnProperty,u=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(p){if(!n(p)||e(p))return!1;var m=t(p)?u:a;return m.test(r(p))}return WA=f,WA}var VA,LB;function qxe(){if(LB)return VA;LB=1;function t(e,n){return e==null?void 0:e[n]}return VA=t,VA}var GA,DB;function vf(){if(DB)return GA;DB=1;var t=zxe(),e=qxe();function n(r,i){var a=e(r,i);return t(a)?a:void 0}return GA=n,GA}var KA,BB;function wS(){if(BB)return KA;BB=1;var t=vf(),e=t(Object,"create");return KA=e,KA}var ZA,FB;function Hxe(){if(FB)return ZA;FB=1;var t=wS();function e(){this.__data__=t?t(null):{},this.size=0}return ZA=e,ZA}var XA,UB;function Wxe(){if(UB)return XA;UB=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return XA=t,XA}var JA,zB;function Vxe(){if(zB)return JA;zB=1;var t=wS(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(t){var o=s[a];return o===e?void 0:o}return r.call(s,a)?s[a]:void 0}return JA=i,JA}var YA,qB;function Gxe(){if(qB)return YA;qB=1;var t=wS(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return YA=r,YA}var QA,HB;function Kxe(){if(HB)return QA;HB=1;var t=wS(),e="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&i===void 0?e:i,this}return QA=n,QA}var eO,WB;function Zxe(){if(WB)return eO;WB=1;var t=Hxe(),e=Wxe(),n=Vxe(),r=Gxe(),i=Kxe();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,eO=a,eO}var tO,VB;function Xxe(){if(VB)return tO;VB=1;function t(){this.__data__=[],this.size=0}return tO=t,tO}var nO,GB;function iM(){if(GB)return nO;GB=1;function t(e,n){return e===n||e!==e&&n!==n}return nO=t,nO}var rO,KB;function xS(){if(KB)return rO;KB=1;var t=iM();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return rO=e,rO}var iO,ZB;function Jxe(){if(ZB)return iO;ZB=1;var t=xS(),e=Array.prototype,n=e.splice;function r(i){var a=this.__data__,s=t(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return iO=r,iO}var aO,XB;function Yxe(){if(XB)return aO;XB=1;var t=xS();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return aO=e,aO}var sO,JB;function Qxe(){if(JB)return sO;JB=1;var t=xS();function e(n){return t(this.__data__,n)>-1}return sO=e,sO}var oO,YB;function e1e(){if(YB)return oO;YB=1;var t=xS();function e(n,r){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return oO=e,oO}var lO,QB;function SS(){if(QB)return lO;QB=1;var t=Xxe(),e=Jxe(),n=Yxe(),r=Qxe(),i=e1e();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,lO=a,lO}var cO,eF;function aM(){if(eF)return cO;eF=1;var t=vf(),e=kl(),n=t(e,"Map");return cO=n,cO}var uO,tF;function t1e(){if(tF)return uO;tF=1;var t=Zxe(),e=SS(),n=aM();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return uO=r,uO}var dO,nF;function n1e(){if(nF)return dO;nF=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return dO=t,dO}var fO,rF;function TS(){if(rF)return fO;rF=1;var t=n1e();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return fO=e,fO}var hO,iF;function r1e(){if(iF)return hO;iF=1;var t=TS();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return hO=e,hO}var pO,aF;function i1e(){if(aF)return pO;aF=1;var t=TS();function e(n){return t(this,n).get(n)}return pO=e,pO}var mO,sF;function a1e(){if(sF)return mO;sF=1;var t=TS();function e(n){return t(this,n).has(n)}return mO=e,mO}var gO,oF;function s1e(){if(oF)return gO;oF=1;var t=TS();function e(n,r){var i=t(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return gO=e,gO}var yO,lF;function sM(){if(lF)return yO;lF=1;var t=t1e(),e=r1e(),n=i1e(),r=a1e(),i=s1e();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var c=s[o];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,yO=a,yO}var vO,cF;function VY(){if(cF)return vO;cF=1;var t=sM(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var c=r.apply(this,s);return a.cache=l.set(o,c)||l,c};return a.cache=new(n.Cache||t),a}return n.Cache=t,vO=n,vO}var bO,uF;function o1e(){if(uF)return bO;uF=1;var t=VY(),e=500;function n(r){var i=t(r,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return bO=n,bO}var _O,dF;function l1e(){if(dF)return _O;dF=1;var t=o1e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,o,l,c){a.push(l?c.replace(n,"$1"):o||s)}),a});return _O=r,_O}var wO,fF;function oM(){if(fF)return wO;fF=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return wO=t,wO}var xO,hF;function c1e(){if(hF)return xO;hF=1;var t=fb(),e=oM(),n=ga(),r=hm(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return e(o,s)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return xO=s,xO}var SO,pF;function GY(){if(pF)return SO;pF=1;var t=c1e();function e(n){return n==null?"":t(n)}return SO=e,SO}var TO,mF;function KY(){if(mF)return TO;mF=1;var t=ga(),e=nM(),n=l1e(),r=GY();function i(a,s){return t(a)?a:e(a,s)?[a]:n(r(a))}return TO=i,TO}var EO,gF;function ES(){if(gF)return EO;gF=1;var t=hm();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return EO=e,EO}var AO,yF;function lM(){if(yF)return AO;yF=1;var t=KY(),e=ES();function n(r,i){i=t(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[e(i[a++])];return a&&a==s?r:void 0}return AO=n,AO}var OO,vF;function ZY(){if(vF)return OO;vF=1;var t=lM();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return OO=e,OO}var u1e=ZY();const Ga=Ut(u1e);var CO,bF;function d1e(){if(bF)return CO;bF=1;function t(e){return e==null}return CO=t,CO}var f1e=d1e();const At=Ut(f1e);var kO,_F;function h1e(){if(_F)return kO;_F=1;var t=Pc(),e=ga(),n=Rc(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return kO=i,kO}var p1e=h1e();const hb=Ut(p1e);var m1e=rM();const xt=Ut(m1e);var g1e=Ku();const pm=Ut(g1e);var NO={exports:{}},rn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wF;function y1e(){if(wF)return rn;wF=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),_;_=Symbol.for("react.module.reference");function y(b){if(typeof b=="object"&&b!==null){var x=b.$$typeof;switch(x){case t:switch(b=b.type,b){case n:case i:case r:case c:case u:return b;default:switch(b=b&&b.$$typeof,b){case o:case s:case l:case p:case f:case a:return b;default:return x}}case e:return x}}}return rn.ContextConsumer=s,rn.ContextProvider=a,rn.Element=t,rn.ForwardRef=l,rn.Fragment=n,rn.Lazy=p,rn.Memo=f,rn.Portal=e,rn.Profiler=i,rn.StrictMode=r,rn.Suspense=c,rn.SuspenseList=u,rn.isAsyncMode=function(){return!1},rn.isConcurrentMode=function(){return!1},rn.isContextConsumer=function(b){return y(b)===s},rn.isContextProvider=function(b){return y(b)===a},rn.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},rn.isForwardRef=function(b){return y(b)===l},rn.isFragment=function(b){return y(b)===n},rn.isLazy=function(b){return y(b)===p},rn.isMemo=function(b){return y(b)===f},rn.isPortal=function(b){return y(b)===e},rn.isProfiler=function(b){return y(b)===i},rn.isStrictMode=function(b){return y(b)===r},rn.isSuspense=function(b){return y(b)===c},rn.isSuspenseList=function(b){return y(b)===u},rn.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===i||b===r||b===c||b===u||b===m||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===f||b.$$typeof===a||b.$$typeof===s||b.$$typeof===l||b.$$typeof===_||b.getModuleId!==void 0)},rn.typeOf=y,rn}var xF;function v1e(){return xF||(xF=1,NO.exports=y1e()),NO.exports}var b1e=v1e(),IO,SF;function XY(){if(SF)return IO;SF=1;var t=Pc(),e=Rc(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return IO=r,IO}var PO,TF;function _1e(){if(TF)return PO;TF=1;var t=XY();function e(n){return t(n)&&n!=+n}return PO=e,PO}var w1e=_1e();const pb=Ut(w1e);var x1e=XY();const S1e=Ut(x1e);var Bi=function(e){return e===0?0:e>0?1:-1},zd=function(e){return hb(e)&&e.indexOf("%")===e.length-1},$e=function(e){return S1e(e)&&!pb(e)},Ir=function(e){return $e(e)||hb(e)},T1e=0,mm=function(e){var n=++T1e;return"".concat(e||"").concat(n)},Fi=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!$e(e)&&!hb(e))return r;var a;if(zd(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return pb(a)&&(a=r),i&&a>n&&(a=n),a},xu=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},E1e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Ba=function(e,n){return $e(e)&&$e(n)?function(r){return e+r*(n-e)}:function(){return n}};function rx(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ga(r,e))===n})}function Qh(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function dR(t){"@babel/helpers - typeof";return dR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dR(t)}var A1e=["viewBox","children"],O1e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],EF=["points","pathLength"],RO={svg:A1e,polygon:EF,polyline:EF},cM=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ix=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(k.isValidElement(e)&&(r=e.props),!pm(r))return null;var i={};return Object.keys(r).forEach(function(a){cM.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},C1e=function(e,n,r){return function(i){return e(n,r,i),null}},of=function(e,n,r){if(!pm(e)||dR(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];cM.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=C1e(s,n,r))}),i},k1e=["children"],N1e=["children"];function AF(t,e){if(t==null)return{};var n=I1e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function I1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fR(t){"@babel/helpers - typeof";return fR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fR(t)}var OF={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},dc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},CF=null,jO=null,uM=function t(e){if(e===CF&&Array.isArray(jO))return jO;var n=[];return k.Children.forEach(e,function(r){At(r)||(b1e.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),jO=n,CF=e,n};function Ka(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return dc(i)}):r=[dc(e)],uM(t).forEach(function(i){var a=Ga(i,"type.displayName")||Ga(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function Ma(t,e){var n=Ka(t,e);return n&&n[0]}var kF=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!$e(r)||r<=0||!$e(i)||i<=0)},P1e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],R1e=function(e){return e&&e.type&&hb(e.type)&&P1e.indexOf(e.type)>=0},j1e=function(e){return e&&fR(e)==="object"&&"clipDot"in e},$1e=function(e,n,r,i){var a,s=(a=RO==null?void 0:RO[i])!==null&&a!==void 0?a:[];return!xt(e)&&(i&&s.includes(n)||O1e.includes(n))||r&&cM.includes(n)},mt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(k.isValidElement(e)&&(i=e.props),!pm(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;$1e((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},hR=function t(e,n){if(e===n)return!0;var r=k.Children.count(e);if(r!==k.Children.count(n))return!1;if(r===0)return!0;if(r===1)return NF(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!NF(a,s))return!1}return!0},NF=function(e,n){if(At(e)&&At(n))return!0;if(!At(e)&&!At(n)){var r=e.props||{},i=r.children,a=AF(r,k1e),s=n.props||{},o=s.children,l=AF(s,N1e);return i&&o?Qh(a,l)&&hR(i,o):!i&&!o?Qh(a,l):!1}return!1},IF=function(e,n){var r=[],i={};return uM(e).forEach(function(a,s){if(R1e(a))r.push(a);else if(a){var o=dc(a.type),l=n[o]||{},c=l.handler,u=l.once;if(c&&(!u||!i[o])){var f=c(a,o,s);r.push(f),i[o]=!0}}}),r},M1e=function(e){var n=e&&e.type;return n&&OF[n]?OF[n]:null},L1e=function(e,n){return uM(n).indexOf(e)},D1e=["children","width","height","viewBox","className","style","title","desc"];function pR(){return pR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pR.apply(this,arguments)}function B1e(t,e){if(t==null)return{};var n=F1e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function F1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mR(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,l=t.desc,c=B1e(t,D1e),u=i||{width:n,height:r,x:0,y:0},f=Ct("recharts-surface",a);return ee.createElement("svg",pR({},mt(c,!0,"svg"),{className:f,width:n,height:r,style:s,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ee.createElement("title",null,o),ee.createElement("desc",null,l),e)}var U1e=["children","className"];function gR(){return gR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gR.apply(this,arguments)}function z1e(t,e){if(t==null)return{};var n=q1e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function q1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Yt=ee.forwardRef(function(t,e){var n=t.children,r=t.className,i=z1e(t,U1e),a=Ct("recharts-layer",r);return ee.createElement("g",gR({className:a},mt(i,!0),{ref:e}),n)}),_o=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},$O,PF;function H1e(){if(PF)return $O;PF=1;function t(e,n,r){var i=-1,a=e.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+n];return s}return $O=t,$O}var MO,RF;function W1e(){if(RF)return MO;RF=1;var t=H1e();function e(n,r,i){var a=n.length;return i=i===void 0?a:i,!r&&i>=a?n:t(n,r,i)}return MO=e,MO}var LO,jF;function JY(){if(jF)return LO;jF=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+t+i+a+"]");function l(c){return o.test(c)}return LO=l,LO}var DO,$F;function V1e(){if($F)return DO;$F=1;function t(e){return e.split("")}return DO=t,DO}var BO,MF;function G1e(){if(MF)return BO;MF=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="["+t+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+o+"|"+l+")",u="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",_=c+"?",y="["+a+"]?",b="(?:"+m+"(?:"+[u,f,p].join("|")+")"+y+_+")*",x=y+_+b,w="(?:"+[u+o+"?",o,f,p,s].join("|")+")",T=RegExp(l+"(?="+l+")|"+w+x,"g");function A(E){return E.match(T)||[]}return BO=A,BO}var FO,LF;function K1e(){if(LF)return FO;LF=1;var t=V1e(),e=JY(),n=G1e();function r(i){return e(i)?n(i):t(i)}return FO=r,FO}var UO,DF;function Z1e(){if(DF)return UO;DF=1;var t=W1e(),e=JY(),n=K1e(),r=GY();function i(a){return function(s){s=r(s);var o=e(s)?n(s):void 0,l=o?o[0]:s.charAt(0),c=o?t(o,1).join(""):s.slice(1);return l[a]()+c}}return UO=i,UO}var zO,BF;function X1e(){if(BF)return zO;BF=1;var t=Z1e(),e=t("toUpperCase");return zO=e,zO}var J1e=X1e();const AS=Ut(J1e);function En(t){return function(){return t}}const YY=Math.cos,ax=Math.sin,Io=Math.sqrt,sx=Math.PI,OS=2*sx,yR=Math.PI,vR=2*yR,Cd=1e-6,Y1e=vR-Cd;function QY(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Q1e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return QY;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class eSe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?QY:Q1e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,c=i-n,u=s-e,f=o-n,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Cd)if(!(Math.abs(f*l-c*u)>Cd)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-s,_=i-o,y=l*l+c*c,b=m*m+_*_,x=Math.sqrt(y),w=Math.sqrt(p),T=a*Math.tan((yR-Math.acos((y+p-b)/(2*x*w)))/2),A=T/w,E=T/x;Math.abs(A-1)>Cd&&this._append`L${e+A*u},${n+A*f}`,this._append`A${a},${a},0,0,${+(f*m>u*_)},${this._x1=e+E*l},${this._y1=n+E*c}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,u=n+l,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Cd||Math.abs(this._y1-u)>Cd)&&this._append`L${c},${u}`,r&&(p<0&&(p=p%vR+vR),p>Y1e?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:p>Cd&&this._append`A${r},${r},0,${+(p>=yR)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function dM(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new eSe(e)}function fM(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function eQ(t){this._context=t}eQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function CS(t){return new eQ(t)}function tQ(t){return t[0]}function nQ(t){return t[1]}function rQ(t,e){var n=En(!0),r=null,i=CS,a=null,s=dM(o);t=typeof t=="function"?t:t===void 0?tQ:En(t),e=typeof e=="function"?e:e===void 0?nQ:En(e);function o(l){var c,u=(l=fM(l)).length,f,p=!1,m;for(r==null&&(a=i(m=s())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(f,c,l),+e(f,c,l));if(m)return a=null,m+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:En(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:En(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:En(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}function Z0(t,e,n){var r=null,i=En(!0),a=null,s=CS,o=null,l=dM(c);t=typeof t=="function"?t:t===void 0?tQ:En(+t),e=typeof e=="function"?e:En(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?nQ:En(+n);function c(f){var p,m,_,y=(f=fM(f)).length,b,x=!1,w,T=new Array(y),A=new Array(y);for(a==null&&(o=s(w=l())),p=0;p<=y;++p){if(!(p<y&&i(b=f[p],p,f))===x)if(x=!x)m=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),_=p-1;_>=m;--_)o.point(T[_],A[_]);o.lineEnd(),o.areaEnd()}x&&(T[p]=+t(b,p,f),A[p]=+e(b,p,f),o.point(r?+r(b,p,f):T[p],n?+n(b,p,f):A[p]))}if(w)return o=null,w+""||null}function u(){return rQ().defined(i).curve(s).context(a)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:En(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:En(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:En(!!f),c):i},c.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),c):s},c.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),c):a},c}class iQ{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function tSe(t){return new iQ(t,!0)}function nSe(t){return new iQ(t,!1)}const hM={draw(t,e){const n=Io(e/sx);t.moveTo(n,0),t.arc(0,0,n,0,OS)}},rSe={draw(t,e){const n=Io(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},aQ=Io(1/3),iSe=aQ*2,aSe={draw(t,e){const n=Io(e/iSe),r=n*aQ;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},sSe={draw(t,e){const n=Io(e),r=-n/2;t.rect(r,r,n,n)}},oSe=.8908130915292852,sQ=ax(sx/10)/ax(7*sx/10),lSe=ax(OS/10)*sQ,cSe=-YY(OS/10)*sQ,uSe={draw(t,e){const n=Io(e*oSe),r=lSe*n,i=cSe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=OS*a/5,o=YY(s),l=ax(s);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},qO=Io(3),dSe={draw(t,e){const n=-Io(e/(qO*3));t.moveTo(0,n*2),t.lineTo(-qO*n,-n),t.lineTo(qO*n,-n),t.closePath()}},gs=-.5,ys=Io(3)/2,bR=1/Io(12),fSe=(bR/2+1)*3,hSe={draw(t,e){const n=Io(e/fSe),r=n/2,i=n*bR,a=r,s=n*bR+n,o=-a,l=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(gs*r-ys*i,ys*r+gs*i),t.lineTo(gs*a-ys*s,ys*a+gs*s),t.lineTo(gs*o-ys*l,ys*o+gs*l),t.lineTo(gs*r+ys*i,gs*i-ys*r),t.lineTo(gs*a+ys*s,gs*s-ys*a),t.lineTo(gs*o+ys*l,gs*l-ys*o),t.closePath()}};function pSe(t,e){let n=null,r=dM(i);t=typeof t=="function"?t:En(t||hM),e=typeof e=="function"?e:En(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:En(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:En(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function ox(){}function lx(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function oQ(t){this._context=t}oQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mSe(t){return new oQ(t)}function lQ(t){this._context=t}lQ.prototype={areaStart:ox,areaEnd:ox,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:lx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gSe(t){return new lQ(t)}function cQ(t){this._context=t}cQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:lx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ySe(t){return new cQ(t)}function uQ(t){this._context=t}uQ.prototype={areaStart:ox,areaEnd:ox,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function vSe(t){return new uQ(t)}function FF(t){return t<0?-1:1}function UF(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(FF(a)+FF(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function zF(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function HO(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function cx(t){this._context=t}cx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:HO(this,this._t0,zF(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,HO(this,zF(this,n=UF(this,t,e)),n);break;default:HO(this,this._t0,n=UF(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function dQ(t){this._context=new fQ(t)}(dQ.prototype=Object.create(cx.prototype)).point=function(t,e){cx.prototype.point.call(this,e,t)};function fQ(t){this._context=t}fQ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function bSe(t){return new cx(t)}function _Se(t){return new dQ(t)}function hQ(t){this._context=t}hQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=qF(t),i=qF(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function qF(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function wSe(t){return new hQ(t)}function kS(t,e){this._context=t,this._t=e}kS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function xSe(t){return new kS(t,.5)}function SSe(t){return new kS(t,0)}function TSe(t){return new kS(t,1)}function gp(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function _R(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function ESe(t,e){return t[e]}function ASe(t){const e=[];return e.key=t,e}function OSe(){var t=En([]),e=_R,n=gp,r=ESe;function i(a){var s=Array.from(t.apply(this,arguments),ASe),o,l=s.length,c=-1,u;for(const f of a)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(f,s[o].key,c,a)]).data=f;for(o=0,u=fM(e(s));o<l;++o)s[u[o]].index=o;return n(s,u),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:En(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:En(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?_R:typeof a=="function"?a:En(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??gp,i):n},i}function CSe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}gp(t,e)}}function kSe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}gp(t,e)}}function NSe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,l=0,c=0;o<s;++o){for(var u=t[e[o]],f=u[r][1]||0,p=u[r-1][1]||0,m=(f-p)/2,_=0;_<o;++_){var y=t[e[_]],b=y[r][1]||0,x=y[r-1][1]||0;m+=b-x}l+=f,c+=m*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,gp(t,e)}}function Ky(t){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(t)}var ISe=["type","size","sizeType"];function wR(){return wR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wR.apply(this,arguments)}function HF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HF(Object(n),!0).forEach(function(r){PSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PSe(t,e,n){return e=RSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RSe(t){var e=jSe(t,"string");return Ky(e)=="symbol"?e:e+""}function jSe(t,e){if(Ky(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Se(t,e){if(t==null)return{};var n=MSe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function MSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var pQ={symbolCircle:hM,symbolCross:rSe,symbolDiamond:aSe,symbolSquare:sSe,symbolStar:uSe,symbolTriangle:dSe,symbolWye:hSe},LSe=Math.PI/180,DSe=function(e){var n="symbol".concat(AS(e));return pQ[n]||hM},BSe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*LSe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},FSe=function(e,n){pQ["symbol".concat(AS(e))]=n},pM=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,l=$Se(e,ISe),c=WF(WF({},l),{},{type:r,size:a,sizeType:o}),u=function(){var b=DSe(r),x=pSe().type(b).size(BSe(a,o,r));return x()},f=c.className,p=c.cx,m=c.cy,_=mt(c,!0);return p===+p&&m===+m&&a===+a?ee.createElement("path",wR({},_,{className:Ct("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(m,")"),d:u()})):null};pM.registerSymbol=FSe;function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}function xR(){return xR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xR.apply(this,arguments)}function VF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function USe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VF(Object(n),!0).forEach(function(r){Zy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gQ(r.key),r)}}function HSe(t,e,n){return e&&qSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function WSe(t,e,n){return e=ux(e),VSe(t,mQ()?Reflect.construct(e,n||[],ux(t).constructor):e.apply(t,n))}function VSe(t,e){if(e&&(yp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GSe(t)}function GSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mQ=function(){return!!t})()}function ux(t){return ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ux(t)}function KSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SR(t,e)}function SR(t,e){return SR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SR(t,e)}function Zy(t,e,n){return e=gQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gQ(t){var e=ZSe(t,"string");return yp(e)=="symbol"?e:e+""}function ZSe(t,e){if(yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vs=32,mM=(function(t){function e(){return zSe(this,e),WSe(this,e,arguments)}return KSe(e,t),HSe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=vs/2,s=vs/6,o=vs/3,l=r.inactive?i:r.color;if(r.type==="plainline")return ee.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:vs,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return ee.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(vs,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return ee.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(vs/8,"h").concat(vs,"v").concat(vs*3/4,"h").concat(-vs,"z"),className:"recharts-legend-icon"});if(ee.isValidElement(r.legendIcon)){var c=USe({},r);return delete c.legendIcon,ee.cloneElement(r.legendIcon,c)}return ee.createElement(pM,{fill:l,cx:a,cy:a,size:vs,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:vs,height:vs},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,_){var y=m.formatter||l,b=Ct(Zy(Zy({"recharts-legend-item":!0},"legend-item-".concat(_),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=xt(m.value)?null:m.value;_o(!xt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=m.inactive?c:m.color;return ee.createElement("li",xR({className:b,style:f,key:"legend-item-".concat(_)},of(r.props,m,_)),ee.createElement(mR,{width:s,height:s,viewBox:u,style:p},r.renderIcon(m)),ee.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},y?y(x,m,_):x))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return ee.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(k.PureComponent);Zy(mM,"displayName","Legend");Zy(mM,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var WO,GF;function XSe(){if(GF)return WO;GF=1;var t=SS();function e(){this.__data__=new t,this.size=0}return WO=e,WO}var VO,KF;function JSe(){if(KF)return VO;KF=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return VO=t,VO}var GO,ZF;function YSe(){if(ZF)return GO;ZF=1;function t(e){return this.__data__.get(e)}return GO=t,GO}var KO,XF;function QSe(){if(XF)return KO;XF=1;function t(e){return this.__data__.has(e)}return KO=t,KO}var ZO,JF;function eTe(){if(JF)return ZO;JF=1;var t=SS(),e=aM(),n=sM(),r=200;function i(a,s){var o=this.__data__;if(o instanceof t){var l=o.__data__;if(!e||l.length<r-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,s),this.size=o.size,this}return ZO=i,ZO}var XO,YF;function yQ(){if(YF)return XO;YF=1;var t=SS(),e=XSe(),n=JSe(),r=YSe(),i=QSe(),a=eTe();function s(o){var l=this.__data__=new t(o);this.size=l.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,XO=s,XO}var JO,QF;function tTe(){if(QF)return JO;QF=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return JO=e,JO}var YO,e6;function nTe(){if(e6)return YO;e6=1;function t(e){return this.__data__.has(e)}return YO=t,YO}var QO,t6;function vQ(){if(t6)return QO;t6=1;var t=sM(),e=tTe(),n=nTe();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new t;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,QO=r,QO}var eC,n6;function bQ(){if(n6)return eC;n6=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return eC=t,eC}var tC,r6;function _Q(){if(r6)return tC;r6=1;function t(e,n){return e.has(n)}return tC=t,tC}var nC,i6;function wQ(){if(i6)return nC;i6=1;var t=vQ(),e=bQ(),n=_Q(),r=1,i=2;function a(s,o,l,c,u,f){var p=l&r,m=s.length,_=o.length;if(m!=_&&!(p&&_>m))return!1;var y=f.get(s),b=f.get(o);if(y&&b)return y==o&&b==s;var x=-1,w=!0,T=l&i?new t:void 0;for(f.set(s,o),f.set(o,s);++x<m;){var A=s[x],E=o[x];if(c)var C=p?c(E,A,x,o,s,f):c(A,E,x,s,o,f);if(C!==void 0){if(C)continue;w=!1;break}if(T){if(!e(o,function(R,N){if(!n(T,N)&&(A===R||u(A,R,l,c,f)))return T.push(N)})){w=!1;break}}else if(!(A===E||u(A,E,l,c,f))){w=!1;break}}return f.delete(s),f.delete(o),w}return nC=a,nC}var rC,a6;function rTe(){if(a6)return rC;a6=1;var t=kl(),e=t.Uint8Array;return rC=e,rC}var iC,s6;function iTe(){if(s6)return iC;s6=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return iC=t,iC}var aC,o6;function gM(){if(o6)return aC;o6=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return aC=t,aC}var sC,l6;function aTe(){if(l6)return sC;l6=1;var t=fb(),e=rTe(),n=iM(),r=wQ(),i=iTe(),a=gM(),s=1,o=2,l="[object Boolean]",c="[object Date]",u="[object Error]",f="[object Map]",p="[object Number]",m="[object RegExp]",_="[object Set]",y="[object String]",b="[object Symbol]",x="[object ArrayBuffer]",w="[object DataView]",T=t?t.prototype:void 0,A=T?T.valueOf:void 0;function E(C,R,N,D,Z,j,L){switch(N){case w:if(C.byteLength!=R.byteLength||C.byteOffset!=R.byteOffset)return!1;C=C.buffer,R=R.buffer;case x:return!(C.byteLength!=R.byteLength||!j(new e(C),new e(R)));case l:case c:case p:return n(+C,+R);case u:return C.name==R.name&&C.message==R.message;case m:case y:return C==R+"";case f:var B=i;case _:var z=D&s;if(B||(B=a),C.size!=R.size&&!z)return!1;var W=L.get(C);if(W)return W==R;D|=o,L.set(C,R);var q=r(B(C),B(R),D,Z,j,L);return L.delete(C),q;case b:if(A)return A.call(C)==A.call(R)}return!1}return sC=E,sC}var oC,c6;function xQ(){if(c6)return oC;c6=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return oC=t,oC}var lC,u6;function sTe(){if(u6)return lC;u6=1;var t=xQ(),e=ga();function n(r,i,a){var s=i(r);return e(r)?s:t(s,a(r))}return lC=n,lC}var cC,d6;function oTe(){if(d6)return cC;d6=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,s=[];++r<i;){var o=e[r];n(o,r,e)&&(s[a++]=o)}return s}return cC=t,cC}var uC,f6;function lTe(){if(f6)return uC;f6=1;function t(){return[]}return uC=t,uC}var dC,h6;function cTe(){if(h6)return dC;h6=1;var t=oTe(),e=lTe(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(o){return r.call(s,o)}))}:e;return dC=a,dC}var fC,p6;function uTe(){if(p6)return fC;p6=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return fC=t,fC}var hC,m6;function dTe(){if(m6)return hC;m6=1;var t=Pc(),e=Rc(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return hC=r,hC}var pC,g6;function yM(){if(g6)return pC;g6=1;var t=dTe(),e=Rc(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return pC=a,pC}var Kg={exports:{}},mC,y6;function fTe(){if(y6)return mC;y6=1;function t(){return!1}return mC=t,mC}Kg.exports;var v6;function SQ(){return v6||(v6=1,(function(t,e){var n=kl(),r=fTe(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||r;t.exports=c})(Kg,Kg.exports)),Kg.exports}var gC,b6;function vM(){if(b6)return gC;b6=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return gC=n,gC}var yC,_6;function bM(){if(_6)return yC;_6=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return yC=e,yC}var vC,w6;function hTe(){if(w6)return vC;w6=1;var t=Pc(),e=bM(),n=Rc(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",c="[object Map]",u="[object Number]",f="[object Object]",p="[object RegExp]",m="[object Set]",_="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",x="[object DataView]",w="[object Float32Array]",T="[object Float64Array]",A="[object Int8Array]",E="[object Int16Array]",C="[object Int32Array]",R="[object Uint8Array]",N="[object Uint8ClampedArray]",D="[object Uint16Array]",Z="[object Uint32Array]",j={};j[w]=j[T]=j[A]=j[E]=j[C]=j[R]=j[N]=j[D]=j[Z]=!0,j[r]=j[i]=j[b]=j[a]=j[x]=j[s]=j[o]=j[l]=j[c]=j[u]=j[f]=j[p]=j[m]=j[_]=j[y]=!1;function L(B){return n(B)&&e(B.length)&&!!j[t(B)]}return vC=L,vC}var bC,x6;function TQ(){if(x6)return bC;x6=1;function t(e){return function(n){return e(n)}}return bC=t,bC}var Zg={exports:{}};Zg.exports;var S6;function pTe(){return S6||(S6=1,(function(t,e){var n=HY(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=(function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}})();t.exports=o})(Zg,Zg.exports)),Zg.exports}var _C,T6;function EQ(){if(T6)return _C;T6=1;var t=hTe(),e=TQ(),n=pTe(),r=n&&n.isTypedArray,i=r?e(r):t;return _C=i,_C}var wC,E6;function mTe(){if(E6)return wC;E6=1;var t=uTe(),e=yM(),n=ga(),r=SQ(),i=vM(),a=EQ(),s=Object.prototype,o=s.hasOwnProperty;function l(c,u){var f=n(c),p=!f&&e(c),m=!f&&!p&&r(c),_=!f&&!p&&!m&&a(c),y=f||p||m||_,b=y?t(c.length,String):[],x=b.length;for(var w in c)(u||o.call(c,w))&&!(y&&(w=="length"||m&&(w=="offset"||w=="parent")||_&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||i(w,x)))&&b.push(w);return b}return wC=l,wC}var xC,A6;function gTe(){if(A6)return xC;A6=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return xC=e,xC}var SC,O6;function AQ(){if(O6)return SC;O6=1;function t(e,n){return function(r){return e(n(r))}}return SC=t,SC}var TC,C6;function yTe(){if(C6)return TC;C6=1;var t=AQ(),e=t(Object.keys,Object);return TC=e,TC}var EC,k6;function vTe(){if(k6)return EC;k6=1;var t=gTe(),e=yTe(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return EC=i,EC}var AC,N6;function mb(){if(N6)return AC;N6=1;var t=rM(),e=bM();function n(r){return r!=null&&e(r.length)&&!t(r)}return AC=n,AC}var OC,I6;function NS(){if(I6)return OC;I6=1;var t=mTe(),e=vTe(),n=mb();function r(i){return n(i)?t(i):e(i)}return OC=r,OC}var CC,P6;function bTe(){if(P6)return CC;P6=1;var t=sTe(),e=cTe(),n=NS();function r(i){return t(i,n,e)}return CC=r,CC}var kC,R6;function _Te(){if(R6)return kC;R6=1;var t=bTe(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,l,c,u){var f=o&e,p=t(a),m=p.length,_=t(s),y=_.length;if(m!=y&&!f)return!1;for(var b=m;b--;){var x=p[b];if(!(f?x in s:r.call(s,x)))return!1}var w=u.get(a),T=u.get(s);if(w&&T)return w==s&&T==a;var A=!0;u.set(a,s),u.set(s,a);for(var E=f;++b<m;){x=p[b];var C=a[x],R=s[x];if(l)var N=f?l(R,C,x,s,a,u):l(C,R,x,a,s,u);if(!(N===void 0?C===R||c(C,R,o,l,u):N)){A=!1;break}E||(E=x=="constructor")}if(A&&!E){var D=a.constructor,Z=s.constructor;D!=Z&&"constructor"in a&&"constructor"in s&&!(typeof D=="function"&&D instanceof D&&typeof Z=="function"&&Z instanceof Z)&&(A=!1)}return u.delete(a),u.delete(s),A}return kC=i,kC}var NC,j6;function wTe(){if(j6)return NC;j6=1;var t=vf(),e=kl(),n=t(e,"DataView");return NC=n,NC}var IC,$6;function xTe(){if($6)return IC;$6=1;var t=vf(),e=kl(),n=t(e,"Promise");return IC=n,IC}var PC,M6;function OQ(){if(M6)return PC;M6=1;var t=vf(),e=kl(),n=t(e,"Set");return PC=n,PC}var RC,L6;function STe(){if(L6)return RC;L6=1;var t=vf(),e=kl(),n=t(e,"WeakMap");return RC=n,RC}var jC,D6;function TTe(){if(D6)return jC;D6=1;var t=wTe(),e=aM(),n=xTe(),r=OQ(),i=STe(),a=Pc(),s=WY(),o="[object Map]",l="[object Object]",c="[object Promise]",u="[object Set]",f="[object WeakMap]",p="[object DataView]",m=s(t),_=s(e),y=s(n),b=s(r),x=s(i),w=a;return(t&&w(new t(new ArrayBuffer(1)))!=p||e&&w(new e)!=o||n&&w(n.resolve())!=c||r&&w(new r)!=u||i&&w(new i)!=f)&&(w=function(T){var A=a(T),E=A==l?T.constructor:void 0,C=E?s(E):"";if(C)switch(C){case m:return p;case _:return o;case y:return c;case b:return u;case x:return f}return A}),jC=w,jC}var $C,B6;function ETe(){if(B6)return $C;B6=1;var t=yQ(),e=wQ(),n=aTe(),r=_Te(),i=TTe(),a=ga(),s=SQ(),o=EQ(),l=1,c="[object Arguments]",u="[object Array]",f="[object Object]",p=Object.prototype,m=p.hasOwnProperty;function _(y,b,x,w,T,A){var E=a(y),C=a(b),R=E?u:i(y),N=C?u:i(b);R=R==c?f:R,N=N==c?f:N;var D=R==f,Z=N==f,j=R==N;if(j&&s(y)){if(!s(b))return!1;E=!0,D=!1}if(j&&!D)return A||(A=new t),E||o(y)?e(y,b,x,w,T,A):n(y,b,R,x,w,T,A);if(!(x&l)){var L=D&&m.call(y,"__wrapped__"),B=Z&&m.call(b,"__wrapped__");if(L||B){var z=L?y.value():y,W=B?b.value():b;return A||(A=new t),T(z,W,x,w,A)}}return j?(A||(A=new t),r(y,b,x,w,T,A)):!1}return $C=_,$C}var MC,F6;function _M(){if(F6)return MC;F6=1;var t=ETe(),e=Rc();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,s,n,o)}return MC=n,MC}var LC,U6;function ATe(){if(U6)return LC;U6=1;var t=yQ(),e=_M(),n=1,r=2;function i(a,s,o,l){var c=o.length,u=c,f=!l;if(a==null)return!u;for(a=Object(a);c--;){var p=o[c];if(f&&p[2]?p[1]!==a[p[0]]:!(p[0]in a))return!1}for(;++c<u;){p=o[c];var m=p[0],_=a[m],y=p[1];if(f&&p[2]){if(_===void 0&&!(m in a))return!1}else{var b=new t;if(l)var x=l(_,y,m,a,s,b);if(!(x===void 0?e(y,_,n|r,l,b):x))return!1}}return!0}return LC=i,LC}var DC,z6;function CQ(){if(z6)return DC;z6=1;var t=Ku();function e(n){return n===n&&!t(n)}return DC=e,DC}var BC,q6;function OTe(){if(q6)return BC;q6=1;var t=CQ(),e=NS();function n(r){for(var i=e(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,t(o)]}return i}return BC=n,BC}var FC,H6;function kQ(){if(H6)return FC;H6=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return FC=t,FC}var UC,W6;function CTe(){if(W6)return UC;W6=1;var t=ATe(),e=OTe(),n=kQ();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||t(s,i,a)}}return UC=r,UC}var zC,V6;function kTe(){if(V6)return zC;V6=1;function t(e,n){return e!=null&&n in Object(e)}return zC=t,zC}var qC,G6;function NTe(){if(G6)return qC;G6=1;var t=KY(),e=yM(),n=ga(),r=vM(),i=bM(),a=ES();function s(o,l,c){l=t(l,o);for(var u=-1,f=l.length,p=!1;++u<f;){var m=a(l[u]);if(!(p=o!=null&&c(o,m)))break;o=o[m]}return p||++u!=f?p:(f=o==null?0:o.length,!!f&&i(f)&&r(m,f)&&(n(o)||e(o)))}return qC=s,qC}var HC,K6;function ITe(){if(K6)return HC;K6=1;var t=kTe(),e=NTe();function n(r,i){return r!=null&&e(r,i,t)}return HC=n,HC}var WC,Z6;function PTe(){if(Z6)return WC;Z6=1;var t=_M(),e=ZY(),n=ITe(),r=nM(),i=CQ(),a=kQ(),s=ES(),o=1,l=2;function c(u,f){return r(u)&&i(f)?a(s(u),f):function(p){var m=e(p,u);return m===void 0&&m===f?n(p,u):t(f,m,o|l)}}return WC=c,WC}var VC,X6;function gm(){if(X6)return VC;X6=1;function t(e){return e}return VC=t,VC}var GC,J6;function RTe(){if(J6)return GC;J6=1;function t(e){return function(n){return n==null?void 0:n[e]}}return GC=t,GC}var KC,Y6;function jTe(){if(Y6)return KC;Y6=1;var t=lM();function e(n){return function(r){return t(r,n)}}return KC=e,KC}var ZC,Q6;function $Te(){if(Q6)return ZC;Q6=1;var t=RTe(),e=jTe(),n=nM(),r=ES();function i(a){return n(a)?t(r(a)):e(a)}return ZC=i,ZC}var XC,eU;function Nl(){if(eU)return XC;eU=1;var t=CTe(),e=PTe(),n=gm(),r=ga(),i=$Te();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?e(s[0],s[1]):t(s):i(s)}return XC=a,XC}var JC,tU;function NQ(){if(tU)return JC;tU=1;function t(e,n,r,i){for(var a=e.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(e[s],s,e))return s;return-1}return JC=t,JC}var YC,nU;function MTe(){if(nU)return YC;nU=1;function t(e){return e!==e}return YC=t,YC}var QC,rU;function LTe(){if(rU)return QC;rU=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return QC=t,QC}var ek,iU;function DTe(){if(iU)return ek;iU=1;var t=NQ(),e=MTe(),n=LTe();function r(i,a,s){return a===a?n(i,a,s):t(i,e,s)}return ek=r,ek}var tk,aU;function BTe(){if(aU)return tk;aU=1;var t=DTe();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return tk=e,tk}var nk,sU;function FTe(){if(sU)return nk;sU=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return nk=t,nk}var rk,oU;function UTe(){if(oU)return rk;oU=1;function t(){}return rk=t,rk}var ik,lU;function zTe(){if(lU)return ik;lU=1;var t=OQ(),e=UTe(),n=gM(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return ik=i,ik}var ak,cU;function qTe(){if(cU)return ak;cU=1;var t=vQ(),e=BTe(),n=FTe(),r=_Q(),i=zTe(),a=gM(),s=200;function o(l,c,u){var f=-1,p=e,m=l.length,_=!0,y=[],b=y;if(u)_=!1,p=n;else if(m>=s){var x=c?null:i(l);if(x)return a(x);_=!1,p=r,b=new t}else b=c?[]:y;e:for(;++f<m;){var w=l[f],T=c?c(w):w;if(w=u||w!==0?w:0,_&&T===T){for(var A=b.length;A--;)if(b[A]===T)continue e;c&&b.push(T),y.push(w)}else p(b,T,u)||(b!==y&&b.push(T),y.push(w))}return y}return ak=o,ak}var sk,uU;function HTe(){if(uU)return sk;uU=1;var t=Nl(),e=qTe();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return sk=n,sk}var WTe=HTe();const dU=Ut(WTe);function IQ(t,e,n){return e===!0?dU(t,n):xt(e)?dU(t,e):t}function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}var VTe=["ref"];function fU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(n),!0).forEach(function(r){IS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RQ(r.key),r)}}function KTe(t,e,n){return e&&hU(t.prototype,e),n&&hU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZTe(t,e,n){return e=dx(e),XTe(t,PQ()?Reflect.construct(e,n||[],dx(t).constructor):e.apply(t,n))}function XTe(t,e){if(e&&(vp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JTe(t)}function JTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PQ=function(){return!!t})()}function dx(t){return dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dx(t)}function YTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TR(t,e)}function TR(t,e){return TR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TR(t,e)}function IS(t,e,n){return e=RQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RQ(t){var e=QTe(t,"string");return vp(e)=="symbol"?e:e+""}function QTe(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function eEe(t,e){if(t==null)return{};var n=tEe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function nEe(t){return t.value}function rEe(t,e){if(ee.isValidElement(t))return ee.cloneElement(t,e);if(typeof t=="function")return ee.createElement(t,e);e.ref;var n=eEe(e,VTe);return ee.createElement(mM,n)}var pU=1,Zd=(function(t){function e(){var n;GTe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=ZTe(this,e,[].concat(i)),IS(n,"lastBoundingBox",{width:-1,height:-1}),n}return YTe(e,t),KTe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>pU||Math.abs(i.height-this.lastBoundingBox.height)>pU)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Xl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,f,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var m=this.getBBoxSnapshot();f={left:((c||0)-m.width)/2}}else f=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var _=this.getBBoxSnapshot();p={top:((u||0)-_.height)/2}}else p=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Xl(Xl({},f),p)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,f=Xl(Xl({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return ee.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){r.wrapperNode=m}},rEe(a,Xl(Xl({},this.props),{},{payload:IQ(u,c,nEe)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Xl(Xl({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&$e(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])})(k.PureComponent);IS(Zd,"displayName","Legend");IS(Zd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var ok,mU;function iEe(){if(mU)return ok;mU=1;var t=fb(),e=yM(),n=ga(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return ok=i,ok}var lk,gU;function jQ(){if(gU)return lk;gU=1;var t=xQ(),e=iEe();function n(r,i,a,s,o){var l=-1,c=r.length;for(a||(a=e),o||(o=[]);++l<c;){var u=r[l];i>0&&a(u)?i>1?n(u,i-1,a,s,o):t(o,u):s||(o[o.length]=u)}return o}return lk=n,lk}var ck,yU;function aEe(){if(yU)return ck;yU=1;function t(e){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),l=o.length;l--;){var c=o[e?l:++a];if(r(s[c],c,s)===!1)break}return n}}return ck=t,ck}var uk,vU;function sEe(){if(vU)return uk;vU=1;var t=aEe(),e=t();return uk=e,uk}var dk,bU;function $Q(){if(bU)return dk;bU=1;var t=sEe(),e=NS();function n(r,i){return r&&t(r,i,e)}return dk=n,dk}var fk,_U;function oEe(){if(_U)return fk;_U=1;var t=mb();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var s=i.length,o=r?s:-1,l=Object(i);(r?o--:++o<s)&&a(l[o],o,l)!==!1;);return i}}return fk=e,fk}var hk,wU;function wM(){if(wU)return hk;wU=1;var t=$Q(),e=oEe(),n=e(t);return hk=n,hk}var pk,xU;function MQ(){if(xU)return pk;xU=1;var t=wM(),e=mb();function n(r,i){var a=-1,s=e(r)?Array(r.length):[];return t(r,function(o,l,c){s[++a]=i(o,l,c)}),s}return pk=n,pk}var mk,SU;function lEe(){if(SU)return mk;SU=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return mk=t,mk}var gk,TU;function cEe(){if(TU)return gk;TU=1;var t=hm();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=t(n),l=r!==void 0,c=r===null,u=r===r,f=t(r);if(!c&&!f&&!o&&n>r||o&&l&&u&&!c&&!f||a&&l&&u||!i&&u||!s)return 1;if(!a&&!o&&!f&&n<r||f&&i&&s&&!a&&!o||c&&i&&s||!l&&s||!u)return-1}return 0}return gk=e,gk}var yk,EU;function uEe(){if(EU)return yk;EU=1;var t=cEe();function e(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,l=s.length,c=i.length;++a<l;){var u=t(s[a],o[a]);if(u){if(a>=c)return u;var f=i[a];return u*(f=="desc"?-1:1)}}return n.index-r.index}return yk=e,yk}var vk,AU;function dEe(){if(AU)return vk;AU=1;var t=oM(),e=lM(),n=Nl(),r=MQ(),i=lEe(),a=TQ(),s=uEe(),o=gm(),l=ga();function c(u,f,p){f.length?f=t(f,function(y){return l(y)?function(b){return e(b,y.length===1?y[0]:y)}:y}):f=[o];var m=-1;f=t(f,a(n));var _=r(u,function(y,b,x){var w=t(f,function(T){return T(y)});return{criteria:w,index:++m,value:y}});return i(_,function(y,b){return s(y,b,p)})}return vk=c,vk}var bk,OU;function fEe(){if(OU)return bk;OU=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return bk=t,bk}var _k,CU;function hEe(){if(CU)return _k;CU=1;var t=fEe(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,l=e(s.length-i,0),c=Array(l);++o<l;)c[o]=s[i+o];o=-1;for(var u=Array(i+1);++o<i;)u[o]=s[o];return u[i]=a(c),t(r,this,u)}}return _k=n,_k}var wk,kU;function pEe(){if(kU)return wk;kU=1;function t(e){return function(){return e}}return wk=t,wk}var xk,NU;function LQ(){if(NU)return xk;NU=1;var t=vf(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return xk=e,xk}var Sk,IU;function mEe(){if(IU)return Sk;IU=1;var t=pEe(),e=LQ(),n=gm(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return Sk=r,Sk}var Tk,PU;function gEe(){if(PU)return Tk;PU=1;var t=800,e=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),l=e-(o-s);if(s=o,l>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return Tk=r,Tk}var Ek,RU;function yEe(){if(RU)return Ek;RU=1;var t=mEe(),e=gEe(),n=e(t);return Ek=n,Ek}var Ak,jU;function vEe(){if(jU)return Ak;jU=1;var t=gm(),e=hEe(),n=yEe();function r(i,a){return n(e(i,a,t),i+"")}return Ak=r,Ak}var Ok,$U;function PS(){if($U)return Ok;$U=1;var t=iM(),e=mb(),n=vM(),r=Ku();function i(a,s,o){if(!r(o))return!1;var l=typeof s;return(l=="number"?e(o)&&n(s,o.length):l=="string"&&s in o)?t(o[s],a):!1}return Ok=i,Ok}var Ck,MU;function bEe(){if(MU)return Ck;MU=1;var t=jQ(),e=dEe(),n=vEe(),r=PS(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return Ck=i,Ck}var _Ee=bEe();const xM=Ut(_Ee);function Xy(t){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xy(t)}function ER(){return ER=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ER.apply(this,arguments)}function wEe(t,e){return EEe(t)||TEe(t,e)||SEe(t,e)||xEe()}function xEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SEe(t,e){if(t){if(typeof t=="string")return LU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LU(t,e)}}function LU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function EEe(t){if(Array.isArray(t))return t}function DU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DU(Object(n),!0).forEach(function(r){AEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AEe(t,e,n){return e=OEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OEe(t){var e=CEe(t,"string");return Xy(e)=="symbol"?e:e+""}function CEe(t,e){if(Xy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kEe(t){return Array.isArray(t)&&Ir(t[0])&&Ir(t[1])?t.join(" ~ "):t}var NEe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,f=e.formatter,p=e.itemSorter,m=e.wrapperClassName,_=e.labelClassName,y=e.label,b=e.labelFormatter,x=e.accessibilityLayer,w=x===void 0?!1:x,T=function(){if(u&&u.length){var L={padding:0,margin:0},B=(p?xM(u,p):u).map(function(z,W){if(z.type==="none")return null;var q=kk({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},o),K=z.formatter||f||kEe,V=z.value,J=z.name,Q=V,M=J;if(K&&Q!=null&&M!=null){var Y=K(V,J,z,W,u);if(Array.isArray(Y)){var se=wEe(Y,2);Q=se[0],M=se[1]}else Q=Y}return ee.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:q},Ir(M)?ee.createElement("span",{className:"recharts-tooltip-item-name"},M):null,Ir(M)?ee.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ee.createElement("span",{className:"recharts-tooltip-item-value"},Q),ee.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return ee.createElement("ul",{className:"recharts-tooltip-item-list",style:L},B)}return null},A=kk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),E=kk({margin:0},c),C=!At(y),R=C?y:"",N=Ct("recharts-default-tooltip",m),D=Ct("recharts-tooltip-label",_);C&&b&&u!==void 0&&u!==null&&(R=b(y,u));var Z=w?{role:"status","aria-live":"assertive"}:{};return ee.createElement("div",ER({className:N,style:A},Z),ee.createElement("p",{className:D,style:E},ee.isValidElement(R)?R:"".concat(R)),T())};function Jy(t){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jy(t)}function X0(t,e,n){return e=IEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IEe(t){var e=PEe(t,"string");return Jy(e)=="symbol"?e:e+""}function PEe(t,e){if(Jy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cg="recharts-tooltip-wrapper",REe={visibility:"hidden"};function jEe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Ct(cg,X0(X0(X0(X0({},"".concat(cg,"-right"),$e(n)&&e&&$e(e.x)&&n>=e.x),"".concat(cg,"-left"),$e(n)&&e&&$e(e.x)&&n<e.x),"".concat(cg,"-bottom"),$e(r)&&e&&$e(e.y)&&r>=e.y),"".concat(cg,"-top"),$e(r)&&e&&$e(e.y)&&r<e.y))}function BU(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(a&&$e(a[r]))return a[r];var u=n[r]-o-i,f=n[r]+i;if(e[r])return s[r]?u:f;if(s[r]){var p=u,m=l[r];return p<m?Math.max(f,l[r]):Math.max(u,l[r])}var _=f+o,y=l[r]+c;return _>y?Math.max(u,l[r]):Math.max(f,l[r])}function $Ee(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function MEe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,c,u,f;return s.height>0&&s.width>0&&n?(u=BU({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=BU({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=$Ee({translateX:u,translateY:f,useTranslate3d:o})):c=REe,{cssProperties:c,cssClasses:jEe({translateX:u,translateY:f,coordinate:n})}}function bp(t){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(t)}function FU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FU(Object(n),!0).forEach(function(r){OR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BQ(r.key),r)}}function BEe(t,e,n){return e&&DEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FEe(t,e,n){return e=fx(e),UEe(t,DQ()?Reflect.construct(e,n||[],fx(t).constructor):e.apply(t,n))}function UEe(t,e){if(e&&(bp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zEe(t)}function zEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DQ=function(){return!!t})()}function fx(t){return fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fx(t)}function qEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AR(t,e)}function AR(t,e){return AR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},AR(t,e)}function OR(t,e,n){return e=BQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BQ(t){var e=HEe(t,"string");return bp(e)=="symbol"?e:e+""}function HEe(t,e){if(bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zU=1,WEe=(function(t){function e(){var n;LEe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=FEe(this,e,[].concat(i)),OR(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),OR(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return qEe(e,t),BEe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>zU||Math.abs(r.height-this.state.lastBoundingBox.height)>zU)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,f=i.hasPayload,p=i.isAnimationActive,m=i.offset,_=i.position,y=i.reverseDirection,b=i.useTranslate3d,x=i.viewBox,w=i.wrapperStyle,T=MEe({allowEscapeViewBox:s,coordinate:u,offsetTopLeft:m,position:_,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:x}),A=T.cssClasses,E=T.cssProperties,C=UU(UU({transition:p&&a?"transform ".concat(o,"ms ").concat(l):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return ee.createElement("div",{tabIndex:-1,className:A,style:C,ref:function(N){r.wrapperNode=N}},c)}}])})(k.PureComponent),VEe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},bf={isSsr:VEe()};function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function qU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(n),!0).forEach(function(r){SM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UQ(r.key),r)}}function ZEe(t,e,n){return e&&KEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function XEe(t,e,n){return e=hx(e),JEe(t,FQ()?Reflect.construct(e,n||[],hx(t).constructor):e.apply(t,n))}function JEe(t,e){if(e&&(_p(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YEe(t)}function YEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FQ=function(){return!!t})()}function hx(t){return hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hx(t)}function QEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CR(t,e)}function CR(t,e){return CR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CR(t,e)}function SM(t,e,n){return e=UQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UQ(t){var e=eAe(t,"string");return _p(e)=="symbol"?e:e+""}function eAe(t,e){if(_p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function tAe(t){return t.dataKey}function nAe(t,e){return ee.isValidElement(t)?ee.cloneElement(t,e):typeof t=="function"?ee.createElement(t,e):ee.createElement(NEe,e)}var Ss=(function(t){function e(){return GEe(this,e),XEe(this,e,arguments)}return QEe(e,t),ZEe(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,f=i.filterNull,p=i.isAnimationActive,m=i.offset,_=i.payload,y=i.payloadUniqBy,b=i.position,x=i.reverseDirection,w=i.useTranslate3d,T=i.viewBox,A=i.wrapperStyle,E=_??[];f&&E.length&&(E=IQ(_.filter(function(R){return R.value!=null&&(R.hide!==!0||r.props.includeHidden)}),y,tAe));var C=E.length>0;return ee.createElement(WEe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:p,active:a,coordinate:u,hasPayload:C,offset:m,position:b,reverseDirection:x,useTranslate3d:w,viewBox:T,wrapperStyle:A},nAe(c,HU(HU({},this.props),{},{payload:E})))}}])})(k.PureComponent);SM(Ss,"displayName","Tooltip");SM(Ss,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!bf.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Nk,WU;function rAe(){if(WU)return Nk;WU=1;var t=kl(),e=function(){return t.Date.now()};return Nk=e,Nk}var Ik,VU;function iAe(){if(VU)return Ik;VU=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return Ik=e,Ik}var Pk,GU;function aAe(){if(GU)return Pk;GU=1;var t=iAe(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return Pk=n,Pk}var Rk,KU;function zQ(){if(KU)return Rk;KU=1;var t=aAe(),e=Ku(),n=hm(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(c){if(typeof c=="number")return c;if(n(c))return r;if(e(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=e(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=t(c);var f=a.test(c);return f||s.test(c)?o(c.slice(2),f?2:8):i.test(c)?r:+c}return Rk=l,Rk}var jk,ZU;function sAe(){if(ZU)return jk;ZU=1;var t=Ku(),e=rAe(),n=zQ(),r="Expected a function",i=Math.max,a=Math.min;function s(o,l,c){var u,f,p,m,_,y,b=0,x=!1,w=!1,T=!0;if(typeof o!="function")throw new TypeError(r);l=n(l)||0,t(c)&&(x=!!c.leading,w="maxWait"in c,p=w?i(n(c.maxWait)||0,l):p,T="trailing"in c?!!c.trailing:T);function A(B){var z=u,W=f;return u=f=void 0,b=B,m=o.apply(W,z),m}function E(B){return b=B,_=setTimeout(N,l),x?A(B):m}function C(B){var z=B-y,W=B-b,q=l-z;return w?a(q,p-W):q}function R(B){var z=B-y,W=B-b;return y===void 0||z>=l||z<0||w&&W>=p}function N(){var B=e();if(R(B))return D(B);_=setTimeout(N,C(B))}function D(B){return _=void 0,T&&u?A(B):(u=f=void 0,m)}function Z(){_!==void 0&&clearTimeout(_),b=0,u=y=f=_=void 0}function j(){return _===void 0?m:D(e())}function L(){var B=e(),z=R(B);if(u=arguments,f=this,y=B,z){if(_===void 0)return E(y);if(w)return clearTimeout(_),_=setTimeout(N,l),A(y)}return _===void 0&&(_=setTimeout(N,l)),m}return L.cancel=Z,L.flush=j,L}return jk=s,jk}var $k,XU;function oAe(){if(XU)return $k;XU=1;var t=sAe(),e=Ku(),n="Expected a function";function r(i,a,s){var o=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return e(s)&&(o="leading"in s?!!s.leading:o,l="trailing"in s?!!s.trailing:l),t(i,a,{leading:o,maxWait:a,trailing:l})}return $k=r,$k}var lAe=oAe();const qQ=Ut(lAe);function Yy(t){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yy(t)}function JU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function J0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JU(Object(n),!0).forEach(function(r){cAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cAe(t,e,n){return e=uAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uAe(t){var e=dAe(t,"string");return Yy(e)=="symbol"?e:e+""}function dAe(t,e){if(Yy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fAe(t,e){return gAe(t)||mAe(t,e)||pAe(t,e)||hAe()}function hAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pAe(t,e){if(t){if(typeof t=="string")return YU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YU(t,e)}}function YU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function gAe(t){if(Array.isArray(t))return t}var HQ=k.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,l=o===void 0?"100%":o,c=t.minWidth,u=c===void 0?0:c,f=t.minHeight,p=t.maxHeight,m=t.children,_=t.debounce,y=_===void 0?0:_,b=t.id,x=t.className,w=t.onResize,T=t.style,A=T===void 0?{}:T,E=k.useRef(null),C=k.useRef();C.current=w,k.useImperativeHandle(e,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var R=k.useState({containerWidth:i.width,containerHeight:i.height}),N=fAe(R,2),D=N[0],Z=N[1],j=k.useCallback(function(B,z){Z(function(W){var q=Math.round(B),K=Math.round(z);return W.containerWidth===q&&W.containerHeight===K?W:{containerWidth:q,containerHeight:K}})},[]);k.useEffect(function(){var B=function(J){var Q,M=J[0].contentRect,Y=M.width,se=M.height;j(Y,se),(Q=C.current)===null||Q===void 0||Q.call(C,Y,se)};y>0&&(B=qQ(B,y,{trailing:!0,leading:!1}));var z=new ResizeObserver(B),W=E.current.getBoundingClientRect(),q=W.width,K=W.height;return j(q,K),z.observe(E.current),function(){z.disconnect()}},[j,y]);var L=k.useMemo(function(){var B=D.containerWidth,z=D.containerHeight;if(B<0||z<0)return null;_o(zd(s)||zd(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),_o(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=zd(s)?B:s,q=zd(l)?z:l;n&&n>0&&(W?q=W/n:q&&(W=q*n),p&&q>p&&(q=p)),_o(W>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,q,s,l,u,f,n);var K=!Array.isArray(m)&&dc(m.type).endsWith("Chart");return ee.Children.map(m,function(V){return ee.isValidElement(V)?k.cloneElement(V,J0({width:W,height:q},K?{style:J0({height:"100%",width:"100%",maxHeight:q,maxWidth:W},V.props.style)}:{})):V})},[n,m,l,p,f,u,D,s]);return ee.createElement("div",{id:b?"".concat(b):void 0,className:Ct("recharts-responsive-container",x),style:J0(J0({},A),{},{width:s,height:l,minWidth:u,minHeight:f,maxHeight:p}),ref:E},L)}),RS=function(e){return null};RS.displayName="Cell";function Qy(t){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qy(t)}function QU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QU(Object(n),!0).forEach(function(r){yAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yAe(t,e,n){return e=vAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vAe(t){var e=bAe(t,"string");return Qy(e)=="symbol"?e:e+""}function bAe(t,e){if(Qy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oh={widthCache:{},cacheCount:0},_Ae=2e3,wAe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ez="recharts_measurement_span";function xAe(t){var e=kR({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var by=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||bf.isSsr)return{width:0,height:0};var r=xAe(n),i=JSON.stringify({text:e,copyStyle:r});if(oh.widthCache[i])return oh.widthCache[i];try{var a=document.getElementById(ez);a||(a=document.createElement("span"),a.setAttribute("id",ez),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=kR(kR({},wAe),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return oh.widthCache[i]=l,++oh.cacheCount>_Ae&&(oh.cacheCount=0,oh.widthCache={}),l}catch{return{width:0,height:0}}},SAe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function ev(t){"@babel/helpers - typeof";return ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ev(t)}function px(t,e){return OAe(t)||AAe(t,e)||EAe(t,e)||TAe()}function TAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EAe(t,e){if(t){if(typeof t=="string")return tz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tz(t,e)}}function tz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function AAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function OAe(t){if(Array.isArray(t))return t}function CAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NAe(r.key),r)}}function kAe(t,e,n){return e&&nz(t.prototype,e),n&&nz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function NAe(t){var e=IAe(t,"string");return ev(e)=="symbol"?e:e+""}function IAe(t,e){if(ev(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ev(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,PAe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,RAe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,WQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},jAe=Object.keys(WQ),Rh="NaN";function $Ae(t,e){return t*WQ[e]}var Y0=(function(){function t(e,n){CAe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!PAe.test(n)&&(this.num=NaN,this.unit=""),jAe.includes(n)&&(this.num=$Ae(e,n),this.unit="px")}return kAe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=RAe.exec(n))!==null&&r!==void 0?r:[],a=px(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])})();function VQ(t){if(t.includes(Rh))return Rh;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=rz.exec(e))!==null&&n!==void 0?n:[],i=px(r,4),a=i[1],s=i[2],o=i[3],l=Y0.parse(a??""),c=Y0.parse(o??""),u=s==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return Rh;e=e.replace(rz,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,p=(f=iz.exec(e))!==null&&f!==void 0?f:[],m=px(p,4),_=m[1],y=m[2],b=m[3],x=Y0.parse(_??""),w=Y0.parse(b??""),T=y==="+"?x.add(w):x.subtract(w);if(T.isNaN())return Rh;e=e.replace(iz,T.toString())}return e}var az=/\(([^()]*)\)/;function MAe(t){for(var e=t;e.includes("(");){var n=az.exec(e),r=px(n,2),i=r[1];e=e.replace(az,VQ(i))}return e}function LAe(t){var e=t.replace(/\s+/g,"");return e=MAe(e),e=VQ(e),e}function DAe(t){try{return LAe(t)}catch{return Rh}}function Mk(t){var e=DAe(t.slice(5,-1));return e===Rh?"":e}var BAe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],FAe=["dx","dy","angle","className","breakAll"];function NR(){return NR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NR.apply(this,arguments)}function sz(t,e){if(t==null)return{};var n=UAe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oz(t,e){return WAe(t)||HAe(t,e)||qAe(t,e)||zAe()}function zAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qAe(t,e){if(t){if(typeof t=="string")return lz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lz(t,e)}}function lz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function HAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function WAe(t){if(Array.isArray(t))return t}var GQ=/[ \f\n\r\t\v\u2028\u2029]+/,KQ=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];At(n)||(r?a=n.toString().split(""):a=n.toString().split(GQ));var s=a.map(function(l){return{word:l,width:by(l,i).width}}),o=r?0:by("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},VAe=function(e,n,r,i,a){var s=e.maxLines,o=e.children,l=e.style,c=e.breakAll,u=$e(s),f=o,p=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(q,K){var V=K.word,J=K.width,Q=q[q.length-1];if(Q&&(i==null||a||Q.width+J+r<Number(i)))Q.words.push(V),Q.width+=J+r;else{var M={words:[V],width:J};q.push(M)}return q},[])},m=p(n),_=function(W){return W.reduce(function(q,K){return q.width>K.width?q:K})};if(!u)return m;for(var y="",b=function(W){var q=f.slice(0,W),K=KQ({breakAll:c,style:l,children:q+y}).wordsWithComputedWidth,V=p(K),J=V.length>s||_(V).width>Number(i);return[J,V]},x=0,w=f.length-1,T=0,A;x<=w&&T<=f.length-1;){var E=Math.floor((x+w)/2),C=E-1,R=b(C),N=oz(R,2),D=N[0],Z=N[1],j=b(E),L=oz(j,1),B=L[0];if(!D&&!B&&(x=E+1),D&&B&&(w=E-1),!D&&B){A=Z;break}T++}return A||m},cz=function(e){var n=At(e)?[]:e.toString().split(GQ);return[{words:n}]},GAe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!bf.isSsr){var l,c,u=KQ({breakAll:s,children:i,style:a});if(u){var f=u.wordsWithComputedWidth,p=u.spaceWidth;l=f,c=p}else return cz(i);return VAe({breakAll:s,children:i,maxLines:o,style:a},l,c,n,r)}return cz(i)},uz="#808080",lf=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,f=u===void 0?!1:u,p=e.textAnchor,m=p===void 0?"start":p,_=e.verticalAnchor,y=_===void 0?"end":_,b=e.fill,x=b===void 0?uz:b,w=sz(e,BAe),T=k.useMemo(function(){return GAe({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),A=w.dx,E=w.dy,C=w.angle,R=w.className,N=w.breakAll,D=sz(w,FAe);if(!Ir(r)||!Ir(a))return null;var Z=r+($e(A)?A:0),j=a+($e(E)?E:0),L;switch(y){case"start":L=Mk("calc(".concat(c,")"));break;case"middle":L=Mk("calc(".concat((T.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:L=Mk("calc(".concat(T.length-1," * -").concat(o,")"));break}var B=[];if(f){var z=T[0].width,W=w.width;B.push("scale(".concat(($e(W)?W/z:1)/z,")"))}return C&&B.push("rotate(".concat(C,", ").concat(Z,", ").concat(j,")")),B.length&&(D.transform=B.join(" ")),ee.createElement("text",NR({},mt(D,!0),{x:Z,y:j,className:Ct("recharts-text",R),textAnchor:m,fill:x.includes("url")?uz:x}),T.map(function(q,K){var V=q.words.join(N?"":" ");return ee.createElement("tspan",{x:Z,dy:K===0?L:o,key:"".concat(V,"-").concat(K)},V)}))};function Ou(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function KAe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function TM(t){let e,n,r;t.length!==2?(e=Ou,n=(o,l)=>Ou(t(o),l),r=(o,l)=>t(o)-l):(e=t===Ou||t===KAe?t:ZAe,n=t,r=t);function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<0?c=f+1:u=f}while(c<u)}return c}function a(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function s(o,l,c=0,u=o.length){const f=i(o,l,c,u-1);return f>c&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function ZAe(){return 0}function ZQ(t){return t===null?NaN:+t}function*XAe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const JAe=TM(Ou),gb=JAe.right;TM(ZQ).center;class dz extends Map{constructor(e,n=eOe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(fz(this,e))}has(e){return super.has(fz(this,e))}set(e,n){return super.set(YAe(this,e),n)}delete(e){return super.delete(QAe(this,e))}}function fz({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function YAe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function QAe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function eOe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function tOe(t=Ou){if(t===Ou)return XQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function XQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const nOe=Math.sqrt(50),rOe=Math.sqrt(10),iOe=Math.sqrt(2);function mx(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=nOe?10:a>=rOe?5:a>=iOe?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?mx(t,e,n*2):[o,l,c]}function IR(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?mx(e,t,n):mx(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function PR(t,e,n){return e=+e,t=+t,n=+n,mx(t,e,n)[2]}function RR(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?PR(e,t,n):PR(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function hz(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function pz(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function JQ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?XQ:tOe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),m=Math.max(n,Math.floor(e-c*f/l+p)),_=Math.min(r,Math.floor(e+(l-c)*f/l+p));JQ(t,e,m,_,i)}const a=t[e];let s=n,o=r;for(ug(t,n,e),i(t[r],a)>0&&ug(t,n,r);s<o;){for(ug(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?ug(t,n,o):(++o,ug(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function ug(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function aOe(t,e,n){if(t=Float64Array.from(XAe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return pz(t);if(e>=1)return hz(t);var r,i=(r-1)*e,a=Math.floor(i),s=hz(JQ(t,a).subarray(0,a+1)),o=pz(t.subarray(a+1));return s+(o-s)*(i-a)}}function sOe(t,e,n=ZQ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function oOe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Ds(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function jc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const jR=Symbol("implicit");function EM(){var t=new dz,e=[],n=[],r=jR;function i(a){let s=t.get(a);if(s===void 0){if(r!==jR)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new dz;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return EM(e,n).unknown(r)},Ds.apply(i,arguments),i}function tv(){var t=EM().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var p=e().length,m=i<r,_=m?i:r,y=m?r:i;a=(y-_)/Math.max(1,p-l+c*2),o&&(a=Math.floor(a)),_+=(y-_-a*(p-l))*u,s=a*(1-l),o&&(_=Math.round(_),s=Math.round(s));var b=oOe(p).map(function(x){return _+a*x});return n(m?b.reverse():b)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(p){return arguments.length?(o=!!p,f()):o},t.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),f()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),f()):l},t.paddingOuter=function(p){return arguments.length?(c=+p,f()):c},t.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},t.copy=function(){return tv(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},Ds.apply(f(),arguments)}function YQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return YQ(e())},t}function _y(){return YQ(tv.apply(null,arguments).paddingInner(1))}function AM(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function QQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function yb(){}var nv=.7,gx=1/nv,ep="\\s*([+-]?\\d+)\\s*",rv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lOe=/^#([0-9a-f]{3,8})$/,cOe=new RegExp(`^rgb\\(${ep},${ep},${ep}\\)$`),uOe=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),dOe=new RegExp(`^rgba\\(${ep},${ep},${ep},${rv}\\)$`),fOe=new RegExp(`^rgba\\(${fl},${fl},${fl},${rv}\\)$`),hOe=new RegExp(`^hsl\\(${rv},${fl},${fl}\\)$`),pOe=new RegExp(`^hsla\\(${rv},${fl},${fl},${rv}\\)$`),mz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};AM(yb,iv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gz,formatHex:gz,formatHex8:mOe,formatHsl:gOe,formatRgb:yz,toString:yz});function gz(){return this.rgb().formatHex()}function mOe(){return this.rgb().formatHex8()}function gOe(){return eee(this).formatHsl()}function yz(){return this.rgb().formatRgb()}function iv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=lOe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?vz(e):n===3?new da(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Q0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Q0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=cOe.exec(t))?new da(e[1],e[2],e[3],1):(e=uOe.exec(t))?new da(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=dOe.exec(t))?Q0(e[1],e[2],e[3],e[4]):(e=fOe.exec(t))?Q0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=hOe.exec(t))?wz(e[1],e[2]/100,e[3]/100,1):(e=pOe.exec(t))?wz(e[1],e[2]/100,e[3]/100,e[4]):mz.hasOwnProperty(t)?vz(mz[t]):t==="transparent"?new da(NaN,NaN,NaN,0):null}function vz(t){return new da(t>>16&255,t>>8&255,t&255,1)}function Q0(t,e,n,r){return r<=0&&(t=e=n=NaN),new da(t,e,n,r)}function yOe(t){return t instanceof yb||(t=iv(t)),t?(t=t.rgb(),new da(t.r,t.g,t.b,t.opacity)):new da}function $R(t,e,n,r){return arguments.length===1?yOe(t):new da(t,e,n,r??1)}function da(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}AM(da,$R,QQ(yb,{brighter(t){return t=t==null?gx:Math.pow(gx,t),new da(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?nv:Math.pow(nv,t),new da(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new da(Xd(this.r),Xd(this.g),Xd(this.b),yx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bz,formatHex:bz,formatHex8:vOe,formatRgb:_z,toString:_z}));function bz(){return`#${qd(this.r)}${qd(this.g)}${qd(this.b)}`}function vOe(){return`#${qd(this.r)}${qd(this.g)}${qd(this.b)}${qd((isNaN(this.opacity)?1:this.opacity)*255)}`}function _z(){const t=yx(this.opacity);return`${t===1?"rgb(":"rgba("}${Xd(this.r)}, ${Xd(this.g)}, ${Xd(this.b)}${t===1?")":`, ${t})`}`}function yx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qd(t){return t=Xd(t),(t<16?"0":"")+t.toString(16)}function wz(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new po(t,e,n,r)}function eee(t){if(t instanceof po)return new po(t.h,t.s,t.l,t.opacity);if(t instanceof yb||(t=iv(t)),!t)return new po;if(t instanceof po)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new po(s,o,l,t.opacity)}function bOe(t,e,n,r){return arguments.length===1?eee(t):new po(t,e,n,r??1)}function po(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}AM(po,bOe,QQ(yb,{brighter(t){return t=t==null?gx:Math.pow(gx,t),new po(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?nv:Math.pow(nv,t),new po(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new da(Lk(t>=240?t-240:t+120,i,r),Lk(t,i,r),Lk(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new po(xz(this.h),e_(this.s),e_(this.l),yx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=yx(this.opacity);return`${t===1?"hsl(":"hsla("}${xz(this.h)}, ${e_(this.s)*100}%, ${e_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function xz(t){return t=(t||0)%360,t<0?t+360:t}function e_(t){return Math.max(0,Math.min(1,t||0))}function Lk(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const OM=t=>()=>t;function _Oe(t,e){return function(n){return t+n*e}}function wOe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xOe(t){return(t=+t)==1?tee:function(e,n){return n-e?wOe(e,n,t):OM(isNaN(e)?n:e)}}function tee(t,e){var n=e-t;return n?_Oe(t,n):OM(isNaN(t)?e:t)}const Sz=(function t(e){var n=xOe(e);function r(i,a){var s=n((i=$R(i)).r,(a=$R(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),c=tee(i.opacity,a.opacity);return function(u){return i.r=s(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function SOe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function TOe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function EOe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=ym(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function AOe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function vx(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function OOe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ym(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var MR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dk=new RegExp(MR.source,"g");function COe(t){return function(){return t}}function kOe(t){return function(e){return t(e)+""}}function NOe(t,e){var n=MR.lastIndex=Dk.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=MR.exec(t))&&(i=Dk.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:vx(r,i)})),n=Dk.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?kOe(l[0].x):COe(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)o[(f=l[u]).i]=f.x(c);return o.join("")})}function ym(t,e){var n=typeof e,r;return e==null||n==="boolean"?OM(e):(n==="number"?vx:n==="string"?(r=iv(e))?(e=r,Sz):NOe:e instanceof iv?Sz:e instanceof Date?AOe:TOe(e)?SOe:Array.isArray(e)?EOe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?OOe:vx)(t,e)}function CM(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function IOe(t,e){e===void 0&&(e=t,t=ym);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function POe(t){return function(){return t}}function bx(t){return+t}var Tz=[0,1];function Ui(t){return t}function LR(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:POe(isNaN(e)?NaN:.5)}function ROe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function jOe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=LR(i,r),a=n(s,a)):(r=LR(r,i),a=n(a,s)),function(o){return a(r(o))}}function $Oe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=LR(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=gb(t,o,1,r)-1;return a[l](i[l](o))}}function vb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function jS(){var t=Tz,e=Tz,n=ym,r,i,a,s=Ui,o,l,c;function u(){var p=Math.min(t.length,e.length);return s!==Ui&&(s=ROe(t[0],t[p-1])),o=p>2?$Oe:jOe,l=c=null,f}function f(p){return p==null||isNaN(p=+p)?a:(l||(l=o(t.map(r),e,n)))(r(s(p)))}return f.invert=function(p){return s(i((c||(c=o(e,t.map(r),vx)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,bx),u()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),u()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),n=CM,u()},f.clamp=function(p){return arguments.length?(s=p?!0:Ui,u()):s!==Ui},f.interpolate=function(p){return arguments.length?(n=p,u()):n},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,m){return r=p,i=m,u()}}function kM(){return jS()(Ui,Ui)}function MOe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function _x(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function wp(t){return t=_x(Math.abs(t)),t?t[1]:NaN}function LOe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function DOe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var BOe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function av(t){if(!(e=BOe.exec(t)))throw new Error("invalid format: "+t);var e;return new NM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}av.prototype=NM.prototype;function NM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}NM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function FOe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var wx;function UOe(t,e){var n=_x(t,e);if(!n)return wx=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(wx=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+_x(t,Math.max(0,e+a-1))[0]}function Ez(t,e){var n=_x(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Az={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:MOe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ez(t*100,e),r:Ez,s:UOe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Oz(t){return t}var Cz=Array.prototype.map,kz=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zOe(t){var e=t.grouping===void 0||t.thousands===void 0?Oz:LOe(Cz.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Oz:DOe(Cz.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f,p){f=av(f);var m=f.fill,_=f.align,y=f.sign,b=f.symbol,x=f.zero,w=f.width,T=f.comma,A=f.precision,E=f.trim,C=f.type;C==="n"?(T=!0,C="g"):Az[C]||(A===void 0&&(A=12),E=!0,C="g"),(x||m==="0"&&_==="=")&&(x=!0,m="0",_="=");var R=(p&&p.prefix!==void 0?p.prefix:"")+(b==="$"?n:b==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():""),N=(b==="$"?r:/[%p]/.test(C)?s:"")+(p&&p.suffix!==void 0?p.suffix:""),D=Az[C],Z=/[defgprs%]/.test(C);A=A===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function j(L){var B=R,z=N,W,q,K;if(C==="c")z=D(L)+z,L="";else{L=+L;var V=L<0||1/L<0;if(L=isNaN(L)?l:D(Math.abs(L),A),E&&(L=FOe(L)),V&&+L==0&&y!=="+"&&(V=!1),B=(V?y==="("?y:o:y==="-"||y==="("?"":y)+B,z=(C==="s"&&!isNaN(L)&&wx!==void 0?kz[8+wx/3]:"")+z+(V&&y==="("?")":""),Z){for(W=-1,q=L.length;++W<q;)if(K=L.charCodeAt(W),48>K||K>57){z=(K===46?i+L.slice(W+1):L.slice(W))+z,L=L.slice(0,W);break}}}T&&!x&&(L=e(L,1/0));var J=B.length+L.length+z.length,Q=J<w?new Array(w-J+1).join(m):"";switch(T&&x&&(L=e(Q+L,Q.length?w-z.length:1/0),Q=""),_){case"<":L=B+L+z+Q;break;case"=":L=B+Q+L+z;break;case"^":L=Q.slice(0,J=Q.length>>1)+B+L+z+Q.slice(J);break;default:L=Q+B+L+z;break}return a(L)}return j.toString=function(){return f+""},j}function u(f,p){var m=Math.max(-8,Math.min(8,Math.floor(wp(p)/3)))*3,_=Math.pow(10,-m),y=c((f=av(f),f.type="f",f),{suffix:kz[8+m/3]});return function(b){return y(_*b)}}return{format:c,formatPrefix:u}}var t_,IM,nee;qOe({thousands:",",grouping:[3],currency:["$",""]});function qOe(t){return t_=zOe(t),IM=t_.format,nee=t_.formatPrefix,t_}function HOe(t){return Math.max(0,-wp(Math.abs(t)))}function WOe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wp(e)/3)))*3-wp(Math.abs(t)))}function VOe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,wp(e)-wp(t))+1}function ree(t,e,n,r){var i=RR(t,e,n),a;switch(r=av(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=WOe(i,s))&&(r.precision=a),nee(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=VOe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=HOe(i))&&(r.precision=a-(r.type==="%")*2);break}}return IM(r)}function Zu(t){var e=t.domain;return t.ticks=function(n){var r=e();return IR(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return ree(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,c,u=10;for(o<s&&(c=s,s=o,o=c,c=i,i=a,a=c);u-- >0;){if(c=PR(s,o,n),c===l)return r[i]=s,r[a]=o,e(r);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function xx(){var t=kM();return t.copy=function(){return vb(t,xx())},Ds.apply(t,arguments),Zu(t)}function iee(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,bx),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return iee(t).unknown(e)},t=arguments.length?Array.from(t,bx):[0,1],Zu(n)}function aee(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function Nz(t){return Math.log(t)}function Iz(t){return Math.exp(t)}function GOe(t){return-Math.log(-t)}function KOe(t){return-Math.exp(-t)}function ZOe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function XOe(t){return t===10?ZOe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function JOe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Pz(t){return(e,n)=>-t(-e,n)}function PM(t){const e=t(Nz,Iz),n=e.domain;let r=10,i,a;function s(){return i=JOe(r),a=XOe(r),n()[0]<0?(i=Pz(i),a=Pz(a),t(GOe,KOe)):t(Nz,Iz),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let p=i(c),m=i(u),_,y;const b=o==null?10:+o;let x=[];if(!(r%1)&&m-p<b){if(p=Math.floor(p),m=Math.ceil(m),c>0){for(;p<=m;++p)for(_=1;_<r;++_)if(y=p<0?_/a(-p):_*a(p),!(y<c)){if(y>u)break;x.push(y)}}else for(;p<=m;++p)for(_=r-1;_>=1;--_)if(y=p>0?_/a(-p):_*a(p),!(y<c)){if(y>u)break;x.push(y)}x.length*2<b&&(x=IR(c,u,b))}else x=IR(p,m,Math.min(m-p,b)).map(a);return f?x.reverse():x},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=av(l)).precision==null&&(l.trim=!0),l=IM(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return u=>{let f=u/a(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},e.nice=()=>n(aee(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function see(){const t=PM(jS()).domain([1,10]);return t.copy=()=>vb(t,see()).base(t.base()),Ds.apply(t,arguments),t}function Rz(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function jz(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function RM(t){var e=1,n=t(Rz(e),jz(e));return n.constant=function(r){return arguments.length?t(Rz(e=+r),jz(e)):e},Zu(n)}function oee(){var t=RM(jS());return t.copy=function(){return vb(t,oee()).constant(t.constant())},Ds.apply(t,arguments)}function $z(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function YOe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function QOe(t){return t<0?-t*t:t*t}function jM(t){var e=t(Ui,Ui),n=1;function r(){return n===1?t(Ui,Ui):n===.5?t(YOe,QOe):t($z(n),$z(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Zu(e)}function $M(){var t=jM(jS());return t.copy=function(){return vb(t,$M()).exponent(t.exponent())},Ds.apply(t,arguments),t}function eCe(){return $M.apply(null,arguments).exponent(.5)}function Mz(t){return Math.sign(t)*t*t}function tCe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function lee(){var t=kM(),e=[0,1],n=!1,r;function i(a){var s=tCe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(Mz(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,bx)).map(Mz)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return lee(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ds.apply(i,arguments),Zu(i)}function cee(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=sOe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[gb(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Ou),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return cee().domain(t).range(e).unknown(r)},Ds.apply(a,arguments)}function uee(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[gb(r,l,0,n)]:a}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return uee().domain([t,e]).range(i).unknown(a)},Ds.apply(Zu(s),arguments)}function dee(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[gb(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return dee().domain(t).range(e).unknown(n)},Ds.apply(i,arguments)}const Bk=new Date,Fk=new Date;function Pr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let c;do l.push(c=new Date(+a)),e(a,o),t(a);while(c<a&&a<s);return l},i.filter=a=>Pr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(Bk.setTime(+a),Fk.setTime(+s),t(Bk),t(Fk),Math.floor(n(Bk,Fk))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Sx=Pr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Sx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Pr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Sx);Sx.range;const oc=1e3,Ns=oc*60,lc=Ns*60,xc=lc*24,MM=xc*7,Lz=xc*30,Uk=xc*365,Hd=Pr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*oc)},(t,e)=>(e-t)/oc,t=>t.getUTCSeconds());Hd.range;const LM=Pr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*oc)},(t,e)=>{t.setTime(+t+e*Ns)},(t,e)=>(e-t)/Ns,t=>t.getMinutes());LM.range;const DM=Pr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ns)},(t,e)=>(e-t)/Ns,t=>t.getUTCMinutes());DM.range;const BM=Pr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*oc-t.getMinutes()*Ns)},(t,e)=>{t.setTime(+t+e*lc)},(t,e)=>(e-t)/lc,t=>t.getHours());BM.range;const FM=Pr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*lc)},(t,e)=>(e-t)/lc,t=>t.getUTCHours());FM.range;const bb=Pr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ns)/xc,t=>t.getDate()-1);bb.range;const $S=Pr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xc,t=>t.getUTCDate()-1);$S.range;const fee=Pr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xc,t=>Math.floor(t/xc));fee.range;function _f(t){return Pr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ns)/MM)}const MS=_f(0),Tx=_f(1),nCe=_f(2),rCe=_f(3),xp=_f(4),iCe=_f(5),aCe=_f(6);MS.range;Tx.range;nCe.range;rCe.range;xp.range;iCe.range;aCe.range;function wf(t){return Pr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/MM)}const LS=wf(0),Ex=wf(1),sCe=wf(2),oCe=wf(3),Sp=wf(4),lCe=wf(5),cCe=wf(6);LS.range;Ex.range;sCe.range;oCe.range;Sp.range;lCe.range;cCe.range;const UM=Pr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());UM.range;const zM=Pr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());zM.range;const Sc=Pr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Sc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Pr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Sc.range;const Tc=Pr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Tc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Pr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Tc.range;function hee(t,e,n,r,i,a){const s=[[Hd,1,oc],[Hd,5,5*oc],[Hd,15,15*oc],[Hd,30,30*oc],[a,1,Ns],[a,5,5*Ns],[a,15,15*Ns],[a,30,30*Ns],[i,1,lc],[i,3,3*lc],[i,6,6*lc],[i,12,12*lc],[r,1,xc],[r,2,2*xc],[n,1,MM],[e,1,Lz],[e,3,3*Lz],[t,1,Uk]];function o(c,u,f){const p=u<c;p&&([c,u]=[u,c]);const m=f&&typeof f.range=="function"?f:l(c,u,f),_=m?m.range(c,+u+1):[];return p?_.reverse():_}function l(c,u,f){const p=Math.abs(u-c)/f,m=TM(([,,b])=>b).right(s,p);if(m===s.length)return t.every(RR(c/Uk,u/Uk,f));if(m===0)return Sx.every(Math.max(RR(c,u,f),1));const[_,y]=s[p/s[m-1][2]<s[m][2]/p?m-1:m];return _.every(y)}return[o,l]}const[uCe,dCe]=hee(Tc,zM,LS,fee,FM,DM),[fCe,hCe]=hee(Sc,UM,MS,bb,BM,LM);function zk(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function qk(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function dg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function pCe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,c=fg(i),u=hg(i),f=fg(a),p=hg(a),m=fg(s),_=hg(s),y=fg(o),b=hg(o),x=fg(l),w=hg(l),T={a:K,A:V,b:J,B:Q,c:null,d:qz,e:qz,f:LCe,g:GCe,G:ZCe,H:jCe,I:$Ce,j:MCe,L:pee,m:DCe,M:BCe,p:M,q:Y,Q:Vz,s:Gz,S:FCe,u:UCe,U:zCe,V:qCe,w:HCe,W:WCe,x:null,X:null,y:VCe,Y:KCe,Z:XCe,"%":Wz},A={a:se,A:ge,b:ue,B:H,c:null,d:Hz,e:Hz,f:eke,g:uke,G:fke,H:JCe,I:YCe,j:QCe,L:gee,m:tke,M:nke,p:$,q:ne,Q:Vz,s:Gz,S:rke,u:ike,U:ake,V:ske,w:oke,W:lke,x:null,X:null,y:cke,Y:dke,Z:hke,"%":Wz},E={a:Z,A:j,b:L,B,c:z,d:Uz,e:Uz,f:NCe,g:Fz,G:Bz,H:zz,I:zz,j:ACe,L:kCe,m:ECe,M:OCe,p:D,q:TCe,Q:PCe,s:RCe,S:CCe,u:bCe,U:_Ce,V:wCe,w:vCe,W:xCe,x:W,X:q,y:Fz,Y:Bz,Z:SCe,"%":ICe};T.x=C(n,T),T.X=C(r,T),T.c=C(e,T),A.x=C(n,A),A.X=C(r,A),A.c=C(e,A);function C(X,pe){return function(ye){var le=[],Ne=-1,je=0,Xe=X.length,st,kt,vn;for(ye instanceof Date||(ye=new Date(+ye));++Ne<Xe;)X.charCodeAt(Ne)===37&&(le.push(X.slice(je,Ne)),(kt=Dz[st=X.charAt(++Ne)])!=null?st=X.charAt(++Ne):kt=st==="e"?" ":"0",(vn=pe[st])&&(st=vn(ye,kt)),le.push(st),je=Ne+1);return le.push(X.slice(je,Ne)),le.join("")}}function R(X,pe){return function(ye){var le=dg(1900,void 0,1),Ne=N(le,X,ye+="",0),je,Xe;if(Ne!=ye.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(pe&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(je=qk(dg(le.y,0,1)),Xe=je.getUTCDay(),je=Xe>4||Xe===0?Ex.ceil(je):Ex(je),je=$S.offset(je,(le.V-1)*7),le.y=je.getUTCFullYear(),le.m=je.getUTCMonth(),le.d=je.getUTCDate()+(le.w+6)%7):(je=zk(dg(le.y,0,1)),Xe=je.getDay(),je=Xe>4||Xe===0?Tx.ceil(je):Tx(je),je=bb.offset(je,(le.V-1)*7),le.y=je.getFullYear(),le.m=je.getMonth(),le.d=je.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Xe="Z"in le?qk(dg(le.y,0,1)).getUTCDay():zk(dg(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Xe+5)%7:le.w+le.U*7-(Xe+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,qk(le)):zk(le)}}function N(X,pe,ye,le){for(var Ne=0,je=pe.length,Xe=ye.length,st,kt;Ne<je;){if(le>=Xe)return-1;if(st=pe.charCodeAt(Ne++),st===37){if(st=pe.charAt(Ne++),kt=E[st in Dz?pe.charAt(Ne++):st],!kt||(le=kt(X,ye,le))<0)return-1}else if(st!=ye.charCodeAt(le++))return-1}return le}function D(X,pe,ye){var le=c.exec(pe.slice(ye));return le?(X.p=u.get(le[0].toLowerCase()),ye+le[0].length):-1}function Z(X,pe,ye){var le=m.exec(pe.slice(ye));return le?(X.w=_.get(le[0].toLowerCase()),ye+le[0].length):-1}function j(X,pe,ye){var le=f.exec(pe.slice(ye));return le?(X.w=p.get(le[0].toLowerCase()),ye+le[0].length):-1}function L(X,pe,ye){var le=x.exec(pe.slice(ye));return le?(X.m=w.get(le[0].toLowerCase()),ye+le[0].length):-1}function B(X,pe,ye){var le=y.exec(pe.slice(ye));return le?(X.m=b.get(le[0].toLowerCase()),ye+le[0].length):-1}function z(X,pe,ye){return N(X,e,pe,ye)}function W(X,pe,ye){return N(X,n,pe,ye)}function q(X,pe,ye){return N(X,r,pe,ye)}function K(X){return s[X.getDay()]}function V(X){return a[X.getDay()]}function J(X){return l[X.getMonth()]}function Q(X){return o[X.getMonth()]}function M(X){return i[+(X.getHours()>=12)]}function Y(X){return 1+~~(X.getMonth()/3)}function se(X){return s[X.getUTCDay()]}function ge(X){return a[X.getUTCDay()]}function ue(X){return l[X.getUTCMonth()]}function H(X){return o[X.getUTCMonth()]}function $(X){return i[+(X.getUTCHours()>=12)]}function ne(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var pe=C(X+="",T);return pe.toString=function(){return X},pe},parse:function(X){var pe=R(X+="",!1);return pe.toString=function(){return X},pe},utcFormat:function(X){var pe=C(X+="",A);return pe.toString=function(){return X},pe},utcParse:function(X){var pe=R(X+="",!0);return pe.toString=function(){return X},pe}}}var Dz={"-":"",_:" ",0:"0"},Wr=/^\s*\d+/,mCe=/^%/,gCe=/[\\^$*+?|[\]().{}]/g;function en(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function yCe(t){return t.replace(gCe,"\\$&")}function fg(t){return new RegExp("^(?:"+t.map(yCe).join("|")+")","i")}function hg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function vCe(t,e,n){var r=Wr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function bCe(t,e,n){var r=Wr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function _Ce(t,e,n){var r=Wr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function wCe(t,e,n){var r=Wr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function xCe(t,e,n){var r=Wr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Bz(t,e,n){var r=Wr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Fz(t,e,n){var r=Wr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function SCe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function TCe(t,e,n){var r=Wr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function ECe(t,e,n){var r=Wr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Uz(t,e,n){var r=Wr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ACe(t,e,n){var r=Wr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function zz(t,e,n){var r=Wr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function OCe(t,e,n){var r=Wr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function CCe(t,e,n){var r=Wr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function kCe(t,e,n){var r=Wr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function NCe(t,e,n){var r=Wr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ICe(t,e,n){var r=mCe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function PCe(t,e,n){var r=Wr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function RCe(t,e,n){var r=Wr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function qz(t,e){return en(t.getDate(),e,2)}function jCe(t,e){return en(t.getHours(),e,2)}function $Ce(t,e){return en(t.getHours()%12||12,e,2)}function MCe(t,e){return en(1+bb.count(Sc(t),t),e,3)}function pee(t,e){return en(t.getMilliseconds(),e,3)}function LCe(t,e){return pee(t,e)+"000"}function DCe(t,e){return en(t.getMonth()+1,e,2)}function BCe(t,e){return en(t.getMinutes(),e,2)}function FCe(t,e){return en(t.getSeconds(),e,2)}function UCe(t){var e=t.getDay();return e===0?7:e}function zCe(t,e){return en(MS.count(Sc(t)-1,t),e,2)}function mee(t){var e=t.getDay();return e>=4||e===0?xp(t):xp.ceil(t)}function qCe(t,e){return t=mee(t),en(xp.count(Sc(t),t)+(Sc(t).getDay()===4),e,2)}function HCe(t){return t.getDay()}function WCe(t,e){return en(Tx.count(Sc(t)-1,t),e,2)}function VCe(t,e){return en(t.getFullYear()%100,e,2)}function GCe(t,e){return t=mee(t),en(t.getFullYear()%100,e,2)}function KCe(t,e){return en(t.getFullYear()%1e4,e,4)}function ZCe(t,e){var n=t.getDay();return t=n>=4||n===0?xp(t):xp.ceil(t),en(t.getFullYear()%1e4,e,4)}function XCe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+en(e/60|0,"0",2)+en(e%60,"0",2)}function Hz(t,e){return en(t.getUTCDate(),e,2)}function JCe(t,e){return en(t.getUTCHours(),e,2)}function YCe(t,e){return en(t.getUTCHours()%12||12,e,2)}function QCe(t,e){return en(1+$S.count(Tc(t),t),e,3)}function gee(t,e){return en(t.getUTCMilliseconds(),e,3)}function eke(t,e){return gee(t,e)+"000"}function tke(t,e){return en(t.getUTCMonth()+1,e,2)}function nke(t,e){return en(t.getUTCMinutes(),e,2)}function rke(t,e){return en(t.getUTCSeconds(),e,2)}function ike(t){var e=t.getUTCDay();return e===0?7:e}function ake(t,e){return en(LS.count(Tc(t)-1,t),e,2)}function yee(t){var e=t.getUTCDay();return e>=4||e===0?Sp(t):Sp.ceil(t)}function ske(t,e){return t=yee(t),en(Sp.count(Tc(t),t)+(Tc(t).getUTCDay()===4),e,2)}function oke(t){return t.getUTCDay()}function lke(t,e){return en(Ex.count(Tc(t)-1,t),e,2)}function cke(t,e){return en(t.getUTCFullYear()%100,e,2)}function uke(t,e){return t=yee(t),en(t.getUTCFullYear()%100,e,2)}function dke(t,e){return en(t.getUTCFullYear()%1e4,e,4)}function fke(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Sp(t):Sp.ceil(t),en(t.getUTCFullYear()%1e4,e,4)}function hke(){return"+0000"}function Wz(){return"%"}function Vz(t){return+t}function Gz(t){return Math.floor(+t/1e3)}var lh,vee,bee;pke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pke(t){return lh=pCe(t),vee=lh.format,lh.parse,bee=lh.utcFormat,lh.utcParse,lh}function mke(t){return new Date(t)}function gke(t){return t instanceof Date?+t:+new Date(+t)}function qM(t,e,n,r,i,a,s,o,l,c){var u=kM(),f=u.invert,p=u.domain,m=c(".%L"),_=c(":%S"),y=c("%I:%M"),b=c("%I %p"),x=c("%a %d"),w=c("%b %d"),T=c("%B"),A=c("%Y");function E(C){return(l(C)<C?m:o(C)<C?_:s(C)<C?y:a(C)<C?b:r(C)<C?i(C)<C?x:w:n(C)<C?T:A)(C)}return u.invert=function(C){return new Date(f(C))},u.domain=function(C){return arguments.length?p(Array.from(C,gke)):p().map(mke)},u.ticks=function(C){var R=p();return t(R[0],R[R.length-1],C??10)},u.tickFormat=function(C,R){return R==null?E:c(R)},u.nice=function(C){var R=p();return(!C||typeof C.range!="function")&&(C=e(R[0],R[R.length-1],C??10)),C?p(aee(R,C)):u},u.copy=function(){return vb(u,qM(t,e,n,r,i,a,s,o,l,c))},u}function yke(){return Ds.apply(qM(fCe,hCe,Sc,UM,MS,bb,BM,LM,Hd,vee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vke(){return Ds.apply(qM(uCe,dCe,Tc,zM,LS,$S,FM,DM,Hd,bee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function DS(){var t=0,e=1,n,r,i,a,s=Ui,o=!1,l;function c(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(f){return arguments.length?(o=!!f,c):o},c.interpolator=function(f){return arguments.length?(s=f,c):s};function u(f){return function(p){var m,_;return arguments.length?([m,_]=p,s=f(m,_),c):[s(0),s(1)]}}return c.range=u(ym),c.rangeRound=u(CM),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),c}}function Xu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function _ee(){var t=Zu(DS()(Ui));return t.copy=function(){return Xu(t,_ee())},jc.apply(t,arguments)}function wee(){var t=PM(DS()).domain([1,10]);return t.copy=function(){return Xu(t,wee()).base(t.base())},jc.apply(t,arguments)}function xee(){var t=RM(DS());return t.copy=function(){return Xu(t,xee()).constant(t.constant())},jc.apply(t,arguments)}function HM(){var t=jM(DS());return t.copy=function(){return Xu(t,HM()).exponent(t.exponent())},jc.apply(t,arguments)}function bke(){return HM.apply(null,arguments).exponent(.5)}function See(){var t=[],e=Ui;function n(r){if(r!=null&&!isNaN(r=+r))return e((gb(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ou),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>aOe(t,a/r))},n.copy=function(){return See(e).domain(t)},jc.apply(n,arguments)}function BS(){var t=0,e=.5,n=1,r=1,i,a,s,o,l,c=Ui,u,f=!1,p;function m(y){return isNaN(y=+y)?p:(y=.5+((y=+u(y))-a)*(r*y<r*a?o:l),c(f?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([t,e,n]=y,i=u(t=+t),a=u(e=+e),s=u(n=+n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,m):[t,e,n]},m.clamp=function(y){return arguments.length?(f=!!y,m):f},m.interpolator=function(y){return arguments.length?(c=y,m):c};function _(y){return function(b){var x,w,T;return arguments.length?([x,w,T]=b,c=IOe(y,[x,w,T]),m):[c(0),c(.5),c(1)]}}return m.range=_(ym),m.rangeRound=_(CM),m.unknown=function(y){return arguments.length?(p=y,m):p},function(y){return u=y,i=y(t),a=y(e),s=y(n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,m}}function Tee(){var t=Zu(BS()(Ui));return t.copy=function(){return Xu(t,Tee())},jc.apply(t,arguments)}function Eee(){var t=PM(BS()).domain([.1,1,10]);return t.copy=function(){return Xu(t,Eee()).base(t.base())},jc.apply(t,arguments)}function Aee(){var t=RM(BS());return t.copy=function(){return Xu(t,Aee()).constant(t.constant())},jc.apply(t,arguments)}function WM(){var t=jM(BS());return t.copy=function(){return Xu(t,WM()).exponent(t.exponent())},jc.apply(t,arguments)}function _ke(){return WM.apply(null,arguments).exponent(.5)}const Kz=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:tv,scaleDiverging:Tee,scaleDivergingLog:Eee,scaleDivergingPow:WM,scaleDivergingSqrt:_ke,scaleDivergingSymlog:Aee,scaleIdentity:iee,scaleImplicit:jR,scaleLinear:xx,scaleLog:see,scaleOrdinal:EM,scalePoint:_y,scalePow:$M,scaleQuantile:cee,scaleQuantize:uee,scaleRadial:lee,scaleSequential:_ee,scaleSequentialLog:wee,scaleSequentialPow:HM,scaleSequentialQuantile:See,scaleSequentialSqrt:bke,scaleSequentialSymlog:xee,scaleSqrt:eCe,scaleSymlog:oee,scaleThreshold:dee,scaleTime:yke,scaleUtc:vke,tickFormat:ree},Symbol.toStringTag,{value:"Module"}));var Hk,Zz;function FS(){if(Zz)return Hk;Zz=1;var t=hm();function e(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],l=r(o);if(l!=null&&(c===void 0?l===l&&!t(l):i(l,c)))var c=l,u=o}return u}return Hk=e,Hk}var Wk,Xz;function Oee(){if(Xz)return Wk;Xz=1;function t(e,n){return e>n}return Wk=t,Wk}var Vk,Jz;function wke(){if(Jz)return Vk;Jz=1;var t=FS(),e=Oee(),n=gm();function r(i){return i&&i.length?t(i,n,e):void 0}return Vk=r,Vk}var xke=wke();const US=Ut(xke);var Gk,Yz;function Cee(){if(Yz)return Gk;Yz=1;function t(e,n){return e<n}return Gk=t,Gk}var Kk,Qz;function Ske(){if(Qz)return Kk;Qz=1;var t=FS(),e=Cee(),n=gm();function r(i){return i&&i.length?t(i,n,e):void 0}return Kk=r,Kk}var Tke=Ske();const zS=Ut(Tke);var Zk,e8;function Eke(){if(e8)return Zk;e8=1;var t=oM(),e=Nl(),n=MQ(),r=ga();function i(a,s){var o=r(a)?t:n;return o(a,e(s,3))}return Zk=i,Zk}var Xk,t8;function Ake(){if(t8)return Xk;t8=1;var t=jQ(),e=Eke();function n(r,i){return t(e(r,i),1)}return Xk=n,Xk}var Oke=Ake();const Cke=Ut(Oke);var Jk,n8;function kke(){if(n8)return Jk;n8=1;var t=_M();function e(n,r){return t(n,r)}return Jk=e,Jk}var Nke=kke();const _b=Ut(Nke);var vm=1e9,Ike={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},GM,Wn=!0,Ps="[DecimalError] ",Jd=Ps+"Invalid argument: ",VM=Ps+"Exponent out of range: ",bm=Math.floor,kd=Math.pow,Pke=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Fa,Ur=1e7,Mn=7,kee=9007199254740991,Ax=bm(kee/Mn),ze={};ze.absoluteValue=ze.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ze.comparedTo=ze.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};ze.decimalPlaces=ze.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Mn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ze.dividedBy=ze.div=function(t){return fc(this,new this.constructor(t))};ze.dividedToIntegerBy=ze.idiv=function(t){var e=this,n=e.constructor;return yn(fc(e,new n(t),0,1),n.precision)};ze.equals=ze.eq=function(t){return!this.cmp(t)};ze.exponent=function(){return yr(this)};ze.greaterThan=ze.gt=function(t){return this.cmp(t)>0};ze.greaterThanOrEqualTo=ze.gte=function(t){return this.cmp(t)>=0};ze.isInteger=ze.isint=function(){return this.e>this.d.length-2};ze.isNegative=ze.isneg=function(){return this.s<0};ze.isPositive=ze.ispos=function(){return this.s>0};ze.isZero=function(){return this.s===0};ze.lessThan=ze.lt=function(t){return this.cmp(t)<0};ze.lessThanOrEqualTo=ze.lte=function(t){return this.cmp(t)<1};ze.logarithm=ze.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Fa))throw Error(Ps+"NaN");if(n.s<1)throw Error(Ps+(n.s?"NaN":"-Infinity"));return n.eq(Fa)?new r(0):(Wn=!1,e=fc(sv(n,a),sv(t,a),a),Wn=!0,yn(e,i))};ze.minus=ze.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Pee(e,t):Nee(e,(t.s=-t.s,t))};ze.modulo=ze.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ps+"NaN");return n.s?(Wn=!1,e=fc(n,t,0,1).times(t),Wn=!0,n.minus(e)):yn(new r(n),i)};ze.naturalExponential=ze.exp=function(){return Iee(this)};ze.naturalLogarithm=ze.ln=function(){return sv(this)};ze.negated=ze.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ze.plus=ze.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Nee(e,t):Pee(e,(t.s=-t.s,t))};ze.precision=ze.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Jd+t);if(e=yr(i)+1,r=i.d.length-1,n=r*Mn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ze.squareRoot=ze.sqrt=function(){var t,e,n,r,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Ps+"NaN")}for(t=yr(o),Wn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=ol(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=bm((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(a=r,r=a.plus(fc(o,a,s+2)).times(.5),ol(a.d).slice(0,s)===(e=ol(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(yn(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return Wn=!0,yn(r,n)};ze.times=ze.mul=function(t){var e,n,r,i,a,s,o,l,c,u=this,f=u.constructor,p=u.d,m=(t=new f(t)).d;if(!u.s||!t.s)return new f(0);for(t.s*=u.s,n=u.e+t.e,l=p.length,c=m.length,l<c&&(a=p,p=m,m=a,s=l,l=c,c=s),a=[],s=l+c,r=s;r--;)a.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)o=a[i]+m[r]*p[i-r-1]+e,a[i--]=o%Ur|0,e=o/Ur|0;a[i]=(a[i]+e)%Ur|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Wn?yn(t,f.precision):t};ze.toDecimalPlaces=ze.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(wl(t,0,vm),e===void 0?e=r.rounding:wl(e,0,8),yn(n,t+yr(n)+1,e))};ze.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=cf(r,!0):(wl(t,0,vm),e===void 0?e=i.rounding:wl(e,0,8),r=yn(new i(r),t+1,e),n=cf(r,!0,t+1)),n};ze.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?cf(i):(wl(t,0,vm),e===void 0?e=a.rounding:wl(e,0,8),r=yn(new a(i),t+yr(i)+1,e),n=cf(r.abs(),!1,t+yr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ze.toInteger=ze.toint=function(){var t=this,e=t.constructor;return yn(new e(t),yr(t)+1,e.rounding)};ze.toNumber=function(){return+this};ze.toPower=ze.pow=function(t){var e,n,r,i,a,s,o=this,l=o.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Fa);if(o=new l(o),!o.s){if(t.s<1)throw Error(Ps+"Infinity");return o}if(o.eq(Fa))return o;if(r=l.precision,t.eq(Fa))return yn(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=u<0?-u:u)<=kee){for(i=new l(Fa),e=Math.ceil(r/Mn+4),Wn=!1;n%2&&(i=i.times(o),i8(i.d,e)),n=bm(n/2),n!==0;)o=o.times(o),i8(o.d,e);return Wn=!0,t.s<0?new l(Fa).div(i):yn(i,r)}}else if(a<0)throw Error(Ps+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Wn=!1,i=t.times(sv(o,r+c)),Wn=!0,i=Iee(i),i.s=a,i};ze.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=yr(i),r=cf(i,n<=a.toExpNeg||n>=a.toExpPos)):(wl(t,1,vm),e===void 0?e=a.rounding:wl(e,0,8),i=yn(new a(i),t,e),n=yr(i),r=cf(i,t<=n||n<=a.toExpNeg,t)),r};ze.toSignificantDigits=ze.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(wl(t,1,vm),e===void 0?e=r.rounding:wl(e,0,8)),yn(new r(n),t,e)};ze.toString=ze.valueOf=ze.val=ze.toJSON=ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=yr(t),n=t.constructor;return cf(t,e<=n.toExpNeg||e>=n.toExpPos)};function Nee(t,e){var n,r,i,a,s,o,l,c,u=t.constructor,f=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Wn?yn(e,f):e;if(l=t.d,c=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,o=c.length):(r=c,i=s,o=l.length),s=Math.ceil(f/Mn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=c.length,o-a<0&&(a=o,r=c,c=l,l=r),n=0;a;)n=(l[--a]=l[a]+c[a]+n)/Ur|0,l[a]%=Ur;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,Wn?yn(e,f):e}function wl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Jd+t)}function ol(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=Mn-r.length,n&&(a+=vu(n)),a+=r;s=t[e],r=s+"",n=Mn-r.length,n&&(a+=vu(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var fc=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Ur|0,s=a/Ur|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Ur+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,l,c,u,f,p,m,_,y,b,x,w,T,A,E,C,R,N,D=r.constructor,Z=r.s==i.s?1:-1,j=r.d,L=i.d;if(!r.s)return new D(r);if(!i.s)throw Error(Ps+"Division by zero");for(l=r.e-i.e,R=L.length,E=j.length,m=new D(Z),_=m.d=[],c=0;L[c]==(j[c]||0);)++c;if(L[c]>(j[c]||0)&&--l,a==null?w=a=D.precision:s?w=a+(yr(r)-yr(i))+1:w=a,w<0)return new D(0);if(w=w/Mn+2|0,c=0,R==1)for(u=0,L=L[0],w++;(c<E||u)&&w--;c++)T=u*Ur+(j[c]||0),_[c]=T/L|0,u=T%L|0;else{for(u=Ur/(L[0]+1)|0,u>1&&(L=t(L,u),j=t(j,u),R=L.length,E=j.length),A=R,y=j.slice(0,R),b=y.length;b<R;)y[b++]=0;N=L.slice(),N.unshift(0),C=L[0],L[1]>=Ur/2&&++C;do u=0,o=e(L,y,R,b),o<0?(x=y[0],R!=b&&(x=x*Ur+(y[1]||0)),u=x/C|0,u>1?(u>=Ur&&(u=Ur-1),f=t(L,u),p=f.length,b=y.length,o=e(f,y,p,b),o==1&&(u--,n(f,R<p?N:L,p))):(u==0&&(o=u=1),f=L.slice()),p=f.length,p<b&&f.unshift(0),n(y,f,b),o==-1&&(b=y.length,o=e(L,y,R,b),o<1&&(u++,n(y,R<b?N:L,b))),b=y.length):o===0&&(u++,y=[0]),_[c++]=u,o&&y[0]?y[b++]=j[A]||0:(y=[j[A]],b=1);while((A++<E||y[0]!==void 0)&&w--)}return _[0]||_.shift(),m.e=l,yn(m,s?a+yr(m)+1:a)}})();function Iee(t,e){var n,r,i,a,s,o,l=0,c=0,u=t.constructor,f=u.precision;if(yr(t)>16)throw Error(VM+yr(t));if(!t.s)return new u(Fa);for(Wn=!1,o=f,s=new u(.03125);t.abs().gte(.1);)t=t.times(s),c+=5;for(r=Math.log(kd(2,c))/Math.LN10*2+5|0,o+=r,n=i=a=new u(Fa),u.precision=o;;){if(i=yn(i.times(t),o),n=n.times(++l),s=a.plus(fc(i,n,o)),ol(s.d).slice(0,o)===ol(a.d).slice(0,o)){for(;c--;)a=yn(a.times(a),o);return u.precision=f,e==null?(Wn=!0,yn(a,f)):a}a=s}}function yr(t){for(var e=t.e*Mn,n=t.d[0];n>=10;n/=10)e++;return e}function Yk(t,e,n){if(e>t.LN10.sd())throw Wn=!0,n&&(t.precision=n),Error(Ps+"LN10 precision limit exceeded");return yn(new t(t.LN10),e)}function vu(t){for(var e="";t--;)e+="0";return e}function sv(t,e){var n,r,i,a,s,o,l,c,u,f=1,p=10,m=t,_=m.d,y=m.constructor,b=y.precision;if(m.s<1)throw Error(Ps+(m.s?"NaN":"-Infinity"));if(m.eq(Fa))return new y(0);if(e==null?(Wn=!1,c=b):c=e,m.eq(10))return e==null&&(Wn=!0),Yk(y,c);if(c+=p,y.precision=c,n=ol(_),r=n.charAt(0),a=yr(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=ol(m.d),r=n.charAt(0),f++;a=yr(m),r>1?(m=new y("0."+n),a++):m=new y(r+"."+n.slice(1))}else return l=Yk(y,c+2,b).times(a+""),m=sv(new y(r+"."+n.slice(1)),c-p).plus(l),y.precision=b,e==null?(Wn=!0,yn(m,b)):m;for(o=s=m=fc(m.minus(Fa),m.plus(Fa),c),u=yn(m.times(m),c),i=3;;){if(s=yn(s.times(u),c),l=o.plus(fc(s,new y(i),c)),ol(l.d).slice(0,c)===ol(o.d).slice(0,c))return o=o.times(2),a!==0&&(o=o.plus(Yk(y,c+2,b).times(a+""))),o=fc(o,new y(f),c),y.precision=b,e==null?(Wn=!0,yn(o,b)):o;o=l,i+=2}}function r8(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=bm(n/Mn),t.d=[],r=(n+1)%Mn,n<0&&(r+=Mn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Mn;r<i;)t.d.push(+e.slice(r,r+=Mn));e=e.slice(r),r=Mn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Wn&&(t.e>Ax||t.e<-Ax))throw Error(VM+n)}else t.s=0,t.e=0,t.d=[0];return t}function yn(t,e,n){var r,i,a,s,o,l,c,u,f=t.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=Mn,i=e,c=f[u=0];else{if(u=Math.ceil((r+1)/Mn),a=f.length,u>=a)return t;for(c=a=f[u],s=1;a>=10;a/=10)s++;r%=Mn,i=r-Mn+s}if(n!==void 0&&(a=kd(10,s-i-1),o=c/a%10|0,l=e<0||f[u+1]!==void 0||c%a,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?c/kd(10,s-i):0:f[u-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(a=yr(t),f.length=1,e=e-a-1,f[0]=kd(10,(Mn-e%Mn)%Mn),t.e=bm(-e/Mn)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=u,a=1,u--):(f.length=u+1,a=kd(10,Mn-r),f[u]=i>0?(c/kd(10,s-i)%kd(10,i)|0)*a:0),l)for(;;)if(u==0){(f[0]+=a)==Ur&&(f[0]=1,++t.e);break}else{if(f[u]+=a,f[u]!=Ur)break;f[u--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(Wn&&(t.e>Ax||t.e<-Ax))throw Error(VM+yr(t));return t}function Pee(t,e){var n,r,i,a,s,o,l,c,u,f,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),Wn?yn(e,m):e;if(l=t.d,f=e.d,r=e.e,c=t.e,l=l.slice(),s=c-r,s){for(u=s<0,u?(n=l,s=-s,o=f.length):(n=f,r=c,o=l.length),i=Math.max(Math.ceil(m/Mn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=f.length,u=i<o,u&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}s=0}for(u&&(n=l,l=f,f=n,e.s=-e.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=Ur-1;--l[a],l[i]+=Ur}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Wn?yn(e,m):e):new p(0)}function cf(t,e,n){var r,i=yr(t),a=ol(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+vu(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+vu(-i-1)+a,n&&(r=n-s)>0&&(a+=vu(r))):i>=s?(a+=vu(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+vu(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=vu(r))),t.s<0?"-"+a:a}function i8(t,e){if(t.length>e)return t.length=e,!0}function Ree(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Jd+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return r8(s,a.toString())}else if(typeof a!="string")throw Error(Jd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Pke.test(a))r8(s,a);else throw Error(Jd+a)}if(i.prototype=ze,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Ree,i.config=i.set=Rke,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Rke(t){if(!t||typeof t!="object")throw Error(Ps+"Object expected");var e,n,r,i=["precision",1,vm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(bm(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Jd+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Jd+n+": "+r);return this}var GM=Ree(Ike);Fa=new GM(1);const mn=GM;function jke(t){return Dke(t)||Lke(t)||Mke(t)||$ke()}function $ke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mke(t,e){if(t){if(typeof t=="string")return DR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DR(t,e)}}function Lke(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Dke(t){if(Array.isArray(t))return DR(t)}function DR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Bke=function(e){return e},jee={},$ee=function(e){return e===jee},a8=function(e){return function n(){return arguments.length===0||arguments.length===1&&$ee(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Fke=function t(e,n){return e===1?n:a8(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==jee}).length;return s>=e?n.apply(void 0,i):t(e-s,a8(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=i.map(function(f){return $ee(f)?l.shift():f});return n.apply(void 0,jke(u).concat(l))}))})},qS=function(e){return Fke(e.length,e)},BR=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Uke=qS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),zke=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Bke;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},FR=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Mee=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,l){return o===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function qke(t){var e;return t===0?e=1:e=Math.floor(new mn(t).abs().log(10).toNumber())+1,e}function Hke(t,e,n){for(var r=new mn(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var Wke=qS(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),Vke=qS(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Gke=qS(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const HS={rangeStep:Hke,getDigitCount:qke,interpolateNumber:Wke,uninterpolateNumber:Vke,uninterpolateTruncation:Gke};function UR(t){return Xke(t)||Zke(t)||Lee(t)||Kke()}function Kke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zke(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Xke(t){if(Array.isArray(t))return zR(t)}function ov(t,e){return Qke(t)||Yke(t,e)||Lee(t,e)||Jke()}function Jke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lee(t,e){if(t){if(typeof t=="string")return zR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zR(t,e)}}function zR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yke(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function Qke(t){if(Array.isArray(t))return t}function Dee(t){var e=ov(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function Bee(t,e,n){if(t.lte(0))return new mn(0);var r=HS.getDigitCount(t.toNumber()),i=new mn(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new mn(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=o.mul(i);return e?l:new mn(Math.ceil(l))}function eNe(t,e,n){var r=1,i=new mn(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new mn(10).pow(HS.getDigitCount(t)-1),i=new mn(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new mn(Math.floor(t)))}else t===0?i=new mn(Math.floor((e-1)/2)):n||(i=new mn(Math.floor(t)));var s=Math.floor((e-1)/2),o=zke(Uke(function(l){return i.add(new mn(l-s).mul(r)).toNumber()}),BR);return o(0,e)}function Fee(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new mn(0),tickMin:new mn(0),tickMax:new mn(0)};var a=Bee(new mn(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new mn(0):(s=new mn(t).add(e).div(2),s=s.sub(new mn(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),l=Math.ceil(new mn(e).sub(s).div(a).toNumber()),c=o+l+1;return c>n?Fee(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,o=e>0?o:o+(n-c)),{step:a,tickMin:s.sub(new mn(o).mul(a)),tickMax:s.add(new mn(l).mul(a))})}function tNe(t){var e=ov(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=Dee([n,r]),l=ov(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var f=u===1/0?[c].concat(UR(BR(0,i-1).map(function(){return 1/0}))):[].concat(UR(BR(0,i-1).map(function(){return-1/0})),[u]);return n>r?FR(f):f}if(c===u)return eNe(c,i,a);var p=Fee(c,u,s,a),m=p.step,_=p.tickMin,y=p.tickMax,b=HS.rangeStep(_,y.add(new mn(.1).mul(m)),m);return n>r?FR(b):b}function nNe(t,e){var n=ov(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Dee([r,i]),o=ov(s,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),f=Bee(new mn(c).sub(l).div(u-1),a,0),p=[].concat(UR(HS.rangeStep(new mn(l),new mn(c).sub(new mn(.99).mul(f)),f)),[c]);return r>i?FR(p):p}var rNe=Mee(tNe),iNe=Mee(nNe),aNe="Invariant failed";function uf(t,e){throw new Error(aNe)}var sNe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function Ox(){return Ox=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ox.apply(this,arguments)}function oNe(t,e){return dNe(t)||uNe(t,e)||cNe(t,e)||lNe()}function lNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cNe(t,e){if(t){if(typeof t=="string")return s8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s8(t,e)}}function s8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function dNe(t){if(Array.isArray(t))return t}function fNe(t,e){if(t==null)return{};var n=hNe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qee(r.key),r)}}function gNe(t,e,n){return e&&mNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yNe(t,e,n){return e=Cx(e),vNe(t,Uee()?Reflect.construct(e,n||[],Cx(t).constructor):e.apply(t,n))}function vNe(t,e){if(e&&(Tp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bNe(t)}function bNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uee=function(){return!!t})()}function Cx(t){return Cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cx(t)}function _Ne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qR(t,e)}function qR(t,e){return qR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qR(t,e)}function zee(t,e,n){return e=qee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qee(t){var e=wNe(t,"string");return Tp(e)=="symbol"?e:e+""}function wNe(t,e){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wb=(function(t){function e(){return pNe(this,e),yNe(this,e,arguments)}return _Ne(e,t),gNe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,f=r.yAxis,p=fNe(r,sNe),m=mt(p,!1);this.props.direction==="x"&&u.type!=="number"&&uf();var _=l.map(function(y){var b=c(y,o),x=b.x,w=b.y,T=b.value,A=b.errorVal;if(!A)return null;var E=[],C,R;if(Array.isArray(A)){var N=oNe(A,2);C=N[0],R=N[1]}else C=R=A;if(a==="vertical"){var D=u.scale,Z=w+i,j=Z+s,L=Z-s,B=D(T-C),z=D(T+R);E.push({x1:z,y1:j,x2:z,y2:L}),E.push({x1:B,y1:Z,x2:z,y2:Z}),E.push({x1:B,y1:j,x2:B,y2:L})}else if(a==="horizontal"){var W=f.scale,q=x+i,K=q-s,V=q+s,J=W(T-C),Q=W(T+R);E.push({x1:K,y1:Q,x2:V,y2:Q}),E.push({x1:q,y1:J,x2:q,y2:Q}),E.push({x1:K,y1:J,x2:V,y2:J})}return ee.createElement(Yt,Ox({className:"recharts-errorBar",key:"bar-".concat(E.map(function(M){return"".concat(M.x1,"-").concat(M.x2,"-").concat(M.y1,"-").concat(M.y2)}))},m),E.map(function(M){return ee.createElement("line",Ox({},M,{key:"line-".concat(M.x1,"-").concat(M.x2,"-").concat(M.y1,"-").concat(M.y2)}))}))});return ee.createElement(Yt,{className:"recharts-errorBars"},_)}}])})(ee.Component);zee(wb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});zee(wb,"displayName","ErrorBar");function lv(t){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lv(t)}function o8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o8(Object(n),!0).forEach(function(r){xNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xNe(t,e,n){return e=SNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SNe(t){var e=TNe(t,"string");return lv(e)=="symbol"?e:e+""}function TNe(t,e){if(lv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hee=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=Ma(n,Zd);if(!s)return null;var o=Zd.defaultProps,l=o!==void 0?wd(wd({},o),s.props):{},c;return s.props&&s.props.payload?c=s.props&&s.props.payload:a==="children"?c=(r||[]).reduce(function(u,f){var p=f.item,m=f.props,_=m.sectors||m.data||[];return u.concat(_.map(function(y){return{type:s.props.iconType||p.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):c=(r||[]).map(function(u){var f=u.item,p=f.type.defaultProps,m=p!==void 0?wd(wd({},p),f.props):{},_=m.dataKey,y=m.name,b=m.legendType,x=m.hide;return{inactive:x,dataKey:_,type:l.iconType||b||"square",color:KM(f),value:y||_,payload:m}}),wd(wd(wd({},l),Zd.getWithHeight(s,i)),{},{payload:c,item:s})};function cv(t){"@babel/helpers - typeof";return cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cv(t)}function l8(t){return CNe(t)||ONe(t)||ANe(t)||ENe()}function ENe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ANe(t,e){if(t){if(typeof t=="string")return HR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HR(t,e)}}function ONe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CNe(t){if(Array.isArray(t))return HR(t)}function HR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c8(Object(n),!0).forEach(function(r){tp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tp(t,e,n){return e=kNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kNe(t){var e=NNe(t,"string");return cv(e)=="symbol"?e:e+""}function NNe(t,e){if(cv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kr(t,e,n){return At(t)||At(e)?n:Ir(e)?Ga(t,e,n):xt(e)?e(t):n}function wy(t,e,n,r){var i=Cke(t,function(o){return kr(o,e)});if(n==="number"){var a=i.filter(function(o){return $e(o)||parseFloat(o)});return a.length?[zS(a),US(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!At(o)}):i;return s.map(function(o){return Ir(o)||o instanceof Date?o:""})}var INe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,c=0;c<o;c++){var u=c>0?i[c-1].coordinate:i[o-1].coordinate,f=i[c].coordinate,p=c>=o-1?i[0].coordinate:i[c+1].coordinate,m=void 0;if(Bi(f-u)!==Bi(p-f)){var _=[];if(Bi(p-f)===Bi(l[1]-l[0])){m=p;var y=f+l[1]-l[0];_[0]=Math.min(y,(y+u)/2),_[1]=Math.max(y,(y+u)/2)}else{m=u;var b=p+l[1]-l[0];_[0]=Math.min(f,(b+f)/2),_[1]=Math.max(f,(b+f)/2)}var x=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(e>x[0]&&e<=x[1]||e>=_[0]&&e<=_[1]){s=i[c].index;break}}else{var w=Math.min(u,p),T=Math.max(u,p);if(e>(w+f)/2&&e<=(T+f)/2){s=i[c].index;break}}}else for(var A=0;A<o;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){s=r[A].index;break}return s},KM=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?rr(rr({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},PNe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),l=0,c=o.length;l<c;l++)for(var u=a[o[l]].stackGroups,f=Object.keys(u),p=0,m=f.length;p<m;p++){var _=u[f[p]],y=_.items,b=_.cateAxisId,x=y.filter(function(R){return dc(R.type).indexOf("Bar")>=0});if(x&&x.length){var w=x[0].type.defaultProps,T=w!==void 0?rr(rr({},w),x[0].props):x[0].props,A=T.barSize,E=T[b];s[E]||(s[E]=[]);var C=At(A)?n:A;s[E].push({item:x[0],stackList:x.slice(1),barSize:At(C)?void 0:Fi(C,r,0)})}}return s},RNe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,l=s.length;if(l<1)return null;var c=Fi(n,i,0,!0),u,f=[];if(s[0].barSize===+s[0].barSize){var p=!1,m=i/l,_=s.reduce(function(A,E){return A+E.barSize||0},0);_+=(l-1)*c,_>=i&&(_-=(l-1)*c,c=0),_>=i&&m>0&&(p=!0,m*=.9,_=l*m);var y=(i-_)/2>>0,b={offset:y-c,size:0};u=s.reduce(function(A,E){var C={item:E.item,position:{offset:b.offset+b.size+c,size:p?m:E.barSize}},R=[].concat(l8(A),[C]);return b=R[R.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(N){R.push({item:N,position:b})}),R},f)}else{var x=Fi(r,i,0,!0);i-2*x-(l-1)*c<=0&&(c=0);var w=(i-2*x-(l-1)*c)/l;w>1&&(w>>=0);var T=o===+o?Math.min(w,o):w;u=s.reduce(function(A,E,C){var R=[].concat(l8(A),[{item:E.item,position:{offset:x+(w+c)*C+(w-T)/2,size:T}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(N){R.push({item:N,position:R[R.length-1].position})}),R},f)}return u},jNe=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,l=s-(o.left||0)-(o.right||0),c=Hee({children:a,legendWidth:l});if(c){var u=i||{},f=u.width,p=u.height,m=c.align,_=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&_==="middle")&&m!=="center"&&$e(e[m]))return rr(rr({},e),{},tp({},m,e[m]+(f||0)));if((y==="horizontal"||y==="vertical"&&m==="center")&&_!=="middle"&&$e(e[_]))return rr(rr({},e),{},tp({},_,e[_]+(p||0)))}return e},$Ne=function(e,n,r){return At(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Wee=function(e,n,r,i,a){var s=n.props.children,o=Ka(s,wb).filter(function(c){return $Ne(i,a,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var f=kr(u,r);if(At(f))return c;var p=Array.isArray(f)?[zS(f),US(f)]:[f,f],m=l.reduce(function(_,y){var b=kr(u,y,0),x=p[0]-Math.abs(Array.isArray(b)?b[0]:b),w=p[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(x,_[0]),Math.max(w,_[1])]},[1/0,-1/0]);return[Math.min(m[0],c[0]),Math.max(m[1],c[1])]},[1/0,-1/0])}return null},MNe=function(e,n,r,i,a){var s=n.map(function(o){return Wee(e,o,r,a,i)}).filter(function(o){return!At(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},Vee=function(e,n,r,i,a){var s=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&Wee(e,l,c,i)||wy(e,c,r,a)});if(r==="number")return s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,c){for(var u=0,f=c.length;u<f;u++)o[c[u]]||(o[c[u]]=!0,l.push(c[u]));return l},[])},Gee=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Kee=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var a,s,o=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate});return a||o.push(n),s||o.push(r),o},cc=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Bi(o[0]-o[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(f){var p=a?a.indexOf(f):f;return{coordinate:i(p)+c,value:f,offset:c}});return u.filter(function(f){return!pb(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,p){return{coordinate:i(f)+c,value:f,index:p,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+c,value:f,offset:c}}):i.domain().map(function(f,p){return{coordinate:i(f)+c,value:a?a[f]:f,index:p,offset:c}})},Qk=new WeakMap,n_=function(e,n){if(typeof n!="function")return e;Qk.has(e)||Qk.set(e,new WeakMap);var r=Qk.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Zee=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:tv(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:xx(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:_y(),realScaleType:"point"}:a==="category"?{scale:tv(),realScaleType:"band"}:{scale:xx(),realScaleType:"linear"};if(hb(i)){var l="scale".concat(AS(i));return{scale:(Kz[l]||_y)(),realScaleType:Kz[l]?l:"point"}}return xt(i)?{scale:i}:{scale:_y(),realScaleType:"point"}},u8=1e-4,Xee=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-u8,s=Math.max(i[0],i[1])+u8,o=e(n[0]),l=e(n[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([n[0],n[r-1]])}},LNe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},DNe=function(e,n){if(!n||n.length!==2||!$e(n[0])||!$e(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!$e(e[0])||e[0]<r)&&(a[0]=r),(!$e(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},BNe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var l=pb(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},FNe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=pb(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},UNe={sign:BNe,expand:CSe,none:gp,silhouette:kSe,wiggle:NSe,positive:FNe},zNe=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=UNe[r],s=OSe().keys(i).value(function(o,l){return+kr(o,l,0)}).order(_R).offset(a);return s(e)},qNe=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,l={},c=o.reduce(function(f,p){var m,_=(m=p.type)!==null&&m!==void 0&&m.defaultProps?rr(rr({},p.type.defaultProps),p.props):p.props,y=_.stackId,b=_.hide;if(b)return f;var x=_[r],w=f[x]||{hasStack:!1,stackGroups:{}};if(Ir(y)){var T=w.stackGroups[y]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(p),w.hasStack=!0,w.stackGroups[y]=T}else w.stackGroups[mm("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return rr(rr({},f),{},tp({},x,w))},l),u={};return Object.keys(c).reduce(function(f,p){var m=c[p];if(m.hasStack){var _={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(y,b){var x=m.stackGroups[b];return rr(rr({},y),{},tp({},b,{numericAxisId:r,cateAxisId:i,items:x.items,stackedData:zNe(e,x.items,a)}))},_)}return rr(rr({},f),{},tp({},p,m))},u)},Jee=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=rNe(c,a,o);return e.domain([zS(u),US(u)]),{niceTicks:u}}if(a&&i==="number"){var f=e.domain(),p=iNe(f,a,o);return{niceTicks:p}}return null};function d8(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!At(i[e.dataKey])){var o=rx(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=kr(i,At(s)?e.dataKey:s);return At(l)?null:e.scale(l)}var f8=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=kr(s,n.dataKey,n.domain[o]);return At(l)?null:n.scale(l)-a/2+i},HNe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},WNe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?rr(rr({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Ir(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},VNe=function(e){return e.reduce(function(n,r){return[zS(r.concat([n[0]]).filter($e)),US(r.concat([n[1]]).filter($e))]},[1/0,-1/0])},Yee=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,l=o.reduce(function(c,u){var f=VNe(u.slice(n,r+1));return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},h8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,p8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,WR=function(e,n,r){if(xt(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if($e(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(h8.test(e[0])){var a=+h8.exec(e[0])[1];i[0]=n[0]-a}else xt(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if($e(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(p8.test(e[1])){var s=+p8.exec(e[1])[1];i[1]=n[1]+s}else xt(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},kx=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=xM(n,function(f){return f.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},m8=function(e,n,r){return!e||!e.length||_b(e,Ga(r,"type.defaultProps.domain"))?n:e},Qee=function(e,n){var r=e.type.defaultProps?rr(rr({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return rr(rr({},mt(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:KM(e),value:kr(n,i),type:l,payload:n,chartType:c,hide:u})};function uv(t){"@babel/helpers - typeof";return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uv(t)}function g8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g8(Object(n),!0).forEach(function(r){ete(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ete(t,e,n){return e=GNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GNe(t){var e=KNe(t,"string");return uv(e)=="symbol"?e:e+""}function KNe(t,e){if(uv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZNe(t,e){return QNe(t)||YNe(t,e)||JNe(t,e)||XNe()}function XNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JNe(t,e){if(t){if(typeof t=="string")return y8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y8(t,e)}}function y8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function YNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function QNe(t){if(Array.isArray(t))return t}var Nx=Math.PI/180,eIe=function(e){return e*180/Math.PI},kn=function(e,n,r,i){return{x:e+Math.cos(-Nx*i)*r,y:n+Math.sin(-Nx*i)*r}},tte=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},tIe=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.startAngle,c=e.endAngle,u=Fi(e.cx,s,s/2),f=Fi(e.cy,o,o/2),p=tte(s,o,r),m=Fi(e.innerRadius,p,0),_=Fi(e.outerRadius,p,p*.8),y=Object.keys(n);return y.reduce(function(b,x){var w=n[x],T=w.domain,A=w.reversed,E;if(At(w.range))i==="angleAxis"?E=[l,c]:i==="radiusAxis"&&(E=[m,_]),A&&(E=[E[1],E[0]]);else{E=w.range;var C=E,R=ZNe(C,2);l=R[0],c=R[1]}var N=Zee(w,a),D=N.realScaleType,Z=N.scale;Z.domain(T).range(E),Xee(Z);var j=Jee(Z,rc(rc({},w),{},{realScaleType:D})),L=rc(rc(rc({},w),j),{},{range:E,radius:_,realScaleType:D,scale:Z,cx:u,cy:f,innerRadius:m,outerRadius:_,startAngle:l,endAngle:c});return rc(rc({},b),{},ete({},x,L))},{})},nIe=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},rIe=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=nIe({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var l=(r-a)/o,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:o,angle:eIe(c),angleInRadian:c}},iIe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},aIe=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},v8=function(e,n){var r=e.x,i=e.y,a=rIe({x:r,y:i},n),s=a.radius,o=a.angle,l=n.innerRadius,c=n.outerRadius;if(s<l||s>c)return!1;if(s===0)return!0;var u=iIe(n),f=u.startAngle,p=u.endAngle,m=o,_;if(f<=p){for(;m>p;)m-=360;for(;m<f;)m+=360;_=m>=f&&m<=p}else{for(;m>f;)m-=360;for(;m<p;)m+=360;_=m>=p&&m<=f}return _?rc(rc({},n),{},{radius:s,angle:aIe(m,n)}):null},nte=function(e){return!k.isValidElement(e)&&!xt(e)&&typeof e!="boolean"?e.className:""};function dv(t){"@babel/helpers - typeof";return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dv(t)}var sIe=["offset"];function oIe(t){return dIe(t)||uIe(t)||cIe(t)||lIe()}function lIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cIe(t,e){if(t){if(typeof t=="string")return VR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VR(t,e)}}function uIe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dIe(t){if(Array.isArray(t))return VR(t)}function VR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fIe(t,e){if(t==null)return{};var n=hIe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hIe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function b8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b8(Object(n),!0).forEach(function(r){pIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pIe(t,e,n){return e=mIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mIe(t){var e=gIe(t,"string");return dv(e)=="symbol"?e:e+""}function gIe(t,e){if(dv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fv(){return fv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fv.apply(this,arguments)}var yIe=function(e){var n=e.value,r=e.formatter,i=At(e.children)?n:e.children;return xt(r)?r(i):i},vIe=function(e,n){var r=Bi(n-e),i=Math.min(Math.abs(n-e),360);return r*i},bIe=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,l=a,c=l.cx,u=l.cy,f=l.innerRadius,p=l.outerRadius,m=l.startAngle,_=l.endAngle,y=l.clockWise,b=(f+p)/2,x=vIe(m,_),w=x>=0?1:-1,T,A;i==="insideStart"?(T=m+w*s,A=y):i==="insideEnd"?(T=_-w*s,A=!y):i==="end"&&(T=_+w*s,A=y),A=x<=0?A:!A;var E=kn(c,u,b,T),C=kn(c,u,b,T+(A?1:-1)*359),R="M".concat(E.x,",").concat(E.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(A?0:1,`,
    `).concat(C.x,",").concat(C.y),N=At(e.id)?mm("recharts-radial-line-"):e.id;return ee.createElement("text",fv({},r,{dominantBaseline:"central",className:Ct("recharts-radial-bar-label",o)}),ee.createElement("defs",null,ee.createElement("path",{id:N,d:R})),ee.createElement("textPath",{xlinkHref:"#".concat(N)},n))},_Ie=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,l=a.innerRadius,c=a.outerRadius,u=a.startAngle,f=a.endAngle,p=(u+f)/2;if(i==="outside"){var m=kn(s,o,c+r,p),_=m.x,y=m.y;return{x:_,y,textAnchor:_>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var b=(l+c)/2,x=kn(s,o,b,p),w=x.x,T=x.y;return{x:w,y:T,textAnchor:"middle",verticalAnchor:"middle"}},wIe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,l=s.y,c=s.width,u=s.height,f=u>=0?1:-1,p=f*i,m=f>0?"end":"start",_=f>0?"start":"end",y=c>=0?1:-1,b=y*i,x=y>0?"end":"start",w=y>0?"start":"end";if(a==="top"){var T={x:o+c/2,y:l-f*i,textAnchor:"middle",verticalAnchor:m};return Er(Er({},T),r?{height:Math.max(l-r.y,0),width:c}:{})}if(a==="bottom"){var A={x:o+c/2,y:l+u+p,textAnchor:"middle",verticalAnchor:_};return Er(Er({},A),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(a==="left"){var E={x:o-b,y:l+u/2,textAnchor:x,verticalAnchor:"middle"};return Er(Er({},E),r?{width:Math.max(E.x-r.x,0),height:u}:{})}if(a==="right"){var C={x:o+c+b,y:l+u/2,textAnchor:w,verticalAnchor:"middle"};return Er(Er({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:u}:{})}var R=r?{width:c,height:u}:{};return a==="insideLeft"?Er({x:o+b,y:l+u/2,textAnchor:w,verticalAnchor:"middle"},R):a==="insideRight"?Er({x:o+c-b,y:l+u/2,textAnchor:x,verticalAnchor:"middle"},R):a==="insideTop"?Er({x:o+c/2,y:l+p,textAnchor:"middle",verticalAnchor:_},R):a==="insideBottom"?Er({x:o+c/2,y:l+u-p,textAnchor:"middle",verticalAnchor:m},R):a==="insideTopLeft"?Er({x:o+b,y:l+p,textAnchor:w,verticalAnchor:_},R):a==="insideTopRight"?Er({x:o+c-b,y:l+p,textAnchor:x,verticalAnchor:_},R):a==="insideBottomLeft"?Er({x:o+b,y:l+u-p,textAnchor:w,verticalAnchor:m},R):a==="insideBottomRight"?Er({x:o+c-b,y:l+u-p,textAnchor:x,verticalAnchor:m},R):pm(a)&&($e(a.x)||zd(a.x))&&($e(a.y)||zd(a.y))?Er({x:o+Fi(a.x,c),y:l+Fi(a.y,u),textAnchor:"end",verticalAnchor:"end"},R):Er({x:o+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},R)},xIe=function(e){return"cx"in e&&$e(e.cx)};function zr(t){var e=t.offset,n=e===void 0?5:e,r=fIe(t,sIe),i=Er({offset:n},r),a=i.viewBox,s=i.position,o=i.value,l=i.children,c=i.content,u=i.className,f=u===void 0?"":u,p=i.textBreakAll;if(!a||At(o)&&At(l)&&!k.isValidElement(c)&&!xt(c))return null;if(k.isValidElement(c))return k.cloneElement(c,i);var m;if(xt(c)){if(m=k.createElement(c,i),k.isValidElement(m))return m}else m=yIe(i);var _=xIe(a),y=mt(i,!0);if(_&&(s==="insideStart"||s==="insideEnd"||s==="end"))return bIe(i,m,y);var b=_?_Ie(i):wIe(i);return ee.createElement(lf,fv({className:Ct("recharts-label",f)},y,b,{breakAll:p}),m)}zr.displayName="Label";var rte=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,f=e.x,p=e.y,m=e.top,_=e.left,y=e.width,b=e.height,x=e.clockWise,w=e.labelViewBox;if(w)return w;if($e(y)&&$e(b)){if($e(f)&&$e(p))return{x:f,y:p,width:y,height:b};if($e(m)&&$e(_))return{x:m,y:_,width:y,height:b}}return $e(f)&&$e(p)?{x:f,y:p,width:0,height:0}:$e(n)&&$e(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:x}:e.viewBox?e.viewBox:{}},SIe=function(e,n){return e?e===!0?ee.createElement(zr,{key:"label-implicit",viewBox:n}):Ir(e)?ee.createElement(zr,{key:"label-implicit",viewBox:n,value:e}):k.isValidElement(e)?e.type===zr?k.cloneElement(e,{key:"label-implicit",viewBox:n}):ee.createElement(zr,{key:"label-implicit",content:e,viewBox:n}):xt(e)?ee.createElement(zr,{key:"label-implicit",content:e,viewBox:n}):pm(e)?ee.createElement(zr,fv({viewBox:n},e,{key:"label-implicit"})):null:null},TIe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=rte(e),s=Ka(i,zr).map(function(l,c){return k.cloneElement(l,{viewBox:n||a,key:"label-".concat(c)})});if(!r)return s;var o=SIe(e.label,n||a);return[o].concat(oIe(s))};zr.parseViewBox=rte;zr.renderCallByParent=TIe;var eN,_8;function EIe(){if(_8)return eN;_8=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return eN=t,eN}var AIe=EIe();const OIe=Ut(AIe);function hv(t){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(t)}var CIe=["valueAccessor"],kIe=["data","dataKey","clockWise","id","textBreakAll"];function NIe(t){return jIe(t)||RIe(t)||PIe(t)||IIe()}function IIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PIe(t,e){if(t){if(typeof t=="string")return GR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GR(t,e)}}function RIe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jIe(t){if(Array.isArray(t))return GR(t)}function GR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ix(){return Ix=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ix.apply(this,arguments)}function w8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function x8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w8(Object(n),!0).forEach(function(r){$Ie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ie(t,e,n){return e=MIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MIe(t){var e=LIe(t,"string");return hv(e)=="symbol"?e:e+""}function LIe(t,e){if(hv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function S8(t,e){if(t==null)return{};var n=DIe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DIe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var BIe=function(e){return Array.isArray(e.value)?OIe(e.value):e.value};function hc(t){var e=t.valueAccessor,n=e===void 0?BIe:e,r=S8(t,CIe),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,l=r.textBreakAll,c=S8(r,kIe);return!i||!i.length?null:ee.createElement(Yt,{className:"recharts-label-list"},i.map(function(u,f){var p=At(a)?n(u,f):kr(u&&u.payload,a),m=At(o)?{}:{id:"".concat(o,"-").concat(f)};return ee.createElement(zr,Ix({},mt(u,!0),c,m,{parentViewBox:u.parentViewBox,value:p,textBreakAll:l,viewBox:zr.parseViewBox(At(s)?u:x8(x8({},u),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}hc.displayName="LabelList";function FIe(t,e){return t?t===!0?ee.createElement(hc,{key:"labelList-implicit",data:e}):ee.isValidElement(t)||xt(t)?ee.createElement(hc,{key:"labelList-implicit",data:e,content:t}):pm(t)?ee.createElement(hc,Ix({data:e},t,{key:"labelList-implicit"})):null:null}function UIe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Ka(r,hc).map(function(s,o){return k.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=FIe(t.label,e);return[a].concat(NIe(i))}hc.renderCallByParent=UIe;function pv(t){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pv(t)}function KR(){return KR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KR.apply(this,arguments)}function T8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function E8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T8(Object(n),!0).forEach(function(r){zIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zIe(t,e,n){return e=qIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qIe(t){var e=HIe(t,"string");return pv(e)=="symbol"?e:e+""}function HIe(t,e){if(pv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WIe=function(e,n){var r=Bi(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},r_=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(o?1:-1)+i,f=Math.asin(l/u)/Nx,p=c?a:a+s*f,m=kn(n,r,u,p),_=kn(n,r,i,p),y=c?a-s*f:a,b=kn(n,r,u*Math.cos(f*Nx),y);return{center:m,circleTangency:_,lineTangency:b,theta:f}},ite=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,l=WIe(s,o),c=s+l,u=kn(n,r,a,s),f=kn(n,r,a,c),p="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var m=kn(n,r,i,s),_=kn(n,r,i,c);p+="L ".concat(_.x,",").concat(_.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},VIe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,f=Bi(u-c),p=r_({cx:n,cy:r,radius:a,angle:c,sign:f,cornerRadius:s,cornerIsExternal:l}),m=p.circleTangency,_=p.lineTangency,y=p.theta,b=r_({cx:n,cy:r,radius:a,angle:u,sign:-f,cornerRadius:s,cornerIsExternal:l}),x=b.circleTangency,w=b.lineTangency,T=b.theta,A=l?Math.abs(c-u):Math.abs(c-u)-y-T;if(A<0)return o?"M ".concat(_.x,",").concat(_.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):ite({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:u});var E="M ".concat(_.x,",").concat(_.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(A>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var C=r_({cx:n,cy:r,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),R=C.circleTangency,N=C.lineTangency,D=C.theta,Z=r_({cx:n,cy:r,radius:i,angle:u,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),j=Z.circleTangency,L=Z.lineTangency,B=Z.theta,z=l?Math.abs(c-u):Math.abs(c-u)-D-B;if(z<0&&s===0)return"".concat(E,"L").concat(n,",").concat(r,"Z");E+="L".concat(L.x,",").concat(L.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(z>180),",").concat(+(f>0),",").concat(R.x,",").concat(R.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(N.x,",").concat(N.y,"Z")}else E+="L".concat(n,",").concat(r,"Z");return E},GIe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ate=function(e){var n=E8(E8({},GIe),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,f=n.endAngle,p=n.className;if(s<a||u===f)return null;var m=Ct("recharts-sector",p),_=s-a,y=Fi(o,_,0,!0),b;return y>0&&Math.abs(u-f)<360?b=VIe({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(y,_/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:f}):b=ite({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:u,endAngle:f}),ee.createElement("path",KR({},mt(n,!0),{className:m,d:b,role:"img"}))};function mv(t){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mv(t)}function ZR(){return ZR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZR.apply(this,arguments)}function A8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A8(Object(n),!0).forEach(function(r){KIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KIe(t,e,n){return e=ZIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZIe(t){var e=XIe(t,"string");return mv(e)=="symbol"?e:e+""}function XIe(t,e){if(mv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C8={curveBasisClosed:gSe,curveBasisOpen:ySe,curveBasis:mSe,curveBumpX:tSe,curveBumpY:nSe,curveLinearClosed:vSe,curveLinear:CS,curveMonotoneX:bSe,curveMonotoneY:_Se,curveNatural:wSe,curveStep:xSe,curveStepAfter:TSe,curveStepBefore:SSe},i_=function(e){return e.x===+e.x&&e.y===+e.y},pg=function(e){return e.x},mg=function(e){return e.y},JIe=function(e,n){if(xt(e))return e;var r="curve".concat(AS(e));return(r==="curveMonotone"||r==="curveBump")&&n?C8["".concat(r).concat(n==="vertical"?"Y":"X")]:C8[r]||CS},YIe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=JIe(r,o),f=c?a.filter(function(y){return i_(y)}):a,p;if(Array.isArray(s)){var m=c?s.filter(function(y){return i_(y)}):s,_=f.map(function(y,b){return O8(O8({},y),{},{base:m[b]})});return o==="vertical"?p=Z0().y(mg).x1(pg).x0(function(y){return y.base.x}):p=Z0().x(pg).y1(mg).y0(function(y){return y.base.y}),p.defined(i_).curve(u),p(_)}return o==="vertical"&&$e(s)?p=Z0().y(mg).x1(pg).x0(s):$e(s)?p=Z0().x(pg).y1(mg).y0(s):p=rQ().x(pg).y(mg),p.defined(i_).curve(u),p(f)},Px=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?YIe(e):i;return ee.createElement("path",ZR({},mt(e,!1),ix(e),{className:Ct("recharts-curve",n),d:s,ref:a}))},tN={exports:{}},nN,k8;function QIe(){if(k8)return nN;k8=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return nN=t,nN}var rN,N8;function ePe(){if(N8)return rN;N8=1;var t=QIe();function e(){}function n(){}return n.resetWarningCache=e,rN=function(){function r(s,o,l,c,u,f){if(f!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},rN}var I8;function tPe(){return I8||(I8=1,tN.exports=ePe()()),tN.exports}var nPe=tPe();const an=Ut(nPe),{getOwnPropertyNames:rPe,getOwnPropertySymbols:iPe}=Object,{hasOwnProperty:aPe}=Object.prototype;function iN(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function a_(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:a}=i,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);const l=t(n,r,i);return a.delete(n),a.delete(r),l}}function sPe(t){return t!=null?t[Symbol.toStringTag]:void 0}function P8(t){return rPe(t).concat(iPe(t))}const oPe=Object.hasOwn||((t,e)=>aPe.call(t,e));function xf(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const lPe="__v",cPe="__o",uPe="_owner",{getOwnPropertyDescriptor:R8,keys:j8}=Object;function dPe(t,e){return t.byteLength===e.byteLength&&Rx(new Uint8Array(t),new Uint8Array(e))}function fPe(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function hPe(t,e){return t.byteLength===e.byteLength&&Rx(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function pPe(t,e){return xf(t.getTime(),e.getTime())}function mPe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function gPe(t,e){return t===e}function $8(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.entries();let s,o,l=0;for(;(s=a.next())&&!s.done;){const c=e.entries();let u=!1,f=0;for(;(o=c.next())&&!o.done;){if(i[f]){f++;continue}const p=s.value,m=o.value;if(n.equals(p[0],m[0],l,f,t,e,n)&&n.equals(p[1],m[1],p[0],m[0],t,e,n)){u=i[f]=!0;break}f++}if(!u)return!1;l++}return!0}const yPe=xf;function vPe(t,e,n){const r=j8(t);let i=r.length;if(j8(e).length!==i)return!1;for(;i-- >0;)if(!ste(t,e,n,r[i]))return!1;return!0}function gg(t,e,n){const r=P8(t);let i=r.length;if(P8(e).length!==i)return!1;let a,s,o;for(;i-- >0;)if(a=r[i],!ste(t,e,n,a)||(s=R8(t,a),o=R8(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function bPe(t,e){return xf(t.valueOf(),e.valueOf())}function _Pe(t,e){return t.source===e.source&&t.flags===e.flags}function M8(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.values();let s,o;for(;(s=a.next())&&!s.done;){const l=e.values();let c=!1,u=0;for(;(o=l.next())&&!o.done;){if(!i[u]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function Rx(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function wPe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function ste(t,e,n,r){return(r===uPe||r===cPe||r===lPe)&&(t.$$typeof||e.$$typeof)?!0:oPe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const xPe="[object ArrayBuffer]",SPe="[object Arguments]",TPe="[object Boolean]",EPe="[object DataView]",APe="[object Date]",OPe="[object Error]",CPe="[object Map]",kPe="[object Number]",NPe="[object Object]",IPe="[object RegExp]",PPe="[object Set]",RPe="[object String]",jPe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},$Pe="[object URL]",MPe=Object.prototype.toString;function LPe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:o,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:u,areSetsEqual:f,areTypedArraysEqual:p,areUrlsEqual:m,unknownTagComparators:_}){return function(b,x,w){if(b===x)return!0;if(b==null||x==null)return!1;const T=typeof b;if(T!==typeof x)return!1;if(T!=="object")return T==="number"?o(b,x,w):T==="function"?a(b,x,w):!1;const A=b.constructor;if(A!==x.constructor)return!1;if(A===Object)return l(b,x,w);if(Array.isArray(b))return e(b,x,w);if(A===Date)return r(b,x,w);if(A===RegExp)return u(b,x,w);if(A===Map)return s(b,x,w);if(A===Set)return f(b,x,w);const E=MPe.call(b);if(E===APe)return r(b,x,w);if(E===IPe)return u(b,x,w);if(E===CPe)return s(b,x,w);if(E===PPe)return f(b,x,w);if(E===NPe)return typeof b.then!="function"&&typeof x.then!="function"&&l(b,x,w);if(E===$Pe)return m(b,x,w);if(E===OPe)return i(b,x,w);if(E===SPe)return l(b,x,w);if(jPe[E])return p(b,x,w);if(E===xPe)return t(b,x,w);if(E===EPe)return n(b,x,w);if(E===TPe||E===kPe||E===RPe)return c(b,x,w);if(_){let C=_[E];if(!C){const R=sPe(b);R&&(C=_[R])}if(C)return C(b,x,w)}return!1}}function DPe({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:dPe,areArraysEqual:n?gg:fPe,areDataViewsEqual:hPe,areDatesEqual:pPe,areErrorsEqual:mPe,areFunctionsEqual:gPe,areMapsEqual:n?iN($8,gg):$8,areNumbersEqual:yPe,areObjectsEqual:n?gg:vPe,arePrimitiveWrappersEqual:bPe,areRegExpsEqual:_Pe,areSetsEqual:n?iN(M8,gg):M8,areTypedArraysEqual:n?iN(Rx,gg):Rx,areUrlsEqual:wPe,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=a_(r.areArraysEqual),a=a_(r.areMapsEqual),s=a_(r.areObjectsEqual),o=a_(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:o})}return r}function BPe(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function FPe({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(o,l){const{cache:c=t?new WeakMap:void 0,meta:u}=n();return e(o,l,{cache:c,equals:r,meta:u,strict:i})};if(t)return function(o,l){return e(o,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const a={cache:void 0,equals:r,meta:void 0,strict:i};return function(o,l){return e(o,l,a)}}const UPe=Ju();Ju({strict:!0});Ju({circular:!0});Ju({circular:!0,strict:!0});Ju({createInternalComparator:()=>xf});Ju({strict:!0,createInternalComparator:()=>xf});Ju({circular:!0,createInternalComparator:()=>xf});Ju({circular:!0,createInternalComparator:()=>xf,strict:!0});function Ju(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,a=DPe(t),s=LPe(a),o=n?n(s):BPe(s);return FPe({circular:e,comparator:s,createState:r,equals:o,strict:i})}function zPe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function L8(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):zPe(i)};requestAnimationFrame(r)}function XR(t){"@babel/helpers - typeof";return XR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XR(t)}function qPe(t){return GPe(t)||VPe(t)||WPe(t)||HPe()}function HPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WPe(t,e){if(t){if(typeof t=="string")return D8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D8(t,e)}}function D8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function VPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GPe(t){if(Array.isArray(t))return t}function KPe(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=qPe(s),l=o[0],c=o.slice(1);if(typeof l=="number"){L8(i.bind(null,c),l);return}i(l),L8(i.bind(null,c));return}XR(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function gv(t){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gv(t)}function B8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B8(Object(n),!0).forEach(function(r){ote(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ote(t,e,n){return e=ZPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZPe(t){var e=XPe(t,"string");return gv(e)==="symbol"?e:String(e)}function XPe(t,e){if(gv(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gv(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JPe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},YPe=function(e){return e},QPe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},xy=function(e,n){return Object.keys(n).reduce(function(r,i){return F8(F8({},r),{},ote({},i,e(i,n[i])))},{})},U8=function(e,n,r){return e.map(function(i){return"".concat(QPe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function eRe(t,e){return rRe(t)||nRe(t,e)||lte(t,e)||tRe()}function tRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nRe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function rRe(t){if(Array.isArray(t))return t}function iRe(t){return oRe(t)||sRe(t)||lte(t)||aRe()}function aRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lte(t,e){if(t){if(typeof t=="string")return JR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JR(t,e)}}function sRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oRe(t){if(Array.isArray(t))return JR(t)}function JR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var jx=1e-4,cte=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},ute=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},z8=function(e,n){return function(r){var i=cte(e,n);return ute(i,r)}},lRe=function(e,n){return function(r){var i=cte(e,n),a=[].concat(iRe(i.map(function(s,o){return s*o}).slice(1)),[0]);return ute(a,r)}},q8=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),u=eRe(c,4);i=u[0],a=u[1],s=u[2],o=u[3]}}}var f=z8(i,s),p=z8(a,o),m=lRe(i,s),_=function(x){return x>1?1:x<0?0:x},y=function(x){for(var w=x>1?1:x,T=w,A=0;A<8;++A){var E=f(T)-w,C=m(T);if(Math.abs(E-w)<jx||C<jx)return p(T);T=_(T-E/C)}return p(T)};return y.isStepper=!1,y},cRe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,l=function(u,f,p){var m=-(u-f)*r,_=p*a,y=p+(m-_)*o/1e3,b=p*o/1e3+u;return Math.abs(b-f)<jx&&Math.abs(y)<jx?[f,0]:[b,y]};return l.isStepper=!0,l.dt=o,l},uRe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return q8(i);case"spring":return cRe();default:if(i.split("(")[0]==="cubic-bezier")return q8(i)}return typeof i=="function"?i:null};function yv(t){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yv(t)}function H8(t){return hRe(t)||fRe(t)||dte(t)||dRe()}function dRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hRe(t){if(Array.isArray(t))return QR(t)}function W8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W8(Object(n),!0).forEach(function(r){YR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YR(t,e,n){return e=pRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pRe(t){var e=mRe(t,"string");return yv(e)==="symbol"?e:String(e)}function mRe(t,e){if(yv(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yv(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gRe(t,e){return bRe(t)||vRe(t,e)||dte(t,e)||yRe()}function yRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dte(t,e){if(t){if(typeof t=="string")return QR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QR(t,e)}}function QR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vRe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function bRe(t){if(Array.isArray(t))return t}var $x=function(e,n,r){return e+(n-e)*r},ej=function(e){var n=e.from,r=e.to;return n!==r},_Re=function t(e,n,r){var i=xy(function(a,s){if(ej(s)){var o=e(s.from,s.to,s.velocity),l=gRe(o,2),c=l[0],u=l[1];return Qr(Qr({},s),{},{from:c,velocity:u})}return s},n);return r<1?xy(function(a,s){return ej(s)?Qr(Qr({},s),{},{velocity:$x(s.velocity,i[a].velocity,r),from:$x(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const wRe=(function(t,e,n,r,i){var a=JPe(t,e),s=a.reduce(function(b,x){return Qr(Qr({},b),{},YR({},x,[t[x],e[x]]))},{}),o=a.reduce(function(b,x){return Qr(Qr({},b),{},YR({},x,{from:t[x],velocity:0,to:e[x]}))},{}),l=-1,c,u,f=function(){return null},p=function(){return xy(function(x,w){return w.from},o)},m=function(){return!Object.values(o).filter(ej).length},_=function(x){c||(c=x);var w=x-c,T=w/n.dt;o=_Re(n,o,T),i(Qr(Qr(Qr({},t),e),p())),c=x,m()||(l=requestAnimationFrame(f))},y=function(x){u||(u=x);var w=(x-u)/r,T=xy(function(E,C){return $x.apply(void 0,H8(C).concat([n(w)]))},s);if(i(Qr(Qr(Qr({},t),e),T)),w<1)l=requestAnimationFrame(f);else{var A=xy(function(E,C){return $x.apply(void 0,H8(C).concat([n(1)]))},s);i(Qr(Qr(Qr({},t),e),A))}};return f=n.isStepper?_:y,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}});function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}var xRe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function SRe(t,e){if(t==null)return{};var n=TRe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TRe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function aN(t){return CRe(t)||ORe(t)||ARe(t)||ERe()}function ERe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ARe(t,e){if(t){if(typeof t=="string")return tj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tj(t,e)}}function ORe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CRe(t){if(Array.isArray(t))return tj(t)}function tj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function V8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V8(Object(n),!0).forEach(function(r){Xg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xg(t,e,n){return e=fte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NRe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fte(r.key),r)}}function IRe(t,e,n){return e&&NRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fte(t){var e=PRe(t,"string");return Ep(e)==="symbol"?e:String(e)}function PRe(t,e){if(Ep(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ep(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nj(t,e)}function nj(t,e){return nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nj(t,e)}function jRe(t){var e=$Re();return function(){var r=Mx(t),i;if(e){var a=Mx(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return rj(this,i)}}function rj(t,e){if(e&&(Ep(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ij(t)}function ij(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $Re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mx(t){return Mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mx(t)}var xl=(function(t){RRe(n,t);var e=jRe(n);function n(r,i){var a;kRe(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,l=s.attributeName,c=s.from,u=s.to,f=s.steps,p=s.children,m=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(ij(a)),a.changeStyle=a.changeStyle.bind(ij(a)),!o||m<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:u}),rj(a);if(f&&f.length)a.state={style:f[0].style};else if(c){if(typeof p=="function")return a.state={style:c},rj(a);a.state={style:l?Xg({},l,c):c}}else a.state={style:{}};return a}return IRe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,c=a.shouldReAnimate,u=a.to,f=a.from,p=this.state.style;if(o){if(!s){var m={style:l?Xg({},l,u):u};this.state&&p&&(l&&p[l]!==u||!l&&p!==u)&&this.setState(m);return}if(!(UPe(i.to,u)&&i.canBegin&&i.isActive)){var _=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=_||c?f:i.to;if(this.state&&p){var b={style:l?Xg({},l,y):y};(l&&p[l]!==y||!l&&p!==y)&&this.setState(b)}this.runAnimation(Xs(Xs({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,l=i.duration,c=i.easing,u=i.begin,f=i.onAnimationEnd,p=i.onAnimationStart,m=wRe(s,o,uRe(c),l,this.changeStyle),_=function(){a.stopJSAnimation=m()};this.manager.start([p,u,_,l,f])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,l=i.onAnimationStart,c=s[0],u=c.style,f=c.duration,p=f===void 0?0:f,m=function(y,b,x){if(x===0)return y;var w=b.duration,T=b.easing,A=T===void 0?"ease":T,E=b.style,C=b.properties,R=b.onAnimationEnd,N=x>0?s[x-1]:b,D=C||Object.keys(E);if(typeof A=="function"||A==="spring")return[].concat(aN(y),[a.runJSAnimation.bind(a,{from:N.style,to:E,duration:w,easing:A}),w]);var Z=U8(D,w,A),j=Xs(Xs(Xs({},N.style),E),{},{transition:Z});return[].concat(aN(y),[j,w,R]).filter(YPe)};return this.manager.start([l].concat(aN(s.reduce(m,[u,Math.max(p,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=KPe());var a=i.begin,s=i.duration,o=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,f=i.onAnimationEnd,p=i.steps,m=i.children,_=this.manager;if(this.unSubscribe=_.subscribe(this.handleStyleChange),typeof c=="function"||typeof m=="function"||c==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var y=o?Xg({},o,l):l,b=U8(Object.keys(y),s,c);_.start([u,a,Xs(Xs({},y),{},{transition:b}),s,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=SRe(i,xRe),c=k.Children.count(a),u=this.state.style;if(typeof a=="function")return a(u);if(!o||c===0||s<=0)return a;var f=function(m){var _=m.props,y=_.style,b=y===void 0?{}:y,x=_.className,w=k.cloneElement(m,Xs(Xs({},l),{},{style:Xs(Xs({},b),u),className:x}));return w};return c===1?f(k.Children.only(a)):ee.createElement("div",null,k.Children.map(a,function(p){return f(p)}))}}]),n})(k.PureComponent);xl.displayName="Animate";xl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};xl.propTypes={from:an.oneOfType([an.object,an.string]),to:an.oneOfType([an.object,an.string]),attributeName:an.string,duration:an.number,begin:an.number,easing:an.oneOfType([an.string,an.func]),steps:an.arrayOf(an.shape({duration:an.number.isRequired,style:an.object.isRequired,easing:an.oneOfType([an.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),an.func]),properties:an.arrayOf("string"),onAnimationEnd:an.func})),children:an.oneOfType([an.node,an.func]),isActive:an.bool,canBegin:an.bool,onAnimationEnd:an.func,shouldReAnimate:an.bool,onAnimationStart:an.func,onAnimationReStart:an.func};function vv(t){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vv(t)}function Lx(){return Lx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lx.apply(this,arguments)}function MRe(t,e){return FRe(t)||BRe(t,e)||DRe(t,e)||LRe()}function LRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DRe(t,e){if(t){if(typeof t=="string")return G8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G8(t,e)}}function G8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BRe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function FRe(t){if(Array.isArray(t))return t}function K8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K8(Object(n),!0).forEach(function(r){URe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function URe(t,e,n){return e=zRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zRe(t){var e=qRe(t,"string");return vv(e)=="symbol"?e:e+""}function qRe(t,e){if(vv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X8=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var f=[0,0,0,0],p=0,m=4;p<m;p++)f[p]=a[p]>s?s:a[p];u="M".concat(e,",").concat(n+o*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(e+l*f[0],",").concat(n)),u+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+o*f[1])),u+="L ".concat(e+r,",").concat(n+i-o*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(e+r-l*f[2],",").concat(n+i)),u+="L ".concat(e+l*f[3],",").concat(n+i),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-o*f[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var _=Math.min(s,a);u="M ".concat(e,",").concat(n+o*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(c,",").concat(e+l*_,",").concat(n,`
            L `).concat(e+r-l*_,",").concat(n,`
            A `).concat(_,",").concat(_,",0,0,").concat(c,",").concat(e+r,",").concat(n+o*_,`
            L `).concat(e+r,",").concat(n+i-o*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(c,",").concat(e+r-l*_,",").concat(n+i,`
            L `).concat(e+l*_,",").concat(n+i,`
            A `).concat(_,",").concat(_,",0,0,").concat(c,",").concat(e,",").concat(n+i-o*_," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},HRe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(a,a+o),u=Math.max(a,a+o),f=Math.min(s,s+l),p=Math.max(s,s+l);return r>=c&&r<=u&&i>=f&&i<=p}return!1},WRe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ZM=function(e){var n=Z8(Z8({},WRe),e),r=k.useRef(),i=k.useState(-1),a=MRe(i,2),s=a[0],o=a[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var l=n.x,c=n.y,u=n.width,f=n.height,p=n.radius,m=n.className,_=n.animationEasing,y=n.animationDuration,b=n.animationBegin,x=n.isAnimationActive,w=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var T=Ct("recharts-rectangle",m);return w?ee.createElement(xl,{canBegin:s>0,from:{width:u,height:f,x:l,y:c},to:{width:u,height:f,x:l,y:c},duration:y,animationEasing:_,isActive:w},function(A){var E=A.width,C=A.height,R=A.x,N=A.y;return ee.createElement(xl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,isActive:x,easing:_},ee.createElement("path",Lx({},mt(n,!0),{className:T,d:X8(R,N,E,C,p),ref:r})))}):ee.createElement("path",Lx({},mt(n,!0),{className:T,d:X8(l,c,u,f,p)}))},VRe=["points","className","baseLinePoints","connectNulls"];function jh(){return jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jh.apply(this,arguments)}function GRe(t,e){if(t==null)return{};var n=KRe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function J8(t){return YRe(t)||JRe(t)||XRe(t)||ZRe()}function ZRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XRe(t,e){if(t){if(typeof t=="string")return aj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aj(t,e)}}function JRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function YRe(t){if(Array.isArray(t))return aj(t)}function aj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Y8=function(e){return e&&e.x===+e.x&&e.y===+e.y},QRe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){Y8(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),Y8(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Sy=function(e,n){var r=QRe(e);n&&(r=[r.reduce(function(a,s){return[].concat(J8(a),J8(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,o,l){return"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},eje=function(e,n,r){var i=Sy(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Sy(n.reverse(),r).slice(1))},tje=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,s=GRe(e,VRe);if(!n||!n.length)return null;var o=Ct("recharts-polygon",r);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",c=eje(n,i,a);return ee.createElement("g",{className:o},ee.createElement("path",jh({},mt(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?ee.createElement("path",jh({},mt(s,!0),{fill:"none",d:Sy(n,a)})):null,l?ee.createElement("path",jh({},mt(s,!0),{fill:"none",d:Sy(i,a)})):null)}var u=Sy(n,a);return ee.createElement("path",jh({},mt(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:o,d:u}))};function sj(){return sj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sj.apply(this,arguments)}var WS=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=Ct("recharts-dot",a);return n===+n&&r===+r&&i===+i?ee.createElement("circle",sj({},mt(e,!1),ix(e),{className:s,cx:n,cy:r,r:i})):null};function bv(t){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bv(t)}var nje=["x","y","top","left","width","height","className"];function oj(){return oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oj.apply(this,arguments)}function Q8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rje(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q8(Object(n),!0).forEach(function(r){ije(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ije(t,e,n){return e=aje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aje(t){var e=sje(t,"string");return bv(e)=="symbol"?e:e+""}function sje(t,e){if(bv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oje(t,e){if(t==null)return{};var n=lje(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var cje=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},uje=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,l=e.left,c=l===void 0?0:l,u=e.width,f=u===void 0?0:u,p=e.height,m=p===void 0?0:p,_=e.className,y=oje(e,nje),b=rje({x:r,y:a,top:o,left:c,width:f,height:m},y);return!$e(r)||!$e(a)||!$e(f)||!$e(m)||!$e(o)||!$e(c)?null:ee.createElement("path",oj({},mt(b,!0),{className:Ct("recharts-cross",_),d:cje(r,a,f,m,o,c)}))},sN,eq;function dje(){if(eq)return sN;eq=1;var t=FS(),e=Oee(),n=Nl();function r(i,a){return i&&i.length?t(i,n(a,2),e):void 0}return sN=r,sN}var fje=dje();const hje=Ut(fje);var oN,tq;function pje(){if(tq)return oN;tq=1;var t=FS(),e=Nl(),n=Cee();function r(i,a){return i&&i.length?t(i,e(a,2),n):void 0}return oN=r,oN}var mje=pje();const gje=Ut(mje);var yje=["cx","cy","angle","ticks","axisLine"],vje=["ticks","tick","angle","tickFormatter","stroke"];function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}function Ty(){return Ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ty.apply(this,arguments)}function nq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nq(Object(n),!0).forEach(function(r){VS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rq(t,e){if(t==null)return{};var n=bje(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function _je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pte(r.key),r)}}function wje(t,e,n){return e&&iq(t.prototype,e),n&&iq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xje(t,e,n){return e=Dx(e),Sje(t,hte()?Reflect.construct(e,n||[],Dx(t).constructor):e.apply(t,n))}function Sje(t,e){if(e&&(Ap(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tje(t)}function Tje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hte=function(){return!!t})()}function Dx(t){return Dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dx(t)}function Eje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lj(t,e)}function lj(t,e){return lj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lj(t,e)}function VS(t,e,n){return e=pte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pte(t){var e=Aje(t,"string");return Ap(e)=="symbol"?e:e+""}function Aje(t,e){if(Ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var GS=(function(t){function e(){return _je(this,e),xje(this,e,arguments)}return Eje(e,t),wje(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,o=a.cx,l=a.cy;return kn(o,l,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=hje(o,function(u){return u.coordinate||0}),c=gje(o,function(u){return u.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=r.axisLine,c=rq(r,yje),u=o.reduce(function(_,y){return[Math.min(_[0],y.coordinate),Math.max(_[1],y.coordinate)]},[1/0,-1/0]),f=kn(i,a,u[0],s),p=kn(i,a,u[1],s),m=xd(xd(xd({},mt(c,!1)),{},{fill:"none"},mt(l,!1)),{},{x1:f.x,y1:f.y,x2:p.x,y2:p.y});return ee.createElement("line",Ty({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,l=i.tickFormatter,c=i.stroke,u=rq(i,vje),f=this.getTickTextAnchor(),p=mt(u,!1),m=mt(s,!1),_=a.map(function(y,b){var x=r.getTickValueCoord(y),w=xd(xd(xd(xd({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(x.x,", ").concat(x.y,")")},p),{},{stroke:"none",fill:c},m),{},{index:b},x),{},{payload:y});return ee.createElement(Yt,Ty({className:Ct("recharts-polar-radius-axis-tick",nte(s)),key:"tick-".concat(y.coordinate)},of(r.props,y,b)),e.renderTickItem(s,w,l?l(y.value,b):y.value))});return ee.createElement(Yt,{className:"recharts-polar-radius-axis-ticks"},_)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:ee.createElement(Yt,{className:Ct("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),zr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return ee.isValidElement(r)?s=ee.cloneElement(r,i):xt(r)?s=r(i):s=ee.createElement(lf,Ty({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])})(k.PureComponent);VS(GS,"displayName","PolarRadiusAxis");VS(GS,"axisType","radiusAxis");VS(GS,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function Md(){return Md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Md.apply(this,arguments)}function aq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aq(Object(n),!0).forEach(function(r){KS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gte(r.key),r)}}function Cje(t,e,n){return e&&sq(t.prototype,e),n&&sq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kje(t,e,n){return e=Bx(e),Nje(t,mte()?Reflect.construct(e,n||[],Bx(t).constructor):e.apply(t,n))}function Nje(t,e){if(e&&(Op(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ije(t)}function Ije(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mte=function(){return!!t})()}function Bx(t){return Bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bx(t)}function Pje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cj(t,e)}function cj(t,e){return cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cj(t,e)}function KS(t,e,n){return e=gte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gte(t){var e=Rje(t,"string");return Op(e)=="symbol"?e:e+""}function Rje(t,e){if(Op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jje=Math.PI/180,oq=1e-5,ZS=(function(t){function e(){return Oje(this,e),kje(this,e,arguments)}return Pje(e,t),Cje(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.orientation,c=i.tickSize,u=c||8,f=kn(a,s,o,r.coordinate),p=kn(a,s,o+(l==="inner"?-1:1)*u,r.coordinate);return{x1:f.x,y1:f.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*jje),s;return a>oq?s=i==="outer"?"start":"end":a<-oq?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,o=r.axisLine,l=r.axisLineType,c=Sd(Sd({},mt(this.props,!1)),{},{fill:"none"},mt(o,!1));if(l==="circle")return ee.createElement(WS,Md({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:a,r:s}));var u=this.props.ticks,f=u.map(function(p){return kn(i,a,s,p.coordinate)});return ee.createElement(tje,Md({className:"recharts-polar-angle-axis-line"},c,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,l=i.tickFormatter,c=i.stroke,u=mt(this.props,!1),f=mt(s,!1),p=Sd(Sd({},u),{},{fill:"none"},mt(o,!1)),m=a.map(function(_,y){var b=r.getTickLineCoord(_),x=r.getTickTextAnchor(_),w=Sd(Sd(Sd({textAnchor:x},u),{},{stroke:"none",fill:c},f),{},{index:y,payload:_,x:b.x2,y:b.y2});return ee.createElement(Yt,Md({className:Ct("recharts-polar-angle-axis-tick",nte(s)),key:"tick-".concat(_.coordinate)},of(r.props,_,y)),o&&ee.createElement("line",Md({className:"recharts-polar-angle-axis-tick-line"},p,b)),s&&e.renderTickItem(s,w,l?l(_.value,y):_.value))});return ee.createElement(Yt,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:ee.createElement(Yt,{className:Ct("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return ee.isValidElement(r)?s=ee.cloneElement(r,i):xt(r)?s=r(i):s=ee.createElement(lf,Md({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])})(k.PureComponent);KS(ZS,"displayName","PolarAngleAxis");KS(ZS,"axisType","angleAxis");KS(ZS,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var lN,lq;function $je(){if(lq)return lN;lq=1;var t=AQ(),e=t(Object.getPrototypeOf,Object);return lN=e,lN}var cN,cq;function Mje(){if(cq)return cN;cq=1;var t=Pc(),e=$je(),n=Rc(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,l=s.call(Object);function c(u){if(!n(u)||t(u)!=r)return!1;var f=e(u);if(f===null)return!0;var p=o.call(f,"constructor")&&f.constructor;return typeof p=="function"&&p instanceof p&&s.call(p)==l}return cN=c,cN}var Lje=Mje();const Dje=Ut(Lje);var uN,uq;function Bje(){if(uq)return uN;uq=1;var t=Pc(),e=Rc(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return uN=r,uN}var Fje=Bje();const Uje=Ut(Fje);function _v(t){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_v(t)}function Fx(){return Fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fx.apply(this,arguments)}function zje(t,e){return Vje(t)||Wje(t,e)||Hje(t,e)||qje()}function qje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hje(t,e){if(t){if(typeof t=="string")return dq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dq(t,e)}}function dq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wje(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Vje(t){if(Array.isArray(t))return t}function fq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fq(Object(n),!0).forEach(function(r){Gje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gje(t,e,n){return e=Kje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kje(t){var e=Zje(t,"string");return _v(e)=="symbol"?e:e+""}function Zje(t,e){if(_v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_v(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pq=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},Xje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Jje=function(e){var n=hq(hq({},Xje),e),r=k.useRef(),i=k.useState(-1),a=zje(i,2),s=a[0],o=a[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&o(T)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,f=n.lowerWidth,p=n.height,m=n.className,_=n.animationEasing,y=n.animationDuration,b=n.animationBegin,x=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||p!==+p||u===0&&f===0||p===0)return null;var w=Ct("recharts-trapezoid",m);return x?ee.createElement(xl,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:p,x:l,y:c},to:{upperWidth:u,lowerWidth:f,height:p,x:l,y:c},duration:y,animationEasing:_,isActive:x},function(T){var A=T.upperWidth,E=T.lowerWidth,C=T.height,R=T.x,N=T.y;return ee.createElement(xl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,easing:_},ee.createElement("path",Fx({},mt(n,!0),{className:w,d:pq(R,N,A,E,C),ref:r})))}):ee.createElement("g",null,ee.createElement("path",Fx({},mt(n,!0),{className:w,d:pq(l,c,u,f,p)})))},Yje=["option","shapeType","propTransformer","activeClassName","isActive"];function wv(t){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wv(t)}function Qje(t,e){if(t==null)return{};var n=e2e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function e2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ux(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mq(Object(n),!0).forEach(function(r){t2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t2e(t,e,n){return e=n2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n2e(t){var e=r2e(t,"string");return wv(e)=="symbol"?e:e+""}function r2e(t,e){if(wv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i2e(t,e){return Ux(Ux({},e),t)}function a2e(t,e){return t==="symbols"}function gq(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return ee.createElement(ZM,n);case"trapezoid":return ee.createElement(Jje,n);case"sector":return ee.createElement(ate,n);case"symbols":if(a2e(e))return ee.createElement(pM,n);break;default:return null}}function s2e(t){return k.isValidElement(t)?t.props:t}function yte(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?i2e:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,l=Qje(t,Yje),c;if(k.isValidElement(e))c=k.cloneElement(e,Ux(Ux({},l),s2e(e)));else if(xt(e))c=e(l);else if(Dje(e)&&!Uje(e)){var u=i(e,l);c=ee.createElement(gq,{shapeType:n,elementProps:u})}else{var f=l;c=ee.createElement(gq,{shapeType:n,elementProps:f})}return o?ee.createElement(Yt,{className:s},c):c}function XS(t,e){return e!=null&&"trapezoids"in t.props}function JS(t,e){return e!=null&&"sectors"in t.props}function xv(t,e){return e!=null&&"points"in t.props}function o2e(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function l2e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function c2e(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function u2e(t,e){var n;return XS(t,e)?n=o2e:JS(t,e)?n=l2e:xv(t,e)&&(n=c2e),n}function d2e(t,e){var n;return XS(t,e)?n="trapezoids":JS(t,e)?n="sectors":xv(t,e)&&(n="points"),n}function f2e(t,e){if(XS(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(JS(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return xv(t,e)?e.payload:{}}function h2e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=d2e(n,e),a=f2e(n,e),s=r.filter(function(l,c){var u=_b(a,l),f=n.props[i].filter(function(_){var y=u2e(n,e);return y(_,e)}),p=n.props[i].indexOf(f[f.length-1]),m=c===p;return u&&m}),o=r.indexOf(s[s.length-1]);return o}var pw;function Cp(t){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(t)}function $h(){return $h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$h.apply(this,arguments)}function yq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yq(Object(n),!0).forEach(function(r){As(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bte(r.key),r)}}function m2e(t,e,n){return e&&vq(t.prototype,e),n&&vq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function g2e(t,e,n){return e=zx(e),y2e(t,vte()?Reflect.construct(e,n||[],zx(t).constructor):e.apply(t,n))}function y2e(t,e){if(e&&(Cp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v2e(t)}function v2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vte=function(){return!!t})()}function zx(t){return zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zx(t)}function b2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uj(t,e)}function uj(t,e){return uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uj(t,e)}function As(t,e,n){return e=bte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bte(t){var e=_2e(t,"string");return Cp(e)=="symbol"?e:e+""}function _2e(t,e){if(Cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $c=(function(t){function e(n){var r;return p2e(this,e),r=g2e(this,e,[n]),As(r,"pieRef",null),As(r,"sectorRefs",[]),As(r,"id",mm("recharts-pie-")),As(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),xt(i)&&i()}),As(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),xt(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return b2e(e,t),m2e(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,l=a.dataKey,c=a.valueKey,u=mt(this.props,!1),f=mt(s,!1),p=mt(o,!1),m=s&&s.offsetRadius||20,_=r.map(function(y,b){var x=(y.startAngle+y.endAngle)/2,w=kn(y.cx,y.cy,y.outerRadius+m,x),T=Tn(Tn(Tn(Tn({},u),y),{},{stroke:"none"},f),{},{index:b,textAnchor:e.getTextAnchor(w.x,y.cx)},w),A=Tn(Tn(Tn(Tn({},u),y),{},{fill:"none",stroke:y.fill},p),{},{index:b,points:[kn(y.cx,y.cy,y.outerRadius,x),w]}),E=l;return At(l)&&At(c)?E="value":At(l)&&(E=c),ee.createElement(Yt,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(b)},o&&e.renderLabelLineItem(o,A,"line"),e.renderLabelItem(s,T,kr(y,E)))});return ee.createElement(Yt,{className:"recharts-pie-labels"},_)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,l=a.inactiveShape;return r.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(u),p=l&&i.hasActiveIndex()?l:null,m=f?s:p,_=Tn(Tn({},c),{},{stroke:o?c.fill:c.stroke,tabIndex:-1});return ee.createElement(Yt,$h({ref:function(b){b&&!i.sectorRefs.includes(b)&&i.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},of(i.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),ee.createElement(yte,$h({option:m,isActive:f,shapeType:"sector"},_)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,c=i.animationEasing,u=i.animationId,f=this.state,p=f.prevSectors,m=f.prevIsAnimationActive;return ee.createElement(xl,{begin:o,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(_){var y=_.t,b=[],x=a&&a[0],w=x.startAngle;return a.forEach(function(T,A){var E=p&&p[A],C=A>0?Ga(T,"paddingAngle",0):0;if(E){var R=Ba(E.endAngle-E.startAngle,T.endAngle-T.startAngle),N=Tn(Tn({},T),{},{startAngle:w+C,endAngle:w+R(y)+C});b.push(N),w=N.endAngle}else{var D=T.endAngle,Z=T.startAngle,j=Ba(0,D-Z),L=j(y),B=Tn(Tn({},T),{},{startAngle:w+C,endAngle:w+L+C});b.push(B),w=B.endAngle}}),ee.createElement(Yt,null,r.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!_b(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,l=i.label,c=i.cx,u=i.cy,f=i.innerRadius,p=i.outerRadius,m=i.isAnimationActive,_=this.state.isAnimationFinished;if(a||!s||!s.length||!$e(c)||!$e(u)||!$e(f)||!$e(p))return null;var y=Ct("recharts-pie",o);return ee.createElement(Yt,{tabIndex:this.props.rootTabIndex,className:y,ref:function(x){r.pieRef=x}},this.renderSectors(),l&&this.renderLabels(s),zr.renderCallByParent(this.props,null,!1),(!m||_)&&hc.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(ee.isValidElement(r))return ee.cloneElement(r,i);if(xt(r))return r(i);var s=Ct("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return ee.createElement(Px,$h({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(ee.isValidElement(r))return ee.cloneElement(r,i);var s=a;if(xt(r)&&(s=r(i),ee.isValidElement(s)))return s;var o=Ct("recharts-pie-label-text",typeof r!="boolean"&&!xt(r)?r.className:"");return ee.createElement(lf,$h({},i,{alignmentBaseline:"middle",className:o}),s)}}])})(k.PureComponent);pw=$c;As($c,"displayName","Pie");As($c,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!bf.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});As($c,"parseDeltaAngle",function(t,e){var n=Bi(e-t),r=Math.min(Math.abs(e-t),360);return n*r});As($c,"getRealPieData",function(t){var e=t.data,n=t.children,r=mt(t,!1),i=Ka(n,RS);return e&&e.length?e.map(function(a,s){return Tn(Tn(Tn({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return Tn(Tn({},r),a.props)}):[]});As($c,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,s=tte(i,a),o=r+Fi(t.cx,i,i/2),l=n+Fi(t.cy,a,a/2),c=Fi(t.innerRadius,s,0),u=Fi(t.outerRadius,s,s*.8),f=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:l,innerRadius:c,outerRadius:u,maxRadius:f}});As($c,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Tn(Tn({},e.type.defaultProps),e.props):e.props,i=pw.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,f=r.valueKey,p=r.tooltipType,m=Math.abs(r.minAngle),_=pw.parseCoordinateOfPie(r,n),y=pw.parseDeltaAngle(s,o),b=Math.abs(y),x=c;At(c)&&At(f)?(_o(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):At(c)&&(_o(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=f);var w=i.filter(function(N){return kr(N,x,0)!==0}).length,T=(b>=360?w:w-1)*l,A=b-w*m-T,E=i.reduce(function(N,D){var Z=kr(D,x,0);return N+($e(Z)?Z:0)},0),C;if(E>0){var R;C=i.map(function(N,D){var Z=kr(N,x,0),j=kr(N,u,D),L=($e(Z)?Z:0)/E,B;D?B=R.endAngle+Bi(y)*l*(Z!==0?1:0):B=s;var z=B+Bi(y)*((Z!==0?m:0)+L*A),W=(B+z)/2,q=(_.innerRadius+_.outerRadius)/2,K=[{name:j,value:Z,payload:N,dataKey:x,type:p}],V=kn(_.cx,_.cy,q,W);return R=Tn(Tn(Tn({percent:L,cornerRadius:a,name:j,tooltipPayload:K,midAngle:W,middleRadius:q,tooltipPosition:V},N),_),{},{value:kr(N,x),startAngle:B,endAngle:z,payload:N,paddingAngle:Bi(y)*l}),R})}return Tn(Tn({},_),{},{sectors:C,data:i})});var dN,bq;function w2e(){if(bq)return dN;bq=1;var t=Math.ceil,e=Math.max;function n(r,i,a,s){for(var o=-1,l=e(t((i-r)/(a||1)),0),c=Array(l);l--;)c[s?l:++o]=r,r+=a;return c}return dN=n,dN}var fN,_q;function _te(){if(_q)return fN;_q=1;var t=zQ(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*n}return i===i?i:0}return fN=r,fN}var hN,wq;function x2e(){if(wq)return hN;wq=1;var t=w2e(),e=PS(),n=_te();function r(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),t(a,s,o,i)}}return hN=r,hN}var pN,xq;function S2e(){if(xq)return pN;xq=1;var t=x2e(),e=t();return pN=e,pN}var T2e=S2e();const qx=Ut(T2e);function Sv(t){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(t)}function Sq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sq(Object(n),!0).forEach(function(r){wte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wte(t,e,n){return e=E2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E2e(t){var e=A2e(t,"string");return Sv(e)=="symbol"?e:e+""}function A2e(t,e){if(Sv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O2e=["Webkit","Moz","O","ms"],C2e=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=O2e.reduce(function(a,s){return Tq(Tq({},a),{},wte({},s+r,n))},{});return i[e]=n,i};function kp(t){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(t)}function Hx(){return Hx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hx.apply(this,arguments)}function Eq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Eq(Object(n),!0).forEach(function(r){$a(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Eq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Aq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ste(r.key),r)}}function N2e(t,e,n){return e&&Aq(t.prototype,e),n&&Aq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function I2e(t,e,n){return e=Wx(e),P2e(t,xte()?Reflect.construct(e,n||[],Wx(t).constructor):e.apply(t,n))}function P2e(t,e){if(e&&(kp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R2e(t)}function R2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xte=function(){return!!t})()}function Wx(t){return Wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wx(t)}function j2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dj(t,e)}function dj(t,e){return dj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dj(t,e)}function $a(t,e,n){return e=Ste(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ste(t){var e=$2e(t,"string");return kp(e)=="symbol"?e:e+""}function $2e(t,e){if(kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var M2e=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=_y().domain(qx(0,l)).range([a,a+s-o]),u=c.domain().map(function(f){return c(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},Oq=function(e){return e.changedTouches&&!!e.changedTouches.length},Np=(function(t){function e(n){var r;return k2e(this,e),r=I2e(this,e,[n]),$a(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),$a(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),$a(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),$a(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),$a(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),$a(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),$a(r,"handleSlideDragStart",function(i){var a=Oq(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return j2e(e,t),N2e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,u=c.length-1,f=Math.min(i,a),p=Math.max(i,a),m=e.getIndexInRange(s,f),_=e.getIndexInRange(s,p);return{startIndex:m-m%l,endIndex:_===u?u:_-_%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,l=kr(a[r],o,r);return xt(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,l=this.props,c=l.x,u=l.width,f=l.travellerWidth,p=l.startIndex,m=l.endIndex,_=l.onChange,y=r.pageX-a;y>0?y=Math.min(y,c+u-f-o,c+u-f-s):y<0&&(y=Math.max(y,c-s,c-o));var b=this.getIndex({startX:s+y,endX:o+y});(b.startIndex!==p||b.endIndex!==m)&&_&&_(b),this.setState({startX:s+y,endX:o+y,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=Oq(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,l=i.startX,c=this.state[s],u=this.props,f=u.x,p=u.width,m=u.travellerWidth,_=u.onChange,y=u.gap,b=u.data,x={startX:this.state.startX,endX:this.state.endX},w=r.pageX-a;w>0?w=Math.min(w,f+p-m-c):w<0&&(w=Math.max(w,f-c)),x[s]=c+w;var T=this.getIndex(x),A=T.startIndex,E=T.endIndex,C=function(){var N=b.length-1;return s==="startX"&&(o>l?A%y===0:E%y===0)||o<l&&E===N||s==="endX"&&(o>l?E%y===0:A%y===0)||o>l&&E===N};this.setState($a($a({},s,c+w),"brushMoveStartX",r.pageX),function(){_&&C()&&_(T)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,l=s.startX,c=s.endX,u=this.state[i],f=o.indexOf(u);if(f!==-1){var p=f+r;if(!(p===-1||p>=o.length)){var m=o[p];i==="startX"&&m>=c||i==="endX"&&m<=l||this.setState($a({},i,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.fill,c=r.stroke;return ee.createElement("rect",{stroke:c,fill:l,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.data,c=r.children,u=r.padding,f=k.Children.only(c);return f?ee.cloneElement(f,{x:i,y:a,width:s,height:o,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,l=this.props,c=l.y,u=l.travellerWidth,f=l.height,p=l.traveller,m=l.ariaLabel,_=l.data,y=l.startIndex,b=l.endIndex,x=Math.max(r,this.props.x),w=mN(mN({},mt(this.props,!1)),{},{x,y:c,width:u,height:f}),T=m||"Min value: ".concat((a=_[y])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=_[b])===null||s===void 0?void 0:s.name);return ee.createElement(Yt,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),o.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,w))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,l=a.stroke,c=a.travellerWidth,u=Math.min(r,i)+c,f=Math.max(Math.abs(i-r)-c,0);return ee.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:s,width:f,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,f=u.startX,p=u.endX,m=5,_={pointerEvents:"none",fill:c};return ee.createElement(Yt,{className:"recharts-brush-texts"},ee.createElement(lf,Hx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-m,y:s+o/2},_),this.getTextOfTick(i)),ee.createElement(lf,Hx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+l+m,y:s+o/2},_),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,l=r.y,c=r.width,u=r.height,f=r.alwaysShowText,p=this.state,m=p.startX,_=p.endX,y=p.isTextActive,b=p.isSlideMoving,x=p.isTravellerMoving,w=p.isTravellerFocused;if(!i||!i.length||!$e(o)||!$e(l)||!$e(c)||!$e(u)||c<=0||u<=0)return null;var T=Ct("recharts-brush",a),A=ee.Children.count(s)===1,E=C2e("userSelect","none");return ee.createElement(Yt,{className:T,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(m,_),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(_,"endX"),(y||b||x||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,l=r.stroke,c=Math.floor(a+o/2)-1;return ee.createElement(ee.Fragment,null,ee.createElement("rect",{x:i,y:a,width:s,height:o,fill:l,stroke:"none"}),ee.createElement("line",{x1:i+1,y1:c,x2:i+s-1,y2:c,fill:"none",stroke:"#fff"}),ee.createElement("line",{x1:i+1,y1:c+2,x2:i+s-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return ee.isValidElement(r)?a=ee.cloneElement(r,i):xt(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,f=r.endIndex;if(a!==i.prevData||c!==i.prevUpdateId)return mN({prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:s},a&&a.length?M2e({data:a,width:s,x:o,travellerWidth:l,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+s-l]);var p=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);r[l]>i?o=l:s=l}return i>=r[o]?o:s}}])})(k.PureComponent);$a(Np,"displayName","Brush");$a(Np,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var gN,Cq;function L2e(){if(Cq)return gN;Cq=1;var t=wM();function e(n,r){var i;return t(n,function(a,s,o){return i=r(a,s,o),!i}),!!i}return gN=e,gN}var yN,kq;function D2e(){if(kq)return yN;kq=1;var t=bQ(),e=Nl(),n=L2e(),r=ga(),i=PS();function a(s,o,l){var c=r(s)?t:n;return l&&i(s,o,l)&&(o=void 0),c(s,e(o,3))}return yN=a,yN}var B2e=D2e();const F2e=Ut(B2e);var hl=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},vN,Nq;function U2e(){if(Nq)return vN;Nq=1;var t=LQ();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return vN=e,vN}var bN,Iq;function z2e(){if(Iq)return bN;Iq=1;var t=U2e(),e=$Q(),n=Nl();function r(i,a){var s={};return a=n(a,3),e(i,function(o,l,c){t(s,l,a(o,l,c))}),s}return bN=r,bN}var q2e=z2e();const H2e=Ut(q2e);var _N,Pq;function W2e(){if(Pq)return _N;Pq=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return _N=t,_N}var wN,Rq;function V2e(){if(Rq)return wN;Rq=1;var t=wM();function e(n,r){var i=!0;return t(n,function(a,s,o){return i=!!r(a,s,o),i}),i}return wN=e,wN}var xN,jq;function G2e(){if(jq)return xN;jq=1;var t=W2e(),e=V2e(),n=Nl(),r=ga(),i=PS();function a(s,o,l){var c=r(s)?t:e;return l&&i(s,o,l)&&(o=void 0),c(s,n(o,3))}return xN=a,xN}var K2e=G2e();const Tte=Ut(K2e);var Z2e=["x","y"];function Tv(t){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(t)}function fj(){return fj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fj.apply(this,arguments)}function $q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$q(Object(n),!0).forEach(function(r){X2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$q(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X2e(t,e,n){return e=J2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J2e(t){var e=Y2e(t,"string");return Tv(e)=="symbol"?e:e+""}function Y2e(t,e){if(Tv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q2e(t,e){if(t==null)return{};var n=e$e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function e$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function t$e(t,e){var n=t.x,r=t.y,i=Q2e(t,Z2e),a="".concat(n),s=parseInt(a,10),o="".concat(r),l=parseInt(o,10),c="".concat(e.height||i.height),u=parseInt(c,10),f="".concat(e.width||i.width),p=parseInt(f,10);return yg(yg(yg(yg(yg({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:p,name:e.name,radius:e.radius})}function Mq(t){return ee.createElement(yte,fj({shapeType:"rectangle",propTransformer:t$e,activeClassName:"recharts-active-bar"},t))}var n$e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=typeof r=="number";return a?e(r,i):(a||uf(),n)}},r$e=["value","background"],Ete;function Ip(t){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}function i$e(t,e){if(t==null)return{};var n=a$e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function a$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Vx(){return Vx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vx.apply(this,arguments)}function Lq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lq(Object(n),!0).forEach(function(r){Su(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ote(r.key),r)}}function o$e(t,e,n){return e&&Dq(t.prototype,e),n&&Dq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l$e(t,e,n){return e=Gx(e),c$e(t,Ate()?Reflect.construct(e,n||[],Gx(t).constructor):e.apply(t,n))}function c$e(t,e){if(e&&(Ip(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u$e(t)}function u$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ate(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ate=function(){return!!t})()}function Gx(t){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gx(t)}function d$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hj(t,e)}function hj(t,e){return hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hj(t,e)}function Su(t,e,n){return e=Ote(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ote(t){var e=f$e(t,"string");return Ip(e)=="symbol"?e:e+""}function f$e(t,e){if(Ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Sf=(function(t){function e(){var n;s$e(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=l$e(this,e,[].concat(i)),Su(n,"state",{isAnimationFinished:!1}),Su(n,"id",mm("recharts-bar-")),Su(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),Su(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return d$e(e,t),o$e(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,c=a.activeBar,u=mt(this.props,!1);return r&&r.map(function(f,p){var m=p===l,_=m?c:s,y=pr(pr(pr({},u),f),{},{isActive:m,option:_,index:p,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ee.createElement(Yt,Vx({className:"recharts-bar-rectangle"},of(i.props,f,p),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),ee.createElement(Mq,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,f=i.animationId,p=this.state.prevData;return ee.createElement(xl,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var _=m.t,y=a.map(function(b,x){var w=p&&p[x];if(w){var T=Ba(w.x,b.x),A=Ba(w.y,b.y),E=Ba(w.width,b.width),C=Ba(w.height,b.height);return pr(pr({},b),{},{x:T(_),y:A(_),width:E(_),height:C(_)})}if(s==="horizontal"){var R=Ba(0,b.height),N=R(_);return pr(pr({},b),{},{y:b.y+b.height-N,height:N})}var D=Ba(0,b.width),Z=D(_);return pr(pr({},b),{},{width:Z})});return ee.createElement(Yt,null,r.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!_b(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,l=mt(this.props.background,!1);return a.map(function(c,u){c.value;var f=c.background,p=i$e(c,r$e);if(!f)return null;var m=pr(pr(pr(pr(pr({},p),{},{fill:"#eee"},f),l),of(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:u,className:"recharts-bar-background-rectangle"});return ee.createElement(Mq,Vx({key:"background-bar-".concat(u),option:r.props.background,isActive:u===o},m))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,c=a.layout,u=a.children,f=Ka(u,wb);if(!f)return null;var p=c==="vertical"?s[0].height/2:s[0].width/2,m=function(b,x){var w=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:w,errorVal:kr(b,x)}},_={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ee.createElement(Yt,_,f.map(function(y){return ee.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:s,xAxis:o,yAxis:l,layout:c,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,l=r.yAxis,c=r.left,u=r.top,f=r.width,p=r.height,m=r.isAnimationActive,_=r.background,y=r.id;if(i||!a||!a.length)return null;var b=this.state.isAnimationFinished,x=Ct("recharts-bar",s),w=o&&o.allowDataOverflow,T=l&&l.allowDataOverflow,A=w||T,E=At(y)?this.id:y;return ee.createElement(Yt,{className:x},w||T?ee.createElement("defs",null,ee.createElement("clipPath",{id:"clipPath-".concat(E)},ee.createElement("rect",{x:w?c:c-f/2,y:T?u:u-p/2,width:w?f:f*2,height:T?p:p*2}))):null,ee.createElement(Yt,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(E,")"):null},_?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,E),(!m||b)&&hc.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(k.PureComponent);Ete=Sf;Su(Sf,"displayName","Bar");Su(Sf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!bf.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Su(Sf,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,f=t.displayedData,p=t.offset,m=LNe(r,n);if(!m)return null;var _=e.layout,y=n.type.defaultProps,b=y!==void 0?pr(pr({},y),n.props):n.props,x=b.dataKey,w=b.children,T=b.minPointSize,A=_==="horizontal"?s:a,E=c?A.scale.domain():null,C=HNe({numericAxis:A}),R=Ka(w,RS),N=f.map(function(D,Z){var j,L,B,z,W,q;c?j=DNe(c[u+Z],E):(j=kr(D,x),Array.isArray(j)||(j=[C,j]));var K=n$e(T,Ete.defaultProps.minPointSize)(j[1],Z);if(_==="horizontal"){var V,J=[s.scale(j[0]),s.scale(j[1])],Q=J[0],M=J[1];L=f8({axis:a,ticks:o,bandSize:i,offset:m.offset,entry:D,index:Z}),B=(V=M??Q)!==null&&V!==void 0?V:void 0,z=m.size;var Y=Q-M;if(W=Number.isNaN(Y)?0:Y,q={x:L,y:s.y,width:z,height:s.height},Math.abs(K)>0&&Math.abs(W)<Math.abs(K)){var se=Bi(W||K)*(Math.abs(K)-Math.abs(W));B-=se,W+=se}}else{var ge=[a.scale(j[0]),a.scale(j[1])],ue=ge[0],H=ge[1];if(L=ue,B=f8({axis:s,ticks:l,bandSize:i,offset:m.offset,entry:D,index:Z}),z=H-ue,W=m.size,q={x:a.x,y:B,width:a.width,height:W},Math.abs(K)>0&&Math.abs(z)<Math.abs(K)){var $=Bi(z||K)*(Math.abs(K)-Math.abs(z));z+=$}}return pr(pr(pr({},D),{},{x:L,y:B,width:z,height:W,value:c?j:j[1],payload:D,background:q},R&&R[Z]&&R[Z].props),{},{tooltipPayload:[Qee(n,D)],tooltipPosition:{x:L+z/2,y:B+W/2}})});return pr({data:N,layout:_},p)});function Ev(t){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ev(t)}function h$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cte(r.key),r)}}function p$e(t,e,n){return e&&Bq(t.prototype,e),n&&Bq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function co(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fq(Object(n),!0).forEach(function(r){YS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YS(t,e,n){return e=Cte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cte(t){var e=m$e(t,"string");return Ev(e)=="symbol"?e:e+""}function m$e(t,e){if(Ev(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ev(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kte=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.layout,c=e.children,u=Object.keys(n),f={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},p=!!Ma(c,Sf);return u.reduce(function(m,_){var y=n[_],b=y.orientation,x=y.domain,w=y.padding,T=w===void 0?{}:w,A=y.mirror,E=y.reversed,C="".concat(b).concat(A?"Mirror":""),R,N,D,Z,j;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var L=x[1]-x[0],B=1/0,z=y.categoricalDomain.sort();if(z.forEach(function(ge,ue){ue>0&&(B=Math.min((ge||0)-(z[ue-1]||0),B))}),Number.isFinite(B)){var W=B/L,q=y.layout==="vertical"?r.height:r.width;if(y.padding==="gap"&&(R=W*q/2),y.padding==="no-gap"){var K=Fi(e.barCategoryGap,W*q),V=W*q/2;R=V-K-(V-K)/q*K}}}i==="xAxis"?N=[r.left+(T.left||0)+(R||0),r.left+r.width-(T.right||0)-(R||0)]:i==="yAxis"?N=l==="horizontal"?[r.top+r.height-(T.bottom||0),r.top+(T.top||0)]:[r.top+(T.top||0)+(R||0),r.top+r.height-(T.bottom||0)-(R||0)]:N=y.range,E&&(N=[N[1],N[0]]);var J=Zee(y,a,p),Q=J.scale,M=J.realScaleType;Q.domain(x).range(N),Xee(Q);var Y=Jee(Q,co(co({},y),{},{realScaleType:M}));i==="xAxis"?(j=b==="top"&&!A||b==="bottom"&&A,D=r.left,Z=f[C]-j*y.height):i==="yAxis"&&(j=b==="left"&&!A||b==="right"&&A,D=f[C]-j*y.width,Z=r.top);var se=co(co(co({},y),Y),{},{realScaleType:M,x:D,y:Z,scale:Q,width:i==="xAxis"?r.width:y.width,height:i==="yAxis"?r.height:y.height});return se.bandSize=kx(se,Y),!y.hide&&i==="xAxis"?f[C]+=(j?-1:1)*se.height:y.hide||(f[C]+=(j?-1:1)*se.width),co(co({},m),{},YS({},_,se))},{})},Nte=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},g$e=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return Nte({x:n,y:r},{x:i,y:a})},Ite=(function(){function t(e){h$e(this,t),this.scale=e}return p$e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])})();YS(Ite,"EPS",1e-4);var XM=function(e){var n=Object.keys(e).reduce(function(r,i){return co(co({},r),{},YS({},i,Ite.create(e[i])))},{});return co(co({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return H2e(i,function(l,c){return n[c].apply(l,{bandAware:s,position:o})})},isInRange:function(i){return Tte(i,function(a,s){return n[s].isInRange(a)})}})};function y$e(t){return(t%180+180)%180}var v$e=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=y$e(i),s=a*Math.PI/180,o=Math.atan(r/n),l=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},SN,Uq;function b$e(){if(Uq)return SN;Uq=1;var t=Nl(),e=mb(),n=NS();function r(i){return function(a,s,o){var l=Object(a);if(!e(a)){var c=t(s,3);a=n(a),s=function(f){return c(l[f],f,l)}}var u=i(a,s,o);return u>-1?l[c?a[u]:u]:void 0}}return SN=r,SN}var TN,zq;function _$e(){if(zq)return TN;zq=1;var t=_te();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return TN=e,TN}var EN,qq;function w$e(){if(qq)return EN;qq=1;var t=NQ(),e=Nl(),n=_$e(),r=Math.max;function i(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var c=o==null?0:n(o);return c<0&&(c=r(l+c,0)),t(a,e(s,3),c)}return EN=i,EN}var AN,Hq;function x$e(){if(Hq)return AN;Hq=1;var t=b$e(),e=w$e(),n=t(e);return AN=n,AN}var S$e=x$e();const T$e=Ut(S$e);var E$e=VY();const A$e=Ut(E$e);var O$e=A$e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),JM=k.createContext(void 0),YM=k.createContext(void 0),Pte=k.createContext(void 0),Rte=k.createContext({}),jte=k.createContext(void 0),$te=k.createContext(0),Mte=k.createContext(0),Wq=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,l=e.width,c=e.height,u=O$e(a);return ee.createElement(JM.Provider,{value:r},ee.createElement(YM.Provider,{value:i},ee.createElement(Rte.Provider,{value:a},ee.createElement(Pte.Provider,{value:u},ee.createElement(jte.Provider,{value:s},ee.createElement($te.Provider,{value:c},ee.createElement(Mte.Provider,{value:l},o)))))))},C$e=function(){return k.useContext(jte)},Lte=function(e){var n=k.useContext(JM);n==null&&uf();var r=n[e];return r==null&&uf(),r},k$e=function(){var e=k.useContext(JM);return xu(e)},N$e=function(){var e=k.useContext(YM),n=T$e(e,function(r){return Tte(r.domain,Number.isFinite)});return n||xu(e)},Dte=function(e){var n=k.useContext(YM);n==null&&uf();var r=n[e];return r==null&&uf(),r},I$e=function(){var e=k.useContext(Pte);return e},P$e=function(){return k.useContext(Rte)},QM=function(){return k.useContext(Mte)},eL=function(){return k.useContext($te)};function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function R$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j$e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fte(r.key),r)}}function $$e(t,e,n){return e&&j$e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function M$e(t,e,n){return e=Kx(e),L$e(t,Bte()?Reflect.construct(e,n||[],Kx(t).constructor):e.apply(t,n))}function L$e(t,e){if(e&&(Pp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D$e(t)}function D$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bte=function(){return!!t})()}function Kx(t){return Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kx(t)}function B$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pj(t,e)}function pj(t,e){return pj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pj(t,e)}function Vq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vq(Object(n),!0).forEach(function(r){tL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tL(t,e,n){return e=Fte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fte(t){var e=F$e(t,"string");return Pp(e)=="symbol"?e:e+""}function F$e(t,e){if(Pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function U$e(t,e){return W$e(t)||H$e(t,e)||q$e(t,e)||z$e()}function z$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q$e(t,e){if(t){if(typeof t=="string")return Kq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kq(t,e)}}function Kq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function H$e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function W$e(t){if(Array.isArray(t))return t}function mj(){return mj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mj.apply(this,arguments)}var V$e=function(e,n){var r;return ee.isValidElement(e)?r=ee.cloneElement(e,n):xt(e)?r=e(n):r=ee.createElement("line",mj({},n,{className:"recharts-reference-line-line"})),r},G$e=function(e,n,r,i,a,s,o,l,c){var u=a.x,f=a.y,p=a.width,m=a.height;if(r){var _=c.y,y=e.y.apply(_,{position:s});if(hl(c,"discard")&&!e.y.isInRange(y))return null;var b=[{x:u+p,y},{x:u,y}];return l==="left"?b.reverse():b}if(n){var x=c.x,w=e.x.apply(x,{position:s});if(hl(c,"discard")&&!e.x.isInRange(w))return null;var T=[{x:w,y:f+m},{x:w,y:f}];return o==="top"?T.reverse():T}if(i){var A=c.segment,E=A.map(function(C){return e.apply(C,{position:s})});return hl(c,"discard")&&F2e(E,function(C){return!e.isInRange(C)})?null:E}return null};function K$e(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,l=t.alwaysShow,c=C$e(),u=Lte(i),f=Dte(a),p=I$e();if(!c||!p)return null;_o(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=XM({x:u.scale,y:f.scale}),_=Ir(e),y=Ir(n),b=r&&r.length===2,x=G$e(m,_,y,b,p,t.position,u.orientation,f.orientation,t);if(!x)return null;var w=U$e(x,2),T=w[0],A=T.x,E=T.y,C=w[1],R=C.x,N=C.y,D=hl(t,"hidden")?"url(#".concat(c,")"):void 0,Z=Gq(Gq({clipPath:D},mt(t,!0)),{},{x1:A,y1:E,x2:R,y2:N});return ee.createElement(Yt,{className:Ct("recharts-reference-line",o)},V$e(s,Z),zr.renderCallByParent(t,g$e({x1:A,y1:E,x2:R,y2:N})))}var nL=(function(t){function e(){return R$e(this,e),M$e(this,e,arguments)}return B$e(e,t),$$e(e,[{key:"render",value:function(){return ee.createElement(K$e,this.props)}}])})(ee.Component);tL(nL,"displayName","ReferenceLine");tL(nL,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function gj(){return gj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gj.apply(this,arguments)}function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}function Zq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zq(Object(n),!0).forEach(function(r){QS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X$e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zte(r.key),r)}}function J$e(t,e,n){return e&&X$e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y$e(t,e,n){return e=Zx(e),Q$e(t,Ute()?Reflect.construct(e,n||[],Zx(t).constructor):e.apply(t,n))}function Q$e(t,e){if(e&&(Rp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eMe(t)}function eMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ute(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ute=function(){return!!t})()}function Zx(t){return Zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zx(t)}function tMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yj(t,e)}function yj(t,e){return yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yj(t,e)}function QS(t,e,n){return e=zte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zte(t){var e=nMe(t,"string");return Rp(e)=="symbol"?e:e+""}function nMe(t,e){if(Rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rMe=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=XM({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return hl(e,"discard")&&!s.isInRange(o)?null:o},eT=(function(t){function e(){return Z$e(this,e),Y$e(this,e,arguments)}return tMe(e,t),J$e(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,l=r.clipPathId,c=Ir(i),u=Ir(a);if(_o(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var f=rMe(this.props);if(!f)return null;var p=f.x,m=f.y,_=this.props,y=_.shape,b=_.className,x=hl(this.props,"hidden")?"url(#".concat(l,")"):void 0,w=Xq(Xq({clipPath:x},mt(this.props,!0)),{},{cx:p,cy:m});return ee.createElement(Yt,{className:Ct("recharts-reference-dot",b)},e.renderDot(y,w),zr.renderCallByParent(this.props,{x:p-s,y:m-s,width:2*s,height:2*s}))}}])})(ee.Component);QS(eT,"displayName","ReferenceDot");QS(eT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});QS(eT,"renderDot",function(t,e){var n;return ee.isValidElement(t)?n=ee.cloneElement(t,e):xt(t)?n=t(e):n=ee.createElement(WS,gj({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function vj(){return vj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vj.apply(this,arguments)}function jp(t){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(t)}function Jq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jq(Object(n),!0).forEach(function(r){tT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hte(r.key),r)}}function sMe(t,e,n){return e&&aMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oMe(t,e,n){return e=Xx(e),lMe(t,qte()?Reflect.construct(e,n||[],Xx(t).constructor):e.apply(t,n))}function lMe(t,e){if(e&&(jp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cMe(t)}function cMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qte=function(){return!!t})()}function Xx(t){return Xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xx(t)}function uMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bj(t,e)}function bj(t,e){return bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bj(t,e)}function tT(t,e,n){return e=Hte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hte(t){var e=dMe(t,"string");return jp(e)=="symbol"?e:e+""}function dMe(t,e){if(jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fMe=function(e,n,r,i,a){var s=a.x1,o=a.x2,l=a.y1,c=a.y2,u=a.xAxis,f=a.yAxis;if(!u||!f)return null;var p=XM({x:u.scale,y:f.scale}),m={x:e?p.x.apply(s,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(l,{position:"start"}):p.y.rangeMin},_={x:n?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(c,{position:"end"}):p.y.rangeMax};return hl(a,"discard")&&(!p.isInRange(m)||!p.isInRange(_))?null:Nte(m,_)},nT=(function(t){function e(){return iMe(this,e),oMe(this,e,arguments)}return uMe(e,t),sMe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;_o(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Ir(i),p=Ir(a),m=Ir(s),_=Ir(o),y=this.props.shape;if(!f&&!p&&!m&&!_&&!y)return null;var b=fMe(f,p,m,_,this.props);if(!b&&!y)return null;var x=hl(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ee.createElement(Yt,{className:Ct("recharts-reference-area",l)},e.renderRect(y,Yq(Yq({clipPath:x},mt(this.props,!0)),b)),zr.renderCallByParent(this.props,b))}}])})(ee.Component);tT(nT,"displayName","ReferenceArea");tT(nT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});tT(nT,"renderRect",function(t,e){var n;return ee.isValidElement(t)?n=ee.cloneElement(t,e):xt(t)?n=t(e):n=ee.createElement(ZM,vj({},e,{className:"recharts-reference-area-rect"})),n});function Wte(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function hMe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return v$e(r,n)}function pMe(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function Jx(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function mMe(t,e){return Wte(t,e+1)}function gMe(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,l=0,c=1,u=s,f=function(){var _=r==null?void 0:r[l];if(_===void 0)return{v:Wte(r,c)};var y=l,b,x=function(){return b===void 0&&(b=n(_,y)),b},w=_.coordinate,T=l===0||Jx(t,w,x,u,o);T||(l=0,u=s,c+=1),T&&(u=w+t*(x()/2+i),l+=c)},p;c<=a.length;)if(p=f(),p)return p.v;return[]}function Av(t){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(t)}function Qq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qq(Object(n),!0).forEach(function(r){yMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yMe(t,e,n){return e=vMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vMe(t){var e=bMe(t,"string");return Av(e)=="symbol"?e:e+""}function bMe(t,e){if(Av(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Av(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Me(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,l=e.end,c=function(p){var m=a[p],_,y=function(){return _===void 0&&(_=n(m,p)),_};if(p===s-1){var b=t*(m.coordinate+t*y()/2-l);a[p]=m=pi(pi({},m),{},{tickCoord:b>0?m.coordinate-b*t:m.coordinate})}else a[p]=m=pi(pi({},m),{},{tickCoord:m.coordinate});var x=Jx(t,m.tickCoord,y,o,l);x&&(l=m.tickCoord-t*(y()/2+i),a[p]=pi(pi({},m),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return a}function wMe(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,l=e.start,c=e.end;if(a){var u=r[o-1],f=n(u,o-1),p=t*(u.coordinate+t*f/2-c);s[o-1]=u=pi(pi({},u),{},{tickCoord:p>0?u.coordinate-p*t:u.coordinate});var m=Jx(t,u.tickCoord,function(){return f},l,c);m&&(c=u.tickCoord-t*(f/2+i),s[o-1]=pi(pi({},u),{},{isShow:!0}))}for(var _=a?o-1:o,y=function(w){var T=s[w],A,E=function(){return A===void 0&&(A=n(T,w)),A};if(w===0){var C=t*(T.coordinate-t*E()/2-l);s[w]=T=pi(pi({},T),{},{tickCoord:C<0?T.coordinate-C*t:T.coordinate})}else s[w]=T=pi(pi({},T),{},{tickCoord:T.coordinate});var R=Jx(t,T.tickCoord,E,l,c);R&&(l=T.tickCoord+t*(E()/2+i),s[w]=pi(pi({},T),{},{isShow:!0}))},b=0;b<_;b++)y(b);return s}function rL(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if($e(l)||bf.isSsr)return mMe(i,typeof l=="number"&&$e(l)?l:0);var p=[],m=o==="top"||o==="bottom"?"width":"height",_=u&&m==="width"?by(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},y=function(T,A){var E=xt(c)?c(T.value,A):T.value;return m==="width"?hMe(by(E,{fontSize:e,letterSpacing:n}),_,f):by(E,{fontSize:e,letterSpacing:n})[m]},b=i.length>=2?Bi(i[1].coordinate-i[0].coordinate):1,x=pMe(a,b,m);return l==="equidistantPreserveStart"?gMe(b,x,y,i,s):(l==="preserveStart"||l==="preserveStartEnd"?p=wMe(b,x,y,i,s,l==="preserveStartEnd"):p=_Me(b,x,y,i,s),p.filter(function(w){return w.isShow}))}var xMe=["viewBox"],SMe=["viewBox"],TMe=["ticks"];function $p(t){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(t)}function Mh(){return Mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mh.apply(this,arguments)}function e9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ki(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e9(Object(n),!0).forEach(function(r){iL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ON(t,e){if(t==null)return{};var n=EMe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function AMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gte(r.key),r)}}function OMe(t,e,n){return e&&t9(t.prototype,e),n&&t9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function CMe(t,e,n){return e=Yx(e),kMe(t,Vte()?Reflect.construct(e,n||[],Yx(t).constructor):e.apply(t,n))}function kMe(t,e){if(e&&($p(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NMe(t)}function NMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vte=function(){return!!t})()}function Yx(t){return Yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yx(t)}function IMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_j(t,e)}function _j(t,e){return _j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_j(t,e)}function iL(t,e,n){return e=Gte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gte(t){var e=PMe(t,"string");return $p(e)=="symbol"?e:e+""}function PMe(t,e){if($p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _m=(function(t){function e(n){var r;return AMe(this,e),r=CMe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return IMe(e,t),OMe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=ON(r,xMe),o=this.props,l=o.viewBox,c=ON(o,SMe);return!Qh(a,l)||!Qh(s,c)||!Qh(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.orientation,u=i.tickSize,f=i.mirror,p=i.tickMargin,m,_,y,b,x,w,T=f?-1:1,A=r.tickSize||u,E=$e(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":m=_=r.coordinate,b=s+ +!f*l,y=b-T*A,w=y-T*p,x=E;break;case"left":y=b=r.coordinate,_=a+ +!f*o,m=_-T*A,x=m-T*p,w=E;break;case"right":y=b=r.coordinate,_=a+ +f*o,m=_+T*A,x=m+T*p,w=E;break;default:m=_=r.coordinate,b=s+ +f*l,y=b+T*A,w=y+T*p,x=E;break}return{line:{x1:m,y1:y,x2:_,y2:b},tick:{x,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,f=ki(ki(ki({},mt(this.props,!1)),mt(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!c||l==="bottom"&&c);f=ki(ki({},f),{},{x1:i,y1:a+p*o,x2:i+s,y2:a+p*o})}else{var m=+(l==="left"&&!c||l==="right"&&c);f=ki(ki({},f),{},{x1:i+m*s,y1:a,x2:i+m*s,y2:a+o})}return ee.createElement("line",Mh({},f,{className:Ct("recharts-cartesian-axis-line",Ga(u,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,l=o.tickLine,c=o.stroke,u=o.tick,f=o.tickFormatter,p=o.unit,m=rL(ki(ki({},this.props),{},{ticks:r}),i,a),_=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),b=mt(this.props,!1),x=mt(u,!1),w=ki(ki({},b),{},{fill:"none"},mt(l,!1)),T=m.map(function(A,E){var C=s.getTickLineCoord(A),R=C.line,N=C.tick,D=ki(ki(ki(ki({textAnchor:_,verticalAnchor:y},b),{},{stroke:"none",fill:c},x),N),{},{index:E,payload:A,visibleTicksCount:m.length,tickFormatter:f});return ee.createElement(Yt,Mh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},of(s.props,A,E)),l&&ee.createElement("line",Mh({},w,R,{className:Ct("recharts-cartesian-axis-tick-line",Ga(l,"className"))})),u&&e.renderTickItem(u,D,"".concat(xt(f)?f(A.value,E):A.value).concat(p||"")))});return ee.createElement("g",{className:"recharts-cartesian-axis-ticks"},T)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var f=this.props,p=f.ticks,m=ON(f,TMe),_=p;return xt(l)&&(_=p&&p.length>0?l(this.props):l(m)),s<=0||o<=0||!_||!_.length?null:ee.createElement(Yt,{className:Ct("recharts-cartesian-axis",c),ref:function(b){r.layerReference=b}},a&&this.renderAxisLine(),this.renderTicks(_,this.state.fontSize,this.state.letterSpacing),zr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return ee.isValidElement(r)?s=ee.cloneElement(r,i):xt(r)?s=r(i):s=ee.createElement(lf,Mh({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(k.Component);iL(_m,"displayName","CartesianAxis");iL(_m,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var RMe=["x1","y1","x2","y2","key"],jMe=["offset"];function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function n9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n9(Object(n),!0).forEach(function(r){$Me(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Me(t,e,n){return e=MMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MMe(t){var e=LMe(t,"string");return df(e)=="symbol"?e:e+""}function LMe(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wd(){return Wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wd.apply(this,arguments)}function r9(t,e){if(t==null)return{};var n=DMe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var BMe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,l=e.ry;return ee.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Kte(t,e){var n;if(ee.isValidElement(t))n=ee.cloneElement(t,e);else if(xt(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,l=r9(e,RMe),c=mt(l,!1);c.offset;var u=r9(c,jMe);n=ee.createElement("line",Wd({},u,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function FMe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var c=mi(mi({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return Kte(i,c)});return ee.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function UMe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var c=mi(mi({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return Kte(i,c)});return ee.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function zMe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=o.map(function(p){return Math.round(p+i-i)}).sort(function(p,m){return p-m});i!==u[0]&&u.unshift(0);var f=u.map(function(p,m){var _=!u[m+1],y=_?i+s-p:u[m+1]-p;if(y<=0)return null;var b=m%e.length;return ee.createElement("rect",{key:"react-".concat(m),y:p,x:r,height:y,width:a,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ee.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function qMe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(p){return Math.round(p+a-a)}).sort(function(p,m){return p-m});a!==u[0]&&u.unshift(0);var f=u.map(function(p,m){var _=!u[m+1],y=_?a+o-p:u[m+1]-p;if(y<=0)return null;var b=m%r.length;return ee.createElement("rect",{key:"react-".concat(m),x:p,y:s,width:y,height:l,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ee.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var HMe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return Kee(rL(mi(mi(mi({},_m.defaultProps),r),{},{ticks:cc(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},WMe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return Kee(rL(mi(mi(mi({},_m.defaultProps),r),{},{ticks:cc(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},ch={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function wj(t){var e,n,r,i,a,s,o=QM(),l=eL(),c=P$e(),u=mi(mi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:ch.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:ch.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:ch.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:ch.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:ch.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:ch.verticalFill,x:$e(t.x)?t.x:c.left,y:$e(t.y)?t.y:c.top,width:$e(t.width)?t.width:c.width,height:$e(t.height)?t.height:c.height}),f=u.x,p=u.y,m=u.width,_=u.height,y=u.syncWithTicks,b=u.horizontalValues,x=u.verticalValues,w=k$e(),T=N$e();if(!$e(m)||m<=0||!$e(_)||_<=0||!$e(f)||f!==+f||!$e(p)||p!==+p)return null;var A=u.verticalCoordinatesGenerator||HMe,E=u.horizontalCoordinatesGenerator||WMe,C=u.horizontalPoints,R=u.verticalPoints;if((!C||!C.length)&&xt(E)){var N=b&&b.length,D=E({yAxis:T?mi(mi({},T),{},{ticks:N?b:T.ticks}):void 0,width:o,height:l,offset:c},N?!0:y);_o(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(df(D),"]")),Array.isArray(D)&&(C=D)}if((!R||!R.length)&&xt(A)){var Z=x&&x.length,j=A({xAxis:w?mi(mi({},w),{},{ticks:Z?x:w.ticks}):void 0,width:o,height:l,offset:c},Z?!0:y);_o(Array.isArray(j),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(df(j),"]")),Array.isArray(j)&&(R=j)}return ee.createElement("g",{className:"recharts-cartesian-grid"},ee.createElement(BMe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ee.createElement(FMe,Wd({},u,{offset:c,horizontalPoints:C,xAxis:w,yAxis:T})),ee.createElement(UMe,Wd({},u,{offset:c,verticalPoints:R,xAxis:w,yAxis:T})),ee.createElement(zMe,Wd({},u,{horizontalPoints:C})),ee.createElement(qMe,Wd({},u,{verticalPoints:R})))}wj.displayName="CartesianGrid";var VMe=["type","layout","connectNulls","ref"],GMe=["key"];function Mp(t){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(t)}function i9(t,e){if(t==null)return{};var n=KMe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ey(){return Ey=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ey.apply(this,arguments)}function a9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ca(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a9(Object(n),!0).forEach(function(r){uo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uh(t){return YMe(t)||JMe(t)||XMe(t)||ZMe()}function ZMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XMe(t,e){if(t){if(typeof t=="string")return xj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xj(t,e)}}function JMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function YMe(t){if(Array.isArray(t))return xj(t)}function xj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function QMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xte(r.key),r)}}function eLe(t,e,n){return e&&s9(t.prototype,e),n&&s9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tLe(t,e,n){return e=Qx(e),nLe(t,Zte()?Reflect.construct(e,n||[],Qx(t).constructor):e.apply(t,n))}function nLe(t,e){if(e&&(Mp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rLe(t)}function rLe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zte=function(){return!!t})()}function Qx(t){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qx(t)}function iLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sj(t,e)}function Sj(t,e){return Sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Sj(t,e)}function uo(t,e,n){return e=Xte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xte(t){var e=aLe(t,"string");return Mp(e)=="symbol"?e:e+""}function aLe(t,e){if(Mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xb=(function(t){function e(){var n;QMe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=tLe(this,e,[].concat(i)),uo(n,"state",{isAnimationFinished:!0,totalLength:0}),uo(n,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),uo(n,"getStrokeDasharray",function(s,o,l){var c=l.reduce(function(x,w){return x+w});if(!c)return n.generateSimpleStrokeDasharray(o,s);for(var u=Math.floor(s/c),f=s%c,p=o-s,m=[],_=0,y=0;_<l.length;y+=l[_],++_)if(y+l[_]>f){m=[].concat(uh(l.slice(0,_)),[f-y]);break}var b=m.length%2===0?[0,p]:[p];return[].concat(uh(e.repeat(l,u)),uh(m),b).map(function(x){return"".concat(x,"px")}).join(", ")}),uo(n,"id",mm("recharts-line-")),uo(n,"pathRef",function(s){n.mainCurve=s}),uo(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),uo(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return iLe(e,t),eLe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,l=a.yAxis,c=a.layout,u=a.children,f=Ka(u,wb);if(!f)return null;var p=function(y,b){return{x:y.x,y:y.y,value:y.value,errorVal:kr(y.payload,b)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ee.createElement(Yt,m,f.map(function(_){return ee.cloneElement(_,{key:"bar-".concat(_.props.dataKey),data:s,xAxis:o,yAxis:l,layout:c,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,c=o.points,u=o.dataKey,f=mt(this.props,!1),p=mt(l,!0),m=c.map(function(y,b){var x=Ca(Ca(Ca({key:"dot-".concat(b),r:3},f),p),{},{value:y.value,dataKey:u,cx:y.x,cy:y.y,index:b,payload:y.payload});return e.renderDotItem(l,x)}),_={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return ee.createElement(Yt,Ey({className:"recharts-line-dots",key:"dots"},_),m)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,l=o.type,c=o.layout,u=o.connectNulls;o.ref;var f=i9(o,VMe),p=Ca(Ca(Ca({},mt(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:l,layout:c,connectNulls:u});return ee.createElement(Px,Ey({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,l=s.strokeDasharray,c=s.isAnimationActive,u=s.animationBegin,f=s.animationDuration,p=s.animationEasing,m=s.animationId,_=s.animateNewValues,y=s.width,b=s.height,x=this.state,w=x.prevPoints,T=x.totalLength;return ee.createElement(xl,{begin:u,duration:f,isActive:c,easing:p,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var E=A.t;if(w){var C=w.length/o.length,R=o.map(function(L,B){var z=Math.floor(B*C);if(w[z]){var W=w[z],q=Ba(W.x,L.x),K=Ba(W.y,L.y);return Ca(Ca({},L),{},{x:q(E),y:K(E)})}if(_){var V=Ba(y*2,L.x),J=Ba(b/2,L.y);return Ca(Ca({},L),{},{x:V(E),y:J(E)})}return Ca(Ca({},L),{},{x:L.x,y:L.y})});return a.renderCurveStatically(R,r,i)}var N=Ba(0,T),D=N(E),Z;if(l){var j="".concat(l).split(/[,\s]+/gim).map(function(L){return parseFloat(L)});Z=a.getStrokeDasharray(D,T,j)}else Z=a.generateSimpleStrokeDasharray(T,D);return a.renderCurveStatically(o,r,i,{strokeDasharray:Z})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,l=this.state,c=l.prevPoints,u=l.totalLength;return o&&s&&s.length&&(!c&&u>0||!_b(c,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,c=i.xAxis,u=i.yAxis,f=i.top,p=i.left,m=i.width,_=i.height,y=i.isAnimationActive,b=i.id;if(a||!o||!o.length)return null;var x=this.state.isAnimationFinished,w=o.length===1,T=Ct("recharts-line",l),A=c&&c.allowDataOverflow,E=u&&u.allowDataOverflow,C=A||E,R=At(b)?this.id:b,N=(r=mt(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},D=N.r,Z=D===void 0?3:D,j=N.strokeWidth,L=j===void 0?2:j,B=j1e(s)?s:{},z=B.clipDot,W=z===void 0?!0:z,q=Z*2+L;return ee.createElement(Yt,{className:T},A||E?ee.createElement("defs",null,ee.createElement("clipPath",{id:"clipPath-".concat(R)},ee.createElement("rect",{x:A?p:p-m/2,y:E?f:f-_/2,width:A?m:m*2,height:E?_:_*2})),!W&&ee.createElement("clipPath",{id:"clipPath-dots-".concat(R)},ee.createElement("rect",{x:p-q/2,y:f-q/2,width:m+q,height:_+q}))):null,!w&&this.renderCurve(C,R),this.renderErrorBar(C,R),(w||s)&&this.renderDots(C,W,R),(!y||x)&&hc.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(uh(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(uh(s),uh(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(ee.isValidElement(r))a=ee.cloneElement(r,i);else if(xt(r))a=r(i);else{var s=i.key,o=i9(i,GMe),l=Ct("recharts-line-dot",typeof r!="boolean"?r.className:"");a=ee.createElement(WS,Ey({key:s},o,{className:l}))}return a}}])})(k.PureComponent);uo(xb,"displayName","Line");uo(xb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!bf.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});uo(xb,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,s=t.dataKey,o=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,f=l.map(function(p,m){var _=kr(p,s);return u==="horizontal"?{x:d8({axis:n,ticks:i,bandSize:o,entry:p,index:m}),y:At(_)?null:r.scale(_),value:_,payload:p}:{x:At(_)?null:n.scale(_),y:d8({axis:r,ticks:a,bandSize:o,entry:p,index:m}),value:_,payload:p}});return Ca({points:f,layout:u},c)});function Lp(t){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(t)}function sLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oLe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qte(r.key),r)}}function lLe(t,e,n){return e&&oLe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cLe(t,e,n){return e=e1(e),uLe(t,Jte()?Reflect.construct(e,n||[],e1(t).constructor):e.apply(t,n))}function uLe(t,e){if(e&&(Lp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dLe(t)}function dLe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jte=function(){return!!t})()}function e1(t){return e1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e1(t)}function fLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tj(t,e)}function Tj(t,e){return Tj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Tj(t,e)}function Yte(t,e,n){return e=Qte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qte(t){var e=hLe(t,"string");return Lp(e)=="symbol"?e:e+""}function hLe(t,e){if(Lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ej(){return Ej=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ej.apply(this,arguments)}function pLe(t){var e=t.xAxisId,n=QM(),r=eL(),i=Lte(e);return i==null?null:ee.createElement(_m,Ej({},i,{className:Ct("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return cc(s,!0)}}))}var Dp=(function(t){function e(){return sLe(this,e),cLe(this,e,arguments)}return fLe(e,t),lLe(e,[{key:"render",value:function(){return ee.createElement(pLe,this.props)}}])})(ee.Component);Yte(Dp,"displayName","XAxis");Yte(Dp,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Bp(t){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(t)}function mLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gLe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nne(r.key),r)}}function yLe(t,e,n){return e&&gLe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vLe(t,e,n){return e=t1(e),bLe(t,ene()?Reflect.construct(e,n||[],t1(t).constructor):e.apply(t,n))}function bLe(t,e){if(e&&(Bp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Le(t)}function _Le(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ene(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ene=function(){return!!t})()}function t1(t){return t1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},t1(t)}function wLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Aj(t,e)}function Aj(t,e){return Aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Aj(t,e)}function tne(t,e,n){return e=nne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nne(t){var e=xLe(t,"string");return Bp(e)=="symbol"?e:e+""}function xLe(t,e){if(Bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Oj(){return Oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oj.apply(this,arguments)}var SLe=function(e){var n=e.yAxisId,r=QM(),i=eL(),a=Dte(n);return a==null?null:ee.createElement(_m,Oj({},a,{className:Ct("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return cc(o,!0)}}))},Fp=(function(t){function e(){return mLe(this,e),vLe(this,e,arguments)}return wLe(e,t),yLe(e,[{key:"render",value:function(){return ee.createElement(SLe,this.props)}}])})(ee.Component);tne(Fp,"displayName","YAxis");tne(Fp,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function o9(t){return OLe(t)||ALe(t)||ELe(t)||TLe()}function TLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ELe(t,e){if(t){if(typeof t=="string")return Cj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cj(t,e)}}function ALe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OLe(t){if(Array.isArray(t))return Cj(t)}function Cj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var kj=function(e,n,r,i,a){var s=Ka(e,nL),o=Ka(e,eT),l=[].concat(o9(s),o9(o)),c=Ka(e,nT),u="".concat(i,"Id"),f=i[0],p=n;if(l.length&&(p=l.reduce(function(y,b){if(b.props[u]===r&&hl(b.props,"extendDomain")&&$e(b.props[f])){var x=b.props[f];return[Math.min(y[0],x),Math.max(y[1],x)]}return y},p)),c.length){var m="".concat(f,"1"),_="".concat(f,"2");p=c.reduce(function(y,b){if(b.props[u]===r&&hl(b.props,"extendDomain")&&$e(b.props[m])&&$e(b.props[_])){var x=b.props[m],w=b.props[_];return[Math.min(y[0],x,w),Math.max(y[1],x,w)]}return y},p)}return a&&a.length&&(p=a.reduce(function(y,b){return $e(b)?[Math.min(y[0],b),Math.max(y[1],b)]:y},p)),p},CN={exports:{}},l9;function CLe(){return l9||(l9=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,f||l,p),_=n?n+c:c;return l._events[_]?l._events[_].fn?l._events[_]=[l._events[_],m]:l._events[_].push(m):(l._events[_]=m,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,_=new Array(m);p<m;p++)_[p]=f[p].fn;return _},o.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,u,f,p,m,_){var y=n?n+c:c;if(!this._events[y])return!1;var b=this._events[y],x=arguments.length,w,T;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),x){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,f),!0;case 4:return b.fn.call(b.context,u,f,p),!0;case 5:return b.fn.call(b.context,u,f,p,m),!0;case 6:return b.fn.call(b.context,u,f,p,m,_),!0}for(T=1,w=new Array(x-1);T<x;T++)w[T-1]=arguments[T];b.fn.apply(b.context,w)}else{var A=b.length,E;for(T=0;T<A;T++)switch(b[T].once&&this.removeListener(c,b[T].fn,void 0,!0),x){case 1:b[T].fn.call(b[T].context);break;case 2:b[T].fn.call(b[T].context,u);break;case 3:b[T].fn.call(b[T].context,u,f);break;case 4:b[T].fn.call(b[T].context,u,f,p);break;default:if(!w)for(E=1,w=new Array(x-1);E<x;E++)w[E-1]=arguments[E];b[T].fn.apply(b[T].context,w)}}return!0},o.prototype.on=function(c,u,f){return a(this,c,u,f,!1)},o.prototype.once=function(c,u,f){return a(this,c,u,f,!0)},o.prototype.removeListener=function(c,u,f,p){var m=n?n+c:c;if(!this._events[m])return this;if(!u)return s(this,m),this;var _=this._events[m];if(_.fn)_.fn===u&&(!p||_.once)&&(!f||_.context===f)&&s(this,m);else{for(var y=0,b=[],x=_.length;y<x;y++)(_[y].fn!==u||p&&!_[y].once||f&&_[y].context!==f)&&b.push(_[y]);b.length?this._events[m]=b.length===1?b[0]:b:s(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(CN)),CN.exports}var kLe=CLe();const NLe=Ut(kLe);var kN=new NLe,NN="recharts.syncMouseEvents";function Ov(t){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ov(t)}function ILe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PLe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rne(r.key),r)}}function RLe(t,e,n){return e&&PLe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IN(t,e,n){return e=rne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rne(t){var e=jLe(t,"string");return Ov(e)=="symbol"?e:e+""}function jLe(t,e){if(Ov(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ov(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $Le=(function(){function t(){ILe(this,t),IN(this,"activeIndex",0),IN(this,"coordinateList",[]),IN(this,"layout","horizontal")}return RLe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,l=n.layout,c=l===void 0?null:l,u=n.offset,f=u===void 0?null:u,p=n.mouseHandlerCallback,m=p===void 0?null:p;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=a+l+c,p=s+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])})();function MLe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&$e(r)&&$e(i))return!0}return!1}function LLe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function ine(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=kn(e,n,r,i),o=kn(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function DLe(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,f=e.angle,p=kn(o,l,c,f),m=kn(o,l,u,f);r=p.x,i=p.y,a=m.x,s=m.y}else return ine(e);return[{x:r,y:i},{x:a,y:s}]}function Cv(t){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cv(t)}function c9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c9(Object(n),!0).forEach(function(r){BLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BLe(t,e,n){return e=FLe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FLe(t){var e=ULe(t,"string");return Cv(e)=="symbol"?e:e+""}function ULe(t,e){if(Cv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zLe(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,f=t.layout,p=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!a||!s||p!=="ScatterChart"&&i!=="axis")return null;var _,y=Px;if(p==="ScatterChart")_=s,y=uje;else if(p==="BarChart")_=LLe(f,s,l,u),y=ZM;else if(f==="radial"){var b=ine(s),x=b.cx,w=b.cy,T=b.radius,A=b.startAngle,E=b.endAngle;_={cx:x,cy:w,startAngle:A,endAngle:E,innerRadius:T,outerRadius:T},y=ate}else _={points:DLe(f,s,l)},y=Px;var C=s_(s_(s_(s_({stroke:"#ccc",pointerEvents:"none"},l),_),mt(m,!1)),{},{payload:o,payloadIndex:c,className:Ct("recharts-tooltip-cursor",m.className)});return k.isValidElement(m)?k.cloneElement(m,C):k.createElement(y,C)}var qLe=["item"],HLe=["children","className","width","height","style","compact","title","desc"];function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}function Lh(){return Lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lh.apply(this,arguments)}function u9(t,e){return GLe(t)||VLe(t,e)||sne(t,e)||WLe()}function WLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VLe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function GLe(t){if(Array.isArray(t))return t}function d9(t,e){if(t==null)return{};var n=KLe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KLe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ZLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XLe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,one(r.key),r)}}function JLe(t,e,n){return e&&XLe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function YLe(t,e,n){return e=n1(e),QLe(t,ane()?Reflect.construct(e,n||[],n1(t).constructor):e.apply(t,n))}function QLe(t,e){if(e&&(Up(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eDe(t)}function eDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ane(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ane=function(){return!!t})()}function n1(t){return n1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},n1(t)}function tDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nj(t,e)}function Nj(t,e){return Nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Nj(t,e)}function zp(t){return iDe(t)||rDe(t)||sne(t)||nDe()}function nDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sne(t,e){if(t){if(typeof t=="string")return Ij(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ij(t,e)}}function rDe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iDe(t){if(Array.isArray(t))return Ij(t)}function Ij(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f9(Object(n),!0).forEach(function(r){gt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gt(t,e,n){return e=one(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function one(t){var e=aDe(t,"string");return Up(e)=="symbol"?e:e+""}function aDe(t,e){if(Up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sDe={xAxis:["bottom","top"],yAxis:["left","right"]},oDe={width:"100%",height:"100%"},lne={x:0,y:0};function o_(t){return t}var lDe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},cDe=function(e,n,r,i){var a=n.find(function(u){return u&&u.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return _e(_e(_e({},i),kn(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,c=i.angle;return _e(_e(_e({},i),kn(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return lne},rT=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat(zp(o),zp(c)):o},[]);return s.length>0?s:e&&e.length&&$e(i)&&$e(a)?e.slice(i,a+1):[]};function cne(t){return t==="number"?[0,"auto"]:void 0}var Pj=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=rT(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(l,c){var u,f=(u=c.props.data)!==null&&u!==void 0?u:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var m=f===void 0?o:f;p=rx(m,s.dataKey,i)}else p=f&&f[r]||o[r];return p?[].concat(zp(l),[Qee(c,p)]):l},[])},h9=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=lDe(a,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=INe(s,o,c,l);if(u>=0&&c){var f=c[u]&&c[u].value,p=Pj(e,n,u,f),m=cDe(r,o,u,a);return{activeTooltipIndex:u,activeLabel:f,activePayload:p,activeCoordinate:m}}return null},uDe=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,p=e.stackOffset,m=Gee(u,a);return r.reduce(function(_,y){var b,x=y.type.defaultProps!==void 0?_e(_e({},y.type.defaultProps),y.props):y.props,w=x.type,T=x.dataKey,A=x.allowDataOverflow,E=x.allowDuplicatedCategory,C=x.scale,R=x.ticks,N=x.includeHidden,D=x[s];if(_[D])return _;var Z=rT(e.data,{graphicalItems:i.filter(function(Y){var se,ge=s in Y.props?Y.props[s]:(se=Y.type.defaultProps)===null||se===void 0?void 0:se[s];return ge===D}),dataStartIndex:l,dataEndIndex:c}),j=Z.length,L,B,z;MLe(x.domain,A,w)&&(L=WR(x.domain,null,A),m&&(w==="number"||C!=="auto")&&(z=wy(Z,T,"category")));var W=cne(w);if(!L||L.length===0){var q,K=(q=x.domain)!==null&&q!==void 0?q:W;if(T){if(L=wy(Z,T,w),w==="category"&&m){var V=E1e(L);E&&V?(B=L,L=qx(0,j)):E||(L=m8(K,L,y).reduce(function(Y,se){return Y.indexOf(se)>=0?Y:[].concat(zp(Y),[se])},[]))}else if(w==="category")E?L=L.filter(function(Y){return Y!==""&&!At(Y)}):L=m8(K,L,y).reduce(function(Y,se){return Y.indexOf(se)>=0||se===""||At(se)?Y:[].concat(zp(Y),[se])},[]);else if(w==="number"){var J=MNe(Z,i.filter(function(Y){var se,ge,ue=s in Y.props?Y.props[s]:(se=Y.type.defaultProps)===null||se===void 0?void 0:se[s],H="hide"in Y.props?Y.props.hide:(ge=Y.type.defaultProps)===null||ge===void 0?void 0:ge.hide;return ue===D&&(N||!H)}),T,a,u);J&&(L=J)}m&&(w==="number"||C!=="auto")&&(z=wy(Z,T,"category"))}else m?L=qx(0,j):o&&o[D]&&o[D].hasStack&&w==="number"?L=p==="expand"?[0,1]:Yee(o[D].stackGroups,l,c):L=Vee(Z,i.filter(function(Y){var se=s in Y.props?Y.props[s]:Y.type.defaultProps[s],ge="hide"in Y.props?Y.props.hide:Y.type.defaultProps.hide;return se===D&&(N||!ge)}),w,u,!0);if(w==="number")L=kj(f,L,D,a,R),K&&(L=WR(K,L,A));else if(w==="category"&&K){var Q=K,M=L.every(function(Y){return Q.indexOf(Y)>=0});M&&(L=Q)}}return _e(_e({},_),{},gt({},D,_e(_e({},x),{},{axisType:a,domain:L,categoricalDomain:z,duplicateDomain:B,originalDomain:(b=x.domain)!==null&&b!==void 0?b:W,isCategorical:m,layout:u})))},{})},dDe=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,p=rT(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),m=p.length,_=Gee(u,a),y=-1;return r.reduce(function(b,x){var w=x.type.defaultProps!==void 0?_e(_e({},x.type.defaultProps),x.props):x.props,T=w[s],A=cne("number");if(!b[T]){y++;var E;return _?E=qx(0,m):o&&o[T]&&o[T].hasStack?(E=Yee(o[T].stackGroups,l,c),E=kj(f,E,T,a)):(E=WR(A,Vee(p,r.filter(function(C){var R,N,D=s in C.props?C.props[s]:(R=C.type.defaultProps)===null||R===void 0?void 0:R[s],Z="hide"in C.props?C.props.hide:(N=C.type.defaultProps)===null||N===void 0?void 0:N.hide;return D===T&&!Z}),"number",u),i.defaultProps.allowDataOverflow),E=kj(f,E,T,a)),_e(_e({},b),{},gt({},T,_e(_e({axisType:a},i.defaultProps),{},{hide:!0,orientation:Ga(sDe,"".concat(a,".").concat(y%2),null),domain:E,originalDomain:A,isCategorical:_,layout:u})))}return b},{})},fDe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,f="".concat(i,"Id"),p=Ka(u,a),m={};return p&&p.length?m=uDe(e,{axes:p,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):s&&s.length&&(m=dDe(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),m},hDe=function(e){var n=xu(e),r=cc(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:xM(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:kx(n,r)}},p9=function(e){var n=e.children,r=e.defaultShowTooltip,i=Ma(n,Np),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},pDe=function(e){return!e||!e.length?!1:e.some(function(n){var r=dc(n&&n.type);return r&&r.indexOf("Bar")>=0})},m9=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},mDe=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,l=o===void 0?{}:o,c=r.width,u=r.height,f=r.children,p=r.margin||{},m=Ma(f,Np),_=Ma(f,Zd),y=Object.keys(l).reduce(function(E,C){var R=l[C],N=R.orientation;return!R.mirror&&!R.hide?_e(_e({},E),{},gt({},N,E[N]+R.width)):E},{left:p.left||0,right:p.right||0}),b=Object.keys(s).reduce(function(E,C){var R=s[C],N=R.orientation;return!R.mirror&&!R.hide?_e(_e({},E),{},gt({},N,Ga(E,"".concat(N))+R.height)):E},{top:p.top||0,bottom:p.bottom||0}),x=_e(_e({},b),y),w=x.bottom;m&&(x.bottom+=m.props.height||Np.defaultProps.height),_&&n&&(x=jNe(x,i,r,n));var T=c-x.left-x.right,A=u-x.top-x.bottom;return _e(_e({brushBottom:w},x),{},{width:Math.max(T,0),height:Math.max(A,0)})},gDe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},aL=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,f=e.defaultProps,p=function(x,w){var T=w.graphicalItems,A=w.stackGroups,E=w.offset,C=w.updateId,R=w.dataStartIndex,N=w.dataEndIndex,D=x.barSize,Z=x.layout,j=x.barGap,L=x.barCategoryGap,B=x.maxBarSize,z=m9(Z),W=z.numericAxisName,q=z.cateAxisName,K=pDe(T),V=[];return T.forEach(function(J,Q){var M=rT(x.data,{graphicalItems:[J],dataStartIndex:R,dataEndIndex:N}),Y=J.type.defaultProps!==void 0?_e(_e({},J.type.defaultProps),J.props):J.props,se=Y.dataKey,ge=Y.maxBarSize,ue=Y["".concat(W,"Id")],H=Y["".concat(q,"Id")],$={},ne=l.reduce(function(_n,br){var ya=w["".concat(br.axisType,"Map")],dr=Y["".concat(br.axisType,"Id")];ya&&ya[dr]||br.axisType==="zAxis"||uf();var Rr=ya[dr];return _e(_e({},_n),{},gt(gt({},br.axisType,Rr),"".concat(br.axisType,"Ticks"),cc(Rr)))},$),X=ne[q],pe=ne["".concat(q,"Ticks")],ye=A&&A[ue]&&A[ue].hasStack&&WNe(J,A[ue].stackGroups),le=dc(J.type).indexOf("Bar")>=0,Ne=kx(X,pe),je=[],Xe=K&&PNe({barSize:D,stackGroups:A,totalSize:gDe(ne,q)});if(le){var st,kt,vn=At(ge)?B:ge,gn=(st=(kt=kx(X,pe,!0))!==null&&kt!==void 0?kt:vn)!==null&&st!==void 0?st:0;je=RNe({barGap:j,barCategoryGap:L,bandSize:gn!==Ne?gn:Ne,sizeList:Xe[H],maxBarSize:vn}),gn!==Ne&&(je=je.map(function(_n){return _e(_e({},_n),{},{position:_e(_e({},_n.position),{},{offset:_n.position.offset-gn/2})})}))}var bn=J&&J.type&&J.type.getComposedData;bn&&V.push({props:_e(_e({},bn(_e(_e({},ne),{},{displayedData:M,props:x,dataKey:se,item:J,bandSize:Ne,barPosition:je,offset:E,stackedData:ye,layout:Z,dataStartIndex:R,dataEndIndex:N}))),{},gt(gt(gt({key:J.key||"item-".concat(Q)},W,ne[W]),q,ne[q]),"animationId",C)),childIndex:L1e(J,x.children),item:J})}),V},m=function(x,w){var T=x.props,A=x.dataStartIndex,E=x.dataEndIndex,C=x.updateId;if(!kF({props:T}))return null;var R=T.children,N=T.layout,D=T.stackOffset,Z=T.data,j=T.reverseStackOrder,L=m9(N),B=L.numericAxisName,z=L.cateAxisName,W=Ka(R,r),q=qNe(Z,W,"".concat(B,"Id"),"".concat(z,"Id"),D,j),K=l.reduce(function(Y,se){var ge="".concat(se.axisType,"Map");return _e(_e({},Y),{},gt({},ge,fDe(T,_e(_e({},se),{},{graphicalItems:W,stackGroups:se.axisType===B&&q,dataStartIndex:A,dataEndIndex:E}))))},{}),V=mDe(_e(_e({},K),{},{props:T,graphicalItems:W}),w==null?void 0:w.legendBBox);Object.keys(K).forEach(function(Y){K[Y]=u(T,K[Y],V,Y.replace("Map",""),n)});var J=K["".concat(z,"Map")],Q=hDe(J),M=p(T,_e(_e({},K),{},{dataStartIndex:A,dataEndIndex:E,updateId:C,graphicalItems:W,stackGroups:q,offset:V}));return _e(_e({formattedGraphicalItems:M,graphicalItems:W,offset:V,stackGroups:q},Q),K)},_=(function(b){function x(w){var T,A,E;return ZLe(this,x),E=YLe(this,x,[w]),gt(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),gt(E,"accessibilityManager",new $Le),gt(E,"handleLegendBBoxUpdate",function(C){if(C){var R=E.state,N=R.dataStartIndex,D=R.dataEndIndex,Z=R.updateId;E.setState(_e({legendBBox:C},m({props:E.props,dataStartIndex:N,dataEndIndex:D,updateId:Z},_e(_e({},E.state),{},{legendBBox:C}))))}}),gt(E,"handleReceiveSyncEvent",function(C,R,N){if(E.props.syncId===C){if(N===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(R)}}),gt(E,"handleBrushChange",function(C){var R=C.startIndex,N=C.endIndex;if(R!==E.state.dataStartIndex||N!==E.state.dataEndIndex){var D=E.state.updateId;E.setState(function(){return _e({dataStartIndex:R,dataEndIndex:N},m({props:E.props,dataStartIndex:R,dataEndIndex:N,updateId:D},E.state))}),E.triggerSyncEvent({dataStartIndex:R,dataEndIndex:N})}}),gt(E,"handleMouseEnter",function(C){var R=E.getMouseInfo(C);if(R){var N=_e(_e({},R),{},{isTooltipActive:!0});E.setState(N),E.triggerSyncEvent(N);var D=E.props.onMouseEnter;xt(D)&&D(N,C)}}),gt(E,"triggeredAfterMouseMove",function(C){var R=E.getMouseInfo(C),N=R?_e(_e({},R),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(N),E.triggerSyncEvent(N);var D=E.props.onMouseMove;xt(D)&&D(N,C)}),gt(E,"handleItemMouseEnter",function(C){E.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),gt(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),gt(E,"handleMouseMove",function(C){C.persist(),E.throttleTriggeredAfterMouseMove(C)}),gt(E,"handleMouseLeave",function(C){E.throttleTriggeredAfterMouseMove.cancel();var R={isTooltipActive:!1};E.setState(R),E.triggerSyncEvent(R);var N=E.props.onMouseLeave;xt(N)&&N(R,C)}),gt(E,"handleOuterEvent",function(C){var R=M1e(C),N=Ga(E.props,"".concat(R));if(R&&xt(N)){var D,Z;/.*touch.*/i.test(R)?Z=E.getMouseInfo(C.changedTouches[0]):Z=E.getMouseInfo(C),N((D=Z)!==null&&D!==void 0?D:{},C)}}),gt(E,"handleClick",function(C){var R=E.getMouseInfo(C);if(R){var N=_e(_e({},R),{},{isTooltipActive:!0});E.setState(N),E.triggerSyncEvent(N);var D=E.props.onClick;xt(D)&&D(N,C)}}),gt(E,"handleMouseDown",function(C){var R=E.props.onMouseDown;if(xt(R)){var N=E.getMouseInfo(C);R(N,C)}}),gt(E,"handleMouseUp",function(C){var R=E.props.onMouseUp;if(xt(R)){var N=E.getMouseInfo(C);R(N,C)}}),gt(E,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),gt(E,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.handleMouseDown(C.changedTouches[0])}),gt(E,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.handleMouseUp(C.changedTouches[0])}),gt(E,"triggerSyncEvent",function(C){E.props.syncId!==void 0&&kN.emit(NN,E.props.syncId,C,E.eventEmitterSymbol)}),gt(E,"applySyncEvent",function(C){var R=E.props,N=R.layout,D=R.syncMethod,Z=E.state.updateId,j=C.dataStartIndex,L=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)E.setState(_e({dataStartIndex:j,dataEndIndex:L},m({props:E.props,dataStartIndex:j,dataEndIndex:L,updateId:Z},E.state)));else if(C.activeTooltipIndex!==void 0){var B=C.chartX,z=C.chartY,W=C.activeTooltipIndex,q=E.state,K=q.offset,V=q.tooltipTicks;if(!K)return;if(typeof D=="function")W=D(V,C);else if(D==="value"){W=-1;for(var J=0;J<V.length;J++)if(V[J].value===C.activeLabel){W=J;break}}var Q=_e(_e({},K),{},{x:K.left,y:K.top}),M=Math.min(B,Q.x+Q.width),Y=Math.min(z,Q.y+Q.height),se=V[W]&&V[W].value,ge=Pj(E.state,E.props.data,W),ue=V[W]?{x:N==="horizontal"?V[W].coordinate:M,y:N==="horizontal"?Y:V[W].coordinate}:lne;E.setState(_e(_e({},C),{},{activeLabel:se,activeCoordinate:ue,activePayload:ge,activeTooltipIndex:W}))}else E.setState(C)}),gt(E,"renderCursor",function(C){var R,N=E.state,D=N.isTooltipActive,Z=N.activeCoordinate,j=N.activePayload,L=N.offset,B=N.activeTooltipIndex,z=N.tooltipAxisBandSize,W=E.getTooltipEventType(),q=(R=C.props.active)!==null&&R!==void 0?R:D,K=E.props.layout,V=C.key||"_recharts-cursor";return ee.createElement(zLe,{key:V,activeCoordinate:Z,activePayload:j,activeTooltipIndex:B,chartName:n,element:C,isActive:q,layout:K,offset:L,tooltipAxisBandSize:z,tooltipEventType:W})}),gt(E,"renderPolarAxis",function(C,R,N){var D=Ga(C,"type.axisType"),Z=Ga(E.state,"".concat(D,"Map")),j=C.type.defaultProps,L=j!==void 0?_e(_e({},j),C.props):C.props,B=Z&&Z[L["".concat(D,"Id")]];return k.cloneElement(C,_e(_e({},B),{},{className:Ct(D,B.className),key:C.key||"".concat(R,"-").concat(N),ticks:cc(B,!0)}))}),gt(E,"renderPolarGrid",function(C){var R=C.props,N=R.radialLines,D=R.polarAngles,Z=R.polarRadius,j=E.state,L=j.radiusAxisMap,B=j.angleAxisMap,z=xu(L),W=xu(B),q=W.cx,K=W.cy,V=W.innerRadius,J=W.outerRadius;return k.cloneElement(C,{polarAngles:Array.isArray(D)?D:cc(W,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray(Z)?Z:cc(z,!0).map(function(Q){return Q.coordinate}),cx:q,cy:K,innerRadius:V,outerRadius:J,key:C.key||"polar-grid",radialLines:N})}),gt(E,"renderLegend",function(){var C=E.state.formattedGraphicalItems,R=E.props,N=R.children,D=R.width,Z=R.height,j=E.props.margin||{},L=D-(j.left||0)-(j.right||0),B=Hee({children:N,formattedGraphicalItems:C,legendWidth:L,legendContent:c});if(!B)return null;var z=B.item,W=d9(B,qLe);return k.cloneElement(z,_e(_e({},W),{},{chartWidth:D,chartHeight:Z,margin:j,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),gt(E,"renderTooltip",function(){var C,R=E.props,N=R.children,D=R.accessibilityLayer,Z=Ma(N,Ss);if(!Z)return null;var j=E.state,L=j.isTooltipActive,B=j.activeCoordinate,z=j.activePayload,W=j.activeLabel,q=j.offset,K=(C=Z.props.active)!==null&&C!==void 0?C:L;return k.cloneElement(Z,{viewBox:_e(_e({},q),{},{x:q.left,y:q.top}),active:K,label:W,payload:K?z:[],coordinate:B,accessibilityLayer:D})}),gt(E,"renderBrush",function(C){var R=E.props,N=R.margin,D=R.data,Z=E.state,j=Z.offset,L=Z.dataStartIndex,B=Z.dataEndIndex,z=Z.updateId;return k.cloneElement(C,{key:C.key||"_recharts-brush",onChange:n_(E.handleBrushChange,C.props.onChange),data:D,x:$e(C.props.x)?C.props.x:j.left,y:$e(C.props.y)?C.props.y:j.top+j.height+j.brushBottom-(N.bottom||0),width:$e(C.props.width)?C.props.width:j.width,startIndex:L,endIndex:B,updateId:"brush-".concat(z)})}),gt(E,"renderReferenceElement",function(C,R,N){if(!C)return null;var D=E,Z=D.clipPathId,j=E.state,L=j.xAxisMap,B=j.yAxisMap,z=j.offset,W=C.type.defaultProps||{},q=C.props,K=q.xAxisId,V=K===void 0?W.xAxisId:K,J=q.yAxisId,Q=J===void 0?W.yAxisId:J;return k.cloneElement(C,{key:C.key||"".concat(R,"-").concat(N),xAxis:L[V],yAxis:B[Q],viewBox:{x:z.left,y:z.top,width:z.width,height:z.height},clipPathId:Z})}),gt(E,"renderActivePoints",function(C){var R=C.item,N=C.activePoint,D=C.basePoint,Z=C.childIndex,j=C.isRange,L=[],B=R.props.key,z=R.item.type.defaultProps!==void 0?_e(_e({},R.item.type.defaultProps),R.item.props):R.item.props,W=z.activeDot,q=z.dataKey,K=_e(_e({index:Z,dataKey:q,cx:N.x,cy:N.y,r:4,fill:KM(R.item),strokeWidth:2,stroke:"#fff",payload:N.payload,value:N.value},mt(W,!1)),ix(W));return L.push(x.renderActiveDot(W,K,"".concat(B,"-activePoint-").concat(Z))),D?L.push(x.renderActiveDot(W,_e(_e({},K),{},{cx:D.x,cy:D.y}),"".concat(B,"-basePoint-").concat(Z))):j&&L.push(null),L}),gt(E,"renderGraphicChild",function(C,R,N){var D=E.filterFormatItem(C,R,N);if(!D)return null;var Z=E.getTooltipEventType(),j=E.state,L=j.isTooltipActive,B=j.tooltipAxis,z=j.activeTooltipIndex,W=j.activeLabel,q=E.props.children,K=Ma(q,Ss),V=D.props,J=V.points,Q=V.isRange,M=V.baseLine,Y=D.item.type.defaultProps!==void 0?_e(_e({},D.item.type.defaultProps),D.item.props):D.item.props,se=Y.activeDot,ge=Y.hide,ue=Y.activeBar,H=Y.activeShape,$=!!(!ge&&L&&K&&(se||ue||H)),ne={};Z!=="axis"&&K&&K.props.trigger==="click"?ne={onClick:n_(E.handleItemMouseEnter,C.props.onClick)}:Z!=="axis"&&(ne={onMouseLeave:n_(E.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:n_(E.handleItemMouseEnter,C.props.onMouseEnter)});var X=k.cloneElement(C,_e(_e({},D.props),ne));function pe(br){return typeof B.dataKey=="function"?B.dataKey(br.payload):null}if($)if(z>=0){var ye,le;if(B.dataKey&&!B.allowDuplicatedCategory){var Ne=typeof B.dataKey=="function"?pe:"payload.".concat(B.dataKey.toString());ye=rx(J,Ne,W),le=Q&&M&&rx(M,Ne,W)}else ye=J==null?void 0:J[z],le=Q&&M&&M[z];if(H||ue){var je=C.props.activeIndex!==void 0?C.props.activeIndex:z;return[k.cloneElement(C,_e(_e(_e({},D.props),ne),{},{activeIndex:je})),null,null]}if(!At(ye))return[X].concat(zp(E.renderActivePoints({item:D,activePoint:ye,basePoint:le,childIndex:z,isRange:Q})))}else{var Xe,st=(Xe=E.getItemByXY(E.state.activeCoordinate))!==null&&Xe!==void 0?Xe:{graphicalItem:X},kt=st.graphicalItem,vn=kt.item,gn=vn===void 0?C:vn,bn=kt.childIndex,_n=_e(_e(_e({},D.props),ne),{},{activeIndex:bn});return[k.cloneElement(gn,_n),null,null]}return Q?[X,null,null]:[X,null]}),gt(E,"renderCustomized",function(C,R,N){return k.cloneElement(C,_e(_e({key:"recharts-customized-".concat(N)},E.props),E.state))}),gt(E,"renderMap",{CartesianGrid:{handler:o_,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:o_},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:o_},YAxis:{handler:o_},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((T=w.id)!==null&&T!==void 0?T:mm("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=qQ(E.triggeredAfterMouseMove,(A=w.throttleDelay)!==null&&A!==void 0?A:1e3/60),E.state={},E}return tDe(x,b),JLe(x,[{key:"componentDidMount",value:function(){var T,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var T=this.props,A=T.children,E=T.data,C=T.height,R=T.layout,N=Ma(A,Ss);if(N){var D=N.props.defaultIndex;if(!(typeof D!="number"||D<0||D>this.state.tooltipTicks.length-1)){var Z=this.state.tooltipTicks[D]&&this.state.tooltipTicks[D].value,j=Pj(this.state,E,D,Z),L=this.state.tooltipTicks[D].coordinate,B=(this.state.offset.top+C)/2,z=R==="horizontal",W=z?{x:L,y:B}:{y:L,x:B},q=this.state.formattedGraphicalItems.find(function(V){var J=V.item;return J.type.name==="Scatter"});q&&(W=_e(_e({},W),q.props.points[D].tooltipPosition),j=q.props.points[D].tooltipPayload);var K={activeTooltipIndex:D,isTooltipActive:!0,activeLabel:Z,activePayload:j,activeCoordinate:W};this.setState(K),this.renderCursor(N),this.accessibilityManager.setIndex(D)}}}},{key:"getSnapshotBeforeUpdate",value:function(T,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==T.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==T.margin){var E,C;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(T){hR([Ma(T.children,Ss)],[Ma(this.props.children,Ss)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var T=Ma(this.props.children,Ss);if(T&&typeof T.props.shared=="boolean"){var A=T.props.shared?"axis":"item";return o.indexOf(A)>=0?A:a}return a}},{key:"getMouseInfo",value:function(T){if(!this.container)return null;var A=this.container,E=A.getBoundingClientRect(),C=SAe(E),R={chartX:Math.round(T.pageX-C.left),chartY:Math.round(T.pageY-C.top)},N=E.width/A.offsetWidth||1,D=this.inRange(R.chartX,R.chartY,N);if(!D)return null;var Z=this.state,j=Z.xAxisMap,L=Z.yAxisMap,B=this.getTooltipEventType();if(B!=="axis"&&j&&L){var z=xu(j).scale,W=xu(L).scale,q=z&&z.invert?z.invert(R.chartX):null,K=W&&W.invert?W.invert(R.chartY):null;return _e(_e({},R),{},{xValue:q,yValue:K})}var V=h9(this.state,this.props.data,this.props.layout,D);return V?_e(_e({},R),V):null}},{key:"inRange",value:function(T,A){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,R=T/E,N=A/E;if(C==="horizontal"||C==="vertical"){var D=this.state.offset,Z=R>=D.left&&R<=D.left+D.width&&N>=D.top&&N<=D.top+D.height;return Z?{x:R,y:N}:null}var j=this.state,L=j.angleAxisMap,B=j.radiusAxisMap;if(L&&B){var z=xu(L);return v8({x:R,y:N},z)}return null}},{key:"parseEventsOfWrapper",value:function(){var T=this.props.children,A=this.getTooltipEventType(),E=Ma(T,Ss),C={};E&&A==="axis"&&(E.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var R=ix(this.props,this.handleOuterEvent);return _e(_e({},R),C)}},{key:"addListener",value:function(){kN.on(NN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){kN.removeListener(NN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(T,A,E){for(var C=this.state.formattedGraphicalItems,R=0,N=C.length;R<N;R++){var D=C[R];if(D.item===T||D.props.key===T.key||A===dc(D.item.type)&&E===D.childIndex)return D}return null}},{key:"renderClipPath",value:function(){var T=this.clipPathId,A=this.state.offset,E=A.left,C=A.top,R=A.height,N=A.width;return ee.createElement("defs",null,ee.createElement("clipPath",{id:T},ee.createElement("rect",{x:E,y:C,height:R,width:N})))}},{key:"getXScales",value:function(){var T=this.state.xAxisMap;return T?Object.entries(T).reduce(function(A,E){var C=u9(E,2),R=C[0],N=C[1];return _e(_e({},A),{},gt({},R,N.scale))},{}):null}},{key:"getYScales",value:function(){var T=this.state.yAxisMap;return T?Object.entries(T).reduce(function(A,E){var C=u9(E,2),R=C[0],N=C[1];return _e(_e({},A),{},gt({},R,N.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(T){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[T])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(T){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[T])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(T){var A=this.state,E=A.formattedGraphicalItems,C=A.activeItem;if(E&&E.length)for(var R=0,N=E.length;R<N;R++){var D=E[R],Z=D.props,j=D.item,L=j.type.defaultProps!==void 0?_e(_e({},j.type.defaultProps),j.props):j.props,B=dc(j.type);if(B==="Bar"){var z=(Z.data||[]).find(function(V){return HRe(T,V)});if(z)return{graphicalItem:D,payload:z}}else if(B==="RadialBar"){var W=(Z.data||[]).find(function(V){return v8(T,V)});if(W)return{graphicalItem:D,payload:W}}else if(XS(D,C)||JS(D,C)||xv(D,C)){var q=h2e({graphicalItem:D,activeTooltipItem:C,itemData:L.data}),K=L.activeIndex===void 0?q:L.activeIndex;return{graphicalItem:_e(_e({},D),{},{childIndex:K}),payload:xv(D,C)?L.data[q]:D.props.data[q]}}}return null}},{key:"render",value:function(){var T=this;if(!kF(this))return null;var A=this.props,E=A.children,C=A.className,R=A.width,N=A.height,D=A.style,Z=A.compact,j=A.title,L=A.desc,B=d9(A,HLe),z=mt(B,!1);if(Z)return ee.createElement(Wq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ee.createElement(mR,Lh({},z,{width:R,height:N,title:j,desc:L}),this.renderClipPath(),IF(E,this.renderMap)));if(this.props.accessibilityLayer){var W,q;z.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,z.role=(q=this.props.role)!==null&&q!==void 0?q:"application",z.onKeyDown=function(V){T.accessibilityManager.keyboardEvent(V)},z.onFocus=function(){T.accessibilityManager.focus()}}var K=this.parseEventsOfWrapper();return ee.createElement(Wq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ee.createElement("div",Lh({className:Ct("recharts-wrapper",C),style:_e({position:"relative",cursor:"default",width:R,height:N},D)},K,{ref:function(J){T.container=J}}),ee.createElement(mR,Lh({},z,{width:R,height:N,title:j,desc:L,style:oDe}),this.renderClipPath(),IF(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(k.Component);gt(_,"displayName",n),gt(_,"defaultProps",_e({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),gt(_,"getDerivedStateFromProps",function(b,x){var w=b.dataKey,T=b.data,A=b.children,E=b.width,C=b.height,R=b.layout,N=b.stackOffset,D=b.margin,Z=x.dataStartIndex,j=x.dataEndIndex;if(x.updateId===void 0){var L=p9(b);return _e(_e(_e({},L),{},{updateId:0},m(_e(_e({props:b},L),{},{updateId:0}),x)),{},{prevDataKey:w,prevData:T,prevWidth:E,prevHeight:C,prevLayout:R,prevStackOffset:N,prevMargin:D,prevChildren:A})}if(w!==x.prevDataKey||T!==x.prevData||E!==x.prevWidth||C!==x.prevHeight||R!==x.prevLayout||N!==x.prevStackOffset||!Qh(D,x.prevMargin)){var B=p9(b),z={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},W=_e(_e({},h9(x,T,R)),{},{updateId:x.updateId+1}),q=_e(_e(_e({},B),z),W);return _e(_e(_e({},q),m(_e({props:b},q),x)),{},{prevDataKey:w,prevData:T,prevWidth:E,prevHeight:C,prevLayout:R,prevStackOffset:N,prevMargin:D,prevChildren:A})}if(!hR(A,x.prevChildren)){var K,V,J,Q,M=Ma(A,Np),Y=M&&(K=(V=M.props)===null||V===void 0?void 0:V.startIndex)!==null&&K!==void 0?K:Z,se=M&&(J=(Q=M.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&J!==void 0?J:j,ge=Y!==Z||se!==j,ue=!At(T),H=ue&&!ge?x.updateId:x.updateId+1;return _e(_e({updateId:H},m(_e(_e({props:b},x),{},{updateId:H,dataStartIndex:Y,dataEndIndex:se}),x)),{},{prevChildren:A,dataStartIndex:Y,dataEndIndex:se})}return null}),gt(_,"renderActiveDot",function(b,x,w){var T;return k.isValidElement(b)?T=k.cloneElement(b,x):xt(b)?T=b(x):T=ee.createElement(WS,x),ee.createElement(Yt,{className:"recharts-active-dot",key:w},T)});var y=k.forwardRef(function(x,w){return ee.createElement(_,Lh({},x,{ref:w}))});return y.displayName=_.displayName,y},yDe=aL({chartName:"LineChart",GraphicalChild:xb,axisComponents:[{axisType:"xAxis",AxisComp:Dp},{axisType:"yAxis",AxisComp:Fp}],formatAxisMap:kte}),vDe=aL({chartName:"BarChart",GraphicalChild:Sf,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Dp},{axisType:"yAxis",AxisComp:Fp}],formatAxisMap:kte}),bDe=aL({chartName:"PieChart",GraphicalChild:$c,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:ZS},{axisType:"radiusAxis",AxisComp:GS}],formatAxisMap:tIe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const _De=({data:t})=>{const[e,n]=k.useState("bar"),r=a=>Array.isArray(a)?`${a[0]??0}`:`${a??0}`,i=a=>a.length>8?a.slice(5):a;return g.jsxs(Mt,{children:[g.jsxs(On,{className:"pb-2 flex flex-row items-center justify-between space-y-0",children:[g.jsx(Cn,{className:"text-sm font-medium",children:""}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx(Se,{variant:e==="bar"?"default":"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>n("bar"),"aria-pressed":e==="bar",children:""}),g.jsx(Se,{variant:e==="line"?"default":"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>n("line"),"aria-pressed":e==="line",children:""})]})]}),g.jsx(Vt,{className:"pt-0",children:g.jsx(HQ,{width:"100%",height:200,children:e==="bar"?g.jsxs(vDe,{data:t,margin:{top:4,right:8,left:-20,bottom:0},children:[g.jsx(wj,{strokeDasharray:"3 3",className:"stroke-border"}),g.jsx(Dp,{dataKey:"label",tickFormatter:i,tick:{fontSize:10},className:"text-muted-foreground"}),g.jsx(Fp,{tick:{fontSize:10},className:"text-muted-foreground"}),g.jsx(Ss,{formatter:a=>[r(a),""],contentStyle:{fontSize:12}}),g.jsx(Sf,{dataKey:"focusMinutes",fill:"hsl(var(--primary))",radius:[3,3,0,0]})]}):g.jsxs(yDe,{data:t,margin:{top:4,right:8,left:-20,bottom:0},children:[g.jsx(wj,{strokeDasharray:"3 3",className:"stroke-border"}),g.jsx(Dp,{dataKey:"label",tickFormatter:i,tick:{fontSize:10},className:"text-muted-foreground"}),g.jsx(Fp,{tick:{fontSize:10},className:"text-muted-foreground"}),g.jsx(Ss,{formatter:a=>[r(a),""],contentStyle:{fontSize:12}}),g.jsx(xb,{type:"monotone",dataKey:"focusMinutes",stroke:"hsl(var(--primary))",strokeWidth:2,dot:!1})]})})})]})},wDe=["","","","","","",""],g9=Array.from({length:24},(t,e)=>e);function xDe(t,e){if(t===0||e===0)return"hsl(var(--muted))";const n=Math.min(t/e,1);return`hsl(var(--primary-hsl, 221 83% ${Math.round(65-n*40)}%))`}const SDe=({data:t})=>{const e=k.useMemo(()=>{const r=new Map;for(const i of t)r.set(`${i.weekday}-${i.hour}`,i.minutes);return r},[t]),n=k.useMemo(()=>Math.max(...t.map(r=>r.minutes),1),[t]);return g.jsxs(Mt,{children:[g.jsx(On,{className:"pb-2",children:g.jsx(Cn,{className:"text-sm font-medium",children:" "})}),g.jsx(Vt,{className:"pt-0 overflow-x-auto",children:g.jsxs("div",{className:"min-w-[480px]",children:[g.jsx("div",{className:"flex ml-6 mb-0.5",children:g9.map(r=>g.jsx("div",{className:"flex-1 text-center text-[9px] text-muted-foreground leading-none",children:r%3===0?r:""},r))}),wDe.map((r,i)=>g.jsxs("div",{className:"flex items-center mb-0.5",children:[g.jsx("span",{className:"w-6 text-[10px] text-muted-foreground text-right pr-1 shrink-0",children:r}),g9.map(a=>{const s=e.get(`${i}-${a}`)??0;return g.jsx("div",{className:"flex-1 aspect-square rounded-[2px] m-[1px]",style:{backgroundColor:xDe(s,n)},title:s>0?`${r} ${a}: ${s}`:void 0,"aria-label":s>0?`${r}${a} ${s}`:void 0},a)})]},i))]})})]})},y9=["hsl(221, 83%, 53%)","hsl(142, 71%, 45%)","hsl(38, 92%, 50%)","hsl(0, 84%, 60%)","hsl(270, 60%, 55%)","hsl(190, 80%, 45%)"],TDe=({data:t})=>{const e=n=>Array.isArray(n)?`${n[0]??0}`:`${n??0}`;return t.length===0?g.jsxs(Mt,{children:[g.jsx(On,{className:"pb-2",children:g.jsx(Cn,{className:"text-sm font-medium",children:""})}),g.jsx(Vt,{className:"pt-0 flex items-center justify-center h-[200px]",children:g.jsx("p",{className:"text-sm text-muted-foreground",children:""})})]}):g.jsxs(Mt,{children:[g.jsx(On,{className:"pb-2",children:g.jsx(Cn,{className:"text-sm font-medium",children:""})}),g.jsx(Vt,{className:"pt-0",children:g.jsx(HQ,{width:"100%",height:200,children:g.jsxs(bDe,{children:[g.jsx($c,{data:t,cx:"50%",cy:"50%",innerRadius:"50%",outerRadius:"80%",dataKey:"value",nameKey:"name",children:t.map((n,r)=>g.jsx(RS,{fill:y9[r%y9.length]},r))}),g.jsx(Ss,{formatter:(n,r)=>[e(n),String(r??"")],contentStyle:{fontSize:12}}),g.jsx(Zd,{formatter:n=>g.jsx("span",{style:{fontSize:11},children:n})})]})})})]})},EDe=[{value:"day",label:""},{value:"week",label:""},{value:"month",label:""}],ADe=[{value:"all",label:""},{value:"basic",label:""},{value:"pomodoro",label:""},{value:"multi",label:""}],ODe=[{label:"7",days:7},{label:"30",days:30},{label:"90",days:90}];function CDe(t){if(t<60)return`${t}`;const e=Math.floor(t/60),n=t%60;return n>0?`${e}h ${n}m`:`${e}h`}const kDe=({filter:t,result:e,onSetGranularity:n,onSetTimerKind:r,onSetDateRange:i,onExportCsv:a})=>{const{kpi:s,trend:o,heatmap:l,donut:c}=e,u=k.useCallback(p=>{const m=new Date;m.setHours(23,59,59,999);const _=new Date;_.setDate(_.getDate()-(p-1)),_.setHours(0,0,0,0),i(_,m)},[i]),f=s.sessions>0?Math.round(s.completedSessions/s.sessions*100):0;return g.jsxs("div",{className:"space-y-4 py-2",children:[g.jsxs("div",{className:"flex flex-wrap gap-2 items-center",role:"region","aria-label":"",children:[g.jsx("div",{className:"flex gap-1",children:ODe.map(({label:p,days:m})=>g.jsx(Se,{variant:"outline",size:"sm",className:"h-8 text-xs px-2",onClick:()=>u(m),children:p},m))}),g.jsxs(_c,{value:t.granularity,onValueChange:p=>n(p),children:[g.jsx(bl,{className:"h-8 w-24 text-xs","aria-label":"",children:g.jsx(wc,{})}),g.jsx(_l,{children:EDe.map(p=>g.jsx(Ln,{value:p.value,className:"text-xs",children:p.label},p.value))})]}),g.jsxs(_c,{value:t.timerKind??"all",onValueChange:p=>r(p==="all"?void 0:p),children:[g.jsx(bl,{className:"h-8 w-36 text-xs","aria-label":"",children:g.jsx(wc,{})}),g.jsx(_l,{children:ADe.map(p=>g.jsx(Ln,{value:p.value,className:"text-xs",children:p.label},p.value))})]}),g.jsxs(Se,{variant:"outline",size:"sm",className:"h-8 ml-auto text-xs",onClick:a,"aria-label":"CSV",children:[g.jsx(H$,{className:"w-3 h-3 mr-1"}),"CSV"]})]}),g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[g.jsx(K0,{label:"",value:CDe(s.focusMinutes),sub:`${s.sessions}`}),g.jsx(K0,{label:"",value:`${s.completedSessions}`,sub:` ${f}%`}),g.jsx(K0,{label:"",value:`${s.pomodoroAchievementRate}%`}),g.jsx(K0,{label:"",value:`${s.meetingOvertimeRate}%`})]}),g.jsx(_De,{data:o}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsx(SDe,{data:l}),g.jsx(TDe,{data:c})]})]})},NDe=()=>{const{filter:t,setGranularity:e,setDateRange:n,setTimerKind:r}=Nxe(),i=BY(_=>_.history),a=FY(_=>_.sessions),s=Ic(_=>_.meetings),o=mp(_=>_.timers),l=mp(_=>_.sessions),c=k.useMemo(()=>{const _={};for(const y of o){if(!y.isCompleted)continue;const b=y.category??"",x=Math.max(0,Math.round((y.duration-y.remainingTime)/60));_[b]=(_[b]??0)+x}for(const y of l){const b=y.category??"",x=Math.round(y.duration/60);_[b]=(_[b]??0)+x}return _},[o,l]),u=k.useMemo(()=>o.filter(_=>_.isCompleted).length,[o]),f=k.useMemo(()=>({basicHistory:i,pomodoroSessions:a,meetings:s,multiCompletedCount:u,multiTotalCount:o.length,multiCategoryMap:c}),[i,a,s,u,o.length,c]),p=k.useMemo(()=>Lxe.compute(t,f),[t,f]),m=()=>{const y=[["","()","",""],...p.trend.map(T=>[T.label,T.focusMinutes,T.sessions,T.completedSessions])].map(T=>T.join(",")).join(`
`),b=new Blob([y],{type:"text/csv;charset=utf-8;"}),x=URL.createObjectURL(b),w=document.createElement("a");w.href=x,w.download=`analytics_${t.since.toISOString().slice(0,10)}_${t.until.toISOString().slice(0,10)}.csv`,w.click(),URL.revokeObjectURL(x)};return g.jsx(kDe,{filter:t,result:p,onSetGranularity:_=>e(_),onSetTimerKind:_=>r(_),onSetDateRange:n,onExportCsv:m})},IDe=({children:t})=>{const[e,n]=k.useState([]),[r,i]=k.useState([]),[a,s]=k.useState("all"),[o,l]=k.useState("all"),[c,u]=k.useState(""),[f,p]=k.useState(!1),[m,_]=k.useState({});k.useEffect(()=>{if(f){const N=Xt.getStoredLogs();n(N)}},[f]),k.useEffect(()=>{let N=e;if(a!=="all"){const D=pn[a];N=N.filter(Z=>Z.level===D)}if(o!=="all"&&(N=N.filter(D=>D.category===o)),c){const D=c.toLowerCase();N=N.filter(Z=>Z.message.toLowerCase().includes(D)||Z.category.toLowerCase().includes(D)||Z.data&&JSON.stringify(Z.data).toLowerCase().includes(D))}i(N)},[e,a,o,c]);const y=Xt.getLogStatistics(),b=k.useMemo(()=>Array.from(new Set(e.map(D=>D.category))).sort(),[e]),x=N=>{switch(N){case pn.ERROR:return g.jsx(Vw,{className:"h-4 w-4 text-red-500"});case pn.WARN:return g.jsx(G$,{className:"h-4 w-4 text-yellow-500"});case pn.INFO:return g.jsx(Gw,{className:"h-4 w-4 text-blue-500"});case pn.DEBUG:return g.jsx(cS,{className:"h-4 w-4 text-green-500"});case pn.TRACE:return g.jsx(W$,{className:"h-4 w-4 text-gray-500"});default:return g.jsx(Gw,{className:"h-4 w-4"})}},w=N=>{switch(N){case pn.ERROR:return"destructive";case pn.WARN:return"outline";case pn.INFO:return"default";case pn.DEBUG:return"secondary";case pn.TRACE:return"outline";default:return"default"}},T=()=>{const N=Xt.exportLogs(),D=new Blob([N],{type:"application/json"}),Z=URL.createObjectURL(D),j=document.createElement("a");j.href=Z,j.download=`timer-app-logs-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(Z)},A=()=>{window.confirm("")&&(Xt.clearLogs(),n([]),i([]),_({}))},E=async N=>{const D=qY([N]);try{await navigator.clipboard.writeText(D),_(Z=>({...Z,[N.id]:"AI"}))}catch(Z){Xt.warn("Failed to copy AI prompt",{error:Z,logId:N.id},"ui"),_(j=>({...j,[N.id]:""}))}},C=N=>new Date(N).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),R=({entry:N})=>g.jsx(Mt,{className:"mb-2",children:g.jsxs(Vt,{className:"p-4",children:[g.jsxs("div",{className:"flex items-start justify-between mb-2 gap-2",children:[g.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[x(N.level),g.jsx(ir,{variant:w(N.level),children:pn[N.level]}),g.jsx(ir,{variant:"outline",children:N.category})]}),g.jsx("span",{className:"text-xs text-muted-foreground",children:C(N.timestamp)})]}),g.jsx("p",{className:"text-sm font-medium mb-2",children:N.message}),g.jsxs("div",{className:"mb-2",children:[g.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>E(N),children:[g.jsx(oS,{className:"h-4 w-4 mr-2"}),"AI"]}),m[N.id]&&g.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:m[N.id]})]}),N.data!==void 0&&g.jsxs("details",{className:"text-xs",children:[g.jsx("summary",{className:"cursor-pointer text-muted-foreground mb-1",children:""}),g.jsx("pre",{className:"bg-muted p-2 rounded text-xs overflow-x-auto",children:JSON.stringify(N.data,null,2)})]}),N.stackTrace&&g.jsxs("details",{className:"text-xs mt-2",children:[g.jsx("summary",{className:"cursor-pointer text-muted-foreground mb-1",children:""}),g.jsx("pre",{className:"bg-muted p-2 rounded text-xs overflow-x-auto",children:N.stackTrace})]})]})});return g.jsxs(Ms,{open:f,onOpenChange:p,children:[g.jsx(ub,{asChild:!0,children:t}),g.jsxs(Ja,{className:"max-w-6xl h-[80vh] overflow-hidden flex flex-col",children:[g.jsxs(Ya,{children:[g.jsx(Qa,{children:""}),g.jsx(kJ,{children:""})]}),g.jsxs(lp,{defaultValue:"logs",className:"flex h-full min-h-0 flex-col",children:[g.jsxs(cp,{className:"grid w-full grid-cols-2",children:[g.jsx(go,{value:"logs",children:""}),g.jsx(go,{value:"statistics",children:""})]}),g.jsx(ri,{value:"logs",className:"flex-1 min-h-0",children:g.jsxs("div",{className:"space-y-4 h-full min-h-0 flex flex-col",children:[g.jsxs("div",{className:"flex gap-4 flex-wrap shrink-0",children:[g.jsx("div",{className:"flex-1 min-w-[200px]",children:g.jsx(Bn,{placeholder:"...",value:c,onChange:N=>u(N.target.value),className:"w-full"})}),g.jsxs(_c,{value:a,onValueChange:s,children:[g.jsx(bl,{className:"w-[150px]",children:g.jsx(wc,{placeholder:""})}),g.jsxs(_l,{children:[g.jsx(Ln,{value:"all",children:""}),g.jsx(Ln,{value:"ERROR",children:""}),g.jsx(Ln,{value:"WARN",children:""}),g.jsx(Ln,{value:"INFO",children:""}),g.jsx(Ln,{value:"DEBUG",children:""}),g.jsx(Ln,{value:"TRACE",children:""})]})]}),g.jsxs(_c,{value:o,onValueChange:l,children:[g.jsx(bl,{className:"w-[150px]",children:g.jsx(wc,{placeholder:""})}),g.jsxs(_l,{children:[g.jsx(Ln,{value:"all",children:""}),b.map(N=>g.jsx(Ln,{value:N,children:N},N))]})]}),g.jsxs(Se,{variant:"outline",onClick:T,size:"sm",children:[g.jsx(H$,{className:"h-4 w-4 mr-2"}),""]}),g.jsxs(Se,{variant:"outline",onClick:A,size:"sm",children:[g.jsx(No,{className:"h-4 w-4 mr-2"}),""]})]}),g.jsx(af,{className:"flex-1 min-h-0",children:g.jsx("div",{className:"space-y-2",children:r.length===0?g.jsx(Mt,{children:g.jsx(Vt,{className:"p-8 text-center",children:g.jsx("p",{className:"text-muted-foreground",children:e.length===0?"":""})})}):r.map(N=>g.jsx(R,{entry:N},N.id))})})]})}),g.jsx(ri,{value:"statistics",className:"flex-1 min-h-0",children:g.jsx(af,{className:"h-full",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs(Mt,{children:[g.jsx(On,{children:g.jsx(Cn,{children:""})}),g.jsx(Vt,{children:g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:":"}),g.jsx("span",{className:"font-medium",children:y.totalLogs})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:":"}),g.jsx("span",{className:"font-medium",children:y.sessionCount})]}),y.oldestLog&&g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:":"}),g.jsx("span",{className:"font-medium text-xs",children:C(y.oldestLog)})]}),y.newestLog&&g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:":"}),g.jsx("span",{className:"font-medium text-xs",children:C(y.newestLog)})]})]})})]}),g.jsxs(Mt,{children:[g.jsx(On,{children:g.jsx(Cn,{children:""})}),g.jsx(Vt,{children:g.jsx("div",{className:"space-y-2",children:Object.entries(y.logsByLevel).map(([N,D])=>g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[x(pn[N]),g.jsx("span",{children:N})]}),g.jsx(ir,{variant:"outline",children:D})]},N))})})]}),g.jsxs(Mt,{className:"md:col-span-2",children:[g.jsx(On,{children:g.jsx(Cn,{children:""})}),g.jsx(Vt,{children:g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(y.logsByCategory).map(([N,D])=>g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm",children:N}),g.jsx(ir,{variant:"secondary",children:D})]},N))})})]})]})})})]})]})]})};class Dh extends k.Component{constructor(){super(...arguments);U(this,"state",{hasError:!1,error:null,errorInfo:null});U(this,"handleReload",()=>{var n;Xt.userAction("Error boundary reload clicked",{component:this.props.componentName||"Unknown",error:(n=this.state.error)==null?void 0:n.message}),window.location.reload()});U(this,"handleReset",()=>{var n;Xt.userAction("Error boundary reset clicked",{component:this.props.componentName||"Unknown",error:(n=this.state.error)==null?void 0:n.message}),this.setState({hasError:!1,error:null,errorInfo:null})})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){const i=this.props.componentName||"Unknown";Xt.error(`Error boundary caught error in ${i}`,{message:n.message,stack:n.stack,componentStack:r.componentStack,errorBoundary:i,props:this.props,timestamp:new Date().toISOString()},"error"),this.setState({error:n,errorInfo:r}),console.error("ErrorBoundary caught an error:",n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:g.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:g.jsxs(Mt,{className:"w-full max-w-lg",children:[g.jsxs(On,{className:"text-center",children:[g.jsx("div",{className:"flex justify-center mb-4",children:g.jsx(G$,{className:"h-12 w-12 text-red-500"})}),g.jsx(Cn,{className:"text-red-600",children:""}),g.jsx(K$,{children:this.props.componentName?`${this.props.componentName}`:""})]}),g.jsxs(Vt,{className:"space-y-4",children:[this.state.error&&g.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:[g.jsx("p",{className:"text-sm text-red-800 font-medium",children:":"}),g.jsx("p",{className:"text-sm text-red-700 mt-1",children:this.state.error.message})]}),!1,g.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[g.jsxs(Se,{onClick:this.handleReset,variant:"default",className:"flex-1",children:[g.jsx(Kw,{className:"w-4 h-4 mr-2"}),""]}),g.jsxs(Se,{onClick:this.handleReload,variant:"outline",className:"flex-1",children:[g.jsx(Kw,{className:"w-4 h-4 mr-2"}),""]}),g.jsx(IDe,{children:g.jsxs(Se,{variant:"outline",size:"sm",children:[g.jsx(Vw,{className:"w-4 h-4 mr-2"}),""]})})]}),g.jsx("div",{className:"text-sm text-gray-600 text-center pt-2",children:g.jsx("p",{children:" "})})]})]})}):this.props.children}}const une=[{value:"basic",label:""},{value:"pomodoro",label:""},{value:"multi",label:""},{value:"dashboard",label:""}];function PDe(){try{const t=localStorage.getItem("timer-sub-tab");if(t&&une.some(e=>e.value===t))return t}catch{}return"basic"}const RDe=()=>{const[t,e]=k.useState(PDe),n=r=>{e(r);try{localStorage.setItem("timer-sub-tab",r)}catch{}};return g.jsxs(lp,{value:t,onValueChange:n,className:"flex flex-col",children:[g.jsx(cp,{className:"mb-2 w-full justify-start",children:une.map(({value:r,label:i})=>g.jsx(go,{value:r,children:i},r))}),g.jsx(ri,{value:"basic",children:g.jsx(Dh,{componentName:"BasicTimer",children:g.jsx(yxe,{})})}),g.jsx(ri,{value:"pomodoro",children:g.jsx(Dh,{componentName:"EnhancedPomodoroTimer",children:g.jsx(_xe,{})})}),g.jsx(ri,{value:"multi",children:g.jsx(Dh,{componentName:"MultiTimer",children:g.jsx(Cxe,{})})}),g.jsx(ri,{value:"dashboard",children:g.jsx(Dh,{componentName:"Dashboard",children:g.jsx(NDe,{})})})]})};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:dne,setPrototypeOf:v9,isFrozen:jDe,getPrototypeOf:$De,getOwnPropertyDescriptor:MDe}=Object;let{freeze:zi,seal:Rs,create:Rj}=Object,{apply:jj,construct:$j}=typeof Reflect<"u"&&Reflect;zi||(zi=function(e){return e});Rs||(Rs=function(e){return e});jj||(jj=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return e.apply(n,i)});$j||($j=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(...r)});const l_=qi(Array.prototype.forEach),LDe=qi(Array.prototype.lastIndexOf),b9=qi(Array.prototype.pop),vg=qi(Array.prototype.push),DDe=qi(Array.prototype.splice),mw=qi(String.prototype.toLowerCase),PN=qi(String.prototype.toString),RN=qi(String.prototype.match),bg=qi(String.prototype.replace),BDe=qi(String.prototype.indexOf),FDe=qi(String.prototype.trim),ao=qi(Object.prototype.hasOwnProperty),Ni=qi(RegExp.prototype.test),_g=UDe(TypeError);function qi(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return jj(t,e,r)}}function UDe(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return $j(t,n)}}function Bt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mw;v9&&v9(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const a=n(i);a!==i&&(jDe(e)||(e[r]=a),i=a)}t[i]=!0}return t}function zDe(t){for(let e=0;e<t.length;e++)ao(t,e)||(t[e]=null);return t}function Yo(t){const e=Rj(null);for(const[n,r]of dne(t))ao(t,n)&&(Array.isArray(r)?e[n]=zDe(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Yo(r):e[n]=r);return e}function wg(t,e){for(;t!==null;){const r=MDe(t,e);if(r){if(r.get)return qi(r.get);if(typeof r.value=="function")return qi(r.value)}t=$De(t)}function n(){return null}return n}const _9=zi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),jN=zi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$N=zi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qDe=zi(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),MN=zi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),HDe=zi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),w9=zi(["#text"]),x9=zi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),LN=zi(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),S9=zi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),c_=zi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),WDe=Rs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),VDe=Rs(/<%[\w\W]*|[\w\W]*%>/gm),GDe=Rs(/\$\{[\w\W]*/gm),KDe=Rs(/^data-[\-\w.\u00B7-\uFFFF]+$/),ZDe=Rs(/^aria-[\-\w]+$/),fne=Rs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),XDe=Rs(/^(?:\w+script|data):/i),JDe=Rs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hne=Rs(/^html$/i),YDe=Rs(/^[a-z][.\w]*(-[.\w]+)+$/i);var T9=Object.freeze({__proto__:null,ARIA_ATTR:ZDe,ATTR_WHITESPACE:JDe,CUSTOM_ELEMENT:YDe,DATA_ATTR:KDe,DOCTYPE_NAME:hne,ERB_EXPR:VDe,IS_ALLOWED_URI:fne,IS_SCRIPT_OR_DATA:XDe,MUSTACHE_EXPR:WDe,TMPLIT_EXPR:GDe});const xg={element:1,text:3,progressingInstruction:7,comment:8,document:9},QDe=function(){return typeof window>"u"?null:window},e4e=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const a="dompurify"+(r?"#"+r:"");try{return e.createPolicy(a,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},E9=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function pne(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QDe();const e=Ge=>pne(Ge);if(e.version="3.3.1",e.removed=[],!t||!t.document||t.document.nodeType!==xg.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:m}=t,_=l.prototype,y=wg(_,"cloneNode"),b=wg(_,"remove"),x=wg(_,"nextSibling"),w=wg(_,"childNodes"),T=wg(_,"parentNode");if(typeof s=="function"){const Ge=n.createElement("template");Ge.content&&Ge.content.ownerDocument&&(n=Ge.content.ownerDocument)}let A,E="";const{implementation:C,createNodeIterator:R,createDocumentFragment:N,getElementsByTagName:D}=n,{importNode:Z}=r;let j=E9();e.isSupported=typeof dne=="function"&&typeof T=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:L,ERB_EXPR:B,TMPLIT_EXPR:z,DATA_ATTR:W,ARIA_ATTR:q,IS_SCRIPT_OR_DATA:K,ATTR_WHITESPACE:V,CUSTOM_ELEMENT:J}=T9;let{IS_ALLOWED_URI:Q}=T9,M=null;const Y=Bt({},[..._9,...jN,...$N,...MN,...w9]);let se=null;const ge=Bt({},[...x9,...LN,...S9,...c_]);let ue=Object.seal(Rj(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,$=null;const ne=Object.seal(Rj(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let X=!0,pe=!0,ye=!1,le=!0,Ne=!1,je=!0,Xe=!1,st=!1,kt=!1,vn=!1,gn=!1,bn=!1,_n=!0,br=!1;const ya="user-content-";let dr=!0,Rr=!1,va={},Jn=null;const bi=Bt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Fs=null;const sr=Bt({},["audio","video","img","source","image","track"]);let Gi=null;const Rl=Bt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Us="http://www.w3.org/1998/Math/MathML",ba="http://www.w3.org/2000/svg",jr="http://www.w3.org/1999/xhtml";let _i=jr,Ki=!1,wi=null;const Vr=Bt({},[Us,ba,jr],PN);let xi=Bt({},["mi","mo","mn","ms","mtext"]),Gr=Bt({},["annotation-xml"]);const oi=Bt({},["title","style","font","a","script"]);let Zi=null;const ns=["application/xhtml+xml","text/html"],Do="text/html";let hn=null,Si=null;const Xi=n.createElement("form"),Bo=function(ae){return ae instanceof RegExp||ae instanceof Function},_r=function(){let ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Si&&Si===ae)){if((!ae||typeof ae!="object")&&(ae={}),ae=Yo(ae),Zi=ns.indexOf(ae.PARSER_MEDIA_TYPE)===-1?Do:ae.PARSER_MEDIA_TYPE,hn=Zi==="application/xhtml+xml"?PN:mw,M=ao(ae,"ALLOWED_TAGS")?Bt({},ae.ALLOWED_TAGS,hn):Y,se=ao(ae,"ALLOWED_ATTR")?Bt({},ae.ALLOWED_ATTR,hn):ge,wi=ao(ae,"ALLOWED_NAMESPACES")?Bt({},ae.ALLOWED_NAMESPACES,PN):Vr,Gi=ao(ae,"ADD_URI_SAFE_ATTR")?Bt(Yo(Rl),ae.ADD_URI_SAFE_ATTR,hn):Rl,Fs=ao(ae,"ADD_DATA_URI_TAGS")?Bt(Yo(sr),ae.ADD_DATA_URI_TAGS,hn):sr,Jn=ao(ae,"FORBID_CONTENTS")?Bt({},ae.FORBID_CONTENTS,hn):bi,H=ao(ae,"FORBID_TAGS")?Bt({},ae.FORBID_TAGS,hn):Yo({}),$=ao(ae,"FORBID_ATTR")?Bt({},ae.FORBID_ATTR,hn):Yo({}),va=ao(ae,"USE_PROFILES")?ae.USE_PROFILES:!1,X=ae.ALLOW_ARIA_ATTR!==!1,pe=ae.ALLOW_DATA_ATTR!==!1,ye=ae.ALLOW_UNKNOWN_PROTOCOLS||!1,le=ae.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ne=ae.SAFE_FOR_TEMPLATES||!1,je=ae.SAFE_FOR_XML!==!1,Xe=ae.WHOLE_DOCUMENT||!1,vn=ae.RETURN_DOM||!1,gn=ae.RETURN_DOM_FRAGMENT||!1,bn=ae.RETURN_TRUSTED_TYPE||!1,kt=ae.FORCE_BODY||!1,_n=ae.SANITIZE_DOM!==!1,br=ae.SANITIZE_NAMED_PROPS||!1,dr=ae.KEEP_CONTENT!==!1,Rr=ae.IN_PLACE||!1,Q=ae.ALLOWED_URI_REGEXP||fne,_i=ae.NAMESPACE||jr,xi=ae.MATHML_TEXT_INTEGRATION_POINTS||xi,Gr=ae.HTML_INTEGRATION_POINTS||Gr,ue=ae.CUSTOM_ELEMENT_HANDLING||{},ae.CUSTOM_ELEMENT_HANDLING&&Bo(ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ue.tagNameCheck=ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ae.CUSTOM_ELEMENT_HANDLING&&Bo(ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ue.attributeNameCheck=ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ae.CUSTOM_ELEMENT_HANDLING&&typeof ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ue.allowCustomizedBuiltInElements=ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ne&&(pe=!1),gn&&(vn=!0),va&&(M=Bt({},w9),se=[],va.html===!0&&(Bt(M,_9),Bt(se,x9)),va.svg===!0&&(Bt(M,jN),Bt(se,LN),Bt(se,c_)),va.svgFilters===!0&&(Bt(M,$N),Bt(se,LN),Bt(se,c_)),va.mathMl===!0&&(Bt(M,MN),Bt(se,S9),Bt(se,c_))),ae.ADD_TAGS&&(typeof ae.ADD_TAGS=="function"?ne.tagCheck=ae.ADD_TAGS:(M===Y&&(M=Yo(M)),Bt(M,ae.ADD_TAGS,hn))),ae.ADD_ATTR&&(typeof ae.ADD_ATTR=="function"?ne.attributeCheck=ae.ADD_ATTR:(se===ge&&(se=Yo(se)),Bt(se,ae.ADD_ATTR,hn))),ae.ADD_URI_SAFE_ATTR&&Bt(Gi,ae.ADD_URI_SAFE_ATTR,hn),ae.FORBID_CONTENTS&&(Jn===bi&&(Jn=Yo(Jn)),Bt(Jn,ae.FORBID_CONTENTS,hn)),ae.ADD_FORBID_CONTENTS&&(Jn===bi&&(Jn=Yo(Jn)),Bt(Jn,ae.ADD_FORBID_CONTENTS,hn)),dr&&(M["#text"]=!0),Xe&&Bt(M,["html","head","body"]),M.table&&(Bt(M,["tbody"]),delete H.tbody),ae.TRUSTED_TYPES_POLICY){if(typeof ae.TRUSTED_TYPES_POLICY.createHTML!="function")throw _g('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ae.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw _g('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=ae.TRUSTED_TYPES_POLICY,E=A.createHTML("")}else A===void 0&&(A=e4e(m,i)),A!==null&&typeof E=="string"&&(E=A.createHTML(""));zi&&zi(ae),Si=ae}},Fo=Bt({},[...jN,...$N,...qDe]),rs=Bt({},[...MN,...HDe]),ed=function(ae){let Te=T(ae);(!Te||!Te.tagName)&&(Te={namespaceURI:_i,tagName:"template"});const Be=mw(ae.tagName),nn=mw(Te.tagName);return wi[ae.namespaceURI]?ae.namespaceURI===ba?Te.namespaceURI===jr?Be==="svg":Te.namespaceURI===Us?Be==="svg"&&(nn==="annotation-xml"||xi[nn]):!!Fo[Be]:ae.namespaceURI===Us?Te.namespaceURI===jr?Be==="math":Te.namespaceURI===ba?Be==="math"&&Gr[nn]:!!rs[Be]:ae.namespaceURI===jr?Te.namespaceURI===ba&&!Gr[nn]||Te.namespaceURI===Us&&!xi[nn]?!1:!rs[Be]&&(oi[Be]||!Fo[Be]):!!(Zi==="application/xhtml+xml"&&wi[ae.namespaceURI]):!1},or=function(ae){vg(e.removed,{element:ae});try{T(ae).removeChild(ae)}catch{b(ae)}},$r=function(ae,Te){try{vg(e.removed,{attribute:Te.getAttributeNode(ae),from:Te})}catch{vg(e.removed,{attribute:null,from:Te})}if(Te.removeAttribute(ae),ae==="is")if(vn||gn)try{or(Te)}catch{}else try{Te.setAttribute(ae,"")}catch{}},In=function(ae){let Te=null,Be=null;if(kt)ae="<remove></remove>"+ae;else{const wn=RN(ae,/^[\r\n\t ]+/);Be=wn&&wn[0]}Zi==="application/xhtml+xml"&&_i===jr&&(ae='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ae+"</body></html>");const nn=A?A.createHTML(ae):ae;if(_i===jr)try{Te=new p().parseFromString(nn,Zi)}catch{}if(!Te||!Te.documentElement){Te=C.createDocument(_i,"template",null);try{Te.documentElement.innerHTML=Ki?E:nn}catch{}}const Ot=Te.body||Te.documentElement;return ae&&Be&&Ot.insertBefore(n.createTextNode(Be),Ot.childNodes[0]||null),_i===jr?D.call(Te,Xe?"html":"body")[0]:Xe?Te.documentElement:Ot},Uo=function(ae){return R.call(ae.ownerDocument||ae,ae,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},jl=function(ae){return ae instanceof f&&(typeof ae.nodeName!="string"||typeof ae.textContent!="string"||typeof ae.removeChild!="function"||!(ae.attributes instanceof u)||typeof ae.removeAttribute!="function"||typeof ae.setAttribute!="function"||typeof ae.namespaceURI!="string"||typeof ae.insertBefore!="function"||typeof ae.hasChildNodes!="function")},Dc=function(ae){return typeof o=="function"&&ae instanceof o};function Ti(Ge,ae,Te){l_(Ge,Be=>{Be.call(e,ae,Te,Si)})}const Ji=function(ae){let Te=null;if(Ti(j.beforeSanitizeElements,ae,null),jl(ae))return or(ae),!0;const Be=hn(ae.nodeName);if(Ti(j.uponSanitizeElement,ae,{tagName:Be,allowedTags:M}),je&&ae.hasChildNodes()&&!Dc(ae.firstElementChild)&&Ni(/<[/\w!]/g,ae.innerHTML)&&Ni(/<[/\w!]/g,ae.textContent)||ae.nodeType===xg.progressingInstruction||je&&ae.nodeType===xg.comment&&Ni(/<[/\w]/g,ae.data))return or(ae),!0;if(!(ne.tagCheck instanceof Function&&ne.tagCheck(Be))&&(!M[Be]||H[Be])){if(!H[Be]&&$l(Be)&&(ue.tagNameCheck instanceof RegExp&&Ni(ue.tagNameCheck,Be)||ue.tagNameCheck instanceof Function&&ue.tagNameCheck(Be)))return!1;if(dr&&!Jn[Be]){const nn=T(ae)||ae.parentNode,Ot=w(ae)||ae.childNodes;if(Ot&&nn){const wn=Ot.length;for(let Qn=wn-1;Qn>=0;--Qn){const wr=y(Ot[Qn],!0);wr.__removalCount=(ae.__removalCount||0)+1,nn.insertBefore(wr,x(ae))}}}return or(ae),!0}return ae instanceof l&&!ed(ae)||(Be==="noscript"||Be==="noembed"||Be==="noframes")&&Ni(/<\/no(script|embed|frames)/i,ae.innerHTML)?(or(ae),!0):(Ne&&ae.nodeType===xg.text&&(Te=ae.textContent,l_([L,B,z],nn=>{Te=bg(Te,nn," ")}),ae.textContent!==Te&&(vg(e.removed,{element:ae.cloneNode()}),ae.textContent=Te)),Ti(j.afterSanitizeElements,ae,null),!1)},Yn=function(ae,Te,Be){if(_n&&(Te==="id"||Te==="name")&&(Be in n||Be in Xi))return!1;if(!(pe&&!$[Te]&&Ni(W,Te))){if(!(X&&Ni(q,Te))){if(!(ne.attributeCheck instanceof Function&&ne.attributeCheck(Te,ae))){if(!se[Te]||$[Te]){if(!($l(ae)&&(ue.tagNameCheck instanceof RegExp&&Ni(ue.tagNameCheck,ae)||ue.tagNameCheck instanceof Function&&ue.tagNameCheck(ae))&&(ue.attributeNameCheck instanceof RegExp&&Ni(ue.attributeNameCheck,Te)||ue.attributeNameCheck instanceof Function&&ue.attributeNameCheck(Te,ae))||Te==="is"&&ue.allowCustomizedBuiltInElements&&(ue.tagNameCheck instanceof RegExp&&Ni(ue.tagNameCheck,Be)||ue.tagNameCheck instanceof Function&&ue.tagNameCheck(Be))))return!1}else if(!Gi[Te]){if(!Ni(Q,bg(Be,V,""))){if(!((Te==="src"||Te==="xlink:href"||Te==="href")&&ae!=="script"&&BDe(Be,"data:")===0&&Fs[ae])){if(!(ye&&!Ni(K,bg(Be,V,"")))){if(Be)return!1}}}}}}}return!0},$l=function(ae){return ae!=="annotation-xml"&&RN(ae,J)},Bc=function(ae){Ti(j.beforeSanitizeAttributes,ae,null);const{attributes:Te}=ae;if(!Te||jl(ae))return;const Be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:se,forceKeepAttr:void 0};let nn=Te.length;for(;nn--;){const Ot=Te[nn],{name:wn,namespaceURI:Qn,value:wr}=Ot,li=hn(wn),is=wr;let tn=wn==="value"?is:FDe(is);if(Be.attrName=li,Be.attrValue=tn,Be.keepAttr=!0,Be.forceKeepAttr=void 0,Ti(j.uponSanitizeAttribute,ae,Be),tn=Be.attrValue,br&&(li==="id"||li==="name")&&($r(wn,ae),tn=ya+tn),je&&Ni(/((--!?|])>)|<\/(style|title|textarea)/i,tn)){$r(wn,ae);continue}if(li==="attributename"&&RN(tn,"href")){$r(wn,ae);continue}if(Be.forceKeepAttr)continue;if(!Be.keepAttr){$r(wn,ae);continue}if(!le&&Ni(/\/>/i,tn)){$r(wn,ae);continue}Ne&&l_([L,B,z],Kr=>{tn=bg(tn,Kr," ")});const _a=hn(ae.nodeName);if(!Yn(_a,li,tn)){$r(wn,ae);continue}if(A&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Qn)switch(m.getAttributeType(_a,li)){case"TrustedHTML":{tn=A.createHTML(tn);break}case"TrustedScriptURL":{tn=A.createScriptURL(tn);break}}if(tn!==is)try{Qn?ae.setAttributeNS(Qn,wn,tn):ae.setAttribute(wn,tn),jl(ae)?or(ae):b9(e.removed)}catch{$r(wn,ae)}}Ti(j.afterSanitizeAttributes,ae,null)},Fc=function Ge(ae){let Te=null;const Be=Uo(ae);for(Ti(j.beforeSanitizeShadowDOM,ae,null);Te=Be.nextNode();)Ti(j.uponSanitizeShadowNode,Te,null),Ji(Te),Bc(Te),Te.content instanceof a&&Ge(Te.content);Ti(j.afterSanitizeShadowDOM,ae,null)};return e.sanitize=function(Ge){let ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Te=null,Be=null,nn=null,Ot=null;if(Ki=!Ge,Ki&&(Ge="<!-->"),typeof Ge!="string"&&!Dc(Ge))if(typeof Ge.toString=="function"){if(Ge=Ge.toString(),typeof Ge!="string")throw _g("dirty is not a string, aborting")}else throw _g("toString is not a function");if(!e.isSupported)return Ge;if(st||_r(ae),e.removed=[],typeof Ge=="string"&&(Rr=!1),Rr){if(Ge.nodeName){const wr=hn(Ge.nodeName);if(!M[wr]||H[wr])throw _g("root node is forbidden and cannot be sanitized in-place")}}else if(Ge instanceof o)Te=In("<!---->"),Be=Te.ownerDocument.importNode(Ge,!0),Be.nodeType===xg.element&&Be.nodeName==="BODY"||Be.nodeName==="HTML"?Te=Be:Te.appendChild(Be);else{if(!vn&&!Ne&&!Xe&&Ge.indexOf("<")===-1)return A&&bn?A.createHTML(Ge):Ge;if(Te=In(Ge),!Te)return vn?null:bn?E:""}Te&&kt&&or(Te.firstChild);const wn=Uo(Rr?Ge:Te);for(;nn=wn.nextNode();)Ji(nn),Bc(nn),nn.content instanceof a&&Fc(nn.content);if(Rr)return Ge;if(vn){if(gn)for(Ot=N.call(Te.ownerDocument);Te.firstChild;)Ot.appendChild(Te.firstChild);else Ot=Te;return(se.shadowroot||se.shadowrootmode)&&(Ot=Z.call(r,Ot,!0)),Ot}let Qn=Xe?Te.outerHTML:Te.innerHTML;return Xe&&M["!doctype"]&&Te.ownerDocument&&Te.ownerDocument.doctype&&Te.ownerDocument.doctype.name&&Ni(hne,Te.ownerDocument.doctype.name)&&(Qn="<!DOCTYPE "+Te.ownerDocument.doctype.name+`>
`+Qn),Ne&&l_([L,B,z],wr=>{Qn=bg(Qn,wr," ")}),A&&bn?A.createHTML(Qn):Qn},e.setConfig=function(){let Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_r(Ge),st=!0},e.clearConfig=function(){Si=null,st=!1},e.isValidAttribute=function(Ge,ae,Te){Si||_r({});const Be=hn(Ge),nn=hn(ae);return Yn(Be,nn,Te)},e.addHook=function(Ge,ae){typeof ae=="function"&&vg(j[Ge],ae)},e.removeHook=function(Ge,ae){if(ae!==void 0){const Te=LDe(j[Ge],ae);return Te===-1?void 0:DDe(j[Ge],Te,1)[0]}return b9(j[Ge])},e.removeHooks=function(Ge){j[Ge]=[]},e.removeAllHooks=function(){j=E9()},e}var t4e=pne(),mne=typeof global=="object"&&global&&global.Object===Object&&global,n4e=typeof self=="object"&&self&&self.Object===Object&&self,Il=mne||n4e||Function("return this")(),Lu=Il.Symbol,gne=Object.prototype,r4e=gne.hasOwnProperty,i4e=gne.toString,Sg=Lu?Lu.toStringTag:void 0;function a4e(t){var e=r4e.call(t,Sg),n=t[Sg];try{t[Sg]=void 0;var r=!0}catch{}var i=i4e.call(t);return r&&(e?t[Sg]=n:delete t[Sg]),i}var s4e=Object.prototype,o4e=s4e.toString;function l4e(t){return o4e.call(t)}var c4e="[object Null]",u4e="[object Undefined]",A9=Lu?Lu.toStringTag:void 0;function wm(t){return t==null?t===void 0?u4e:c4e:A9&&A9 in Object(t)?a4e(t):l4e(t)}function Ec(t){return t!=null&&typeof t=="object"}var ff=Array.isArray;function Yu(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function yne(t){return t}var d4e="[object AsyncFunction]",f4e="[object Function]",h4e="[object GeneratorFunction]",p4e="[object Proxy]";function sL(t){if(!Yu(t))return!1;var e=wm(t);return e==f4e||e==h4e||e==d4e||e==p4e}var DN=Il["__core-js_shared__"],O9=(function(){var t=/[^.]+$/.exec(DN&&DN.keys&&DN.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function m4e(t){return!!O9&&O9 in t}var g4e=Function.prototype,y4e=g4e.toString;function Tf(t){if(t!=null){try{return y4e.call(t)}catch{}try{return t+""}catch{}}return""}var v4e=/[\\^$.*+?()[\]{}|]/g,b4e=/^\[object .+?Constructor\]$/,_4e=Function.prototype,w4e=Object.prototype,x4e=_4e.toString,S4e=w4e.hasOwnProperty,T4e=RegExp("^"+x4e.call(S4e).replace(v4e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E4e(t){if(!Yu(t)||m4e(t))return!1;var e=sL(t)?T4e:b4e;return e.test(Tf(t))}function A4e(t,e){return t==null?void 0:t[e]}function Ef(t,e){var n=A4e(t,e);return E4e(n)?n:void 0}var Mj=Ef(Il,"WeakMap"),C9=Object.create,O4e=(function(){function t(){}return function(e){if(!Yu(e))return{};if(C9)return C9(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function C4e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function k4e(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var N4e=800,I4e=16,P4e=Date.now;function R4e(t){var e=0,n=0;return function(){var r=P4e(),i=I4e-(r-n);if(n=r,i>0){if(++e>=N4e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function j4e(t){return function(){return t}}var r1=(function(){try{var t=Ef(Object,"defineProperty");return t({},"",{}),t}catch{}})(),$4e=r1?function(t,e){return r1(t,"toString",{configurable:!0,enumerable:!1,value:j4e(e),writable:!0})}:yne,M4e=R4e($4e);function L4e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var D4e=9007199254740991,B4e=/^(?:0|[1-9]\d*)$/;function vne(t,e){var n=typeof t;return e=e??D4e,!!e&&(n=="number"||n!="symbol"&&B4e.test(t))&&t>-1&&t%1==0&&t<e}function oL(t,e,n){e=="__proto__"&&r1?r1(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Sb(t,e){return t===e||t!==t&&e!==e}var F4e=Object.prototype,U4e=F4e.hasOwnProperty;function bne(t,e,n){var r=t[e];(!(U4e.call(t,e)&&Sb(r,n))||n===void 0&&!(e in t))&&oL(t,e,n)}function z4e(t,e,n,r){var i=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var o=e[a],l=void 0;l===void 0&&(l=t[o]),i?oL(n,o,l):bne(n,o,l)}return n}var k9=Math.max;function q4e(t,e,n){return e=k9(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=k9(r.length-e,0),s=Array(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),C4e(t,this,o)}}function H4e(t,e){return M4e(q4e(t,e,yne),t+"")}var W4e=9007199254740991;function _ne(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=W4e}function iT(t){return t!=null&&_ne(t.length)&&!sL(t)}function V4e(t,e,n){if(!Yu(n))return!1;var r=typeof e;return(r=="number"?iT(n)&&vne(e,n.length):r=="string"&&e in n)?Sb(n[e],t):!1}function G4e(t){return H4e(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,s&&V4e(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,a)}return e})}var K4e=Object.prototype;function lL(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||K4e;return t===n}function Z4e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var X4e="[object Arguments]";function N9(t){return Ec(t)&&wm(t)==X4e}var wne=Object.prototype,J4e=wne.hasOwnProperty,Y4e=wne.propertyIsEnumerable,Lj=N9((function(){return arguments})())?N9:function(t){return Ec(t)&&J4e.call(t,"callee")&&!Y4e.call(t,"callee")};function Q4e(){return!1}var xne=typeof Ha=="object"&&Ha&&!Ha.nodeType&&Ha,I9=xne&&typeof Wa=="object"&&Wa&&!Wa.nodeType&&Wa,e3e=I9&&I9.exports===xne,P9=e3e?Il.Buffer:void 0,t3e=P9?P9.isBuffer:void 0,kv=t3e||Q4e,n3e="[object Arguments]",r3e="[object Array]",i3e="[object Boolean]",a3e="[object Date]",s3e="[object Error]",o3e="[object Function]",l3e="[object Map]",c3e="[object Number]",u3e="[object Object]",d3e="[object RegExp]",f3e="[object Set]",h3e="[object String]",p3e="[object WeakMap]",m3e="[object ArrayBuffer]",g3e="[object DataView]",y3e="[object Float32Array]",v3e="[object Float64Array]",b3e="[object Int8Array]",_3e="[object Int16Array]",w3e="[object Int32Array]",x3e="[object Uint8Array]",S3e="[object Uint8ClampedArray]",T3e="[object Uint16Array]",E3e="[object Uint32Array]",$n={};$n[y3e]=$n[v3e]=$n[b3e]=$n[_3e]=$n[w3e]=$n[x3e]=$n[S3e]=$n[T3e]=$n[E3e]=!0;$n[n3e]=$n[r3e]=$n[m3e]=$n[i3e]=$n[g3e]=$n[a3e]=$n[s3e]=$n[o3e]=$n[l3e]=$n[c3e]=$n[u3e]=$n[d3e]=$n[f3e]=$n[h3e]=$n[p3e]=!1;function A3e(t){return Ec(t)&&_ne(t.length)&&!!$n[wm(t)]}function cL(t){return function(e){return t(e)}}var Sne=typeof Ha=="object"&&Ha&&!Ha.nodeType&&Ha,Ay=Sne&&typeof Wa=="object"&&Wa&&!Wa.nodeType&&Wa,O3e=Ay&&Ay.exports===Sne,BN=O3e&&mne.process,qp=(function(){try{var t=Ay&&Ay.require&&Ay.require("util").types;return t||BN&&BN.binding&&BN.binding("util")}catch{}})(),R9=qp&&qp.isTypedArray,uL=R9?cL(R9):A3e,C3e=Object.prototype,k3e=C3e.hasOwnProperty;function Tne(t,e){var n=ff(t),r=!n&&Lj(t),i=!n&&!r&&kv(t),a=!n&&!r&&!i&&uL(t),s=n||r||i||a,o=s?Z4e(t.length,String):[],l=o.length;for(var c in t)(e||k3e.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||vne(c,l)))&&o.push(c);return o}function Ene(t,e){return function(n){return t(e(n))}}var N3e=Ene(Object.keys,Object),I3e=Object.prototype,P3e=I3e.hasOwnProperty;function R3e(t){if(!lL(t))return N3e(t);var e=[];for(var n in Object(t))P3e.call(t,n)&&n!="constructor"&&e.push(n);return e}function j3e(t){return iT(t)?Tne(t):R3e(t)}function $3e(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var M3e=Object.prototype,L3e=M3e.hasOwnProperty;function D3e(t){if(!Yu(t))return $3e(t);var e=lL(t),n=[];for(var r in t)r=="constructor"&&(e||!L3e.call(t,r))||n.push(r);return n}function Ane(t){return iT(t)?Tne(t,!0):D3e(t)}var Nv=Ef(Object,"create");function B3e(){this.__data__=Nv?Nv(null):{},this.size=0}function F3e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var U3e="__lodash_hash_undefined__",z3e=Object.prototype,q3e=z3e.hasOwnProperty;function H3e(t){var e=this.__data__;if(Nv){var n=e[t];return n===U3e?void 0:n}return q3e.call(e,t)?e[t]:void 0}var W3e=Object.prototype,V3e=W3e.hasOwnProperty;function G3e(t){var e=this.__data__;return Nv?e[t]!==void 0:V3e.call(e,t)}var K3e="__lodash_hash_undefined__";function Z3e(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Nv&&e===void 0?K3e:e,this}function hf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hf.prototype.clear=B3e;hf.prototype.delete=F3e;hf.prototype.get=H3e;hf.prototype.has=G3e;hf.prototype.set=Z3e;function X3e(){this.__data__=[],this.size=0}function aT(t,e){for(var n=t.length;n--;)if(Sb(t[n][0],e))return n;return-1}var J3e=Array.prototype,Y3e=J3e.splice;function Q3e(t){var e=this.__data__,n=aT(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Y3e.call(e,n,1),--this.size,!0}function e5e(t){var e=this.__data__,n=aT(e,t);return n<0?void 0:e[n][1]}function t5e(t){return aT(this.__data__,t)>-1}function n5e(t,e){var n=this.__data__,r=aT(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Mc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Mc.prototype.clear=X3e;Mc.prototype.delete=Q3e;Mc.prototype.get=e5e;Mc.prototype.has=t5e;Mc.prototype.set=n5e;var Iv=Ef(Il,"Map");function r5e(){this.size=0,this.__data__={hash:new hf,map:new(Iv||Mc),string:new hf}}function i5e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function sT(t,e){var n=t.__data__;return i5e(e)?n[typeof e=="string"?"string":"hash"]:n.map}function a5e(t){var e=sT(this,t).delete(t);return this.size-=e?1:0,e}function s5e(t){return sT(this,t).get(t)}function o5e(t){return sT(this,t).has(t)}function l5e(t,e){var n=sT(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Af(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Af.prototype.clear=r5e;Af.prototype.delete=a5e;Af.prototype.get=s5e;Af.prototype.has=o5e;Af.prototype.set=l5e;function c5e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var One=Ene(Object.getPrototypeOf,Object),u5e="[object Object]",d5e=Function.prototype,f5e=Object.prototype,Cne=d5e.toString,h5e=f5e.hasOwnProperty,p5e=Cne.call(Object);function m5e(t){if(!Ec(t)||wm(t)!=u5e)return!1;var e=One(t);if(e===null)return!0;var n=h5e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Cne.call(n)==p5e}function g5e(){this.__data__=new Mc,this.size=0}function y5e(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function v5e(t){return this.__data__.get(t)}function b5e(t){return this.__data__.has(t)}var _5e=200;function w5e(t,e){var n=this.__data__;if(n instanceof Mc){var r=n.__data__;if(!Iv||r.length<_5e-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Af(r)}return n.set(t,e),this.size=n.size,this}function pl(t){var e=this.__data__=new Mc(t);this.size=e.size}pl.prototype.clear=g5e;pl.prototype.delete=y5e;pl.prototype.get=v5e;pl.prototype.has=b5e;pl.prototype.set=w5e;var kne=typeof Ha=="object"&&Ha&&!Ha.nodeType&&Ha,j9=kne&&typeof Wa=="object"&&Wa&&!Wa.nodeType&&Wa,x5e=j9&&j9.exports===kne,$9=x5e?Il.Buffer:void 0,M9=$9?$9.allocUnsafe:void 0;function Nne(t,e){if(e)return t.slice();var n=t.length,r=M9?M9(n):new t.constructor(n);return t.copy(r),r}function S5e(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}function T5e(){return[]}var E5e=Object.prototype,A5e=E5e.propertyIsEnumerable,L9=Object.getOwnPropertySymbols,O5e=L9?function(t){return t==null?[]:(t=Object(t),S5e(L9(t),function(e){return A5e.call(t,e)}))}:T5e;function C5e(t,e,n){var r=e(t);return ff(t)?r:c5e(r,n(t))}function Dj(t){return C5e(t,j3e,O5e)}var Bj=Ef(Il,"DataView"),Fj=Ef(Il,"Promise"),Uj=Ef(Il,"Set"),D9="[object Map]",k5e="[object Object]",B9="[object Promise]",F9="[object Set]",U9="[object WeakMap]",z9="[object DataView]",N5e=Tf(Bj),I5e=Tf(Iv),P5e=Tf(Fj),R5e=Tf(Uj),j5e=Tf(Mj),ho=wm;(Bj&&ho(new Bj(new ArrayBuffer(1)))!=z9||Iv&&ho(new Iv)!=D9||Fj&&ho(Fj.resolve())!=B9||Uj&&ho(new Uj)!=F9||Mj&&ho(new Mj)!=U9)&&(ho=function(t){var e=wm(t),n=e==k5e?t.constructor:void 0,r=n?Tf(n):"";if(r)switch(r){case N5e:return z9;case I5e:return D9;case P5e:return B9;case R5e:return F9;case j5e:return U9}return e});var $5e=Object.prototype,M5e=$5e.hasOwnProperty;function L5e(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&M5e.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var i1=Il.Uint8Array;function dL(t){var e=new t.constructor(t.byteLength);return new i1(e).set(new i1(t)),e}function D5e(t,e){var n=dL(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var B5e=/\w*$/;function F5e(t){var e=new t.constructor(t.source,B5e.exec(t));return e.lastIndex=t.lastIndex,e}var q9=Lu?Lu.prototype:void 0,H9=q9?q9.valueOf:void 0;function U5e(t){return H9?Object(H9.call(t)):{}}function Ine(t,e){var n=e?dL(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var z5e="[object Boolean]",q5e="[object Date]",H5e="[object Map]",W5e="[object Number]",V5e="[object RegExp]",G5e="[object Set]",K5e="[object String]",Z5e="[object Symbol]",X5e="[object ArrayBuffer]",J5e="[object DataView]",Y5e="[object Float32Array]",Q5e="[object Float64Array]",eBe="[object Int8Array]",tBe="[object Int16Array]",nBe="[object Int32Array]",rBe="[object Uint8Array]",iBe="[object Uint8ClampedArray]",aBe="[object Uint16Array]",sBe="[object Uint32Array]";function oBe(t,e,n){var r=t.constructor;switch(e){case X5e:return dL(t);case z5e:case q5e:return new r(+t);case J5e:return D5e(t);case Y5e:case Q5e:case eBe:case tBe:case nBe:case rBe:case iBe:case aBe:case sBe:return Ine(t,n);case H5e:return new r;case W5e:case K5e:return new r(t);case V5e:return F5e(t);case G5e:return new r;case Z5e:return U5e(t)}}function Pne(t){return typeof t.constructor=="function"&&!lL(t)?O4e(One(t)):{}}var lBe="[object Map]";function cBe(t){return Ec(t)&&ho(t)==lBe}var W9=qp&&qp.isMap,uBe=W9?cL(W9):cBe,dBe="[object Set]";function fBe(t){return Ec(t)&&ho(t)==dBe}var V9=qp&&qp.isSet,hBe=V9?cL(V9):fBe,pBe=1,Rne="[object Arguments]",mBe="[object Array]",gBe="[object Boolean]",yBe="[object Date]",vBe="[object Error]",jne="[object Function]",bBe="[object GeneratorFunction]",_Be="[object Map]",wBe="[object Number]",$ne="[object Object]",xBe="[object RegExp]",SBe="[object Set]",TBe="[object String]",EBe="[object Symbol]",ABe="[object WeakMap]",OBe="[object ArrayBuffer]",CBe="[object DataView]",kBe="[object Float32Array]",NBe="[object Float64Array]",IBe="[object Int8Array]",PBe="[object Int16Array]",RBe="[object Int32Array]",jBe="[object Uint8Array]",$Be="[object Uint8ClampedArray]",MBe="[object Uint16Array]",LBe="[object Uint32Array]",Sn={};Sn[Rne]=Sn[mBe]=Sn[OBe]=Sn[CBe]=Sn[gBe]=Sn[yBe]=Sn[kBe]=Sn[NBe]=Sn[IBe]=Sn[PBe]=Sn[RBe]=Sn[_Be]=Sn[wBe]=Sn[$ne]=Sn[xBe]=Sn[SBe]=Sn[TBe]=Sn[EBe]=Sn[jBe]=Sn[$Be]=Sn[MBe]=Sn[LBe]=!0;Sn[vBe]=Sn[jne]=Sn[ABe]=!1;function gw(t,e,n,r,i,a){var s,o=e&pBe;if(s!==void 0)return s;if(!Yu(t))return t;var l=ff(t);if(l)s=L5e(t);else{var c=ho(t),u=c==jne||c==bBe;if(kv(t))return Nne(t,o);if(c==$ne||c==Rne||u&&!i)s=u?{}:Pne(t);else{if(!Sn[c])return i?t:{};s=oBe(t,c,o)}}a||(a=new pl);var f=a.get(t);if(f)return f;a.set(t,s),hBe(t)?t.forEach(function(_){s.add(gw(_,e,n,_,t,a))}):uBe(t)&&t.forEach(function(_,y){s.set(y,gw(_,e,n,y,t,a))});var p=Dj,m=l?void 0:p(t);return L4e(m||t,function(_,y){m&&(y=_,_=t[y]),bne(s,y,gw(_,e,n,y,t,a))}),s}var DBe=1,BBe=4;function np(t){return gw(t,DBe|BBe)}var FBe="__lodash_hash_undefined__";function UBe(t){return this.__data__.set(t,FBe),this}function zBe(t){return this.__data__.has(t)}function a1(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Af;++e<n;)this.add(t[e])}a1.prototype.add=a1.prototype.push=UBe;a1.prototype.has=zBe;function qBe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function HBe(t,e){return t.has(e)}var WBe=1,VBe=2;function Mne(t,e,n,r,i,a){var s=n&WBe,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(t),u=a.get(e);if(c&&u)return c==e&&u==t;var f=-1,p=!0,m=n&VBe?new a1:void 0;for(a.set(t,e),a.set(e,t);++f<o;){var _=t[f],y=e[f];if(r)var b=s?r(y,_,f,e,t,a):r(_,y,f,t,e,a);if(b!==void 0){if(b)continue;p=!1;break}if(m){if(!qBe(e,function(x,w){if(!HBe(m,w)&&(_===x||i(_,x,n,r,a)))return m.push(w)})){p=!1;break}}else if(!(_===y||i(_,y,n,r,a))){p=!1;break}}return a.delete(t),a.delete(e),p}function GBe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function KBe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var ZBe=1,XBe=2,JBe="[object Boolean]",YBe="[object Date]",QBe="[object Error]",eFe="[object Map]",tFe="[object Number]",nFe="[object RegExp]",rFe="[object Set]",iFe="[object String]",aFe="[object Symbol]",sFe="[object ArrayBuffer]",oFe="[object DataView]",G9=Lu?Lu.prototype:void 0,FN=G9?G9.valueOf:void 0;function lFe(t,e,n,r,i,a,s){switch(n){case oFe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case sFe:return!(t.byteLength!=e.byteLength||!a(new i1(t),new i1(e)));case JBe:case YBe:case tFe:return Sb(+t,+e);case QBe:return t.name==e.name&&t.message==e.message;case nFe:case iFe:return t==e+"";case eFe:var o=GBe;case rFe:var l=r&ZBe;if(o||(o=KBe),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=XBe,s.set(t,e);var u=Mne(o(t),o(e),r,i,a,s);return s.delete(t),u;case aFe:if(FN)return FN.call(t)==FN.call(e)}return!1}var cFe=1,uFe=Object.prototype,dFe=uFe.hasOwnProperty;function fFe(t,e,n,r,i,a){var s=n&cFe,o=Dj(t),l=o.length,c=Dj(e),u=c.length;if(l!=u&&!s)return!1;for(var f=l;f--;){var p=o[f];if(!(s?p in e:dFe.call(e,p)))return!1}var m=a.get(t),_=a.get(e);if(m&&_)return m==e&&_==t;var y=!0;a.set(t,e),a.set(e,t);for(var b=s;++f<l;){p=o[f];var x=t[p],w=e[p];if(r)var T=s?r(w,x,p,e,t,a):r(x,w,p,t,e,a);if(!(T===void 0?x===w||i(x,w,n,r,a):T)){y=!1;break}b||(b=p=="constructor")}if(y&&!b){var A=t.constructor,E=e.constructor;A!=E&&"constructor"in t&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof E=="function"&&E instanceof E)&&(y=!1)}return a.delete(t),a.delete(e),y}var hFe=1,K9="[object Arguments]",Z9="[object Array]",u_="[object Object]",pFe=Object.prototype,X9=pFe.hasOwnProperty;function mFe(t,e,n,r,i,a){var s=ff(t),o=ff(e),l=s?Z9:ho(t),c=o?Z9:ho(e);l=l==K9?u_:l,c=c==K9?u_:c;var u=l==u_,f=c==u_,p=l==c;if(p&&kv(t)){if(!kv(e))return!1;s=!0,u=!1}if(p&&!u)return a||(a=new pl),s||uL(t)?Mne(t,e,n,r,i,a):lFe(t,e,l,n,r,i,a);if(!(n&hFe)){var m=u&&X9.call(t,"__wrapped__"),_=f&&X9.call(e,"__wrapped__");if(m||_){var y=m?t.value():t,b=_?e.value():e;return a||(a=new pl),i(y,b,n,r,a)}}return p?(a||(a=new pl),fFe(t,e,n,r,i,a)):!1}function Lne(t,e,n,r,i){return t===e?!0:t==null||e==null||!Ec(t)&&!Ec(e)?t!==t&&e!==e:mFe(t,e,n,r,Lne,i)}function gFe(t){return function(e,n,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var l=s[++i];if(n(a[l],l,a)===!1)break}return e}}var yFe=gFe();function zj(t,e,n){(n!==void 0&&!Sb(t[e],n)||n===void 0&&!(e in t))&&oL(t,e,n)}function vFe(t){return Ec(t)&&iT(t)}function qj(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function bFe(t){return z4e(t,Ane(t))}function _Fe(t,e,n,r,i,a,s){var o=qj(t,n),l=qj(e,n),c=s.get(l);if(c){zj(t,n,c);return}var u=a?a(o,l,n+"",t,e,s):void 0,f=u===void 0;if(f){var p=ff(l),m=!p&&kv(l),_=!p&&!m&&uL(l);u=l,p||m||_?ff(o)?u=o:vFe(o)?u=k4e(o):m?(f=!1,u=Nne(l,!0)):_?(f=!1,u=Ine(l,!0)):u=[]:m5e(l)||Lj(l)?(u=o,Lj(o)?u=bFe(o):(!Yu(o)||sL(o))&&(u=Pne(l))):f=!1}f&&(s.set(l,u),i(u,l,r,a,s),s.delete(l)),zj(t,n,u)}function Dne(t,e,n,r,i){t!==e&&yFe(e,function(a,s){if(i||(i=new pl),Yu(a))_Fe(t,e,s,n,Dne,r,i);else{var o=r?r(qj(t,s),a,s+"",t,e,i):void 0;o===void 0&&(o=a),zj(t,s,o)}},Ane)}function fL(t,e){return Lne(t,e)}var Cu=G4e(function(t,e,n){Dne(t,e,n)}),rt=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(rt||{});class Sl{constructor(e,n,r={}){this.attrName=e,this.keyName=n;const i=rt.TYPE&rt.ATTRIBUTE;this.scope=r.scope!=null?r.scope&rt.LEVEL|i:rt.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class rp extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const Bne=class Hj{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,n)}return null}create(e,n,r){const i=this.query(n);if(i==null)throw new rp(`Unable to create ${n} blot`);const a=i,s=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:a.create(r),o=new a(e,s,r);return Hj.blots.set(o.domNode,o),o}find(e,n=!1){return Hj.find(e,n)}query(e,n=rt.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&rt.LEVEL&rt.BLOCK?r=this.types.block:e&rt.LEVEL&rt.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(r=this.classes[i],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&n&rt.LEVEL&r.scope&&n&rt.TYPE&r.scope?r:null}register(...e){return e.map(n=>{const r="blotName"in n,i="attrName"in n;if(!r&&!i)throw new rp("Invalid definition");if(r&&n.blotName==="abstract")throw new rp("Cannot register abstract class");const a=r?n.blotName:i?n.attrName:void 0;return this.types[a]=n,i?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):r&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(s=>s.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(s=>{(this.tags[s]==null||n.className==null)&&(this.tags[s]=n)}))),n})}};Bne.blots=new WeakMap;let Hp=Bne;function J9(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class wFe extends Sl{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){J9(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(J9(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const Po=wFe;function UN(t){const e=t.split("-"),n=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+n}class xFe extends Sl{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[UN(this.keyName)]=n,!0):!1}remove(e){e.style[UN(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[UN(this.keyName)];return this.canAdd(e,n)?n:""}}const Qu=xFe;class SFe{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Hp.find(this.domNode);if(e==null)return;const n=Sl.keys(this.domNode),r=Po.keys(this.domNode),i=Qu.keys(this.domNode);n.concat(r).concat(i).forEach(a=>{const s=e.scroll.query(a,rt.ATTRIBUTE);s instanceof Sl&&(this.attributes[s.attrName]=s)})}copy(e){Object.keys(this.attributes).forEach(n=>{const r=this.attributes[n].value(this.domNode);e.format(n,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const oT=SFe,Fne=class{constructor(e,n){this.scroll=e,this.domNode=n,Hp.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new rp("Blot definition missing tagName");let n,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?n=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?n=document.createElement(r):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Hp.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,r,i){const a=this.isolate(e,n);if(this.scroll.query(r,rt.BLOT)!=null&&i)a.wrap(r,i);else if(this.scroll.query(r,rt.ATTRIBUTE)!=null){const s=this.scroll.create(this.statics.scope);a.wrap(s),s.format(r,i)}}insertAt(e,n,r){const i=r==null?this.scroll.create("text",n):this.scroll.create(n,r),a=this.split(e);this.parent.insertBefore(i,a||void 0)}isolate(e,n){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(n),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new rp(`Cannot wrap ${e}`);return r.appendChild(this),r}};Fne.blotName="abstract";let Une=Fne;const zne=class extends Une{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};zne.scope=rt.INLINE_BLOT;let TFe=zne;const gi=TFe;class EFe{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let r=n();for(;r&&e>0;)e-=1,r=n();return r}contains(e){const n=this.iterator();let r=n();for(;r;){if(r===e)return!0;r=n()}return!1}indexOf(e){const n=this.iterator();let r=n(),i=0;for(;r;){if(r===e)return i;i+=1,r=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,r=this.head;for(;r!=null;){if(r===e)return n;n+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const r=this.iterator();let i=r();for(;i;){const a=i.length();if(e<a||n&&e===a&&(i.next==null||i.next.length()!==0))return[i,e];e-=a,i=r()}return[null,0]}forEach(e){const n=this.iterator();let r=n();for(;r;)e(r),r=n()}forEachAt(e,n,r){if(n<=0)return;const[i,a]=this.find(e);let s=e-a;const o=this.iterator(i);let l=o();for(;l&&s<e+n;){const c=l.length();e>s?r(l,e-s,Math.min(n,s+c-e)):r(l,0,Math.min(c,e+n-s)),s+=c,l=o()}}map(e){return this.reduce((n,r)=>(n.push(e(r)),n),[])}reduce(e,n){const r=this.iterator();let i=r();for(;i;)n=e(n,i),i=r();return n}}function Y9(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const r=e.create(rt.INLINE);return Array.from(t.childNodes).forEach(i=>{r.domNode.appendChild(i)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const qne=class yu extends Une{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,yu.uiClass&&this.uiNode.classList.add(yu.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new EFe,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=Y9(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof rp)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(r,i,a)=>{r.deleteAt(i,a)})}descendant(e,n=0){const[r,i]=this.children.find(n);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,i]:r instanceof yu?r.descendant(e,i):[null,-1]}descendants(e,n=0,r=Number.MAX_VALUE){let i=[],a=r;return this.children.forEachAt(n,r,(s,o,l)=>{(e.blotName==null&&e(s)||e.blotName!=null&&s instanceof e)&&i.push(s),s instanceof yu&&(i=i.concat(s.descendants(e,o,a))),a-=l}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(r=>n instanceof r)||(n.statics.scope===rt.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof yu?n.unwrap():n.remove())})}formatAt(e,n,r,i){this.children.forEachAt(e,n,(a,s,o)=>{a.formatAt(s,o,r,i)})}insertAt(e,n,r){const[i,a]=this.children.find(e);if(i)i.insertAt(a,n,r);else{const s=r==null?this.scroll.create("text",n):this.scroll.create(n,r);this.appendChild(s)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(r=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(r=>{e.insertBefore(r,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[r,i]=this.children.find(e,n),a=[[this,e]];return r instanceof yu?a.concat(r.path(i,n)):(r!=null&&a.push([r,i]),a)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return r instanceof yu&&this.moveChildren(r),super.replaceWith(r)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(i,a,s)=>{const o=i.split(a,n);o!=null&&r.appendChild(o)}),r}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const r=[],i=[];e.forEach(a=>{a.target===this.domNode&&a.type==="childList"&&(r.push(...a.addedNodes),i.push(...a.removedNodes))}),i.forEach(a=>{if(a.parentNode!=null&&a.tagName!=="IFRAME"&&document.body.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const s=this.scroll.find(a);s!=null&&(s.domNode.parentNode==null||s.domNode.parentNode===this.domNode)&&s.detach()}),r.filter(a=>a.parentNode===this.domNode&&a!==this.uiNode).sort((a,s)=>a===s?0:a.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(a=>{let s=null;a.nextSibling!=null&&(s=this.scroll.find(a.nextSibling));const o=Y9(a,this.scroll);(o.next!==s||o.next==null)&&(o.parent!=null&&o.parent.removeChild(this),this.insertBefore(o,s||void 0))}),this.enforceAllowedChildren()}};qne.uiClass="";let AFe=qne;const wo=AFe;function OFe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const _h=class wh extends wo{static create(e){return super.create(e)}static formats(e,n){const r=n.query(wh.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new oT(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(r=>{r instanceof wh||(r=r.wrap(wh.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,rt.INLINE);if(r==null)return;r instanceof Sl?this.attributes.attribute(r,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.formats()[r]!=null||this.scroll.query(r,rt.ATTRIBUTE)?this.isolate(e,n).format(r,i):super.formatAt(e,n,r,i)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const r=this.next;r instanceof wh&&r.prev===this&&OFe(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,n){const r=super.wrap(e,n);return r instanceof wh&&this.attributes.move(r),r}};_h.allowedChildren=[_h,gi],_h.blotName="inline",_h.scope=rt.INLINE_BLOT,_h.tagName="SPAN";let CFe=_h;const hL=CFe,xh=class Wj extends wo{static create(e){return super.create(e)}static formats(e,n){const r=n.query(Wj.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new oT(this.domNode)}format(e,n){const r=this.scroll.query(e,rt.BLOCK);r!=null&&(r instanceof Sl?this.attributes.attribute(r,n):e===this.statics.blotName&&!n?this.replaceWith(Wj.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,i){this.scroll.query(r,rt.BLOCK)!=null?this.format(r,i):super.formatAt(e,n,r,i)}insertAt(e,n,r){if(r==null||this.scroll.query(n,rt.INLINE)!=null)super.insertAt(e,n,r);else{const i=this.split(e);if(i!=null){const a=this.scroll.create(n,r);i.parent.insertBefore(a,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};xh.blotName="block",xh.scope=rt.BLOCK_BLOT,xh.tagName="P",xh.allowedChildren=[hL,xh,gi];let kFe=xh;const Pv=kFe,Vj=class extends wo{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.enforceAllowedChildren()}insertAt(e,n,r){super.insertAt(e,n,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Vj.blotName="container",Vj.scope=rt.BLOCK_BLOT;let NFe=Vj;const lT=NFe;class IFe extends gi{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,r,i){e===0&&n===this.length()?this.format(r,i):super.formatAt(e,n,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const es=IFe,PFe={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},RFe=100,Sh=class extends wo{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,PFe),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const r=this.registry.find(e,n);return r?r.scroll===this?r:n?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,n=rt.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,n)}formatAt(e,n,r,i){this.update(),super.formatAt(e,n,r,i)}insertAt(e,n,r){this.update(),super.insertAt(e,n,r)}optimize(e=[],n={}){super.optimize(n);const r=n.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const a=(l,c=!0)=>{l==null||l===this||l.domNode.parentNode!=null&&(r.has(l.domNode)||r.set(l.domNode,[]),c&&a(l.parent))},s=l=>{r.has(l.domNode)&&(l instanceof wo&&l.children.forEach(s),r.delete(l.domNode),l.optimize(n))};let o=e;for(let l=0;o.length>0;l+=1){if(l>=RFe)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(c=>{const u=this.find(c.target,!0);u!=null&&(u.domNode===c.target&&(c.type==="childList"?(a(this.find(c.previousSibling,!1)),Array.from(c.addedNodes).forEach(f=>{const p=this.find(f,!1);a(p,!1),p instanceof wo&&p.children.forEach(m=>{a(m,!1)})})):c.type==="attributes"&&a(u.prev)),a(u))}),this.children.forEach(s),o=Array.from(this.observer.takeRecords()),i=o.slice();i.length>0;)e.push(i.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(i=>{const a=this.find(i.target,!0);return a==null?null:r.has(a.domNode)?(r.get(a.domNode).push(i),null):(r.set(a.domNode,[i]),a)}).forEach(i=>{i!=null&&i!==this&&r.has(i.domNode)&&i.update(r.get(i.domNode)||[],n)}),n.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),n),this.optimize(e,n)}};Sh.blotName="scroll",Sh.defaultChild=Pv,Sh.allowedChildren=[Pv,lT],Sh.scope=rt.BLOCK_BLOT,Sh.tagName="DIV";let jFe=Sh;const pL=jFe,Gj=class Hne extends gi{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,r){r==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Hne&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,n){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Gj.blotName="text",Gj.scope=rt.INLINE_BLOT;let $Fe=Gj;const s1=$Fe,MFe=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Sl,AttributorStore:oT,BlockBlot:Pv,ClassAttributor:Po,ContainerBlot:lT,EmbedBlot:es,InlineBlot:hL,LeafBlot:gi,ParentBlot:wo,Registry:Hp,Scope:rt,ScrollBlot:pL,StyleAttributor:Qu,TextBlot:s1},Symbol.toStringTag,{value:"Module"}));var d_={exports:{}},zN,Q9;function LFe(){if(Q9)return zN;Q9=1;var t=-1,e=1,n=0;function r(j,L,B,z,W){if(j===L)return j?[[n,j]]:[];if(B!=null){var q=D(j,L,B);if(q)return q}var K=o(j,L),V=j.substring(0,K);j=j.substring(K),L=L.substring(K),K=c(j,L);var J=j.substring(j.length-K);j=j.substring(0,j.length-K),L=L.substring(0,L.length-K);var Q=i(j,L);return V&&Q.unshift([n,V]),J&&Q.push([n,J]),w(Q,W),z&&f(Q),Q}function i(j,L){var B;if(!j)return[[e,L]];if(!L)return[[t,j]];var z=j.length>L.length?j:L,W=j.length>L.length?L:j,q=z.indexOf(W);if(q!==-1)return B=[[e,z.substring(0,q)],[n,W],[e,z.substring(q+W.length)]],j.length>L.length&&(B[0][0]=B[2][0]=t),B;if(W.length===1)return[[t,j],[e,L]];var K=u(j,L);if(K){var V=K[0],J=K[1],Q=K[2],M=K[3],Y=K[4],se=r(V,Q),ge=r(J,M);return se.concat([[n,Y]],ge)}return a(j,L)}function a(j,L){for(var B=j.length,z=L.length,W=Math.ceil((B+z)/2),q=W,K=2*W,V=new Array(K),J=new Array(K),Q=0;Q<K;Q++)V[Q]=-1,J[Q]=-1;V[q+1]=0,J[q+1]=0;for(var M=B-z,Y=M%2!==0,se=0,ge=0,ue=0,H=0,$=0;$<W;$++){for(var ne=-$+se;ne<=$-ge;ne+=2){var X=q+ne,pe;ne===-$||ne!==$&&V[X-1]<V[X+1]?pe=V[X+1]:pe=V[X-1]+1;for(var ye=pe-ne;pe<B&&ye<z&&j.charAt(pe)===L.charAt(ye);)pe++,ye++;if(V[X]=pe,pe>B)ge+=2;else if(ye>z)se+=2;else if(Y){var le=q+M-ne;if(le>=0&&le<K&&J[le]!==-1){var Ne=B-J[le];if(pe>=Ne)return s(j,L,pe,ye)}}}for(var je=-$+ue;je<=$-H;je+=2){var le=q+je,Ne;je===-$||je!==$&&J[le-1]<J[le+1]?Ne=J[le+1]:Ne=J[le-1]+1;for(var Xe=Ne-je;Ne<B&&Xe<z&&j.charAt(B-Ne-1)===L.charAt(z-Xe-1);)Ne++,Xe++;if(J[le]=Ne,Ne>B)H+=2;else if(Xe>z)ue+=2;else if(!Y){var X=q+M-je;if(X>=0&&X<K&&V[X]!==-1){var pe=V[X],ye=q+pe-X;if(Ne=B-Ne,pe>=Ne)return s(j,L,pe,ye)}}}}return[[t,j],[e,L]]}function s(j,L,B,z){var W=j.substring(0,B),q=L.substring(0,z),K=j.substring(B),V=L.substring(z),J=r(W,q),Q=r(K,V);return J.concat(Q)}function o(j,L){if(!j||!L||j.charAt(0)!==L.charAt(0))return 0;for(var B=0,z=Math.min(j.length,L.length),W=z,q=0;B<W;)j.substring(q,W)==L.substring(q,W)?(B=W,q=B):z=W,W=Math.floor((z-B)/2+B);return T(j.charCodeAt(W-1))&&W--,W}function l(j,L){var B=j.length,z=L.length;if(B==0||z==0)return 0;B>z?j=j.substring(B-z):B<z&&(L=L.substring(0,B));var W=Math.min(B,z);if(j==L)return W;for(var q=0,K=1;;){var V=j.substring(W-K),J=L.indexOf(V);if(J==-1)return q;K+=J,(J==0||j.substring(W-K)==L.substring(0,K))&&(q=K,K++)}}function c(j,L){if(!j||!L||j.slice(-1)!==L.slice(-1))return 0;for(var B=0,z=Math.min(j.length,L.length),W=z,q=0;B<W;)j.substring(j.length-W,j.length-q)==L.substring(L.length-W,L.length-q)?(B=W,q=B):z=W,W=Math.floor((z-B)/2+B);return A(j.charCodeAt(j.length-W))&&W--,W}function u(j,L){var B=j.length>L.length?j:L,z=j.length>L.length?L:j;if(B.length<4||z.length*2<B.length)return null;function W(ge,ue,H){for(var $=ge.substring(H,H+Math.floor(ge.length/4)),ne=-1,X="",pe,ye,le,Ne;(ne=ue.indexOf($,ne+1))!==-1;){var je=o(ge.substring(H),ue.substring(ne)),Xe=c(ge.substring(0,H),ue.substring(0,ne));X.length<Xe+je&&(X=ue.substring(ne-Xe,ne)+ue.substring(ne,ne+je),pe=ge.substring(0,H-Xe),ye=ge.substring(H+je),le=ue.substring(0,ne-Xe),Ne=ue.substring(ne+je))}return X.length*2>=ge.length?[pe,ye,le,Ne,X]:null}var q=W(B,z,Math.ceil(B.length/4)),K=W(B,z,Math.ceil(B.length/2)),V;if(!q&&!K)return null;K?q?V=q[4].length>K[4].length?q:K:V=K:V=q;var J,Q,M,Y;j.length>L.length?(J=V[0],Q=V[1],M=V[2],Y=V[3]):(M=V[0],Y=V[1],J=V[2],Q=V[3]);var se=V[4];return[J,Q,M,Y,se]}function f(j){for(var L=!1,B=[],z=0,W=null,q=0,K=0,V=0,J=0,Q=0;q<j.length;)j[q][0]==n?(B[z++]=q,K=J,V=Q,J=0,Q=0,W=j[q][1]):(j[q][0]==e?J+=j[q][1].length:Q+=j[q][1].length,W&&W.length<=Math.max(K,V)&&W.length<=Math.max(J,Q)&&(j.splice(B[z-1],0,[t,W]),j[B[z-1]+1][0]=e,z--,z--,q=z>0?B[z-1]:-1,K=0,V=0,J=0,Q=0,W=null,L=!0)),q++;for(L&&w(j),x(j),q=1;q<j.length;){if(j[q-1][0]==t&&j[q][0]==e){var M=j[q-1][1],Y=j[q][1],se=l(M,Y),ge=l(Y,M);se>=ge?(se>=M.length/2||se>=Y.length/2)&&(j.splice(q,0,[n,Y.substring(0,se)]),j[q-1][1]=M.substring(0,M.length-se),j[q+1][1]=Y.substring(se),q++):(ge>=M.length/2||ge>=Y.length/2)&&(j.splice(q,0,[n,M.substring(0,ge)]),j[q-1][0]=e,j[q-1][1]=Y.substring(0,Y.length-ge),j[q+1][0]=t,j[q+1][1]=M.substring(ge),q++),q++}q++}}var p=/[^a-zA-Z0-9]/,m=/\s/,_=/[\r\n]/,y=/\n\r?\n$/,b=/^\r?\n\r?\n/;function x(j){function L(ge,ue){if(!ge||!ue)return 6;var H=ge.charAt(ge.length-1),$=ue.charAt(0),ne=H.match(p),X=$.match(p),pe=ne&&H.match(m),ye=X&&$.match(m),le=pe&&H.match(_),Ne=ye&&$.match(_),je=le&&ge.match(y),Xe=Ne&&ue.match(b);return je||Xe?5:le||Ne?4:ne&&!pe&&ye?3:pe||ye?2:ne||X?1:0}for(var B=1;B<j.length-1;){if(j[B-1][0]==n&&j[B+1][0]==n){var z=j[B-1][1],W=j[B][1],q=j[B+1][1],K=c(z,W);if(K){var V=W.substring(W.length-K);z=z.substring(0,z.length-K),W=V+W.substring(0,W.length-K),q=V+q}for(var J=z,Q=W,M=q,Y=L(z,W)+L(W,q);W.charAt(0)===q.charAt(0);){z+=W.charAt(0),W=W.substring(1)+q.charAt(0),q=q.substring(1);var se=L(z,W)+L(W,q);se>=Y&&(Y=se,J=z,Q=W,M=q)}j[B-1][1]!=J&&(J?j[B-1][1]=J:(j.splice(B-1,1),B--),j[B][1]=Q,M?j[B+1][1]=M:(j.splice(B+1,1),B--))}B++}}function w(j,L){j.push([n,""]);for(var B=0,z=0,W=0,q="",K="",V;B<j.length;){if(B<j.length-1&&!j[B][1]){j.splice(B,1);continue}switch(j[B][0]){case e:W++,K+=j[B][1],B++;break;case t:z++,q+=j[B][1],B++;break;case n:var J=B-W-z-1;if(L){if(J>=0&&C(j[J][1])){var Q=j[J][1].slice(-1);if(j[J][1]=j[J][1].slice(0,-1),q=Q+q,K=Q+K,!j[J][1]){j.splice(J,1),B--;var M=J-1;j[M]&&j[M][0]===e&&(W++,K=j[M][1]+K,M--),j[M]&&j[M][0]===t&&(z++,q=j[M][1]+q,M--),J=M}}if(E(j[B][1])){var Q=j[B][1].charAt(0);j[B][1]=j[B][1].slice(1),q+=Q,K+=Q}}if(B<j.length-1&&!j[B][1]){j.splice(B,1);break}if(q.length>0||K.length>0){q.length>0&&K.length>0&&(V=o(K,q),V!==0&&(J>=0?j[J][1]+=K.substring(0,V):(j.splice(0,0,[n,K.substring(0,V)]),B++),K=K.substring(V),q=q.substring(V)),V=c(K,q),V!==0&&(j[B][1]=K.substring(K.length-V)+j[B][1],K=K.substring(0,K.length-V),q=q.substring(0,q.length-V)));var Y=W+z;q.length===0&&K.length===0?(j.splice(B-Y,Y),B=B-Y):q.length===0?(j.splice(B-Y,Y,[e,K]),B=B-Y+1):K.length===0?(j.splice(B-Y,Y,[t,q]),B=B-Y+1):(j.splice(B-Y,Y,[t,q],[e,K]),B=B-Y+2)}B!==0&&j[B-1][0]===n?(j[B-1][1]+=j[B][1],j.splice(B,1)):B++,W=0,z=0,q="",K="";break}}j[j.length-1][1]===""&&j.pop();var se=!1;for(B=1;B<j.length-1;)j[B-1][0]===n&&j[B+1][0]===n&&(j[B][1].substring(j[B][1].length-j[B-1][1].length)===j[B-1][1]?(j[B][1]=j[B-1][1]+j[B][1].substring(0,j[B][1].length-j[B-1][1].length),j[B+1][1]=j[B-1][1]+j[B+1][1],j.splice(B-1,1),se=!0):j[B][1].substring(0,j[B+1][1].length)==j[B+1][1]&&(j[B-1][1]+=j[B+1][1],j[B][1]=j[B][1].substring(j[B+1][1].length)+j[B+1][1],j.splice(B+1,1),se=!0)),B++;se&&w(j,L)}function T(j){return j>=55296&&j<=56319}function A(j){return j>=56320&&j<=57343}function E(j){return A(j.charCodeAt(0))}function C(j){return T(j.charCodeAt(j.length-1))}function R(j){for(var L=[],B=0;B<j.length;B++)j[B][1].length>0&&L.push(j[B]);return L}function N(j,L,B,z){return C(j)||E(z)?null:R([[n,j],[t,L],[e,B],[n,z]])}function D(j,L,B){var z=typeof B=="number"?{index:B,length:0}:B.oldRange,W=typeof B=="number"?null:B.newRange,q=j.length,K=L.length;if(z.length===0&&(W===null||W.length===0)){var V=z.index,J=j.slice(0,V),Q=j.slice(V),M=W?W.index:null;e:{var Y=V+K-q;if(M!==null&&M!==Y||Y<0||Y>K)break e;var se=L.slice(0,Y),ge=L.slice(Y);if(ge!==Q)break e;var ue=Math.min(V,Y),H=J.slice(0,ue),$=se.slice(0,ue);if(H!==$)break e;var ne=J.slice(ue),X=se.slice(ue);return N(H,ne,X,Q)}e:{if(M!==null&&M!==V)break e;var pe=V,se=L.slice(0,pe),ge=L.slice(pe);if(se!==J)break e;var ye=Math.min(q-pe,K-pe),le=Q.slice(Q.length-ye),Ne=ge.slice(ge.length-ye);if(le!==Ne)break e;var ne=Q.slice(0,Q.length-ye),X=ge.slice(0,ge.length-ye);return N(J,ne,X,le)}}if(z.length>0&&W&&W.length===0)e:{var H=j.slice(0,z.index),le=j.slice(z.index+z.length),ue=H.length,ye=le.length;if(K<ue+ye)break e;var $=L.slice(0,ue),Ne=L.slice(K-ye);if(H!==$||le!==Ne)break e;var ne=j.slice(ue,q-ye),X=L.slice(ue,K-ye);return N(H,ne,X,le)}return null}function Z(j,L,B,z){return r(j,L,B,z,!0)}return Z.INSERT=e,Z.DELETE=t,Z.EQUAL=n,zN=Z,zN}var Jg={exports:{}};Jg.exports;var e7;function Wne(){return e7||(e7=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",s="[object Array]",o="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",f="[object GeneratorFunction]",p="[object Map]",m="[object Number]",_="[object Object]",y="[object Promise]",b="[object RegExp]",x="[object Set]",w="[object String]",T="[object Symbol]",A="[object WeakMap]",E="[object ArrayBuffer]",C="[object DataView]",R="[object Float32Array]",N="[object Float64Array]",D="[object Int8Array]",Z="[object Int16Array]",j="[object Int32Array]",L="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",W="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,K=/\w*$/,V=/^\[object .+?Constructor\]$/,J=/^(?:0|[1-9]\d*)$/,Q={};Q[a]=Q[s]=Q[E]=Q[C]=Q[o]=Q[l]=Q[R]=Q[N]=Q[D]=Q[Z]=Q[j]=Q[p]=Q[m]=Q[_]=Q[b]=Q[x]=Q[w]=Q[T]=Q[L]=Q[B]=Q[z]=Q[W]=!0,Q[c]=Q[u]=Q[A]=!1;var M=typeof Cs=="object"&&Cs&&Cs.Object===Object&&Cs,Y=typeof self=="object"&&self&&self.Object===Object&&self,se=M||Y||Function("return this")(),ge=e&&!e.nodeType&&e,ue=ge&&!0&&t&&!t.nodeType&&t,H=ue&&ue.exports===ge;function $(P,G){return P.set(G[0],G[1]),P}function ne(P,G){return P.add(G),P}function X(P,G){for(var re=-1,ve=P?P.length:0;++re<ve&&G(P[re],re,P)!==!1;);return P}function pe(P,G){for(var re=-1,ve=G.length,bt=P.length;++re<ve;)P[bt+re]=G[re];return P}function ye(P,G,re,ve){for(var bt=-1,Je=P?P.length:0;++bt<Je;)re=G(re,P[bt],bt,P);return re}function le(P,G){for(var re=-1,ve=Array(P);++re<P;)ve[re]=G(re);return ve}function Ne(P,G){return P==null?void 0:P[G]}function je(P){var G=!1;if(P!=null&&typeof P.toString!="function")try{G=!!(P+"")}catch{}return G}function Xe(P){var G=-1,re=Array(P.size);return P.forEach(function(ve,bt){re[++G]=[bt,ve]}),re}function st(P,G){return function(re){return P(G(re))}}function kt(P){var G=-1,re=Array(P.size);return P.forEach(function(ve){re[++G]=ve}),re}var vn=Array.prototype,gn=Function.prototype,bn=Object.prototype,_n=se["__core-js_shared__"],br=(function(){var P=/[^.]+$/.exec(_n&&_n.keys&&_n.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""})(),ya=gn.toString,dr=bn.hasOwnProperty,Rr=bn.toString,va=RegExp("^"+ya.call(dr).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jn=H?se.Buffer:void 0,bi=se.Symbol,Fs=se.Uint8Array,sr=st(Object.getPrototypeOf,Object),Gi=Object.create,Rl=bn.propertyIsEnumerable,Us=vn.splice,ba=Object.getOwnPropertySymbols,jr=Jn?Jn.isBuffer:void 0,_i=st(Object.keys,Object),Ki=Nt(se,"DataView"),wi=Nt(se,"Map"),Vr=Nt(se,"Promise"),xi=Nt(se,"Set"),Gr=Nt(se,"WeakMap"),oi=Nt(Object,"create"),Zi=Un(Ki),ns=Un(wi),Do=Un(Vr),hn=Un(xi),Si=Un(Gr),Xi=bi?bi.prototype:void 0,Bo=Xi?Xi.valueOf:void 0;function _r(P){var G=-1,re=P?P.length:0;for(this.clear();++G<re;){var ve=P[G];this.set(ve[0],ve[1])}}function Fo(){this.__data__=oi?oi(null):{}}function rs(P){return this.has(P)&&delete this.__data__[P]}function ed(P){var G=this.__data__;if(oi){var re=G[P];return re===r?void 0:re}return dr.call(G,P)?G[P]:void 0}function or(P){var G=this.__data__;return oi?G[P]!==void 0:dr.call(G,P)}function $r(P,G){var re=this.__data__;return re[P]=oi&&G===void 0?r:G,this}_r.prototype.clear=Fo,_r.prototype.delete=rs,_r.prototype.get=ed,_r.prototype.has=or,_r.prototype.set=$r;function In(P){var G=-1,re=P?P.length:0;for(this.clear();++G<re;){var ve=P[G];this.set(ve[0],ve[1])}}function Uo(){this.__data__=[]}function jl(P){var G=this.__data__,re=is(G,P);if(re<0)return!1;var ve=G.length-1;return re==ve?G.pop():Us.call(G,re,1),!0}function Dc(P){var G=this.__data__,re=is(G,P);return re<0?void 0:G[re][1]}function Ti(P){return is(this.__data__,P)>-1}function Ji(P,G){var re=this.__data__,ve=is(re,P);return ve<0?re.push([P,G]):re[ve][1]=G,this}In.prototype.clear=Uo,In.prototype.delete=jl,In.prototype.get=Dc,In.prototype.has=Ti,In.prototype.set=Ji;function Yn(P){var G=-1,re=P?P.length:0;for(this.clear();++G<re;){var ve=P[G];this.set(ve[0],ve[1])}}function $l(){this.__data__={hash:new _r,map:new(wi||In),string:new _r}}function Bc(P){return zs(this,P).delete(P)}function Fc(P){return zs(this,P).get(P)}function Ge(P){return zs(this,P).has(P)}function ae(P,G){return zs(this,P).set(P,G),this}Yn.prototype.clear=$l,Yn.prototype.delete=Bc,Yn.prototype.get=Fc,Yn.prototype.has=Ge,Yn.prototype.set=ae;function Te(P){this.__data__=new In(P)}function Be(){this.__data__=new In}function nn(P){return this.__data__.delete(P)}function Ot(P){return this.__data__.get(P)}function wn(P){return this.__data__.has(P)}function Qn(P,G){var re=this.__data__;if(re instanceof In){var ve=re.__data__;if(!wi||ve.length<n-1)return ve.push([P,G]),this;re=this.__data__=new Yn(ve)}return re.set(P,G),this}Te.prototype.clear=Be,Te.prototype.delete=nn,Te.prototype.get=Ot,Te.prototype.has=wn,Te.prototype.set=Qn;function wr(P,G){var re=Yi(P)||ls(P)?le(P.length,String):[],ve=re.length,bt=!!ve;for(var Je in P)dr.call(P,Je)&&!(bt&&(Je=="length"||jf(Je,ve)))&&re.push(Je);return re}function li(P,G,re){var ve=P[G];(!(dr.call(P,G)&&Ho(ve,re))||re===void 0&&!(G in P))&&(P[G]=re)}function is(P,G){for(var re=P.length;re--;)if(Ho(P[re][0],G))return re;return-1}function tn(P,G){return P&&Ll(G,od(G),P)}function _a(P,G,re,ve,bt,Je,zt){var qt;if(ve&&(qt=Je?ve(P,bt,Je,zt):ve(P)),qt!==void 0)return qt;if(!Ai(P))return P;var ln=Yi(P);if(ln){if(qt=nd(P),!G)return Pf(P,qt)}else{var Wt=os(P),lr=Wt==u||Wt==f;if(Wo(P))return Uc(P,G);if(Wt==_||Wt==a||lr&&!Je){if(je(P))return Je?P:{};if(qt=wa(lr?{}:P),!G)return Dl(P,tn(qt,P))}else{if(!Q[Wt])return Je?P:{};qt=Rf(P,Wt,_a,G)}}zt||(zt=new Te);var Zr=zt.get(P);if(Zr)return Zr;if(zt.set(P,qt),!ln)var zn=re?Rm(P):od(P);return X(zn||P,function(cr,fr){zn&&(fr=cr,cr=P[fr]),li(qt,fr,_a(cr,G,re,ve,fr,P,zt))}),qt}function Kr(P){return Ai(P)?Gi(P):{}}function Cm(P,G,re){var ve=G(P);return Yi(P)?ve:pe(ve,re(P))}function Ei(P){return Rr.call(P)}function km(P){if(!Ai(P)||zc(P))return!1;var G=id(P)||je(P)?va:V;return G.test(Un(P))}function Nm(P){if(!xa(P))return _i(P);var G=[];for(var re in Object(P))dr.call(P,re)&&re!="constructor"&&G.push(re);return G}function Uc(P,G){if(G)return P.slice();var re=new P.constructor(P.length);return P.copy(re),re}function zo(P){var G=new P.constructor(P.byteLength);return new Fs(G).set(new Fs(P)),G}function as(P,G){var re=G?zo(P.buffer):P.buffer;return new P.constructor(re,P.byteOffset,P.byteLength)}function qo(P,G,re){var ve=G?re(Xe(P),!0):Xe(P);return ye(ve,$,new P.constructor)}function Ml(P){var G=new P.constructor(P.source,K.exec(P));return G.lastIndex=P.lastIndex,G}function Im(P,G,re){var ve=G?re(kt(P),!0):kt(P);return ye(ve,ne,new P.constructor)}function Pm(P){return Bo?Object(Bo.call(P)):{}}function td(P,G){var re=G?zo(P.buffer):P.buffer;return new P.constructor(re,P.byteOffset,P.length)}function Pf(P,G){var re=-1,ve=P.length;for(G||(G=Array(ve));++re<ve;)G[re]=P[re];return G}function Ll(P,G,re,ve){re||(re={});for(var bt=-1,Je=G.length;++bt<Je;){var zt=G[bt],qt=void 0;li(re,zt,qt===void 0?P[zt]:qt)}return re}function Dl(P,G){return Ll(P,ss(P),G)}function Rm(P){return Cm(P,od,ss)}function zs(P,G){var re=P.__data__;return rd(G)?re[typeof G=="string"?"string":"hash"]:re.map}function Nt(P,G){var re=Ne(P,G);return km(re)?re:void 0}var ss=ba?st(ba,Object):Bl,os=Ei;(Ki&&os(new Ki(new ArrayBuffer(1)))!=C||wi&&os(new wi)!=p||Vr&&os(Vr.resolve())!=y||xi&&os(new xi)!=x||Gr&&os(new Gr)!=A)&&(os=function(P){var G=Rr.call(P),re=G==_?P.constructor:void 0,ve=re?Un(re):void 0;if(ve)switch(ve){case Zi:return C;case ns:return p;case Do:return y;case hn:return x;case Si:return A}return G});function nd(P){var G=P.length,re=P.constructor(G);return G&&typeof P[0]=="string"&&dr.call(P,"index")&&(re.index=P.index,re.input=P.input),re}function wa(P){return typeof P.constructor=="function"&&!xa(P)?Kr(sr(P)):{}}function Rf(P,G,re,ve){var bt=P.constructor;switch(G){case E:return zo(P);case o:case l:return new bt(+P);case C:return as(P,ve);case R:case N:case D:case Z:case j:case L:case B:case z:case W:return td(P,ve);case p:return qo(P,ve,re);case m:case w:return new bt(P);case b:return Ml(P);case x:return Im(P,ve,re);case T:return Pm(P)}}function jf(P,G){return G=G??i,!!G&&(typeof P=="number"||J.test(P))&&P>-1&&P%1==0&&P<G}function rd(P){var G=typeof P;return G=="string"||G=="number"||G=="symbol"||G=="boolean"?P!=="__proto__":P===null}function zc(P){return!!br&&br in P}function xa(P){var G=P&&P.constructor,re=typeof G=="function"&&G.prototype||bn;return P===re}function Un(P){if(P!=null){try{return ya.call(P)}catch{}try{return P+""}catch{}}return""}function Sa(P){return _a(P,!0,!0)}function Ho(P,G){return P===G||P!==P&&G!==G}function ls(P){return $f(P)&&dr.call(P,"callee")&&(!Rl.call(P,"callee")||Rr.call(P)==a)}var Yi=Array.isArray;function qc(P){return P!=null&&ad(P.length)&&!id(P)}function $f(P){return sd(P)&&qc(P)}var Wo=jr||Fl;function id(P){var G=Ai(P)?Rr.call(P):"";return G==u||G==f}function ad(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=i}function Ai(P){var G=typeof P;return!!P&&(G=="object"||G=="function")}function sd(P){return!!P&&typeof P=="object"}function od(P){return qc(P)?wr(P):Nm(P)}function Bl(){return[]}function Fl(){return!1}t.exports=Sa})(Jg,Jg.exports)),Jg.exports}var Yg={exports:{}};Yg.exports;var t7;function Vne(){return t7||(t7=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,a=2,s=9007199254740991,o="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",f="[object Date]",p="[object Error]",m="[object Function]",_="[object GeneratorFunction]",y="[object Map]",b="[object Number]",x="[object Null]",w="[object Object]",T="[object Promise]",A="[object Proxy]",E="[object RegExp]",C="[object Set]",R="[object String]",N="[object Symbol]",D="[object Undefined]",Z="[object WeakMap]",j="[object ArrayBuffer]",L="[object DataView]",B="[object Float32Array]",z="[object Float64Array]",W="[object Int8Array]",q="[object Int16Array]",K="[object Int32Array]",V="[object Uint8Array]",J="[object Uint8ClampedArray]",Q="[object Uint16Array]",M="[object Uint32Array]",Y=/[\\^$.*+?()[\]{}|]/g,se=/^\[object .+?Constructor\]$/,ge=/^(?:0|[1-9]\d*)$/,ue={};ue[B]=ue[z]=ue[W]=ue[q]=ue[K]=ue[V]=ue[J]=ue[Q]=ue[M]=!0,ue[o]=ue[l]=ue[j]=ue[u]=ue[L]=ue[f]=ue[p]=ue[m]=ue[y]=ue[b]=ue[w]=ue[E]=ue[C]=ue[R]=ue[Z]=!1;var H=typeof Cs=="object"&&Cs&&Cs.Object===Object&&Cs,$=typeof self=="object"&&self&&self.Object===Object&&self,ne=H||$||Function("return this")(),X=e&&!e.nodeType&&e,pe=X&&!0&&t&&!t.nodeType&&t,ye=pe&&pe.exports===X,le=ye&&H.process,Ne=(function(){try{return le&&le.binding&&le.binding("util")}catch{}})(),je=Ne&&Ne.isTypedArray;function Xe(P,G){for(var re=-1,ve=P==null?0:P.length,bt=0,Je=[];++re<ve;){var zt=P[re];G(zt,re,P)&&(Je[bt++]=zt)}return Je}function st(P,G){for(var re=-1,ve=G.length,bt=P.length;++re<ve;)P[bt+re]=G[re];return P}function kt(P,G){for(var re=-1,ve=P==null?0:P.length;++re<ve;)if(G(P[re],re,P))return!0;return!1}function vn(P,G){for(var re=-1,ve=Array(P);++re<P;)ve[re]=G(re);return ve}function gn(P){return function(G){return P(G)}}function bn(P,G){return P.has(G)}function _n(P,G){return P==null?void 0:P[G]}function br(P){var G=-1,re=Array(P.size);return P.forEach(function(ve,bt){re[++G]=[bt,ve]}),re}function ya(P,G){return function(re){return P(G(re))}}function dr(P){var G=-1,re=Array(P.size);return P.forEach(function(ve){re[++G]=ve}),re}var Rr=Array.prototype,va=Function.prototype,Jn=Object.prototype,bi=ne["__core-js_shared__"],Fs=va.toString,sr=Jn.hasOwnProperty,Gi=(function(){var P=/[^.]+$/.exec(bi&&bi.keys&&bi.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""})(),Rl=Jn.toString,Us=RegExp("^"+Fs.call(sr).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ba=ye?ne.Buffer:void 0,jr=ne.Symbol,_i=ne.Uint8Array,Ki=Jn.propertyIsEnumerable,wi=Rr.splice,Vr=jr?jr.toStringTag:void 0,xi=Object.getOwnPropertySymbols,Gr=ba?ba.isBuffer:void 0,oi=ya(Object.keys,Object),Zi=ss(ne,"DataView"),ns=ss(ne,"Map"),Do=ss(ne,"Promise"),hn=ss(ne,"Set"),Si=ss(ne,"WeakMap"),Xi=ss(Object,"create"),Bo=Un(Zi),_r=Un(ns),Fo=Un(Do),rs=Un(hn),ed=Un(Si),or=jr?jr.prototype:void 0,$r=or?or.valueOf:void 0;function In(P){var G=-1,re=P==null?0:P.length;for(this.clear();++G<re;){var ve=P[G];this.set(ve[0],ve[1])}}function Uo(){this.__data__=Xi?Xi(null):{},this.size=0}function jl(P){var G=this.has(P)&&delete this.__data__[P];return this.size-=G?1:0,G}function Dc(P){var G=this.__data__;if(Xi){var re=G[P];return re===r?void 0:re}return sr.call(G,P)?G[P]:void 0}function Ti(P){var G=this.__data__;return Xi?G[P]!==void 0:sr.call(G,P)}function Ji(P,G){var re=this.__data__;return this.size+=this.has(P)?0:1,re[P]=Xi&&G===void 0?r:G,this}In.prototype.clear=Uo,In.prototype.delete=jl,In.prototype.get=Dc,In.prototype.has=Ti,In.prototype.set=Ji;function Yn(P){var G=-1,re=P==null?0:P.length;for(this.clear();++G<re;){var ve=P[G];this.set(ve[0],ve[1])}}function $l(){this.__data__=[],this.size=0}function Bc(P){var G=this.__data__,re=Uc(G,P);if(re<0)return!1;var ve=G.length-1;return re==ve?G.pop():wi.call(G,re,1),--this.size,!0}function Fc(P){var G=this.__data__,re=Uc(G,P);return re<0?void 0:G[re][1]}function Ge(P){return Uc(this.__data__,P)>-1}function ae(P,G){var re=this.__data__,ve=Uc(re,P);return ve<0?(++this.size,re.push([P,G])):re[ve][1]=G,this}Yn.prototype.clear=$l,Yn.prototype.delete=Bc,Yn.prototype.get=Fc,Yn.prototype.has=Ge,Yn.prototype.set=ae;function Te(P){var G=-1,re=P==null?0:P.length;for(this.clear();++G<re;){var ve=P[G];this.set(ve[0],ve[1])}}function Be(){this.size=0,this.__data__={hash:new In,map:new(ns||Yn),string:new In}}function nn(P){var G=Nt(this,P).delete(P);return this.size-=G?1:0,G}function Ot(P){return Nt(this,P).get(P)}function wn(P){return Nt(this,P).has(P)}function Qn(P,G){var re=Nt(this,P),ve=re.size;return re.set(P,G),this.size+=re.size==ve?0:1,this}Te.prototype.clear=Be,Te.prototype.delete=nn,Te.prototype.get=Ot,Te.prototype.has=wn,Te.prototype.set=Qn;function wr(P){var G=-1,re=P==null?0:P.length;for(this.__data__=new Te;++G<re;)this.add(P[G])}function li(P){return this.__data__.set(P,r),this}function is(P){return this.__data__.has(P)}wr.prototype.add=wr.prototype.push=li,wr.prototype.has=is;function tn(P){var G=this.__data__=new Yn(P);this.size=G.size}function _a(){this.__data__=new Yn,this.size=0}function Kr(P){var G=this.__data__,re=G.delete(P);return this.size=G.size,re}function Cm(P){return this.__data__.get(P)}function Ei(P){return this.__data__.has(P)}function km(P,G){var re=this.__data__;if(re instanceof Yn){var ve=re.__data__;if(!ns||ve.length<n-1)return ve.push([P,G]),this.size=++re.size,this;re=this.__data__=new Te(ve)}return re.set(P,G),this.size=re.size,this}tn.prototype.clear=_a,tn.prototype.delete=Kr,tn.prototype.get=Cm,tn.prototype.has=Ei,tn.prototype.set=km;function Nm(P,G){var re=ls(P),ve=!re&&Ho(P),bt=!re&&!ve&&qc(P),Je=!re&&!ve&&!bt&&sd(P),zt=re||ve||bt||Je,qt=zt?vn(P.length,String):[],ln=qt.length;for(var Wt in P)sr.call(P,Wt)&&!(zt&&(Wt=="length"||bt&&(Wt=="offset"||Wt=="parent")||Je&&(Wt=="buffer"||Wt=="byteLength"||Wt=="byteOffset")||Rf(Wt,ln)))&&qt.push(Wt);return qt}function Uc(P,G){for(var re=P.length;re--;)if(Sa(P[re][0],G))return re;return-1}function zo(P,G,re){var ve=G(P);return ls(P)?ve:st(ve,re(P))}function as(P){return P==null?P===void 0?D:x:Vr&&Vr in Object(P)?os(P):xa(P)}function qo(P){return Ai(P)&&as(P)==o}function Ml(P,G,re,ve,bt){return P===G?!0:P==null||G==null||!Ai(P)&&!Ai(G)?P!==P&&G!==G:Im(P,G,re,ve,Ml,bt)}function Im(P,G,re,ve,bt,Je){var zt=ls(P),qt=ls(G),ln=zt?l:wa(P),Wt=qt?l:wa(G);ln=ln==o?w:ln,Wt=Wt==o?w:Wt;var lr=ln==w,Zr=Wt==w,zn=ln==Wt;if(zn&&qc(P)){if(!qc(G))return!1;zt=!0,lr=!1}if(zn&&!lr)return Je||(Je=new tn),zt||sd(P)?Ll(P,G,re,ve,bt,Je):Dl(P,G,ln,re,ve,bt,Je);if(!(re&i)){var cr=lr&&sr.call(P,"__wrapped__"),fr=Zr&&sr.call(G,"__wrapped__");if(cr||fr){var er=cr?P.value():P,ci=fr?G.value():G;return Je||(Je=new tn),bt(er,ci,re,ve,Je)}}return zn?(Je||(Je=new tn),Rm(P,G,re,ve,bt,Je)):!1}function Pm(P){if(!ad(P)||rd(P))return!1;var G=Wo(P)?Us:se;return G.test(Un(P))}function td(P){return Ai(P)&&id(P.length)&&!!ue[as(P)]}function Pf(P){if(!zc(P))return oi(P);var G=[];for(var re in Object(P))sr.call(P,re)&&re!="constructor"&&G.push(re);return G}function Ll(P,G,re,ve,bt,Je){var zt=re&i,qt=P.length,ln=G.length;if(qt!=ln&&!(zt&&ln>qt))return!1;var Wt=Je.get(P);if(Wt&&Je.get(G))return Wt==G;var lr=-1,Zr=!0,zn=re&a?new wr:void 0;for(Je.set(P,G),Je.set(G,P);++lr<qt;){var cr=P[lr],fr=G[lr];if(ve)var er=zt?ve(fr,cr,lr,G,P,Je):ve(cr,fr,lr,P,G,Je);if(er!==void 0){if(er)continue;Zr=!1;break}if(zn){if(!kt(G,function(ci,qs){if(!bn(zn,qs)&&(cr===ci||bt(cr,ci,re,ve,Je)))return zn.push(qs)})){Zr=!1;break}}else if(!(cr===fr||bt(cr,fr,re,ve,Je))){Zr=!1;break}}return Je.delete(P),Je.delete(G),Zr}function Dl(P,G,re,ve,bt,Je,zt){switch(re){case L:if(P.byteLength!=G.byteLength||P.byteOffset!=G.byteOffset)return!1;P=P.buffer,G=G.buffer;case j:return!(P.byteLength!=G.byteLength||!Je(new _i(P),new _i(G)));case u:case f:case b:return Sa(+P,+G);case p:return P.name==G.name&&P.message==G.message;case E:case R:return P==G+"";case y:var qt=br;case C:var ln=ve&i;if(qt||(qt=dr),P.size!=G.size&&!ln)return!1;var Wt=zt.get(P);if(Wt)return Wt==G;ve|=a,zt.set(P,G);var lr=Ll(qt(P),qt(G),ve,bt,Je,zt);return zt.delete(P),lr;case N:if($r)return $r.call(P)==$r.call(G)}return!1}function Rm(P,G,re,ve,bt,Je){var zt=re&i,qt=zs(P),ln=qt.length,Wt=zs(G),lr=Wt.length;if(ln!=lr&&!zt)return!1;for(var Zr=ln;Zr--;){var zn=qt[Zr];if(!(zt?zn in G:sr.call(G,zn)))return!1}var cr=Je.get(P);if(cr&&Je.get(G))return cr==G;var fr=!0;Je.set(P,G),Je.set(G,P);for(var er=zt;++Zr<ln;){zn=qt[Zr];var ci=P[zn],qs=G[zn];if(ve)var Hc=zt?ve(qs,ci,zn,G,P,Je):ve(ci,qs,zn,P,G,Je);if(!(Hc===void 0?ci===qs||bt(ci,qs,re,ve,Je):Hc)){fr=!1;break}er||(er=zn=="constructor")}if(fr&&!er){var Mf=P.constructor,Wc=G.constructor;Mf!=Wc&&"constructor"in P&&"constructor"in G&&!(typeof Mf=="function"&&Mf instanceof Mf&&typeof Wc=="function"&&Wc instanceof Wc)&&(fr=!1)}return Je.delete(P),Je.delete(G),fr}function zs(P){return zo(P,od,nd)}function Nt(P,G){var re=P.__data__;return jf(G)?re[typeof G=="string"?"string":"hash"]:re.map}function ss(P,G){var re=_n(P,G);return Pm(re)?re:void 0}function os(P){var G=sr.call(P,Vr),re=P[Vr];try{P[Vr]=void 0;var ve=!0}catch{}var bt=Rl.call(P);return ve&&(G?P[Vr]=re:delete P[Vr]),bt}var nd=xi?function(P){return P==null?[]:(P=Object(P),Xe(xi(P),function(G){return Ki.call(P,G)}))}:Bl,wa=as;(Zi&&wa(new Zi(new ArrayBuffer(1)))!=L||ns&&wa(new ns)!=y||Do&&wa(Do.resolve())!=T||hn&&wa(new hn)!=C||Si&&wa(new Si)!=Z)&&(wa=function(P){var G=as(P),re=G==w?P.constructor:void 0,ve=re?Un(re):"";if(ve)switch(ve){case Bo:return L;case _r:return y;case Fo:return T;case rs:return C;case ed:return Z}return G});function Rf(P,G){return G=G??s,!!G&&(typeof P=="number"||ge.test(P))&&P>-1&&P%1==0&&P<G}function jf(P){var G=typeof P;return G=="string"||G=="number"||G=="symbol"||G=="boolean"?P!=="__proto__":P===null}function rd(P){return!!Gi&&Gi in P}function zc(P){var G=P&&P.constructor,re=typeof G=="function"&&G.prototype||Jn;return P===re}function xa(P){return Rl.call(P)}function Un(P){if(P!=null){try{return Fs.call(P)}catch{}try{return P+""}catch{}}return""}function Sa(P,G){return P===G||P!==P&&G!==G}var Ho=qo((function(){return arguments})())?qo:function(P){return Ai(P)&&sr.call(P,"callee")&&!Ki.call(P,"callee")},ls=Array.isArray;function Yi(P){return P!=null&&id(P.length)&&!Wo(P)}var qc=Gr||Fl;function $f(P,G){return Ml(P,G)}function Wo(P){if(!ad(P))return!1;var G=as(P);return G==m||G==_||G==c||G==A}function id(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=s}function ad(P){var G=typeof P;return P!=null&&(G=="object"||G=="function")}function Ai(P){return P!=null&&typeof P=="object"}var sd=je?gn(je):td;function od(P){return Yi(P)?Nm(P):Pf(P)}function Bl(){return[]}function Fl(){return!1}t.exports=$f})(Yg,Yg.exports)),Yg.exports}var f_={},n7;function DFe(){if(n7)return f_;n7=1,Object.defineProperty(f_,"__esModule",{value:!0});const t=Wne(),e=Vne();var n;return(function(r){function i(l={},c={},u=!1){typeof l!="object"&&(l={}),typeof c!="object"&&(c={});let f=t(c);u||(f=Object.keys(f).reduce((p,m)=>(f[m]!=null&&(p[m]=f[m]),p),{}));for(const p in l)l[p]!==void 0&&c[p]===void 0&&(f[p]=l[p]);return Object.keys(f).length>0?f:void 0}r.compose=i;function a(l={},c={}){typeof l!="object"&&(l={}),typeof c!="object"&&(c={});const u=Object.keys(l).concat(Object.keys(c)).reduce((f,p)=>(e(l[p],c[p])||(f[p]=c[p]===void 0?null:c[p]),f),{});return Object.keys(u).length>0?u:void 0}r.diff=a;function s(l={},c={}){l=l||{};const u=Object.keys(c).reduce((f,p)=>(c[p]!==l[p]&&l[p]!==void 0&&(f[p]=c[p]),f),{});return Object.keys(l).reduce((f,p)=>(l[p]!==c[p]&&c[p]===void 0&&(f[p]=null),f),u)}r.invert=s;function o(l,c,u=!1){if(typeof l!="object")return c;if(typeof c!="object")return;if(!u)return c;const f=Object.keys(c).reduce((p,m)=>(l[m]===void 0&&(p[m]=c[m]),p),{});return Object.keys(f).length>0?f:void 0}r.transform=o})(n||(n={})),f_.default=n,f_}var h_={},r7;function Gne(){if(r7)return h_;r7=1,Object.defineProperty(h_,"__esModule",{value:!0});var t;return(function(e){function n(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=n})(t||(t={})),h_.default=t,h_}var p_={},i7;function BFe(){if(i7)return p_;i7=1,Object.defineProperty(p_,"__esModule",{value:!0});const t=Gne();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const i=this.ops[this.index];if(i){const a=this.offset,s=t.default.length(i);if(r>=s-a?(r=s-a,this.index+=1,this.offset=0):this.offset+=r,typeof i.delete=="number")return{delete:r};{const o={};return i.attributes&&(o.attributes=i.attributes),typeof i.retain=="number"?o.retain=r:typeof i.retain=="object"&&i.retain!==null?o.retain=i.retain:typeof i.insert=="string"?o.insert=i.insert.substr(a,r):o.insert=i.insert,o}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,i=this.index,a=this.next(),s=this.ops.slice(this.index);return this.offset=r,this.index=i,[a].concat(s)}}else return[]}}return p_.default=e,p_}var a7;function FFe(){return a7||(a7=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=LFe(),r=Wne(),i=Vne(),a=DFe();e.AttributeMap=a.default;const s=Gne();e.Op=s.default;const o=BFe();e.OpIterator=o.default;const l="\0",c=(f,p)=>{if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);const m=Object.keys(f)[0];if(!m||m!==Object.keys(p)[0])throw new Error(`embed types not matched: ${m} != ${Object.keys(p)[0]}`);return[m,f[m],p[m]]};class u{constructor(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]}static registerEmbed(p,m){this.handlers[p]=m}static unregisterEmbed(p){delete this.handlers[p]}static getHandler(p){const m=this.handlers[p];if(!m)throw new Error(`no handlers for embed type "${p}"`);return m}insert(p,m){const _={};return typeof p=="string"&&p.length===0?this:(_.insert=p,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(_.attributes=m),this.push(_))}delete(p){return p<=0?this:this.push({delete:p})}retain(p,m){if(typeof p=="number"&&p<=0)return this;const _={retain:p};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(_.attributes=m),this.push(_)}push(p){let m=this.ops.length,_=this.ops[m-1];if(p=r(p),typeof _=="object"){if(typeof p.delete=="number"&&typeof _.delete=="number")return this.ops[m-1]={delete:_.delete+p.delete},this;if(typeof _.delete=="number"&&p.insert!=null&&(m-=1,_=this.ops[m-1],typeof _!="object"))return this.ops.unshift(p),this;if(i(p.attributes,_.attributes)){if(typeof p.insert=="string"&&typeof _.insert=="string")return this.ops[m-1]={insert:_.insert+p.insert},typeof p.attributes=="object"&&(this.ops[m-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof _.retain=="number")return this.ops[m-1]={retain:_.retain+p.retain},typeof p.attributes=="object"&&(this.ops[m-1].attributes=p.attributes),this}}return m===this.ops.length?this.ops.push(p):this.ops.splice(m,0,p),this}chop(){const p=this.ops[this.ops.length-1];return p&&typeof p.retain=="number"&&!p.attributes&&this.ops.pop(),this}filter(p){return this.ops.filter(p)}forEach(p){this.ops.forEach(p)}map(p){return this.ops.map(p)}partition(p){const m=[],_=[];return this.forEach(y=>{(p(y)?m:_).push(y)}),[m,_]}reduce(p,m){return this.ops.reduce(p,m)}changeLength(){return this.reduce((p,m)=>m.insert?p+s.default.length(m):m.delete?p-m.delete:p,0)}length(){return this.reduce((p,m)=>p+s.default.length(m),0)}slice(p=0,m=1/0){const _=[],y=new o.default(this.ops);let b=0;for(;b<m&&y.hasNext();){let x;b<p?x=y.next(p-b):(x=y.next(m-b),_.push(x)),b+=s.default.length(x)}return new u(_)}compose(p){const m=new o.default(this.ops),_=new o.default(p.ops),y=[],b=_.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){let w=b.retain;for(;m.peekType()==="insert"&&m.peekLength()<=w;)w-=m.peekLength(),y.push(m.next());b.retain-w>0&&_.next(b.retain-w)}const x=new u(y);for(;m.hasNext()||_.hasNext();)if(_.peekType()==="insert")x.push(_.next());else if(m.peekType()==="delete")x.push(m.next());else{const w=Math.min(m.peekLength(),_.peekLength()),T=m.next(w),A=_.next(w);if(A.retain){const E={};if(typeof T.retain=="number")E.retain=typeof A.retain=="number"?w:A.retain;else if(typeof A.retain=="number")T.retain==null?E.insert=T.insert:E.retain=T.retain;else{const R=T.retain==null?"insert":"retain",[N,D,Z]=c(T[R],A.retain),j=u.getHandler(N);E[R]={[N]:j.compose(D,Z,R==="retain")}}const C=a.default.compose(T.attributes,A.attributes,typeof T.retain=="number");if(C&&(E.attributes=C),x.push(E),!_.hasNext()&&i(x.ops[x.ops.length-1],E)){const R=new u(m.rest());return x.concat(R).chop()}}else typeof A.delete=="number"&&(typeof T.retain=="number"||typeof T.retain=="object"&&T.retain!==null)&&x.push(A)}return x.chop()}concat(p){const m=new u(this.ops.slice());return p.ops.length>0&&(m.push(p.ops[0]),m.ops=m.ops.concat(p.ops.slice(1))),m}diff(p,m){if(this.ops===p.ops)return new u;const _=[this,p].map(T=>T.map(A=>{if(A.insert!=null)return typeof A.insert=="string"?A.insert:l;const E=T===p?"on":"with";throw new Error("diff() called "+E+" non-document")}).join("")),y=new u,b=n(_[0],_[1],m,!0),x=new o.default(this.ops),w=new o.default(p.ops);return b.forEach(T=>{let A=T[1].length;for(;A>0;){let E=0;switch(T[0]){case n.INSERT:E=Math.min(w.peekLength(),A),y.push(w.next(E));break;case n.DELETE:E=Math.min(A,x.peekLength()),x.next(E),y.delete(E);break;case n.EQUAL:E=Math.min(x.peekLength(),w.peekLength(),A);const C=x.next(E),R=w.next(E);i(C.insert,R.insert)?y.retain(E,a.default.diff(C.attributes,R.attributes)):y.push(R).delete(E);break}A-=E}}),y.chop()}eachLine(p,m=`
`){const _=new o.default(this.ops);let y=new u,b=0;for(;_.hasNext();){if(_.peekType()!=="insert")return;const x=_.peek(),w=s.default.length(x)-_.peekLength(),T=typeof x.insert=="string"?x.insert.indexOf(m,w)-w:-1;if(T<0)y.push(_.next());else if(T>0)y.push(_.next(T));else{if(p(y,_.next(1).attributes||{},b)===!1)return;b+=1,y=new u}}y.length()>0&&p(y,{},b)}invert(p){const m=new u;return this.reduce((_,y)=>{if(y.insert)m.delete(s.default.length(y));else{if(typeof y.retain=="number"&&y.attributes==null)return m.retain(y.retain),_+y.retain;if(y.delete||typeof y.retain=="number"){const b=y.delete||y.retain;return p.slice(_,_+b).forEach(w=>{y.delete?m.push(w):y.retain&&y.attributes&&m.retain(s.default.length(w),a.default.invert(y.attributes,w.attributes))}),_+b}else if(typeof y.retain=="object"&&y.retain!==null){const b=p.slice(_,_+1),x=new o.default(b.ops).next(),[w,T,A]=c(y.retain,x.insert),E=u.getHandler(w);return m.retain({[w]:E.invert(T,A)},a.default.invert(y.attributes,x.attributes)),_+1}}return _},0),m.chop()}transform(p,m=!1){if(m=!!m,typeof p=="number")return this.transformPosition(p,m);const _=p,y=new o.default(this.ops),b=new o.default(_.ops),x=new u;for(;y.hasNext()||b.hasNext();)if(y.peekType()==="insert"&&(m||b.peekType()!=="insert"))x.retain(s.default.length(y.next()));else if(b.peekType()==="insert")x.push(b.next());else{const w=Math.min(y.peekLength(),b.peekLength()),T=y.next(w),A=b.next(w);if(T.delete)continue;if(A.delete)x.push(A);else{const E=T.retain,C=A.retain;let R=typeof C=="object"&&C!==null?C:w;if(typeof E=="object"&&E!==null&&typeof C=="object"&&C!==null){const N=Object.keys(E)[0];if(N===Object.keys(C)[0]){const D=u.getHandler(N);D&&(R={[N]:D.transform(E[N],C[N],m)})}}x.retain(R,a.default.transform(T.attributes,A.attributes,m))}}return x.chop()}transformPosition(p,m=!1){m=!!m;const _=new o.default(this.ops);let y=0;for(;_.hasNext()&&y<=p;){const b=_.peekLength(),x=_.peekType();if(_.next(),x==="delete"){p-=Math.min(b,p-y);continue}else x==="insert"&&(y<p||!m)&&(p+=b);y+=b}return p}}u.Op=s.default,u.OpIterator=o.default,u.AttributeMap=a.default,u.handlers={},e.default=u,t.exports=u,t.exports.default=u})(d_,d_.exports)),d_.exports}var Is=FFe();const Qe=Ut(Is);class Ro extends es{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Ro.blotName="break";Ro.tagName="BR";let Eo=class extends s1{};function cT(t){return t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}const Qo=class Qo extends hL{static compare(e,n){const r=Qo.order.indexOf(e),i=Qo.order.indexOf(n);return r>=0||i>=0?r-i:e===n?0:e<n?-1:1}formatAt(e,n,r,i){if(Qo.compare(this.statics.blotName,r)<0&&this.scroll.query(r,rt.BLOT)){const a=this.isolate(e,n);i&&a.wrap(r,i)}else super.formatAt(e,n,r,i)}optimize(e){if(super.optimize(e),this.parent instanceof Qo&&Qo.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}};U(Qo,"allowedChildren",[Qo,Ro,es,Eo]),U(Qo,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let Tl=Qo;const s7=1;class ai extends Pv{constructor(){super(...arguments);U(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=Kne(this)),this.cache.delta}deleteAt(n,r){super.deleteAt(n,r),this.cache={}}formatAt(n,r,i,a){r<=0||(this.scroll.query(i,rt.BLOCK)?n+r===this.length()&&this.format(i,a):super.formatAt(n,Math.min(r,this.length()-n-1),i,a),this.cache={})}insertAt(n,r,i){if(i!=null){super.insertAt(n,r,i),this.cache={};return}if(r.length===0)return;const a=r.split(`
`),s=a.shift();s.length>0&&(n<this.length()-1||this.children.tail==null?super.insertAt(Math.min(n,this.length()-1),s):this.children.tail.insertAt(this.children.tail.length(),s),this.cache={});let o=this;a.reduce((l,c)=>(o=o.split(l,!0),o.insertAt(0,c),c.length),n+s.length)}insertBefore(n,r){const{head:i}=this.children;super.insertBefore(n,r),i instanceof Ro&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+s7),this.cache.length}moveChildren(n,r){super.moveChildren(n,r),this.cache={}}optimize(n){super.optimize(n),this.cache={}}path(n){return super.path(n,!0)}removeChild(n){super.removeChild(n),this.cache={}}split(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(n===0||n>=this.length()-s7)){const a=this.clone();return n===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const i=super.split(n,r);return this.cache={},i}}ai.blotName="block";ai.tagName="P";ai.defaultChild=Ro;ai.allowedChildren=[Ro,Tl,es,Eo];class Os extends es{attach(){super.attach(),this.attributes=new oT(this.domNode)}delta(){return new Qe().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const r=this.scroll.query(e,rt.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,n)}formatAt(e,n,r,i){this.format(r,i)}insertAt(e,n,r){if(r!=null){super.insertAt(e,n,r);return}const i=n.split(`
`),a=i.pop(),s=i.map(l=>{const c=this.scroll.create(ai.blotName);return c.insertAt(0,l),c}),o=this.split(e);s.forEach(l=>{this.parent.insertBefore(l,o)}),a&&this.parent.insertBefore(this.scroll.create("text",a),o)}}Os.scope=rt.BLOCK_BLOT;function Kne(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(gi).reduce((n,r)=>r.length()===0?n:n.insert(r.value(),Ts(r,{},e)),new Qe).insert(`
`,Ts(t))}function Ts(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:Ts(t.parent,e,n)}const xs=class xs extends es{static value(){}constructor(e,n,r){super(e,n),this.selection=r,this.textNode=document.createTextNode(xs.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==rt.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=xs.CONTENTS.length,r.optimize(),r.formatAt(i,xs.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof Eo?this.prev:null,r=n?n.length():0,i=this.next instanceof Eo?this.next:null,a=i?i.text:"",{textNode:s}=this,o=s.data.split(xs.CONTENTS).join("");s.data=xs.CONTENTS;let l;if(n)l=n,(o||i)&&(n.insertAt(n.length(),o+a),i&&i.remove());else if(i)l=i,i.insertAt(0,o);else{const c=document.createTextNode(o);l=this.scroll.create(c),this.parent.insertBefore(l,this)}if(this.remove(),e){const c=(p,m)=>n&&p===n.domNode?m:p===s?r+m-1:i&&p===i.domNode?r+o.length+m:null,u=c(e.start.node,e.start.offset),f=c(e.end.node,e.end.offset);if(u!==null&&f!==null)return{startNode:l.domNode,startOffset:u,endNode:l.domNode,endOffset:f}}return null}update(e,n){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=xs.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}};U(xs,"blotName","cursor"),U(xs,"className","ql-cursor"),U(xs,"tagName","span"),U(xs,"CONTENTS","\uFEFF");let Wp=xs;var qN={exports:{}},o7;function UFe(){return o7||(o7=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,f||l,p),_=n?n+c:c;return l._events[_]?l._events[_].fn?l._events[_]=[l._events[_],m]:l._events[_].push(m):(l._events[_]=m,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,_=new Array(m);p<m;p++)_[p]=f[p].fn;return _},o.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,u,f,p,m,_){var y=n?n+c:c;if(!this._events[y])return!1;var b=this._events[y],x=arguments.length,w,T;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),x){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,f),!0;case 4:return b.fn.call(b.context,u,f,p),!0;case 5:return b.fn.call(b.context,u,f,p,m),!0;case 6:return b.fn.call(b.context,u,f,p,m,_),!0}for(T=1,w=new Array(x-1);T<x;T++)w[T-1]=arguments[T];b.fn.apply(b.context,w)}else{var A=b.length,E;for(T=0;T<A;T++)switch(b[T].once&&this.removeListener(c,b[T].fn,void 0,!0),x){case 1:b[T].fn.call(b[T].context);break;case 2:b[T].fn.call(b[T].context,u);break;case 3:b[T].fn.call(b[T].context,u,f);break;case 4:b[T].fn.call(b[T].context,u,f,p);break;default:if(!w)for(E=1,w=new Array(x-1);E<x;E++)w[E-1]=arguments[E];b[T].fn.apply(b[T].context,w)}}return!0},o.prototype.on=function(c,u,f){return a(this,c,u,f,!1)},o.prototype.once=function(c,u,f){return a(this,c,u,f,!0)},o.prototype.removeListener=function(c,u,f,p){var m=n?n+c:c;if(!this._events[m])return this;if(!u)return s(this,m),this;var _=this._events[m];if(_.fn)_.fn===u&&(!p||_.once)&&(!f||_.context===f)&&s(this,m);else{for(var y=0,b=[],x=_.length;y<x;y++)(_[y].fn!==u||p&&!_[y].once||f&&_[y].context!==f)&&b.push(_[y]);b.length?this._events[m]=b.length===1?b[0]:b:s(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(qN)),qN.exports}var zFe=UFe();const qFe=Ut(zFe),Kj=new WeakMap,Zj=["error","warn","log","info"];let Xj="warn";function Zne(t){if(Xj&&Zj.indexOf(t)<=Zj.indexOf(Xj)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];console[t](...n)}}function Lc(t){return Zj.reduce((e,n)=>(e[n]=Zne.bind(console,n,t),e),{})}Lc.level=t=>{Xj=t};Zne.level=Lc.level;const HN=Lc("quill:events"),HFe=["selectionchange","mousedown","mouseup","click"];HFe.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const a=Kj.get(i);a&&a.emitter&&a.emitter.handleDOM(...n)})})});class qe extends qFe{constructor(){super(),this.domListeners={},this.on("error",HN.error)}emit(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return HN.log.call(HN,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(a=>{let{node:s,handler:o}=a;(e.target===s||s.contains(e.target))&&o(e,...r)})}listenDOM(e,n,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:r})}}U(qe,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),U(qe,"sources",{API:"api",SILENT:"silent",USER:"user"});const WN=Lc("quill:selection");class pf{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class WFe{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new pf(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,qe.sources.USER),1)}),this.emitter.on(qe.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(qe.events.SCROLL_UPDATE,(i,a)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const s=a.some(o=>o.type==="characterData"||o.type==="childList"||o.type==="attributes"&&o.target===this.root);this.update(s?qe.sources.SILENT:i)}catch{}})}),this.emitter.on(qe.events.SCROLL_OPTIMIZE,(r,i)=>{if(i.range){const{startNode:a,startOffset:s,endNode:o,endOffset:l}=i.range;this.setNativeRange(a,s,o,l),this.update(qe.sources.SILENT)}}),this.update(qe.sources.SILENT)}handleComposition(){this.emitter.on(qe.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(qe.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(qe.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,rt.BLOCK))){if(r.start.node!==this.cursor.textNode){const i=this.scroll.find(r.start.node,!1);if(i==null)return;if(i instanceof gi){const a=i.split(r.start.offset);i.parent.insertBefore(this.cursor,a)}else i.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),n=Math.min(e+n,r-1)-e;let i,[a,s]=this.scroll.leaf(e);if(a==null)return null;if(n>0&&s===a.length()){const[u]=this.scroll.leaf(e+1);if(u){const[f]=this.scroll.line(e),[p]=this.scroll.line(e+1);f===p&&(a=u,s=0)}}[i,s]=a.position(s,!0);const o=document.createRange();if(n>0)return o.setStart(i,s),[a,s]=this.scroll.leaf(e+n),a==null?null:([i,s]=a.position(s,!0),o.setEnd(i,s),o.getBoundingClientRect());let l="left",c;if(i instanceof Text){if(!i.data.length)return null;s<i.data.length?(o.setStart(i,s),o.setEnd(i,s+1)):(o.setStart(i,s-1),o.setEnd(i,s),l="right"),c=o.getBoundingClientRect()}else{if(!(a.domNode instanceof Element))return null;c=a.domNode.getBoundingClientRect(),s>0&&(l="right")}return{bottom:c.top+c.height,height:c.height,left:c[l],right:c[l],top:c.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const r=this.normalizeNative(n);return WN.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&VN(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const r=n.map(s=>{const[o,l]=s,c=this.scroll.find(o,!0),u=c.offset(this.scroll);return l===0?u:c instanceof gi?u+c.index(o,l):u+c.length()}),i=Math.min(Math.max(...r),this.scroll.length()-1),a=Math.min(i,...r);return new pf(a,i-a)}normalizeNative(e){if(!VN(this.root,e.startContainer)||!e.collapsed&&!VN(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(r=>{let{node:i,offset:a}=r;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>a)i=i.childNodes[a],a=0;else if(i.childNodes.length===a)i=i.lastChild,i instanceof Text?a=i.data.length:i.childNodes.length>0?a=i.childNodes.length:a=i.childNodes.length+1;else break;r.node=i,r.offset=a}),n}rangeToNative(e){const n=this.scroll.length(),r=(i,a)=>{i=Math.min(n-1,i);const[s,o]=this.scroll.leaf(i);return s?s.position(o,a):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(WN.info("setNativeRange",e,n,r,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const s=document.getSelection();if(s!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:o}=this.getNativeRange()||{};if(o==null||a||e!==o.startContainer||n!==o.startOffset||r!==o.endContainer||i!==o.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(i=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const l=document.createRange();l.setStart(e,n),l.setEnd(r,i),s.removeAllRanges(),s.addRange(l)}}else s.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qe.sources.API;if(typeof n=="string"&&(r=n,n=!1),WN.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,n)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qe.sources.USER;const n=this.lastRange,[r,i]=this.getRange();if(this.lastRange=r,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!fL(n,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const s=this.cursor.restore();s&&this.setNativeRange(s.startNode,s.startOffset,s.endNode,s.endOffset)}const a=[qe.events.SELECTION_CHANGE,np(this.lastRange),np(n),e];this.emitter.emit(qe.events.EDITOR_CHANGE,...a),e!==qe.sources.SILENT&&this.emitter.emit(...a)}}}function VN(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const VFe=/^[ -~]*$/;class GFe{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const r=l7(e),i=new Qe;return ZFe(r.ops.slice()).reduce((s,o)=>{const l=Is.Op.length(o);let c=o.attributes||{},u=!1,f=!1;if(o.insert!=null){if(i.retain(l),typeof o.insert=="string"){const _=o.insert;f=!_.endsWith(`
`)&&(n<=s||!!this.scroll.descendant(Os,s)[0]),this.scroll.insertAt(s,_);const[y,b]=this.scroll.line(s);let x=Cu({},Ts(y));if(y instanceof ai){const[w]=y.descendant(gi,b);w&&(x=Cu(x,Ts(w)))}c=Is.AttributeMap.diff(x,c)||{}}else if(typeof o.insert=="object"){const _=Object.keys(o.insert)[0];if(_==null)return s;const y=this.scroll.query(_,rt.INLINE)!=null;if(y)(n<=s||this.scroll.descendant(Os,s)[0])&&(f=!0);else if(s>0){const[b,x]=this.scroll.descendant(gi,s-1);b instanceof Eo?b.value()[x]!==`
`&&(u=!0):b instanceof es&&b.statics.scope===rt.INLINE_BLOT&&(u=!0)}if(this.scroll.insertAt(s,_,o.insert[_]),y){const[b]=this.scroll.descendant(gi,s);if(b){const x=Cu({},Ts(b));c=Is.AttributeMap.diff(x,c)||{}}}}n+=l}else if(i.push(o),o.retain!==null&&typeof o.retain=="object"){const _=Object.keys(o.retain)[0];if(_==null)return s;this.scroll.updateEmbedAt(s,_,o.retain[_])}Object.keys(c).forEach(_=>{this.scroll.formatAt(s,l,_,c[_])});const p=u?1:0,m=f?1:0;return n+=p+m,i.retain(p),i.delete(m),s+l+p+m},0),i.reduce((s,o)=>typeof o.delete=="number"?(this.scroll.deleteAt(s,o.delete),s):s+Is.Op.length(o),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new Qe().retain(e).delete(n))}formatLine(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(a=>{this.scroll.lines(e,Math.max(n,1)).forEach(s=>{s.format(a,r[a])})}),this.scroll.optimize();const i=new Qe().retain(e).retain(n,np(r));return this.update(i)}formatText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(a=>{this.scroll.formatAt(e,n,a,r[a])});const i=new Qe().retain(e).retain(n,np(r));return this.update(i)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new Qe)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],i=[];n===0?this.scroll.path(e).forEach(o=>{const[l]=o;l instanceof ai?r.push(l):l instanceof gi&&i.push(l)}):(r=this.scroll.lines(e,n),i=this.scroll.descendants(gi,e,n));const[a,s]=[r,i].map(o=>{const l=o.shift();if(l==null)return{};let c=Ts(l);for(;Object.keys(c).length>0;){const u=o.shift();if(u==null)return c;c=KFe(Ts(u),c)}return c});return{...a,...s}}getHTML(e,n){const[r,i]=this.scroll.line(e);if(r){const a=r.length();return r.length()>=i+n&&!(i===0&&n===a)?Rv(r,i,n,!0):Rv(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,n){const r=l7(n),i=new Qe().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(i)}insertEmbed(e,n,r){return this.scroll.insertAt(e,n,r),this.update(new Qe().retain(e).insert({[n]:r}))}insertText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(r).forEach(i=>{this.scroll.formatAt(e,n.length,i,r[i])}),this.update(new Qe().retain(e).insert(n,np(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==ai.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof Ro}removeFormat(e,n){const r=this.getText(e,n),[i,a]=this.scroll.line(e+n);let s=0,o=new Qe;i!=null&&(s=i.length()-a,o=i.delta().slice(a,a+s-1).insert(`
`));const c=this.getContents(e,n+s).diff(new Qe().insert(r).concat(o)),u=new Qe().retain(e).concat(c);return this.applyDelta(u)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(VFe)&&this.scroll.find(n[0].target)){const a=this.scroll.find(n[0].target),s=Ts(a),o=a.offset(this.scroll),l=n[0].oldValue.replace(Wp.CONTENTS,""),c=new Qe().insert(l),u=new Qe().insert(a.value()),f=r&&{oldRange:c7(r.oldRange,-o),newRange:c7(r.newRange,-o)};e=new Qe().retain(o).concat(c.diff(u,f)).reduce((m,_)=>_.insert?m.insert(_.insert,s):m.push(_),new Qe),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!fL(i.compose(e),this.delta))&&(e=i.diff(this.delta,r));return e}}function Th(t,e,n){if(t.length===0){const[m]=GN(n.pop());return e<=0?`</li></${m}>`:`</li></${m}>${Th([],e-1,n)}`}const[{child:r,offset:i,length:a,indent:s,type:o},...l]=t,[c,u]=GN(o);if(s>e)return n.push(o),s===e+1?`<${c}><li${u}>${Rv(r,i,a)}${Th(l,s,n)}`:`<${c}><li>${Th(t,e+1,n)}`;const f=n[n.length-1];if(s===e&&o===f)return`</li><li${u}>${Rv(r,i,a)}${Th(l,s,n)}`;const[p]=GN(n.pop());return`</li></${p}>${Th(t,e-1,n)}`}function Rv(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof Eo)return cT(t.value().slice(e,e+n));if(t instanceof wo){if(t.statics.blotName==="list-container"){const c=[];return t.children.forEachAt(e,n,(u,f,p)=>{const m="formats"in u&&typeof u.formats=="function"?u.formats():{};c.push({child:u,offset:f,length:p,indent:m.indent||0,type:m.list})}),Th(c,-1,[])}const i=[];if(t.children.forEachAt(e,n,(c,u,f)=>{i.push(Rv(c,u,f))}),r||t.statics.blotName==="list")return i.join("");const{outerHTML:a,innerHTML:s}=t.domNode,[o,l]=a.split(`>${s}<`);return o==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${l}`:`${o}>${i.join("")}<${l}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function KFe(t,e){return Object.keys(e).reduce((n,r)=>{if(t[r]==null)return n;const i=e[r];return i===t[r]?n[r]=i:Array.isArray(i)?i.indexOf(t[r])<0?n[r]=i.concat([t[r]]):n[r]=i:n[r]=[i,t[r]],n},{})}function GN(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function l7(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const r=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,n.attributes)}return e.push(n)},new Qe)}function c7(t,e){let{index:n,length:r}=t;return new pf(n+e,r)}function ZFe(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((i,a)=>{a&&e.push({insert:`
`,attributes:n.attributes}),i&&e.push({insert:i,attributes:n.attributes})}):e.push(n)}),e}class jo{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}U(jo,"DEFAULTS",{});const m_="\uFEFF";class mL extends es{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(m_),this.rightGuard=document.createTextNode(m_),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,r;const i=e.data.split(m_).join("");if(e===this.leftGuard)if(this.prev instanceof Eo){const a=this.prev.length();this.prev.insertAt(a,i),n={startNode:this.prev.domNode,startOffset:a+i.length}}else r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this),n={startNode:r,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof Eo?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(r=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(r),this.next),n={startNode:r,startOffset:i.length}));return e.data=m_,n}update(e,n){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const i=this.restore(r.target);i&&(n.range=i)}})}}class XFe{constructor(e,n){U(this,"isComposing",!1);this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof mL)&&(this.emitter.emit(qe.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(qe.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(qe.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(qe.events.COMPOSITION_END,e),this.isComposing=!1}}const My=class My{constructor(e,n){U(this,"modules",{});this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}};U(My,"DEFAULTS",{modules:{}}),U(My,"themes",{default:My});let Vp=My;const JFe=t=>t.parentElement||t.getRootNode().host||null,YFe=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*r,left:e.left}},g_=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},u7=(t,e,n,r,i,a)=>t<n&&e>r?0:t<n?-(n-t+i):e>r?e-t>r-n?t+i-n:e-r+a:0,QFe=(t,e)=>{var a,s,o;const n=t.ownerDocument;let r=e,i=t;for(;i;){const l=i===n.body,c=l?{top:0,right:((a=window.visualViewport)==null?void 0:a.width)??n.documentElement.clientWidth,bottom:((s=window.visualViewport)==null?void 0:s.height)??n.documentElement.clientHeight,left:0}:YFe(i),u=getComputedStyle(i),f=u7(r.left,r.right,c.left,c.right,g_(u.scrollPaddingLeft),g_(u.scrollPaddingRight)),p=u7(r.top,r.bottom,c.top,c.bottom,g_(u.scrollPaddingTop),g_(u.scrollPaddingBottom));if(f||p)if(l)(o=n.defaultView)==null||o.scrollBy(f,p);else{const{scrollLeft:m,scrollTop:_}=i;p&&(i.scrollTop+=p),f&&(i.scrollLeft+=f);const y=i.scrollLeft-m,b=i.scrollTop-_;r={left:r.left-y,top:r.top-b,right:r.right-y,bottom:r.bottom-b}}i=l||u.position==="fixed"?null:JFe(i)}},e6e=100,t6e=["block","break","cursor","inline","scroll","text"],n6e=(t,e,n)=>{const r=new Hp;return t6e.forEach(i=>{const a=e.query(i);a&&r.register(a)}),t.forEach(i=>{let a=e.query(i);a||n.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let s=0;for(;a;)if(r.register(a),a="blotName"in a?a.requiredContainer??null:null,s+=1,s>e6e){n.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),r},ip=Lc("quill"),y_=new Hp;wo.uiClass="ql-ui";const so=class so{static debug(e){e===!0&&(e="log"),Lc.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Kj.get(e)||y_.find(e,n)}static import(e){return this.imports[e]==null&&ip.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,n):Object.keys(e).forEach(i=>{this.register(i,e[i],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&ip.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&y_.register(n),typeof n.register=="function"&&n.register(y_)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=r6e(e,n),this.container=this.options.container,this.container==null){ip.error("Invalid Quill container",e);return}this.options.debug&&so.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Kj.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new qe;const i=pL.blotName,a=this.options.registry.query(i);if(!a||!("blotName"in a))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new a(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new GFe(this.scroll),this.selection=new WFe(this.scroll,this.emitter),this.composition=new XFe(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(qe.events.EDITOR_CHANGE,s=>{s===qe.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(qe.events.SCROLL_UPDATE,(s,o)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Js.call(this,()=>this.editor.update(null,o,u),s)}),this.emitter.on(qe.events.SCROLL_EMBED_UPDATE,(s,o)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;Js.call(this,()=>{const f=new Qe().retain(s.offset(this)).retain({[s.statics.blotName]:o});return this.editor.update(f,[],u)},so.sources.USER)}),r){const s=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(s)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,r){return[e,n,,r]=Jl(e,n,r),Js.call(this,()=>this.editor.deleteText(e,n),r,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qe.sources.API;return Js.call(this,()=>{const i=this.getSelection(!0);let a=new Qe;if(i==null)return a;if(this.scroll.query(e,rt.BLOCK))a=this.editor.formatLine(i.index,i.length,{[e]:n});else{if(i.length===0)return this.selection.format(e,n),a;a=this.editor.formatText(i.index,i.length,{[e]:n})}return this.setSelection(i,qe.sources.SILENT),a},r)}formatLine(e,n,r,i,a){let s;return[e,n,s,a]=Jl(e,n,r,i,a),Js.call(this,()=>this.editor.formatLine(e,n,s),a,e,0)}formatText(e,n,r,i,a){let s;return[e,n,s,a]=Jl(e,n,r,i,a),Js.call(this,()=>this.editor.formatText(e,n,s),a,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,n):r=this.selection.getBounds(e.index,e.length),!r)return null;const i=this.container.getBoundingClientRect();return{bottom:r.bottom-i.top,height:r.height,left:r.left-i.left,right:r.right-i.left,top:r.top-i.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=Jl(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Jl(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Jl(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:so.sources.API;return Js.call(this,()=>this.editor.insertEmbed(e,n,r),i,e)}insertText(e,n,r,i,a){let s;return[e,,s,a]=Jl(e,0,r,i,a),Js.call(this,()=>this.editor.insertText(e,n,s),a,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,r){return[e,n,,r]=Jl(e,n,r),Js.call(this,()=>this.editor.removeFormat(e,n),r,e)}scrollRectIntoView(e){QFe(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qe.sources.API;return Js.call(this,()=>{e=new Qe(e);const r=this.getLength(),i=this.editor.deleteText(0,r),a=this.editor.insertContents(0,e),s=this.editor.deleteText(this.getLength()-1,1);return i.compose(a).compose(s)},n)}setSelection(e,n,r){e==null?this.selection.setRange(null,n||so.sources.API):([e,n,,r]=Jl(e,n,r),this.selection.setRange(new pf(Math.max(0,e),n),r),r!==qe.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qe.sources.API;const r=new Qe().insert(e);return this.setContents(r,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qe.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qe.sources.API;return Js.call(this,()=>(e=new Qe(e),this.editor.applyDelta(e)),n,!0)}};U(so,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:y_,theme:"default"}),U(so,"events",qe.events),U(so,"sources",qe.sources),U(so,"version","2.0.2"),U(so,"imports",{delta:Qe,parchment:MFe,"core/module":jo,"core/theme":Vp});let xe=so;function d7(t){return typeof t=="string"?document.querySelector(t):t}function KN(t){return Object.entries(t??{}).reduce((e,n)=>{let[r,i]=n;return{...e,[r]:i===!0?{}:i}},{})}function f7(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function r6e(t,e){const n=d7(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===xe.DEFAULTS.theme?Vp:xe.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:a,...s}=xe.DEFAULTS,{modules:o,...l}=i.DEFAULTS;let c=KN(e.modules);c!=null&&c.toolbar&&c.toolbar.constructor!==Object&&(c={...c,toolbar:{container:c.toolbar}});const u=Cu({},KN(a),KN(o),c),f={...s,...f7(l),...f7(e)};let p=e.registry;return p?e.formats&&ip.warn('Ignoring "formats" option because "registry" is specified'):p=e.formats?n6e(e.formats,f.registry,ip):f.registry,{...f,registry:p,container:n,theme:i,modules:Object.entries(u).reduce((m,_)=>{let[y,b]=_;if(!b)return m;const x=xe.import(`modules/${y}`);return x==null?(ip.error(`Cannot load ${y} module. Are you sure you registered it?`),m):{...m,[y]:Cu({},x.DEFAULTS||{},b)}},{}),bounds:d7(f.bounds)}}function Js(t,e,n,r){if(!this.isEnabled()&&e===qe.sources.USER&&!this.allowReadOnlyEdits)return new Qe;let i=n==null?null:this.getSelection();const a=this.editor.delta,s=t();if(i!=null&&(n===!0&&(n=i.index),r==null?i=h7(i,s,e):r!==0&&(i=h7(i,n,r,e)),this.setSelection(i,qe.sources.SILENT)),s.length()>0){const o=[qe.events.TEXT_CHANGE,s,a,e];this.emitter.emit(qe.events.EDITOR_CHANGE,...o),e!==qe.sources.SILENT&&this.emitter.emit(...o)}return s}function Jl(t,e,n,r,i){let a={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(i=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(i=r,r=n,n=e,e=0),typeof n=="object"?(a=n,i=r):typeof n=="string"&&(r!=null?a[n]=r:i=n),i=i||qe.sources.API,[t,e,a,i]}function h7(t,e,n,r){const i=typeof n=="number"?n:0;if(t==null)return null;let a,s;return e&&typeof e.transformPosition=="function"?[a,s]=[t.index,t.index+t.length].map(o=>e.transformPosition(o,r!==qe.sources.USER)):[a,s]=[t.index,t.index+t.length].map(o=>o<e||o===e&&r===qe.sources.USER?o:i>=0?o+i:Math.max(e,o+i)),new pf(a,s-a)}class Of extends lT{}function p7(t){return t instanceof ai||t instanceof Os}function m7(t){return typeof t.updateContent=="function"}class Eh extends pL{constructor(e,n,r){let{emitter:i}=r;super(e,n),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",a=>this.handleDragStart(a))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(qe.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(qe.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(qe.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[r,i]=this.line(e),[a]=this.line(e+n);if(super.deleteAt(e,n),a!=null&&r!==a&&i>0){if(r instanceof Os||a instanceof Os){this.optimize();return}const s=a.children.head instanceof Ro?null:a.children.head;r.moveChildren(a,s),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,r,i){super.formatAt(e,n,r,i),this.optimize()}insertAt(e,n,r){if(e>=this.length())if(r==null||this.scroll.query(n,rt.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),r==null&&n.endsWith(`
`)?i.insertAt(0,n.slice(0,-1),r):i.insertAt(0,n,r)}else{const i=this.scroll.create(n,r);this.appendChild(i)}else super.insertAt(e,n,r);this.optimize()}insertBefore(e,n){if(e.statics.scope===rt.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,n)}else super.insertBefore(e,n)}insertContents(e,n){const r=this.deltaToRenderBlocks(n.concat(new Qe().insert(`
`))),i=r.pop();if(i==null)return;this.batchStart();const a=r.shift();if(a){const l=a.type==="block"&&(a.delta.length()===0||!this.descendant(Os,e)[0]&&e<this.length()),c=a.type==="block"?a.delta:new Qe().insert({[a.key]:a.value});ZN(this,e,c);const u=a.type==="block"?1:0,f=e+c.length()+u;l&&this.insertAt(f-1,`
`);const p=Ts(this.line(e)[0]),m=Is.AttributeMap.diff(p,a.attributes)||{};Object.keys(m).forEach(_=>{this.formatAt(f-1,1,_,m[_])}),e=f}let[s,o]=this.children.find(e);if(r.length&&(s&&(s=s.split(o),o=0),r.forEach(l=>{if(l.type==="block"){const c=this.createBlock(l.attributes,s||void 0);ZN(c,0,l.delta)}else{const c=this.create(l.key,l.value);this.insertBefore(c,s||void 0),Object.keys(l.attributes).forEach(u=>{c.format(u,l.attributes[u])})}})),i.type==="block"&&i.delta.length()){const l=s?s.offset(s.scroll)+o:this.length();ZN(this,l,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[r,i]=n;return r instanceof gi?[r,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(p7,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(i,a,s)=>{let o=[],l=s;return i.children.forEachAt(a,s,(c,u,f)=>{p7(c)?o.push(c):c instanceof lT&&(o=o.concat(r(c,u,l))),l-=f}),o};return r(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(qe.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=qe.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:i}=r;const a=this.find(i,!0);return a&&!m7(a)}),e.length>0&&this.emitter.emit(qe.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(qe.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,r){const[i]=this.descendant(a=>a instanceof Os,e);i&&i.statics.blotName===n&&m7(i)&&i.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let r=new Qe;return e.forEach(i=>{const a=i==null?void 0:i.insert;if(a)if(typeof a=="string"){const s=a.split(`
`);s.slice(0,-1).forEach(l=>{r.insert(l,i.attributes),n.push({type:"block",delta:r,attributes:i.attributes??{}}),r=new Qe});const o=s[s.length-1];o&&r.insert(o,i.attributes)}else{const s=Object.keys(a)[0];if(!s)return;this.query(s,rt.INLINE)?r.push(i):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new Qe,n.push({type:"blockEmbed",key:s,value:a[s],attributes:i.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(e,n){let r;const i={};Object.entries(e).forEach(o=>{let[l,c]=o;this.query(l,rt.BLOCK&rt.BLOT)!=null?r=l:i[l]=c});const a=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(a,n||void 0);const s=a.length();return Object.entries(i).forEach(o=>{let[l,c]=o;a.formatAt(0,s,l,c)}),a}}U(Eh,"blotName","scroll"),U(Eh,"className","ql-editor"),U(Eh,"tagName","DIV"),U(Eh,"defaultChild",ai),U(Eh,"allowedChildren",[ai,Os,Of]);function ZN(t,e,n){n.reduce((r,i)=>{const a=Is.Op.length(i);let s=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const o=i.insert;t.insertAt(r,o);const[l]=t.descendant(gi,r),c=Ts(l);s=Is.AttributeMap.diff(c,s)||{}}else if(typeof i.insert=="object"){const o=Object.keys(i.insert)[0];if(o==null)return r;if(t.insertAt(r,o,i.insert[o]),t.scroll.query(o,rt.INLINE)!=null){const[c]=t.descendant(gi,r),u=Ts(c);s=Is.AttributeMap.diff(u,s)||{}}}}return Object.keys(s).forEach(o=>{t.formatAt(r,a,o,s[o])}),r+a},e)}const gL={scope:rt.BLOCK,whitelist:["right","center","justify"]},i6e=new Sl("align","align",gL),Xne=new Po("align","ql-align",gL),Jne=new Qu("align","text-align",gL);class Yne extends Qu{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):n}}const a6e=new Po("color","ql-color",{scope:rt.INLINE}),yL=new Yne("color","color",{scope:rt.INLINE}),s6e=new Po("background","ql-bg",{scope:rt.INLINE}),vL=new Yne("background","background-color",{scope:rt.INLINE});class Cf extends Of{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${cT(this.code(e,n))}
</pre>`}}class yi extends ai{static register(){xe.register(Cf)}}U(yi,"TAB","  ");class bL extends Tl{}bL.blotName="code";bL.tagName="CODE";yi.blotName="code-block";yi.className="ql-code-block";yi.tagName="DIV";Cf.blotName="code-block-container";Cf.className="ql-code-block-container";Cf.tagName="DIV";Cf.allowedChildren=[yi];yi.allowedChildren=[Eo,Ro,Wp];yi.requiredContainer=Cf;const _L={scope:rt.BLOCK,whitelist:["rtl"]},Qne=new Sl("direction","dir",_L),ere=new Po("direction","ql-direction",_L),tre=new Qu("direction","direction",_L),nre={scope:rt.INLINE,whitelist:["serif","monospace"]},rre=new Po("font","ql-font",nre);class o6e extends Qu{value(e){return super.value(e).replace(/["']/g,"")}}const ire=new o6e("font","font-family",nre),are=new Po("size","ql-size",{scope:rt.INLINE,whitelist:["small","large","huge"]}),sre=new Qu("size","font-size",{scope:rt.INLINE,whitelist:["10px","18px","32px"]}),l6e=Lc("quill:keyboard"),c6e=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class uT extends jo{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!n[r]!==e[r]&&n[r]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=d6e(e);if(i==null){l6e.warn("Attempted to add invalid keyboard binding",i);return}typeof n=="function"&&(n={handler:n}),typeof r=="function"&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach(s=>{const o={...i,key:s,...n,...r};this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(x=>uT.match(e,x));if(i.length===0)return;const a=xe.find(e.target,!0);if(a&&a.scroll!==this.quill.scroll)return;const s=this.quill.getSelection();if(s==null||!this.quill.hasFocus())return;const[o,l]=this.quill.getLine(s.index),[c,u]=this.quill.getLeaf(s.index),[f,p]=s.length===0?[c,u]:this.quill.getLeaf(s.index+s.length),m=c instanceof s1?c.value().slice(0,u):"",_=f instanceof s1?f.value().slice(p):"",y={collapsed:s.length===0,empty:s.length===0&&o.length()<=1,format:this.quill.getFormat(s),line:o,offset:l,prefix:m,suffix:_,event:e};i.some(x=>{if(x.collapsed!=null&&x.collapsed!==y.collapsed||x.empty!=null&&x.empty!==y.empty||x.offset!=null&&x.offset!==y.offset)return!1;if(Array.isArray(x.format)){if(x.format.every(w=>y.format[w]==null))return!1}else if(typeof x.format=="object"&&!Object.keys(x.format).every(w=>x.format[w]===!0?y.format[w]!=null:x.format[w]===!1?y.format[w]==null:fL(x.format[w],y.format[w])))return!1;return x.prefix!=null&&!x.prefix.test(y.prefix)||x.suffix!=null&&!x.suffix.test(y.suffix)?!1:x.handler.call(this,s,y,x)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[a]=this.quill.getLine(e.index);let s=new Qe().retain(e.index-r).delete(r);if(n.offset===0){const[o]=this.quill.getLine(e.index-1);if(o&&!(o.statics.blotName==="block"&&o.length()<=1)){const c=a.formats(),u=this.quill.getFormat(e.index-1,1);if(i=Is.AttributeMap.diff(c,u)||{},Object.keys(i).length>0){const f=new Qe().retain(e.index+a.length()-2).retain(1,i);s=s.compose(f)}}}this.quill.updateContents(s,xe.sources.USER),this.quill.focus()}handleDelete(e,n){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let i={};const[a]=this.quill.getLine(e.index);let s=new Qe().retain(e.index).delete(r);if(n.offset>=a.length()-1){const[o]=this.quill.getLine(e.index+1);if(o){const l=a.formats(),c=this.quill.getFormat(e.index,1);i=Is.AttributeMap.diff(l,c)||{},Object.keys(i).length>0&&(s=s.retain(o.length()-1).retain(1,i))}}this.quill.updateContents(s,xe.sources.USER),this.quill.focus()}handleDeleteRange(e){wL({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const r=Object.keys(n.format).reduce((a,s)=>(this.quill.scroll.query(s,rt.BLOCK)&&!Array.isArray(n.format[s])&&(a[s]=n.format[s]),a),{}),i=new Qe().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(i,xe.sources.USER),this.quill.setSelection(e.index+1,xe.sources.SILENT),this.quill.focus()}}const u6e={bindings:{bold:XN("bold"),italic:XN("italic"),underline:XN("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",xe.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",xe.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",xe.sources.USER):e.format.list!=null&&this.quill.format("list",!1,xe.sources.USER)}},"indent code-block":g7(!0),"outdent code-block":g7(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,xe.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new Qe().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,xe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,xe.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,xe.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,xe.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},i=new Qe().retain(t.index).insert(`
`,r).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,xe.sources.USER),this.quill.setSelection(t.index+1,xe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,r]=this.quill.getLine(t.index),i=new Qe().retain(t.index).insert(`
`,e.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,xe.sources.USER),this.quill.setSelection(t.index+1,xe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,r,i,a]=e.getTable(t),s=f6e(n,r,i,a);if(s==null)return;let o=n.offset();if(s<0){const l=new Qe().retain(o).insert(`
`);this.quill.updateContents(l,xe.sources.USER),this.quill.setSelection(t.index+1,t.length,xe.sources.SILENT)}else if(s>0){o+=n.length();const l=new Qe().retain(o).insert(`
`);this.quill.updateContents(l,xe.sources.USER),this.quill.setSelection(o,xe.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:r}=e,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,xe.sources.USER):this.quill.setSelection(i+r.length(),xe.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[r,i]=this.quill.getLine(t.index);if(i>n)return!0;let a;switch(e.prefix.trim()){case"[]":case"[ ]":a="unchecked";break;case"[x]":a="checked";break;case"-":case"*":a="bullet";break;default:a="ordered"}this.quill.insertText(t.index," ",xe.sources.USER),this.quill.history.cutoff();const s=new Qe().retain(t.index-i).delete(n+1).retain(r.length()-2-i).retain(1,{list:a});return this.quill.updateContents(s,xe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,xe.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let r=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,r-=1,r<=0){const a=new Qe().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(a,xe.sources.USER),this.quill.setSelection(t.index-1,xe.sources.SILENT),!1}return!0}},"embed left":v_("ArrowLeft",!1),"embed left shift":v_("ArrowLeft",!0),"embed right":v_("ArrowRight",!1),"embed right shift":v_("ArrowRight",!0),"table down":y7(!1),"table up":y7(!0)}};uT.DEFAULTS=u6e;function g7(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:r}=n;const i=this.quill.scroll.query("code-block"),{TAB:a}=i;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,a,xe.sources.USER),this.quill.setSelection(e.index+a.length,xe.sources.SILENT);return}const s=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:o,length:l}=e;s.forEach((c,u)=>{t?(c.insertAt(0,a),u===0?o+=a.length:l+=a.length):c.domNode.textContent.startsWith(a)&&(c.deleteAt(0,a.length),u===0?o-=a.length:l-=a.length)}),this.quill.update(xe.sources.USER),this.quill.setSelection(o,l,xe.sources.SILENT)}}}function v_(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:i}=r;t==="ArrowRight"&&(i+=r.length+1);const[a]=this.quill.getLeaf(i);return a instanceof es?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,xe.sources.USER):this.quill.setSelection(r.index-1,xe.sources.USER):e?this.quill.setSelection(r.index,r.length+1,xe.sources.USER):this.quill.setSelection(r.index+r.length+1,xe.sources.USER),!1):!0}}}function XN(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],xe.sources.USER)}}}function y7(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const r=t?"prev":"next",i=n.line,a=i.parent[r];if(a!=null){if(a.statics.blotName==="table-row"){let s=a.children.head,o=i;for(;o.prev!=null;)o=o.prev,s=s.next;const l=s.offset(this.quill.scroll)+Math.min(n.offset,s.length()-1);this.quill.setSelection(l,0,xe.sources.USER)}}else{const s=i.table()[r];s!=null&&(t?this.quill.setSelection(s.offset(this.quill.scroll)+s.length()-1,0,xe.sources.USER):this.quill.setSelection(s.offset(this.quill.scroll),0,xe.sources.USER))}return!1}}}function d6e(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=np(t);else return null;return t.shortKey&&(t[c6e]=t.shortKey,delete t.shortKey),t}function wL(t){let{quill:e,range:n}=t;const r=e.getLines(n);let i={};if(r.length>1){const a=r[0].formats(),s=r[r.length-1].formats();i=Is.AttributeMap.diff(s,a)||{}}e.deleteText(n,xe.sources.USER),Object.keys(i).length>0&&e.formatLine(n.index,1,i,xe.sources.USER),e.setSelection(n.index,xe.sources.SILENT)}function f6e(t,e,n,r){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const h6e=/font-weight:\s*normal/,p6e=["P","OL","UL"],v7=t=>t&&p6e.includes(t.tagName),m6e=t=>{Array.from(t.querySelectorAll("br")).filter(e=>v7(e.previousElementSibling)&&v7(e.nextElementSibling)).forEach(e=>{var n;(n=e.parentNode)==null||n.removeChild(e)})},g6e=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var n;return(n=e.getAttribute("style"))==null?void 0:n.match(h6e)}).forEach(e=>{var r;const n=t.createDocumentFragment();n.append(...e.childNodes),(r=e.parentNode)==null||r.replaceChild(n,e)})};function y6e(t){t.querySelector('[id^="docs-internal-guid-"]')&&(g6e(t),m6e(t))}const v6e=/\bmso-list:[^;]*ignore/i,b6e=/\bmso-list:[^;]*\bl(\d+)/i,_6e=/\bmso-list:[^;]*\blevel(\d+)/i,w6e=(t,e)=>{const n=t.getAttribute("style"),r=n==null?void 0:n.match(b6e);if(!r)return null;const i=Number(r[1]),a=n==null?void 0:n.match(_6e),s=a?Number(a[1]):1,o=new RegExp(`@list l${i}:level${s}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(o),c=l&&l[1]==="bullet"?"bullet":"ordered";return{id:i,indent:s,type:c,element:t}},x6e=t=>{var s,o;const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],r=[];e.forEach(l=>{(l.getAttribute("style")||"").match(v6e)?n.push(l):r.push(l)}),n.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)});const i=t.documentElement.innerHTML,a=r.map(l=>w6e(l,i)).filter(l=>l);for(;a.length;){const l=[];let c=a.shift();for(;c;)l.push(c),c=a.length&&((s=a[0])==null?void 0:s.element)===c.element.nextElementSibling&&a[0].id===c.id?a.shift():null;const u=document.createElement("ul");l.forEach(m=>{const _=document.createElement("li");_.setAttribute("data-list",m.type),m.indent>1&&_.setAttribute("class",`ql-indent-${m.indent-1}`),_.innerHTML=m.element.innerHTML,u.appendChild(_)});const f=(o=l[0])==null?void 0:o.element,{parentNode:p}=f??{};f&&(p==null||p.replaceChild(u,f)),l.slice(1).forEach(m=>{let{element:_}=m;p==null||p.removeChild(_)})}};function S6e(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&x6e(t)}const T6e=[S6e,y6e],E6e=t=>{t.documentElement&&T6e.forEach(e=>{e(t)})},A6e=Lc("quill:clipboard"),O6e=[[Node.TEXT_NODE,B6e],[Node.TEXT_NODE,_7],["br",P6e],[Node.ELEMENT_NODE,_7],[Node.ELEMENT_NODE,I6e],[Node.ELEMENT_NODE,N6e],[Node.ELEMENT_NODE,L6e],["li",$6e],["ol, ul",M6e],["pre",R6e],["tr",D6e],["b",JN("bold")],["i",JN("italic")],["strike",JN("strike")],["style",j6e]],C6e=[i6e,Qne].reduce((t,e)=>(t[e.keyName]=e,t),{}),b7=[Jne,vL,yL,tre,ire,sre].reduce((t,e)=>(t[e.keyName]=e,t),{});class ore extends jo{constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],O6e.concat(this.options.matchers??[]).forEach(r=>{let[i,a]=r;this.addMatcher(i,a)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[yi.blotName])return new Qe().insert(r||"",{[yi.blotName]:i[yi.blotName]});if(!n)return new Qe().insert(r||"",i);const a=this.convertHTML(n);return Tb(a,`
`)&&(a.ops[a.ops.length-1].attributes==null||i.table)?a.compose(new Qe().retain(a.length()-1).delete(1)):a}normalizeHTML(e){E6e(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const r=n.body,i=new WeakMap,[a,s]=this.prepareMatching(r,i);return xL(this.quill.scroll,r,a,s,i)}dangerouslyPasteHTML(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xe.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,n),this.quill.setSelection(0,xe.sources.SILENT)}else{const i=this.convert({html:n,text:""});this.quill.updateContents(new Qe().retain(e).concat(i),r),this.quill.setSelection(e+i.length(),xe.sources.SILENT)}}onCaptureCopy(e){var s,o;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:i,text:a}=this.onCopy(r,n);(s=e.clipboardData)==null||s.setData("text/plain",a),(o=e.clipboardData)==null||o.setData("text/html",i),n&&wL({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){var s,o,l,c,u;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const r=(s=e.clipboardData)==null?void 0:s.getData("text/html");let i=(o=e.clipboardData)==null?void 0:o.getData("text/plain");if(!r&&!i){const f=(l=e.clipboardData)==null?void 0:l.getData("text/uri-list");f&&(i=this.normalizeURIList(f))}const a=Array.from(((c=e.clipboardData)==null?void 0:c.files)||[]);if(!r&&a.length>0){this.quill.uploader.upload(n,a);return}if(r&&a.length>0){const f=new DOMParser().parseFromString(r,"text/html");if(f.body.childElementCount===1&&((u=f.body.firstElementChild)==null?void 0:u.tagName)==="IMG"){this.quill.uploader.upload(n,a);return}}this.onPaste(n,{html:r,text:i})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:r,html:i}=n;const a=this.quill.getFormat(e.index),s=this.convert({text:r,html:i},a);A6e.log("onPaste",s,{text:r,html:i});const o=new Qe().retain(e.index).delete(e.length).concat(s);this.quill.updateContents(o,xe.sources.USER),this.quill.setSelection(o.length()-e.length,xe.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const r=[],i=[];return this.matchers.forEach(a=>{const[s,o]=a;switch(s){case Node.TEXT_NODE:i.push(o);break;case Node.ELEMENT_NODE:r.push(o);break;default:Array.from(e.querySelectorAll(s)).forEach(l=>{if(n.has(l)){const c=n.get(l);c==null||c.push(o)}else n.set(l,[o])});break}}),[r,i]}}U(ore,"DEFAULTS",{matchers:[]});function kf(t,e,n,r){return r.query(e)?t.reduce((i,a)=>{if(!a.insert)return i;if(a.attributes&&a.attributes[e])return i.push(a);const s=n?{[e]:n}:{};return i.insert(a.insert,{...s,...a.attributes})},new Qe):t}function Tb(t,e){let n="";for(let r=t.ops.length-1;r>=0&&n.length<e.length;--r){const i=t.ops[r];if(typeof i.insert!="string")break;n=i.insert+n}return n.slice(-1*e.length)===e}function Tu(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof es?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function k6e(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Tu(t.previousElementSibling,e)&&!Tu(t.nextElementSibling,e)}const b_=new WeakMap;function lre(t){return t==null?!1:(b_.has(t)||(t.tagName==="PRE"?b_.set(t,!0):b_.set(t,lre(t.parentNode))),b_.get(t))}function xL(t,e,n,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((a,s)=>s(e,a,t),new Qe):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((a,s)=>{let o=xL(t,s,n,r,i);return s.nodeType===e.ELEMENT_NODE&&(o=n.reduce((l,c)=>c(s,l,t),o),o=(i.get(s)||[]).reduce((l,c)=>c(s,l,t),o)),a.concat(o)},new Qe):new Qe}function JN(t){return(e,n,r)=>kf(n,t,!0,r)}function N6e(t,e,n){const r=Sl.keys(t),i=Po.keys(t),a=Qu.keys(t),s={};return r.concat(i).concat(a).forEach(o=>{let l=n.query(o,rt.ATTRIBUTE);l!=null&&(s[l.attrName]=l.value(t),s[l.attrName])||(l=C6e[o],l!=null&&(l.attrName===o||l.keyName===o)&&(s[l.attrName]=l.value(t)||void 0),l=b7[o],l!=null&&(l.attrName===o||l.keyName===o)&&(l=b7[o],s[l.attrName]=l.value(t)||void 0))}),Object.entries(s).reduce((o,l)=>{let[c,u]=l;return kf(o,c,u,n)},e)}function I6e(t,e,n){const r=n.query(t);if(r==null)return e;if(r.prototype instanceof es){const i={},a=r.value(t);if(a!=null)return i[r.blotName]=a,new Qe().insert(i,r.formats(t,n))}else if(r.prototype instanceof Pv&&!Tb(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return kf(e,r.blotName,r.formats(t,n),n);return e}function P6e(t,e){return Tb(e,`
`)||e.insert(`
`),e}function R6e(t,e,n){const r=n.query("code-block"),i=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,n):!0;return kf(e,"code-block",i,n)}function j6e(){return new Qe}function $6e(t,e,n){const r=n.query(t);if(r==null||r.blotName!=="list"||!Tb(e,`
`))return e;let i=-1,a=t.parentNode;for(;a!=null;)["OL","UL"].includes(a.tagName)&&(i+=1),a=a.parentNode;return i<=0?e:e.reduce((s,o)=>o.insert?o.attributes&&typeof o.attributes.indent=="number"?s.push(o):s.insert(o.insert,{indent:i,...o.attributes||{}}):s,new Qe)}function M6e(t,e,n){const r=t;let i=r.tagName==="OL"?"ordered":"bullet";const a=r.getAttribute("data-checked");return a&&(i=a==="true"?"checked":"unchecked"),kf(e,"list",i,n)}function _7(t,e,n){if(!Tb(e,`
`)){if(Tu(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(Tu(r,n))return e.insert(`
`);const i=n.query(r);if(i&&i.prototype instanceof Os)return e.insert(`
`);r=r.firstChild}}}return e}function L6e(t,e,n){var a;const r={},i=t.style||{};return i.fontStyle==="italic"&&(r.italic=!0),i.textDecoration==="underline"&&(r.underline=!0),i.textDecoration==="line-through"&&(r.strike=!0),((a=i.fontWeight)!=null&&a.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((s,o)=>{let[l,c]=o;return kf(s,l,c,n)},e),parseFloat(i.textIndent||0)>0?new Qe().insert("	").concat(e):e}function D6e(t,e,n){var i,a;const r=((i=t.parentElement)==null?void 0:i.tagName)==="TABLE"?t.parentElement:(a=t.parentElement)==null?void 0:a.parentElement;if(r!=null){const o=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return kf(e,"table",o,n)}return e}function B6e(t,e,n){var i;let r=t.data;if(((i=t.parentElement)==null?void 0:i.tagName)==="O:P")return e.insert(r.trim());if(!lre(t)){if(r.trim().length===0&&r.includes(`
`)&&!k6e(t,n))return e;const a=(s,o)=>{const l=o.replace(/[^\u00a0]/g,"");return l.length<1&&s?" ":l};r=r.replace(/\r\n/g," ").replace(/\n/g," "),r=r.replace(/\s\s+/g,a.bind(a,!0)),(t.previousSibling==null&&t.parentElement!=null&&Tu(t.parentElement,n)||t.previousSibling instanceof Element&&Tu(t.previousSibling,n))&&(r=r.replace(/^\s+/,a.bind(a,!1))),(t.nextSibling==null&&t.parentElement!=null&&Tu(t.parentElement,n)||t.nextSibling instanceof Element&&Tu(t.nextSibling,n))&&(r=r.replace(/\s+$/,a.bind(a,!1)))}return e.insert(r)}class cre extends jo{constructor(n,r){super(n,r);U(this,"lastRecorded",0);U(this,"ignoreChange",!1);U(this,"stack",{undo:[],redo:[]});U(this,"currentRange",null);this.quill.on(xe.events.EDITOR_CHANGE,(i,a,s,o)=>{i===xe.events.SELECTION_CHANGE?a&&o!==xe.sources.SILENT&&(this.currentRange=a):i===xe.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===xe.sources.USER?this.record(a,s):this.transform(a)),this.currentRange=Jj(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(n,r){if(this.stack[n].length===0)return;const i=this.stack[n].pop();if(!i)return;const a=this.quill.getContents(),s=i.delta.invert(a);this.stack[r].push({delta:s,range:Jj(i.range,s)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,xe.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(n,r){if(n.ops.length===0)return;this.stack.redo=[];let i=n.invert(r),a=this.currentRange;const s=Date.now();if(this.lastRecorded+this.options.delay>s&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(i=i.compose(o.delta),a=o.range)}else this.lastRecorded=s;i.length()!==0&&(this.stack.undo.push({delta:i,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(n){w7(this.stack.undo,n),w7(this.stack.redo,n)}undo(){this.change("undo","redo")}restoreSelection(n){if(n.range)this.quill.setSelection(n.range,xe.sources.USER);else{const r=U6e(this.quill.scroll,n.delta);this.quill.setSelection(r,xe.sources.USER)}}}U(cre,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function w7(t,e){let n=e;for(let r=t.length-1;r>=0;r-=1){const i=t[r];t[r]={delta:n.transform(i.delta,!0),range:i.range&&Jj(i.range,n)},n=i.delta.transform(n),t[r].delta.length()===0&&t.splice(r,1)}}function F6e(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(r=>t.query(r,rt.BLOCK)!=null):!1}function U6e(t,e){const n=e.reduce((i,a)=>i+(a.delete||0),0);let r=e.length()-n;return F6e(t,e)&&(r-=1),r}function Jj(t,e){if(!t)return t;const n=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:n,length:r-n}}class ure extends jo{constructor(e,n){super(e,n),e.root.addEventListener("drop",r=>{var s;r.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(r.clientX,r.clientY);i=document.createRange(),i.setStart(o.offsetNode,o.offset),i.setEnd(o.offsetNode,o.offset)}const a=i&&e.selection.normalizeNative(i);if(a){const o=e.selection.normalizedToRange(a);(s=r.dataTransfer)!=null&&s.files&&this.upload(o,r.dataTransfer.files)}})}upload(e,n){const r=[];Array.from(n).forEach(i=>{var a;i&&((a=this.options.mimetypes)!=null&&a.includes(i.type))&&r.push(i)}),r.length>0&&this.options.handler.call(this,e,r)}}ure.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(r=>new Promise(i=>{const a=new FileReader;a.onload=()=>{i(a.result)},a.readAsDataURL(r)}));Promise.all(n).then(r=>{const i=r.reduce((a,s)=>a.insert({image:s}),new Qe().retain(t.index).delete(t.length));this.quill.updateContents(i,qe.sources.USER),this.quill.setSelection(t.index+r.length,qe.sources.SILENT)})}};const z6e=["insertText","insertReplacementText"];class q6e extends jo{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(xe.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){wL({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Qe().retain(e.index).insert(n,r),xe.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,xe.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!z6e.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const r=H6e(e);if(r==null)return;const i=this.quill.selection.normalizeNative(n),a=i?this.quill.selection.normalizedToRange(i):null;a&&this.replaceText(a,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function H6e(t){var e;return typeof t.data=="string"?t.data:(e=t.dataTransfer)!=null&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const W6e=/Mac/i.test(navigator.platform),V6e=100,G6e=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||W6e&&t.key==="a"&&t.ctrlKey===!0);class K6e extends jo{constructor(n,r){super(n,r);U(this,"isListening",!1);U(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(n,r){let{line:i,event:a}=r;if(!(i instanceof wo)||!i.uiNode)return!0;const s=getComputedStyle(i.domNode).direction==="rtl";return s&&a.key!=="ArrowRight"||!s&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(n.index-1,n.length+(a.shiftKey?1:0),xe.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",n=>{!n.defaultPrevented&&G6e(n)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+V6e,this.isListening)return;this.isListening=!0;const n=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",n,{once:!0})}handleSelectionChange(){const n=document.getSelection();if(!n)return;const r=n.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const i=this.quill.scroll.find(r.startContainer);if(!(i instanceof wo)||!i.uiNode)return;const a=document.createRange();a.setStartAfter(i.uiNode),a.setEndAfter(i.uiNode),n.removeAllRanges(),n.addRange(a)}}xe.register({"blots/block":ai,"blots/block/embed":Os,"blots/break":Ro,"blots/container":Of,"blots/cursor":Wp,"blots/embed":mL,"blots/inline":Tl,"blots/scroll":Eh,"blots/text":Eo,"modules/clipboard":ore,"modules/history":cre,"modules/keyboard":uT,"modules/uploader":ure,"modules/input":q6e,"modules/uiNode":K6e});class Z6e extends Po{add(e,n){let r=0;if(n==="+1"||n==="-1"){const i=this.value(e)||0;r=n==="+1"?i+1:i-1}else typeof n=="number"&&(r=n);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const X6e=new Z6e("indent","ql-indent",{scope:rt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Yj extends ai{}U(Yj,"blotName","blockquote"),U(Yj,"tagName","blockquote");class Qj extends ai{static formats(e){return this.tagName.indexOf(e.tagName)+1}}U(Qj,"blotName","header"),U(Qj,"tagName",["H1","H2","H3","H4","H5","H6"]);class Eb extends Of{}Eb.blotName="list-container";Eb.tagName="OL";class Ab extends ai{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){xe.register(Eb)}constructor(e,n){super(e,n);const r=n.ownerDocument.createElement("span"),i=a=>{if(!e.isEnabled())return;const s=this.statics.formats(n,e);s==="checked"?(this.format("list","unchecked"),a.preventDefault()):s==="unchecked"&&(this.format("list","checked"),a.preventDefault())};r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.attachUI(r)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}Ab.blotName="list";Ab.tagName="LI";Eb.allowedChildren=[Ab];Ab.requiredContainer=Eb;class jv extends Tl{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}U(jv,"blotName","bold"),U(jv,"tagName",["STRONG","B"]);class e2 extends jv{}U(e2,"blotName","italic"),U(e2,"tagName",["EM","I"]);class Eu extends Tl{static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return dre(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}U(Eu,"blotName","link"),U(Eu,"tagName","A"),U(Eu,"SANITIZED_URL","about:blank"),U(Eu,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function dre(t,e){const n=document.createElement("a");n.href=t;const r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}class t2 extends Tl{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}U(t2,"blotName","script"),U(t2,"tagName",["SUB","SUP"]);class n2 extends jv{}U(n2,"blotName","strike"),U(n2,"tagName",["S","STRIKE"]);class r2 extends Tl{}U(r2,"blotName","underline"),U(r2,"tagName","U");class yw extends mL{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}U(yw,"blotName","formula"),U(yw,"className","ql-formula"),U(yw,"tagName","SPAN");const x7=["alt","height","width"];class i2 extends es{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return x7.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return dre(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){x7.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}}U(i2,"blotName","image"),U(i2,"tagName","IMG");const S7=["height","width"];class vw extends Os{static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return S7.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static sanitize(e){return Eu.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){S7.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}U(vw,"blotName","video"),U(vw,"className","ql-video"),U(vw,"tagName","IFRAME");const Qg=new Po("code-token","hljs",{scope:rt.INLINE});class Ac extends Tl{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(yi.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,r){super(e,n,r),Qg.add(this.domNode,r)}format(e,n){e!==Ac.blotName?super.format(e,n):n?Qg.add(this.domNode,n):(Qg.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Qg.value(this.domNode)||this.unwrap()}}Ac.blotName="code-token";Ac.className="ql-token";class Es extends yi{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),Ac.blotName,!1),super.replaceWith(e,n)}}class Oy extends Cf{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===Es.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,n)}))}formatAt(e,n,r,i){r===Es.blotName&&(this.forceNext=!0),super.formatAt(e,n,r,i)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(s=>s!==this.uiNode).map(s=>s.textContent).join(`
`)}
`,a=Es.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const s=this.children.reduce((l,c)=>l.concat(Kne(c,!1)),new Qe),o=e(i,a);s.diff(o).reduce((l,c)=>{let{retain:u,attributes:f}=c;return u?(f&&Object.keys(f).forEach(p=>{[Es.blotName,Ac.blotName].includes(p)&&this.formatAt(l,u,p,f[p])}),l+u):l},0)}this.cachedText=i,this.forceNext=!1}}html(e,n){const[r]=this.children.find(e);return`<pre data-language="${r?Es.formats(r.domNode):"plain"}">
${cT(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=Es.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}Oy.allowedChildren=[Es];Es.requiredContainer=Oy;Es.allowedChildren=[Ac,Wp,Eo,Ro];const J6e=(t,e,n)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class fre extends jo{static register(){xe.register(Ac,!0),xe.register(Es,!0),xe.register(Oy,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,i)=>{let{key:a}=i;return r[a]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(xe.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Oy))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:i,label:a}=r;const s=n.ownerDocument.createElement("option");s.textContent=a,s.setAttribute("value",i),n.appendChild(s)}),n.addEventListener("change",()=>{e.format(Es.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=Es.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(xe.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(xe.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Oy):[e]).forEach(a=>{a.highlight(this.highlightBlot,n)}),this.quill.update(xe.sources.SILENT),r!=null&&this.quill.setSelection(r,xe.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return cT(e).split(`
`).reduce((i,a,s)=>(s!==0&&i.insert(`
`,{[yi.blotName]:n}),i.insert(a)),new Qe);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(yi.className),r.innerHTML=J6e(this.options.hljs,n,e),xL(this.quill.scroll,r,[(i,a)=>{const s=Qg.value(i);return s?a.compose(new Qe().retain(a.length(),{[Ac.blotName]:s})):a}],[(i,a)=>i.data.split(`
`).reduce((s,o,l)=>(l!==0&&s.insert(`
`,{[yi.blotName]:n}),s.insert(o)),a)],new WeakMap)}}fre.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Ly=class Ly extends ai{static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",SL()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===Ly.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};U(Ly,"blotName","table"),U(Ly,"tagName","TD");let mo=Ly;class Oc extends Of{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const r=n.formats(),i=n.next.formats();if(r.table!==i.table){const a=this.splitAfter(n);a&&a.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}U(Oc,"blotName","table-row"),U(Oc,"tagName","TR");class ml extends Of{}U(ml,"blotName","table-body"),U(ml,"tagName","TBODY");class Gp extends Of{balanceCells(){const e=this.descendants(Oc),n=e.reduce((r,i)=>Math.max(i.children.length,r),0);e.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let i;r.children.head!=null&&(i=mo.formats(r.children.head.domNode));const a=this.scroll.create(mo.blotName,i);r.appendChild(a),a.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(ml);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e);i!=null&&i.remove()})}insertColumn(e){const[n]=this.descendant(ml);n==null||n.children.head==null||n.children.forEach(r=>{const i=r.children.at(e),a=mo.formats(r.children.head.domNode),s=this.scroll.create(mo.blotName,a);r.insertBefore(s,i)})}insertRow(e){const[n]=this.descendant(ml);if(n==null||n.children.head==null)return;const r=SL(),i=this.scroll.create(Oc.blotName);n.children.head.children.forEach(()=>{const s=this.scroll.create(mo.blotName,r);i.appendChild(s)});const a=n.children.at(e);n.insertBefore(i,a)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}U(Gp,"blotName","table-container"),U(Gp,"tagName","TABLE");Gp.allowedChildren=[ml];ml.requiredContainer=Gp;ml.allowedChildren=[Oc];Oc.requiredContainer=ml;Oc.allowedChildren=[mo];mo.requiredContainer=Oc;function SL(){return`row-${Math.random().toString(36).slice(2,6)}`}class Y6e extends jo{static register(){xe.register(mo),xe.register(Oc),xe.register(ml),xe.register(Gp)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Gp).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(xe.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(xe.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(xe.sources.USER),this.quill.setSelection(n,xe.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,r]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==mo.blotName)return[null,null,null,-1];const i=n.parent;return[i.parent.parent,i,n,r]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[r,i,a]=this.getTable(n);if(a==null)return;const s=a.cellOffset();r.insertColumn(s+e),this.quill.update(xe.sources.USER);let o=i.rowOffset();e===0&&(o+=1),this.quill.setSelection(n.index+o,n.length,xe.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[r,i,a]=this.getTable(n);if(a==null)return;const s=i.rowOffset();r.insertRow(s+e),this.quill.update(xe.sources.USER),e>0?this.quill.setSelection(n,xe.sources.SILENT):this.quill.setSelection(n.index+i.children.length,n.length,xe.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const r=this.quill.getSelection();if(r==null)return;const i=new Array(e).fill(0).reduce(a=>{const s=new Array(n).fill(`
`).join("");return a.insert(s,{table:SL()})},new Qe().retain(r.index));this.quill.updateContents(i,xe.sources.USER),this.quill.setSelection(r.index,xe.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(xe.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(xe.events.TEXT_CHANGE,(r,i,a)=>{a===xe.sources.USER&&this.balanceTables()}),!0):!1)})}}const T7=Lc("quill:toolbar");class TL extends jo{constructor(e,n){var r,i;if(super(e,n),Array.isArray(this.options.container)){const a=document.createElement("div");a.setAttribute("role","toolbar"),Q6e(a,this.options.container),(i=(r=e.container)==null?void 0:r.parentNode)==null||i.insertBefore(a,e.container),this.container=a}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){T7.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(a=>{var o;const s=(o=this.options.handlers)==null?void 0:o[a];s&&this.addHandler(a,s)}),Array.from(this.container.querySelectorAll("button, select")).forEach(a=>{this.attach(a)}),this.quill.on(xe.events.EDITOR_CHANGE,()=>{const[a]=this.quill.selection.getRange();this.update(a)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){T7.warn("ignoring attaching to nonexistent format",n,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,i=>{let a;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const o=e.options[e.selectedIndex];o.hasAttribute("selected")?a=!1:a=o.value||!1}else e.classList.contains("ql-active")?a=!1:a=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[s]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,a);else if(this.quill.scroll.query(n).prototype instanceof es){if(a=prompt(`Enter ${n}`),!a)return;this.quill.updateContents(new Qe().retain(s.index).delete(s.length).insert({[n]:a}),xe.sources.USER)}else this.quill.format(n,a,xe.sources.USER);this.update(s)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[i,a]=r;if(a.tagName==="SELECT"){let s=null;if(e==null)s=null;else if(n[i]==null)s=a.querySelector("option[selected]");else if(!Array.isArray(n[i])){let o=n[i];typeof o=="string"&&(o=o.replace(/"/g,'\\"')),s=a.querySelector(`option[value="${o}"]`)}s==null?(a.value="",a.selectedIndex=-1):s.selected=!0}else if(e==null)a.classList.remove("ql-active"),a.setAttribute("aria-pressed","false");else if(a.hasAttribute("value")){const s=n[i],o=s===a.getAttribute("value")||s!=null&&s.toString()===a.getAttribute("value")||s==null&&!a.getAttribute("value");a.classList.toggle("ql-active",o),a.setAttribute("aria-pressed",o.toString())}else{const s=n[i]!=null;a.classList.toggle("ql-active",s),a.setAttribute("aria-pressed",s.toString())}})}}TL.DEFAULTS={};function E7(t,e,n){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),n!=null?(r.value=n,r.setAttribute("aria-label",`${e}: ${n}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function Q6e(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const r=document.createElement("span");r.classList.add("ql-formats"),n.forEach(i=>{if(typeof i=="string")E7(r,i);else{const a=Object.keys(i)[0],s=i[a];Array.isArray(s)?eUe(r,a,s):E7(r,a,s)}}),t.appendChild(r)})}function eUe(t,e,n){const r=document.createElement("select");r.classList.add(`ql-${e}`),n.forEach(i=>{const a=document.createElement("option");i!==!1?a.setAttribute("value",String(i)):a.setAttribute("selected","selected"),r.appendChild(a)}),t.appendChild(r)}TL.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,rt.INLINE)!=null&&this.quill.format(n,!1,xe.sources.USER)})}else this.quill.removeFormat(t.index,t.length,xe.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",xe.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,xe.sources.USER),this.quill.format("direction",t,xe.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),r=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let i=t==="+1"?1:-1;n.direction==="rtl"&&(i*=-1),this.quill.format("indent",r+i,xe.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,xe.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,xe.sources.USER):this.quill.format("list","unchecked",xe.sources.USER):this.quill.format("list",t,xe.sources.USER)}}};const tUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',nUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',rUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',iUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',aUe='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',sUe='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',oUe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',lUe='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',A7='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',cUe='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',uUe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',dUe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',fUe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',hUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',pUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',mUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',gUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',yUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',vUe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',bUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',_Ue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',wUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',xUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',SUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',TUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',EUe='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',AUe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',OUe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',CUe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',kUe='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',NUe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',IUe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',PUe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',$v={align:{"":tUe,center:nUe,right:rUe,justify:iUe},background:aUe,blockquote:sUe,bold:oUe,clean:lUe,code:A7,"code-block":A7,color:cUe,direction:{"":uUe,rtl:dUe},formula:fUe,header:{1:hUe,2:pUe,3:mUe,4:gUe,5:yUe,6:vUe},italic:bUe,image:_Ue,indent:{"+1":wUe,"-1":xUe},link:SUe,list:{bullet:TUe,check:EUe,ordered:AUe},script:{sub:OUe,super:CUe},strike:kUe,table:NUe,underline:IUe,video:PUe},RUe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let O7=0;function C7(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class dT{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),C7(this.label,"aria-expanded"),C7(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&n.setAttribute("data-value",r),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(n,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=RUe,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${O7}`,O7+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const r=this.buildItem(n);e.appendChild(r),n.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r!=null&&r.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class hre extends dT{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=i:r.style.fill=i)}}class pre extends dT{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=n[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const jUe=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class mre{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,jUe(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),a=this.root.getBoundingClientRect();let s=0;if(a.right>i.right&&(s=i.right-a.right,this.root.style.left=`${n+s}px`),a.left<i.left&&(s=i.left-a.left,this.root.style.left=`${n+s}px`),a.bottom>i.bottom){const o=a.bottom-a.top,l=e.bottom-e.top+o;this.root.style.top=`${r-l}px`,this.root.classList.add("ql-flip")}return s}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const $Ue=[!1,"center","right","justify"],MUe=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],LUe=[!1,"serif","monospace"],DUe=["1","2","3",!1],BUe=["small",!1,"large","huge"];class Ob extends Vp{constructor(e,n){super(e,n);const r=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(a=>{a.container.contains(i.target)||a.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(a=>{if(a.startsWith("ql-")&&(a=a.slice(3),n[a]!=null))if(a==="direction")r.innerHTML=n[a][""]+n[a].rtl;else if(typeof n[a]=="string")r.innerHTML=n[a];else{const s=r.value||"";s!=null&&n[a][s]&&(r.innerHTML=n[a][s])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&Tg(i,$Ue),typeof n.align=="object"))return new pre(i,n.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const a=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&Tg(i,MUe,a==="background"?"#ffffff":"#000000"),new hre(i,n[a])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?Tg(i,LUe):i.classList.contains("ql-header")?Tg(i,DUe):i.classList.contains("ql-size")&&Tg(i,BUe)),new dT(i)});const r=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(qe.events.EDITOR_CHANGE,r)}}Ob.DEFAULTS=Cu({},Vp.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class gre extends mre{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,qe.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,qe.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=FUe(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,qe.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",qe.sources.USER),this.quill.setSelection(r+2,qe.sources.USER)}break}}this.textbox.value="",this.hide()}}function FUe(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Tg(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const i=document.createElement("option");r===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(r)),t.appendChild(i)})}const UUe=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class yre extends gre{constructor(e,n){super(e,n),this.quill.on(qe.events.EDITOR_CHANGE,(r,i,a,s)=>{if(r===qe.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&s===qe.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const o=this.quill.getLines(i.index,i.length);if(o.length===1){const l=this.quill.getBounds(i);l!=null&&this.position(l)}else{const l=o[o.length-1],c=this.quill.getIndex(l),u=Math.min(l.length()-1,i.index+i.length-c),f=this.quill.getBounds(new pf(c,u));f!=null&&this.position(f)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(qe.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",n!==0&&(r.style.marginLeft=`${-1*n-r.offsetWidth/2}px`),n}}U(yre,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class vre extends Ob{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=UUe),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new yre(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),$v),this.buildPickers(e.container.querySelectorAll("select"),$v))}}vre.DEFAULTS=Cu({},Ob.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,xe.sources.USER)}}}}});const zUe=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class bre extends gre{constructor(){super(...arguments);U(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",n=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),n.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",n=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,qe.sources.USER),delete this.linkRange}n.preventDefault(),this.hide()}),this.quill.on(qe.events.SELECTION_CHANGE,(n,r,i)=>{if(n!=null){if(n.length===0&&i===qe.sources.USER){const[a,s]=this.quill.scroll.descendant(Eu,n.index);if(a!=null){this.linkRange=new pf(n.index-s,a.length());const o=Eu.formats(a.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const l=this.quill.getBounds(this.linkRange);l!=null&&this.position(l);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}U(bre,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class _re extends Ob{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=zUe),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),$v),this.buildPickers(e.container.querySelectorAll("select"),$v),this.tooltip=new bre(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,r)=>{e.handlers.link.call(e,!r.format.link)}))}}_re.DEFAULTS=Cu({},Ob.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:r}=this.quill.theme;r.edit("link",n)}else this.quill.format("link",!1,xe.sources.USER)}}}}});xe.register({"attributors/attribute/direction":Qne,"attributors/class/align":Xne,"attributors/class/background":s6e,"attributors/class/color":a6e,"attributors/class/direction":ere,"attributors/class/font":rre,"attributors/class/size":are,"attributors/style/align":Jne,"attributors/style/background":vL,"attributors/style/color":yL,"attributors/style/direction":tre,"attributors/style/font":ire,"attributors/style/size":sre},!0);xe.register({"formats/align":Xne,"formats/direction":ere,"formats/indent":X6e,"formats/background":vL,"formats/color":yL,"formats/font":rre,"formats/size":are,"formats/blockquote":Yj,"formats/code-block":yi,"formats/header":Qj,"formats/list":Ab,"formats/bold":jv,"formats/code":bL,"formats/italic":e2,"formats/link":Eu,"formats/script":t2,"formats/strike":n2,"formats/underline":r2,"formats/formula":yw,"formats/image":i2,"formats/video":vw,"modules/syntax":fre,"modules/table":Y6e,"modules/toolbar":TL,"themes/bubble":vre,"themes/snow":_re,"ui/icons":$v,"ui/picker":dT,"ui/icon-picker":pre,"ui/color-picker":hre,"ui/tooltip":mre},!0);const qUe=t=>t4e.sanitize(t,{ALLOWED_TAGS:["p","br","strong","em","u","s","blockquote","ol","ul","li","pre","code","h1","h2","h3","h4","h5","h6","a","img","span","div"],ALLOWED_ATTR:["href","target","rel","src","alt","class","style"],ALLOW_DATA_ATTR:!1}),wre=k.forwardRef(({value:t,onChange:e,modules:n,formats:r,theme:i="snow",className:a,readOnly:s=!1},o)=>{const l=k.useRef(null),c=k.useRef(null),u=k.useRef(e);return k.useEffect(()=>{u.current=e}),k.useImperativeHandle(o,()=>({getEditor(){if(!c.current)throw new Error("Quill editor is not initialized");return c.current}})),k.useEffect(()=>{const f=l.current;if(!f)return;const p=document.createElement("div");f.appendChild(p);const m=new xe(p,{theme:i,modules:n,formats:r,readOnly:s});if(c.current=m,t){const _=m.clipboard.convert({html:t});m.setContents(_,"silent")}return m.on("text-change",(_,y,b)=>{var x;b==="user"&&((x=u.current)==null||x.call(u,qUe(m.root.innerHTML)))}),()=>{m.off("text-change"),c.current=null,f.innerHTML=""}},[]),k.useEffect(()=>{const f=c.current;if(!f)return;const p=t??"";if(p!==f.root.innerHTML){const m=f.clipboard.convert({html:p});f.setContents(m,"silent")}},[t]),g.jsx("div",{ref:l,className:a})});wre.displayName="QuillEditor";const __=()=>Date.now().toString(36)+Math.random().toString(36).slice(2),HUe=t=>{if(t instanceof Date)return t.toISOString();if(typeof t=="string"||typeof t=="number"){const e=new Date(t);if(!Number.isNaN(e.getTime()))return e.toISOString()}return new Date().toISOString()},YN=t=>{const e=Math.abs(t),n=Math.floor(e/60),r=e%60;return`${n}:${r.toString().padStart(2,"0")}`},lu=t=>{const e=t.agendaItems.map(r=>{const i=r.varianceSec>=0?"+":"-";return`| ${r.title} | ${YN(r.plannedDurationSec)} | ${YN(r.actualDurationSec)} | ${i}${YN(Math.abs(r.varianceSec))} |`}).join(`
`),n=t.todos.length?t.todos.map(r=>{const i=r.owner?`: ${r.owner}`:"",a=r.dueDate?` [: ${r.dueDate}]`:"";return`- [${r.done?"x":" "}] ${r.text}${i}${a}`}).join(`
`):"- ";return[`# : ${t.meetingTitle}`,`- : ${t.heldAt}`,`- : ${t.createdAt}`,`- : ${t.participants.length>0?t.participants.join(", "):""}`,"","## ",t.summary||"","","## ","|  |  |  |  |","|---|---:|---:|---:|",e||"|  | 0:00 | 0:00 | 0:00 |","","## ",t.decisions||"","","## ToDo",n,"","## ",t.nextActions||""].join(`
`)},EL=Vu()(dS((t,e)=>({reports:[],postedCommentHistory:[],draft:null,isDialogOpen:!1,createDraftFromMeeting:n=>{const r=[...n.agenda].sort((a,s)=>a.order-s.order).map(a=>({agendaId:a.id,title:a.title,plannedDurationSec:a.plannedDuration,actualDurationSec:a.actualDuration,varianceSec:a.actualDuration-a.plannedDuration})),i={id:__(),meetingId:n.id,meetingTitle:n.title,createdAt:new Date().toISOString(),heldAt:HUe(n.endTime||n.startTime),participants:[],summary:`${n.title} `,decisions:"",nextActions:"",agendaItems:r,todos:[],markdown:""};i.markdown=lu(i),t({draft:i})},updateDraftField:(n,r)=>{t(i=>{if(!i.draft)return i;const a={...i.draft,[n]:r};return a.markdown=lu(a),{draft:a}})},setDraftParticipantsFromText:n=>{t(r=>{if(!r.draft)return r;const i=n.split(/[,\n]/).map(s=>s.trim()).filter(Boolean),a={...r.draft,participants:i};return a.markdown=lu(a),{draft:a}})},addDraftTodo:()=>{t(n=>{if(!n.draft)return n;const r={...n.draft,todos:[...n.draft.todos,{id:__(),text:"",done:!1}]};return r.markdown=lu(r),{draft:r}})},updateDraftTodo:(n,r)=>{t(i=>{if(!i.draft)return i;const a={...i.draft,todos:i.draft.todos.map(s=>s.id===n?{...s,...r}:s)};return a.markdown=lu(a),{draft:a}})},removeDraftTodo:n=>{t(r=>{if(!r.draft)return r;const i={...r.draft,todos:r.draft.todos.filter(a=>a.id!==n)};return i.markdown=lu(i),{draft:i}})},setDraftTodos:n=>{t(r=>{if(!r.draft)return r;const i={...r.draft,todos:n.map(a=>({id:__(),text:a.text,owner:a.owner,dueDate:a.dueDate,done:!1}))};return i.markdown=lu(i),{draft:i}})},addPostedCommentHistory:({meetingId:n,meetingTitle:r,commentUrl:i})=>{t(a=>({postedCommentHistory:[{id:__(),meetingId:n,meetingTitle:r,commentUrl:i,postedAt:new Date().toISOString()},...a.postedCommentHistory]}))},setDialogOpen:n=>t({isDialogOpen:n}),saveDraft:()=>{const n=e();if(!n.draft)return;const r=n.draft.todos.filter(a=>a.text.trim()),i={...n.draft,todos:r};i.markdown=lu(i),t(a=>({reports:[i,...a.reports],draft:null,isDialogOpen:!1}))},deleteReport:n=>{t(r=>({reports:r.reports.filter(i=>i.id!==n)}))}}),{name:"meeting-report-store",storage:uS(()=>localStorage),partialize:t=>({reports:t.reports,postedCommentHistory:t.postedCommentHistory})})),WUe=t=>{const e=t.match(/Duration\s*:\s*(\d+)\s*m/i);if(e)return Number.parseInt(e[1],10);const n=t.match(/\s*[:]\s*(\d+)\s*/);if(n)return Number.parseInt(n[1],10)},VUe=t=>t.replace(/\(\s*Duration\s*:\s*\d+\s*m\s*\)/gi,"").replace(/\(\s*\s*[:]\s*\d+\s*\s*\)/g,"").replace(/Duration\s*:\s*\d+\s*m/gi,"").replace(/\s*[:]\s*\d+\s*/g,"").replace(/[()]/g,"").trim(),GUe=t=>{const e=t.match(/^- \[[ xX]\]\s+(.+)$/),n=t.match(/^[-*]\s+(.+)$/),r=t.match(/^\d+\.\s+(.+)$/),i=(e==null?void 0:e[1])??(n==null?void 0:n[1])??(r==null?void 0:r[1]);if(!i)return null;const a=WUe(i),s=VUe(i);return s?{title:s,plannedDurationMinutes:a}:null},KUe=t=>{const e=t.split(`
`).map(s=>s.trim()),n=[],r=[],i=[];let a=!1;for(const s of e){const o=s.match(/^#{1,6}\s+(.+)$/);if(o){const u=o[1].toLowerCase();a=u.includes("agenda")||u.includes("");continue}const l=GUe(s);if(!l)continue;const c=/^- \[[ xX]\]/.test(s);a?n.push(l):c?r.push(l):i.push(l)}return[...n,...r,...i]},ZUe=t=>{const e=t.match(/^- \[[ xX]\]\s+(.+)$/);if(!(e!=null&&e[1]))return null;const n=e[1].trim(),r=n.match(/@([a-zA-Z0-9_-]+)/)??n.match(/\s*[:]\s*([^\s]+)/),i=n.match(/(?:|due)\s*[:]\s*([0-9]{4}-[0-9]{2}-[0-9]{2})/i)??null,a=n.replace(/@([a-zA-Z0-9_-]+)/g,"").replace(/\s*[:]\s*[^\s]+/g,"").replace(/(?:|due)\s*[:]\s*[0-9]{4}-[0-9]{2}-[0-9]{2}/gi,"").trim();return a?{text:a,owner:r==null?void 0:r[1],dueDate:i==null?void 0:i[1]}:null},XUe=t=>t.split(`
`).map(e=>e.trim()).map(ZUe).filter(e=>e!==null),JUe=t=>{const e=t.todos.filter(n=>n.text.trim().length>0).map(n=>`- ${n.text}`).join(`
`);return[`## ${t.meetingTitle} `,"","### ",t.summary||"","","### ",t.decisions||"","","### ",t.nextActions||"","","### ToDo",e||"- "].join(`
`)},YUe=t=>new Set(t.split(`
`).map(e=>e.trim()).filter(Boolean)),QUe=(t,e)=>{const n=YUe(e);return t.split(`
`).filter(r=>{const i=r.trim();return i&&!n.has(i)}).join(`
`)},eze=(t,e,n)=>{const r=t==="summary"?JUe(e):e.markdown;return n!=null&&n.diffOnly?QUe(r,n.previousMarkdown??""):r},QN=t=>`${Math.max(1,Math.round(t/60))}`,xre=t=>{var f;const e=t.agendaItems.length,n=t.agendaItems.reduce((p,m)=>p+m.plannedDurationSec,0),r=t.agendaItems.reduce((p,m)=>p+m.actualDurationSec,0),i=t.agendaItems.filter(p=>p.varianceSec>0).sort((p,m)=>m.varianceSec-p.varianceSec),a=(f=i[0])==null?void 0:f.title,s=`${t.meetingTitle}${e}${QN(n)}${QN(r)}${a?`${a}`:""}`,o=a?`${a}`:"",l=i.length?"":"1",c=i.length?`:  ${i.slice(0,2).map(p=>`${p.title}${QN(p.actualDurationSec)}`).join(" ")}`:":   ",u=`: ${t.participants.length||""}ToDo23`;return{summary:s,consensusAssist:o,facilitationAssist:l,agendaAssist:c,preparationAssist:u}};var k7=Object.defineProperty,tze=(t,e)=>{let n={};for(var r in t)k7(n,r,{get:t[r],enumerable:!0});return k7(n,Symbol.toStringTag,{value:"Module"}),n};function Sre(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}var nze=class extends Error{constructor(e,n){super(e);U(this,"output");this.output=n}},eI,N7;function rze(){return N7||(N7=1,eI=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),eI}var ize=rze();const aze=Ut(ize);var w_={exports:{}},I7;function sze(){if(I7)return w_.exports;I7=1;const t=/[\p{Lu}]/u,e=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,i=/[_.\- ]+/,a=new RegExp("^"+i.source),s=new RegExp(i.source+r.source,"gu"),o=new RegExp("\\d+"+r.source,"gu"),l=(p,m,_)=>{let y=!1,b=!1,x=!1;for(let w=0;w<p.length;w++){const T=p[w];y&&t.test(T)?(p=p.slice(0,w)+"-"+p.slice(w),y=!1,x=b,b=!0,w++):b&&x&&e.test(T)?(p=p.slice(0,w-1)+"-"+p.slice(w-1),x=b,b=!1,y=!0):(y=m(T)===T&&_(T)!==T,x=b,b=_(T)===T&&m(T)!==T)}return p},c=(p,m)=>(n.lastIndex=0,p.replace(n,_=>m(_))),u=(p,m)=>(s.lastIndex=0,o.lastIndex=0,p.replace(s,(_,y)=>m(y)).replace(o,_=>m(_))),f=(p,m)=>{if(!(typeof p=="string"||Array.isArray(p)))throw new TypeError("Expected the input to be `string | string[]`");if(m={pascalCase:!1,preserveConsecutiveUppercase:!1,...m},Array.isArray(p)?p=p.map(x=>x.trim()).filter(x=>x.length).join("-"):p=p.trim(),p.length===0)return"";const _=m.locale===!1?x=>x.toLowerCase():x=>x.toLocaleLowerCase(m.locale),y=m.locale===!1?x=>x.toUpperCase():x=>x.toLocaleUpperCase(m.locale);return p.length===1?m.pascalCase?y(p):_(p):(p!==_(p)&&(p=l(p,_,y)),p=p.replace(a,""),m.preserveConsecutiveUppercase?p=c(p,_):p=_(p),m.pascalCase&&(p=y(p.charAt(0))+p.slice(1)),u(p,y))};return w_.exports=f,w_.exports.default=f,w_.exports}sze();function oze(t,e){return(e==null?void 0:e[t])||aze(t)}function lze(t,e,n){const r={};for(const i in t)Object.hasOwn(t,i)&&(r[e(i,n)]=t[i]);return r}const Tre="__lc_escaped__";function cze(t){return"lc"in t||Object.keys(t).length===1&&Tre in t}function uze(t){return{[Tre]:t}}function dze(t){return t!==null&&typeof t=="object"&&"lc_serializable"in t&&typeof t.toJSON=="function"}function fze(t){var n;let e;return t!==null&&typeof t=="object"?"lc_id"in t&&Array.isArray(t.lc_id)?e=t.lc_id:e=[((n=t.constructor)==null?void 0:n.name)??"Object"]:e=[typeof t],{lc:1,type:"not_implemented",id:e}}function a2(t,e=new WeakSet){if(t!==null&&typeof t=="object"&&!Array.isArray(t)){if(e.has(t))return fze(t);if(dze(t))return t;e.add(t);const n=t;if(cze(n))return e.delete(t),uze(n);const r={};for(const[i,a]of Object.entries(n))r[i]=a2(a,e);return e.delete(t),r}return Array.isArray(t)?t.map(n=>a2(n,e)):t}function P7(t){return Array.isArray(t)?[...t]:{...t}}function hze(t,e){const n=P7(t);for(const[r,i]of Object.entries(e)){const[a,...s]=r.split(".").reverse();let o=n;for(const l of s.reverse()){if(o[l]===void 0)break;o[l]=P7(o[l]),o=o[l]}o[a]!==void 0&&(o[a]={lc:1,type:"secret",id:[i]})}return n}function Ere(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}var Mv=class Are{constructor(e,...n){U(this,"lc_serializable",!1);U(this,"lc_kwargs");this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var i;return(i=this.lc_serializable_keys)==null?void 0:i.includes(r)})):this.lc_kwargs=e??{}}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Ere(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Are||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((o,l)=>(o[l]=l in this?this[l]:this.lc_kwargs[l],o),{});for(let o=Object.getPrototypeOf(this);o;o=Object.getPrototypeOf(o))Object.assign(e,Reflect.get(o,"lc_aliases",this)),Object.assign(n,Reflect.get(o,"lc_secrets",this)),Object.assign(r,Reflect.get(o,"lc_attributes",this));Object.keys(n).forEach(o=>{let l=this,c=r;const[u,...f]=o.split(".").reverse();for(const p of f.reverse()){if(!(p in l)||l[p]===void 0)return;(!(p in c)||c[p]===void 0)&&(typeof l[p]=="object"&&l[p]!=null?c[p]={}:Array.isArray(l[p])&&(c[p]=[])),l=l[p],c=c[p]}u in l&&l[u]!==void 0&&(c[u]=c[u]||l[u])});const i={},a=new WeakSet;a.add(this);for(const[o,l]of Object.entries(r))i[o]=a2(l,a);const s=lze(Object.keys(n).length?hze(i,n):i,oze,e);return{lc:1,type:"constructor",id:this.lc_id,kwargs:s}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};const Ore=Symbol.for("ls:tracing_async_local_storage"),bw=Symbol.for("lc:context_variables"),pze=t=>{globalThis[Ore]=t},Lv=()=>globalThis[Ore];function Cre(t){const e=Symbol.for(t);return{brand(n,r){var s,o;const i=r?Symbol.for(`${t}.${r}`):e;class a extends(o=n,s=i,o){constructor(...u){super(...u);U(this,s,!0)}static isInstance(u){return typeof u=="object"&&u!==null&&i in u&&u[i]===!0}}return Object.defineProperty(a,"name",{value:n.name}),a},sub(n){return Cre(`${t}.${n}`)},isInstance(n){return typeof n=="object"&&n!==null&&e in n&&n[e]===!0}}}const mze=Cre("langchain");function AL(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}const OL=mze.sub("error");var kre=class extends OL.brand(Error){constructor(e){super(e);U(this,"name","LangChainError");Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},R7=class extends OL.brand(kre,"model-abort"){constructor(e,n){super(e);U(this,"name","ModelAbortError");U(this,"partialOutput");this.partialOutput=n}},Nre=class Ire extends OL.brand(kre,"context-overflow"){constructor(n){super(n??"Input exceeded the model's context window.");U(this,"name","ContextOverflowError");U(this,"cause")}static fromError(n){const r=new Ire(n.message);return r.cause=n,r}};function j7(t,e=CL){t=t.trim();const n=t.indexOf("```");if(n===-1)return e(t);let r=t.substring(n+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const i=r.indexOf("```");let a=r;return i!==-1&&(a=r.substring(0,i)),e(a.trim())}function gze(t){try{return JSON.parse(t)}catch{}const e=t.trim();if(e.length===0)throw new Error("Unexpected end of JSON input");let n=0;function r(){for(;n<e.length&&/\s/.test(e[n]);)n+=1}function i(){if(e[n]!=='"')throw new Error(`Expected '"' at position ${n}, got '${e[n]}'`);n+=1;let u="",f=!1;for(;n<e.length;){const p=e[n];if(f){if(p==="n")u+=`
`;else if(p==="t")u+="	";else if(p==="r")u+="\r";else if(p==="\\")u+="\\";else if(p==='"')u+='"';else if(p==="b")u+="\b";else if(p==="f")u+="\f";else if(p==="/")u+="/";else if(p==="u"){const m=e.substring(n+1,n+5);if(/^[0-9A-Fa-f]{0,4}$/.test(m))m.length===4?u+=String.fromCharCode(Number.parseInt(m,16)):u+=`u${m}`,n+=m.length;else throw new Error(`Invalid unicode escape sequence '\\u${m}' at position ${n}`)}else throw new Error(`Invalid escape sequence '\\${p}' at position ${n}`);f=!1}else if(p==="\\")f=!0;else{if(p==='"')return n+=1,u;u+=p}n+=1}return f&&(u+="\\"),u}function a(){const u=n;let f="";if(e[n]==="-"&&(f+="-",n+=1),n<e.length&&e[n]==="0"&&(f+="0",n+=1,e[n]>="0"&&e[n]<="9"))throw new Error(`Invalid number at position ${u}`);if(n<e.length&&e[n]>="1"&&e[n]<="9")for(;n<e.length&&e[n]>="0"&&e[n]<="9";)f+=e[n],n+=1;if(n<e.length&&e[n]===".")for(f+=".",n+=1;n<e.length&&e[n]>="0"&&e[n]<="9";)f+=e[n],n+=1;if(n<e.length&&(e[n]==="e"||e[n]==="E"))for(f+=e[n],n+=1,n<e.length&&(e[n]==="+"||e[n]==="-")&&(f+=e[n],n+=1);n<e.length&&e[n]>="0"&&e[n]<="9";)f+=e[n],n+=1;if(f==="-")return-0;const p=Number.parseFloat(f);if(Number.isNaN(p))throw n=u,new Error(`Invalid number '${f}' at position ${u}`);return p}function s(){if(r(),n>=e.length)throw new Error(`Unexpected end of input at position ${n}`);const u=e[n];if(u==="{")return l();if(u==="[")return o();if(u==='"')return i();if("null".startsWith(e.substring(n,n+4)))return n+=Math.min(4,e.length-n),null;if("true".startsWith(e.substring(n,n+4)))return n+=Math.min(4,e.length-n),!0;if("false".startsWith(e.substring(n,n+5)))return n+=Math.min(5,e.length-n),!1;if(u==="-"||u>="0"&&u<="9")return a();throw new Error(`Unexpected character '${u}' at position ${n}`)}function o(){if(e[n]!=="[")throw new Error(`Expected '[' at position ${n}, got '${e[n]}'`);const u=[];if(n+=1,r(),n>=e.length)return u;if(e[n]==="]")return n+=1,u;for(;n<e.length;){if(r(),n>=e.length||(u.push(s()),r(),n>=e.length))return u;if(e[n]==="]")return n+=1,u;if(e[n]===","){n+=1;continue}throw new Error(`Expected ',' or ']' at position ${n}, got '${e[n]}'`)}return u}function l(){if(e[n]!=="{")throw new Error(`Expected '{' at position ${n}, got '${e[n]}'`);const u={};if(n+=1,r(),n>=e.length)return u;if(e[n]==="}")return n+=1,u;for(;n<e.length;){if(r(),n>=e.length)return u;const f=i();if(r(),n>=e.length)return u;if(e[n]!==":")throw new Error(`Expected ':' at position ${n}, got '${e[n]}'`);if(n+=1,r(),n>=e.length||(u[f]=s(),r(),n>=e.length))return u;if(e[n]==="}")return n+=1,u;if(e[n]===","){n+=1;continue}throw new Error(`Expected ',' or '}' at position ${n}, got '${e[n]}'`)}return u}const c=s();if(r(),n<e.length)throw new Error(`Unexpected character '${e[n]}' at position ${n}`);return c}function CL(t){try{return typeof t>"u"?null:gze(t)}catch{return null}}function Cc(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function Pre(t){return Cc(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function Rre(t){return Cc(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function yze(t){return Cc(t)&&t.source_type==="id"&&"id"in t&&typeof t.id=="string"}function vze(t){if(Cc(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function $7(t){const e=t.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${t}" - does not match type/subtype format.`);const n=e[0].trim(),r=e[1].trim();if(n===""||r==="")throw new Error(`Invalid mime type: "${t}" - type or subtype is empty.`);const i={};for(const a of t.split(";").slice(1)){const s=a.split("=");if(s.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${t}".`);const o=s[0].trim(),l=s[1].trim();if(o==="")throw new Error(`Invalid parameter syntax in mime type: "${t}".`);i[o]=l}return{type:n,subtype:r,parameters:i}}function Kp({dataUrl:t,asTypedArray:e=!1}){const n=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let r;if(n){r=n[1].toLowerCase();const i=e?Uint8Array.from(atob(n[2]),a=>a.charCodeAt(0)):n[2];return{mime_type:r,data:i}}}function kL(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}function Ve(t,e){return pt(t)&&t.type===e}function pt(t){return typeof t=="object"&&t!==null}function Ua(t){return Array.isArray(t)}function Pe(t){return typeof t=="string"}function oo(t){return typeof t=="number"}function NL(t){return t instanceof Uint8Array}function M7(t){try{return JSON.parse(t)}catch{return}}const ku=t=>t();function bze(t){if(t.type==="char_location"&&Pe(t.document_title)&&oo(t.start_char_index)&&oo(t.end_char_index)&&Pe(t.cited_text)){const{document_title:e,start_char_index:n,end_char_index:r,cited_text:i,...a}=t;return{...a,type:"citation",source:"char",title:e??void 0,startIndex:n,endIndex:r,citedText:i}}if(t.type==="page_location"&&Pe(t.document_title)&&oo(t.start_page_number)&&oo(t.end_page_number)&&Pe(t.cited_text)){const{document_title:e,start_page_number:n,end_page_number:r,cited_text:i,...a}=t;return{...a,type:"citation",source:"page",title:e??void 0,startIndex:n,endIndex:r,citedText:i}}if(t.type==="content_block_location"&&Pe(t.document_title)&&oo(t.start_block_index)&&oo(t.end_block_index)&&Pe(t.cited_text)){const{document_title:e,start_block_index:n,end_block_index:r,cited_text:i,...a}=t;return{...a,type:"citation",source:"block",title:e??void 0,startIndex:n,endIndex:r,citedText:i}}if(t.type==="web_search_result_location"&&Pe(t.url)&&Pe(t.title)&&Pe(t.encrypted_index)&&Pe(t.cited_text)){const{url:e,title:n,encrypted_index:r,cited_text:i,...a}=t;return{...a,type:"citation",source:"url",url:e,title:n,startIndex:Number(r),endIndex:Number(r),citedText:i}}if(t.type==="search_result_location"&&Pe(t.source)&&Pe(t.title)&&oo(t.start_block_index)&&oo(t.end_block_index)&&Pe(t.cited_text)){const{source:e,title:n,start_block_index:r,end_block_index:i,cited_text:a,...s}=t;return{...s,type:"citation",source:"search",url:e,title:n??void 0,startIndex:r,endIndex:i,citedText:a}}}function jre(t){if(Ve(t,"document")&&pt(t.source)&&"type"in t.source){if(t.source.type==="base64"&&Pe(t.source.media_type)&&Pe(t.source.data))return{type:"file",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&Pe(t.source.url))return{type:"file",url:t.source.url};if(t.source.type==="file"&&Pe(t.source.file_id))return{type:"file",fileId:t.source.file_id};if(t.source.type==="text"&&Pe(t.source.data))return{type:"file",mimeType:String(t.source.media_type??"text/plain"),data:t.source.data}}else if(Ve(t,"image")&&pt(t.source)&&"type"in t.source){if(t.source.type==="base64"&&Pe(t.source.media_type)&&Pe(t.source.data))return{type:"image",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&Pe(t.source.url))return{type:"image",url:t.source.url};if(t.source.type==="file"&&Pe(t.source.file_id))return{type:"image",fileId:t.source.file_id}}}function _ze(t){function*e(){for(const n of t){const r=jre(n);r?yield r:yield n}}return Array.from(e())}function L7(t){function*e(){var r;const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const i of n){if(Ve(i,"text")&&Pe(i.text)){const{text:a,citations:s,...o}=i;if(Ua(s)&&s.length){const l=s.reduce((c,u)=>{const f=bze(u);return f?[...c,f]:c},[]);yield{...o,type:"text",text:a,annotations:l};continue}else{yield{...o,type:"text",text:a};continue}}else if(Ve(i,"thinking")&&Pe(i.thinking)){const{thinking:a,signature:s,...o}=i;yield{...o,type:"reasoning",reasoning:a,signature:s};continue}else if(Ve(i,"redacted_thinking")){yield{type:"non_standard",value:i};continue}else if(Ve(i,"tool_use")&&Pe(i.name)&&Pe(i.id)){yield{type:"tool_call",id:i.id,name:i.name,args:i.input};continue}else if(Ve(i,"input_json_delta")){if(xze(t)&&((r=t.tool_call_chunks)!=null&&r.length)){const a=t.tool_call_chunks[0];yield{type:"tool_call_chunk",id:a.id,name:a.name,args:a.args,index:a.index};continue}}else if(Ve(i,"server_tool_use")&&Pe(i.name)&&Pe(i.id)){const{name:a,id:s}=i;if(a==="web_search"){yield{id:s,type:"server_tool_call",name:"web_search",args:{query:ku(()=>{if(typeof i.input=="string")return i.input;if(pt(i.input)&&Pe(i.input.query))return i.input.query;if(Pe(i.partial_json)){const o=M7(i.partial_json);if(o!=null&&o.query)return o.query}return""})}};continue}else if(i.name==="code_execution"){yield{id:s,type:"server_tool_call",name:"code_execution",args:{code:ku(()=>{if(typeof i.input=="string")return i.input;if(pt(i.input)&&Pe(i.input.code))return i.input.code;if(Pe(i.partial_json)){const o=M7(i.partial_json);if(o!=null&&o.code)return o.code}return""})}};continue}}else if(Ve(i,"web_search_tool_result")&&Pe(i.tool_use_id)&&Ua(i.content)){const{content:a,tool_use_id:s}=i;yield{type:"server_tool_call_result",name:"web_search",toolCallId:s,status:"success",output:{urls:a.reduce((o,l)=>Ve(l,"web_search_result")?[...o,l.url]:o,[])}};continue}else if(Ve(i,"code_execution_tool_result")&&Pe(i.tool_use_id)&&pt(i.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:i.tool_use_id,status:"success",output:i.content};continue}else if(Ve(i,"mcp_tool_use")){yield{id:i.id,type:"server_tool_call",name:"mcp_tool_use",args:i.input};continue}else if(Ve(i,"mcp_tool_result")&&Pe(i.tool_use_id)&&pt(i.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:i.tool_use_id,status:"success",output:i.content};continue}else if(Ve(i,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:i.input};continue}else if(Ve(i,"search_result")){yield{id:i.id,type:"non_standard",value:i};continue}else if(Ve(i,"tool_result")){yield{id:i.id,type:"non_standard",value:i};continue}else{const a=jre(i);if(a){yield a;continue}}yield{type:"non_standard",value:i}}}return Array.from(e())}const wze={translateContent:L7,translateContentChunk:L7};function xze(t){return typeof(t==null?void 0:t._getType)=="function"&&typeof t.concat=="function"&&t._getType()==="ai"}function Sze(t){return Pre(t)?{type:t.type,mimeType:t.mime_type,url:t.url,metadata:t.metadata}:Rre(t)?{type:t.type,mimeType:t.mime_type??"application/octet-stream",data:t.data,metadata:t.metadata}:yze(t)?{type:t.type,mimeType:t.mime_type,fileId:t.id,metadata:t.metadata}:t}function Tze(t){return t.map(Sze)}function Eze(t){return!!(Ve(t,"image_url")&&pt(t.image_url)||Ve(t,"input_audio")&&pt(t.input_audio)||Ve(t,"file")&&pt(t.file))}function Aze(t){if(Ve(t,"image_url")&&pt(t.image_url)&&Pe(t.image_url.url)){const e=Kp({dataUrl:t.image_url.url});return e?{type:"image",mimeType:e.mime_type,data:e.data}:{type:"image",url:t.image_url.url}}else{if(Ve(t,"input_audio")&&pt(t.input_audio)&&Pe(t.input_audio.data)&&Pe(t.input_audio.format))return{type:"audio",data:t.input_audio.data,mimeType:`audio/${t.input_audio.format}`};if(Ve(t,"file")&&pt(t.file)&&Pe(t.file.data)){const e=Kp({dataUrl:t.file.data});if(e)return{type:"file",data:e.data,mimeType:e.mime_type};if(Pe(t.file.file_id))return{type:"file",fileId:t.file.file_id}}}return t}function Oze(t){const e=[];typeof t.content=="string"?t.content.length>0&&e.push({type:"text",text:t.content}):e.push(...IL(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function Cze(t){const e=[];typeof t.content=="string"?t.content.length>0&&e.push({type:"text",text:t.content}):e.push(...IL(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function IL(t){const e=[];for(const n of t)Eze(n)?e.push(Aze(n)):e.push(n);return e}function kze(t){if(t.type==="url_citation"){const{url:e,title:n,start_index:r,end_index:i}=t;return{type:"citation",url:e,title:n,startIndex:r,endIndex:i}}if(t.type==="file_citation"){const{file_id:e,filename:n,index:r}=t;return{type:"citation",title:n,startIndex:r,endIndex:r,fileId:e}}return t}function $re(t){function*e(){var r;pt((r=t.additional_kwargs)==null?void 0:r.reasoning)&&Ua(t.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:t.additional_kwargs.reasoning.summary.reduce((i,a)=>pt(a)&&Pe(a.text)?`${i}${a.text}`:i,"")});const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const i of n)if(Ve(i,"text")){const{text:a,annotations:s,...o}=i;Array.isArray(s)?yield{...o,type:"text",text:String(a),annotations:s.map(kze)}:yield{...o,type:"text",text:String(a)}}for(const i of t.tool_calls??[])yield{type:"tool_call",id:i.id,name:i.name,args:i.args};if(pt(t.additional_kwargs)&&Ua(t.additional_kwargs.tool_outputs))for(const i of t.additional_kwargs.tool_outputs){if(Ve(i,"web_search_call")){const a={};if(pt(i.action)&&Pe(i.action.query)&&(a.query=i.action.query),yield{id:i.id,type:"server_tool_call",name:"web_search",args:a},i.status==="completed"||i.status==="failed"){const s={};pt(i.action)&&(s.action=i.action),yield{type:"server_tool_call_result",toolCallId:Pe(i.id)?i.id:"",status:i.status==="completed"?"success":"error",output:s}}continue}else if(Ve(i,"file_search_call")){yield{id:i.id,type:"server_tool_call",name:"file_search",args:{queries:Ua(i.queries)?i.queries:[]}},(i.status==="completed"||i.status==="failed")&&(yield{type:"server_tool_call_result",toolCallId:Pe(i.id)?i.id:"",status:i.status==="completed"?"success":"error",output:Ua(i.results)?{results:i.results}:{}});continue}else if(Ve(i,"computer_call")){yield{type:"non_standard",value:i};continue}else if(Ve(i,"code_interpreter_call")){if(Pe(i.code)&&(yield{id:i.id,type:"server_tool_call",name:"code_interpreter",args:{code:i.code}}),Ua(i.outputs)){const a=ku(()=>{if(i.status!=="in_progress"){if(i.status==="completed")return 0;if(i.status==="incomplete")return 127;if(i.status!=="interpreting"&&i.status==="failed")return 1}});for(const s of i.outputs)if(Ve(s,"logs")){yield{type:"server_tool_call_result",toolCallId:i.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:a??0,stderr:[0,void 0].includes(a)?void 0:String(s.logs),stdout:[0,void 0].includes(a)?String(s.logs):void 0}};continue}}continue}else if(Ve(i,"mcp_call")){yield{id:i.id,type:"server_tool_call",name:"mcp_call",args:i.input};continue}else if(Ve(i,"mcp_list_tools")){yield{id:i.id,type:"server_tool_call",name:"mcp_list_tools",args:i.input};continue}else if(Ve(i,"mcp_approval_request")){yield{type:"non_standard",value:i};continue}else if(Ve(i,"image_generation_call")){Pe(i.result)&&(yield{type:"image",mimeType:"image/png",data:i.result,id:Pe(i.id)?i.id:void 0,metadata:{status:Pe(i.status)?i.status:void 0}}),yield{type:"non_standard",value:i};continue}pt(i)&&(yield{type:"non_standard",value:i})}}return Array.from(e())}function Nze(t){function*e(){yield*$re(t);for(const n of t.tool_call_chunks??[])yield{type:"tool_call_chunk",id:n.id,name:n.name,args:n.args}}return Array.from(e())}const Ize={translateContent:t=>typeof t.content=="string"?Oze(t):$re(t),translateContentChunk:t=>typeof t.content=="string"?Cze(t):Nze(t)};function Pze(t){return typeof t=="object"&&t!==null&&"type"in t&&"content"in t&&(typeof t.content=="string"||Array.isArray(t.content))}function Rze(t,e="pretty"){return e==="pretty"?jze(t):JSON.stringify(t)}function jze(t){const e=[],n=` ${t.type.charAt(0).toUpperCase()+t.type.slice(1)} Message `,r=Math.floor((80-n.length)/2),i="=".repeat(r),a=n.length%2===0?i:`${i}=`;if(e.push(`${i}${n}${a}`),t.type==="ai"){const s=t;if(s.tool_calls&&s.tool_calls.length>0){e.push("Tool Calls:");for(const o of s.tool_calls){e.push(`  ${o.name} (${o.id})`),e.push(` Call ID: ${o.id}`),e.push("  Args:");for(const[l,c]of Object.entries(o.args))e.push(`    ${l}: ${typeof c=="object"?JSON.stringify(c):c}`)}}}if(t.type==="tool"){const s=t;s.name&&e.push(`Name: ${s.name}`)}return typeof t.content=="string"&&t.content.trim()&&(e.length>1&&e.push(""),e.push(t.content)),e.join(`
`)}const tI=Symbol.for("langchain.message");function Du(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.length===0?t:Array.isArray(e)&&e.some(n=>Cc(n))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?Dv(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(n=>Cc(n))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function $ze(t,e){return t==="error"||e==="error"?"error":"success"}function Mze(t,e){function n(r,i){if(typeof r!="object"||r===null||r===void 0)return r;if(i>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(s=>n(s,i+1));const a={};for(const s of Object.keys(r))a[s]=n(r[s],i+1);return a}return JSON.stringify(n(t,0),null,2)}var kG,Nf=class extends Mv{constructor(e){const n=typeof e=="string"||Array.isArray(e)?{content:e}:e;n.additional_kwargs||(n.additional_kwargs={}),n.response_metadata||(n.response_metadata={});super(n);U(this,"lc_namespace",["langchain_core","messages"]);U(this,"lc_serializable",!0);U(this,kG,!0);U(this,"id");U(this,"name");U(this,"content");U(this,"additional_kwargs");U(this,"response_metadata");this.name=n.name,n.content===void 0&&n.contentBlocks!==void 0?(this.content=n.contentBlocks,this.response_metadata={output_version:"v1",...n.response_metadata}):n.content!==void 0?(this.content=n.content??[],this.response_metadata=n.response_metadata):(this.content=[],this.response_metadata=n.response_metadata),this.additional_kwargs=n.additional_kwargs,this.id=n.id}get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}_getType(){return this.type}getType(){return this._getType()}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}get contentBlocks(){const e=typeof this.content=="string"?[{type:"text",text:this.content}]:this.content;return[Tze,IL,_ze].reduce((n,r)=>r(n),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return typeof e=="object"&&e!==null&&tI in e&&e[tI]===!0&&Pze(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[(kG=tI,Symbol.toStringTag)](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=Mze(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}toFormattedString(e="pretty"){return Rze(this,e)}};const Lze=["index","created","timestamp"];function Hi(t,e,n){const r=Lze;if(t==null&&e==null)return;if(t==null||e==null)return t??e;const i={...t};for(const[a,s]of Object.entries(e))if(i[a]==null)i[a]=s;else{if(s==null)continue;if(typeof i[a]!=typeof s||Array.isArray(i[a])!==Array.isArray(s))throw new Error(`field[${a}] already exists in the message chunk, but with a different type.`);if(typeof i[a]=="string"){if(a==="type")continue;if(["id","name","output_version","model_provider"].includes(a))s&&(i[a]=s);else{if(r.includes(a))continue;i[a]+=s}}else if(typeof i[a]=="number"){if(r.includes(a))continue;i[a]=i[a]+s}else if(typeof i[a]=="object"&&!Array.isArray(i[a]))i[a]=Hi(i[a],s);else if(Array.isArray(i[a]))i[a]=Dv(i[a],s);else{if(i[a]===s)continue;console.warn(`field[${a}] already exists in this message chunk and value has unsupported type.`)}}return i}function Dv(t,e,n){if(!(t==null&&e==null)){if(t==null||e==null)return t||e;{const r=[...t];for(const i of e)if(typeof i=="object"&&i!==null&&"index"in i&&typeof i.index=="number"){const a=r.findIndex(s=>{const o=typeof s=="object",l="index"in s&&s.index===i.index,c="id"in s&&"id"in i&&(s==null?void 0:s.id)===(i==null?void 0:i.id),u=!("id"in s)||!(s!=null&&s.id)||!("id"in i)||!(i!=null&&i.id);return o&&l&&(c||u)});a!==-1&&typeof r[a]=="object"&&r[a]!==null?r[a]=Hi(r[a],i):r.push(i)}else{if(typeof i=="object"&&i!==null&&"text"in i&&i.text==="")continue;r.push(i)}return r}}}function Dze(t,e,n){if(!(t==null&&e==null)){if(t==null||e==null)return t??e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return Dv(t,e);if(typeof t=="object"&&typeof e=="object")return Hi(t,e);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}}var If=class Mre extends Nf{static isInstance(e){if(!super.isInstance(e))return!1;let n=Object.getPrototypeOf(e);for(;n!==null;){if(n===Mre.prototype)return!0;n=Object.getPrototypeOf(n)}return!1}};function Bze(t){return typeof t.role=="string"}function PL(t){return typeof(t==null?void 0:t._getType)=="function"}function Fze(t){return If.isInstance(t)}var RL=class extends Nf{constructor(e,n,r){const i=typeof e=="string"||Array.isArray(e)?{content:e,name:r,tool_call_id:n}:e;super(i);U(this,"lc_direct_tool_output",!0);U(this,"type","tool");U(this,"status");U(this,"tool_call_id");U(this,"metadata");U(this,"artifact");this.tool_call_id=i.tool_call_id,this.artifact=i.artifact,this.status=i.status,this.metadata=i.metadata}static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}static isInstance(e){return super.isInstance(e)&&e.type==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},Uze=class extends If{constructor(e){super(e);U(this,"type","tool");U(this,"tool_call_id");U(this,"status");U(this,"artifact");this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}concat(e){const n=this.constructor;return new n({content:Du(this.content,e.content),additional_kwargs:Hi(this.additional_kwargs,e.additional_kwargs),response_metadata:Hi(this.response_metadata,e.response_metadata),artifact:Dze(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:$ze(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function zze(t){const e=[],n=[];for(const r of t)if(r.function){const i=r.function.name;try{const a=JSON.parse(r.function.arguments);e.push({name:i||"",args:a||{},id:r.id})}catch{n.push({name:i,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}function jL(t){switch(t){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function qze(t){if(pt(t.document)&&pt(t.document.source)){const e=jL(pt(t.document)&&Pe(t.document.format)?t.document.format:"");if(pt(t.document.source)){if(pt(t.document.source.s3Location)&&Pe(t.document.source.s3Location.uri))return{type:"file",mimeType:e,fileId:t.document.source.s3Location.uri};if(NL(t.document.source.bytes))return{type:"file",mimeType:e,data:t.document.source.bytes};if(Pe(t.document.source.text))return{type:"file",mimeType:e,data:Buffer.from(t.document.source.text).toString("base64")};if(Ua(t.document.source.content))return{type:"file",mimeType:e,data:t.document.source.content.reduce((n,r)=>pt(r)&&Pe(r.text)?n+r.text:n,"")}}}return{type:"non_standard",value:t}}function Hze(t){if(Ve(t,"image")&&pt(t.image)){const e=jL(pt(t.image)&&Pe(t.image.format)?t.image.format:"");if(pt(t.image.source)){if(pt(t.image.source.s3Location)&&Pe(t.image.source.s3Location.uri))return{type:"image",mimeType:e,fileId:t.image.source.s3Location.uri};if(NL(t.image.source.bytes))return{type:"image",mimeType:e,data:t.image.source.bytes}}}return{type:"non_standard",value:t}}function Wze(t){if(Ve(t,"video")&&pt(t.video)){const e=jL(pt(t.video)&&Pe(t.video.format)?t.video.format:"");if(pt(t.video.source)){if(pt(t.video.source.s3Location)&&Pe(t.video.source.s3Location.uri))return{type:"video",mimeType:e,fileId:t.video.source.s3Location.uri};if(NL(t.video.source.bytes))return{type:"video",mimeType:e,data:t.video.source.bytes}}}return{type:"non_standard",value:t}}function D7(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(Ve(r,"cache_point")){yield{type:"non_standard",value:r};continue}else if(Ve(r,"citations_content")&&pt(r.citationsContent)){yield{type:"text",text:Ua(r.citationsContent.content)?r.citationsContent.content.reduce((i,a)=>pt(a)&&Pe(a.text)?i+a.text:i,""):"",annotations:Ua(r.citationsContent.citations)?r.citationsContent.citations.reduce((i,a)=>{if(pt(a)){const s=Ua(a.sourceContent)?a.sourceContent.reduce((l,c)=>pt(c)&&Pe(c.text)?l+c.text:l,""):"",o=ku(()=>{if(pt(a.location)){const l=a.location.documentChar||a.location.documentPage||a.location.documentChunk;if(pt(l))return{source:oo(l.documentIndex)?l.documentIndex.toString():void 0,startIndex:oo(l.start)?l.start:void 0,endIndex:oo(l.end)?l.end:void 0}}return{}});i.push({type:"citation",citedText:s,...o})}return i},[]):[]};continue}else if(Ve(r,"document")&&pt(r.document)){yield qze(r);continue}else if(Ve(r,"guard_content")){yield{type:"non_standard",value:r};continue}else if(Ve(r,"image")&&pt(r.image)){yield Hze(r);continue}else if(Ve(r,"reasoning_content")&&Pe(r.reasoningText)){yield{type:"reasoning",reasoning:r.reasoningText};continue}else if(Ve(r,"text")&&Pe(r.text)){yield{type:"text",text:r.text};continue}else if(Ve(r,"tool_result")){yield{type:"non_standard",value:r};continue}else{if(Ve(r,"tool_call"))continue;if(Ve(r,"video")&&pt(r.video)){yield Wze(r);continue}}yield{type:"non_standard",value:r}}}return Array.from(e())}const Vze={translateContent:D7,translateContentChunk:D7};function B7(t){var r;const e=[],n=(r=t.additional_kwargs)==null?void 0:r.reasoning_content;if(Pe(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const i of t.content)typeof i=="object"&&"type"in i&&i.type==="text"&&"text"in i&&Pe(i.text)&&e.push({type:"text",text:i.text});for(const i of t.tool_calls??[])e.push({type:"tool_call",id:i.id,name:i.name,args:i.args});return e}const Gze={translateContent:B7,translateContentChunk:B7};function F7(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(Ve(r,"text")&&Pe(r.text)){yield{type:"text",text:r.text};continue}else if(Ve(r,"thinking")&&Pe(r.thinking)){yield{type:"reasoning",reasoning:r.thinking,...r.signature?{signature:r.signature}:{}};continue}else if(Ve(r,"inlineData")&&pt(r.inlineData)&&Pe(r.inlineData.mimeType)&&Pe(r.inlineData.data)){yield{type:"file",mimeType:r.inlineData.mimeType,data:r.inlineData.data};continue}else if(Ve(r,"functionCall")&&pt(r.functionCall)&&Pe(r.functionCall.name)&&pt(r.functionCall.args)){yield{type:"tool_call",id:t.id,name:r.functionCall.name,args:r.functionCall.args};continue}else if(Ve(r,"functionResponse")){yield{type:"non_standard",value:r};continue}else if(Ve(r,"fileData")&&pt(r.fileData)&&Pe(r.fileData.mimeType)&&Pe(r.fileData.fileUri)){yield{type:"file",mimeType:r.fileData.mimeType,fileId:r.fileData.fileUri};continue}else if(Ve(r,"executableCode")){yield{type:"non_standard",value:r};continue}else if(Ve(r,"codeExecutionResult")){yield{type:"non_standard",value:r};continue}yield{type:"non_standard",value:r}}}return Array.from(e())}const Kze={translateContent:F7,translateContentChunk:F7};function U7(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(Ve(r,"reasoning")&&Pe(r.reasoning)){const i=ku(()=>{var s;const a=n.indexOf(r);if(Ua((s=t.additional_kwargs)==null?void 0:s.signatures)&&a>=0)return t.additional_kwargs.signatures.at(a)});Pe(i)?yield{type:"reasoning",reasoning:r.reasoning,signature:i}:yield{type:"reasoning",reasoning:r.reasoning};continue}else if(Ve(r,"thinking")&&Pe(r.thinking)){yield{type:"reasoning",reasoning:r.thinking,...r.signature?{signature:r.signature}:{}};continue}else if(Ve(r,"text")&&Pe(r.text)){yield{type:"text",text:r.text};continue}else if(Ve(r,"image_url")){if(Pe(r.image_url))if(r.image_url.startsWith("data:")){const i=r.image_url.match(/^data:([^;]+);base64,(.+)$/);i?yield{type:"image",data:i[2],mimeType:i[1]}:yield{type:"image",url:r.image_url}}else yield{type:"image",url:r.image_url};continue}else if(Ve(r,"media")&&Pe(r.mimeType)&&Pe(r.data)){yield{type:"file",mimeType:r.mimeType,data:r.data};continue}yield{type:"non_standard",value:r}}}return Array.from(e())}const Zze={translateContent:U7,translateContentChunk:U7};function z7(t){var r;const e=[],n=(r=t.additional_kwargs)==null?void 0:r.reasoning;if(Pe(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string"){let i=t.content;const a=i.match(/<think>([\s\S]*?)<\/think>/);if(a){const s=a[1].trim();s.length>0&&e.push({type:"reasoning",reasoning:s}),i=i.replace(/<think>[\s\S]*?<\/think>/,"").trim()}i.length>0&&e.push({type:"text",text:i})}else for(const i of t.content)if(typeof i=="object"&&"type"in i&&i.type==="text"&&"text"in i&&Pe(i.text)){let a=i.text;const s=a.match(/<think>([\s\S]*?)<\/think>/);if(s){const o=s[1].trim();o.length>0&&e.push({type:"reasoning",reasoning:o}),a=a.replace(/<think>[\s\S]*?<\/think>/,"").trim()}a.length>0&&e.push({type:"text",text:a})}for(const i of t.tool_calls??[])e.push({type:"tool_call",id:i.id,name:i.name,args:i.args});return e}const Xze={translateContent:z7,translateContentChunk:z7};function q7(t){var r;const e=[],n=(r=t.additional_kwargs)==null?void 0:r.reasoning_content;if(Pe(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const i of t.content)typeof i=="object"&&"type"in i&&i.type==="text"&&"text"in i&&Pe(i.text)&&e.push({type:"text",text:i.text});for(const i of t.tool_calls??[])e.push({type:"tool_call",id:i.id,name:i.name,args:i.args});return e}const Jze={translateContent:q7,translateContentChunk:q7};function H7(t){var r,i;const e=[];if(pt((r=t.additional_kwargs)==null?void 0:r.reasoning)){const a=t.additional_kwargs.reasoning;if(Ua(a.summary)){const s=a.summary.reduce((o,l)=>pt(l)&&Pe(l.text)?`${o}${l.text}`:o,"");s.length>0&&e.push({type:"reasoning",reasoning:s})}}const n=(i=t.additional_kwargs)==null?void 0:i.reasoning_content;if(Pe(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const a of t.content)typeof a=="object"&&"type"in a&&a.type==="text"&&"text"in a&&Pe(a.text)&&e.push({type:"text",text:a.text});for(const a of t.tool_calls??[])e.push({type:"tool_call",id:a.id,name:a.name,args:a.args});return e}const Yze={translateContent:H7,translateContentChunk:H7};function W7(t){function*e(){const n=ku(()=>typeof t.content=="string"?t.additional_kwargs.originalTextContentBlock?[{...t.additional_kwargs.originalTextContentBlock,type:"text"}]:[{type:"text",text:t.content}]:t.content);for(const r of n){const i=ku(()=>Ve(r,"text")&&Pe(r.text)?{type:"text",text:r.text}:Ve(r,"inlineData")&&pt(r.inlineData)&&Pe(r.inlineData.mimeType)&&Pe(r.inlineData.data)?{type:"file",mimeType:r.inlineData.mimeType,data:r.inlineData.data}:Ve(r,"functionCall")&&pt(r.functionCall)&&Pe(r.functionCall.name)&&pt(r.functionCall.args)?{type:"tool_call",id:t.id,name:r.functionCall.name,args:r.functionCall.args}:Ve(r,"functionResponse")?{type:"non_standard",value:r}:Ve(r,"fileData")&&pt(r.fileData)&&Pe(r.fileData.mimeType)&&Pe(r.fileData.fileUri)?{type:"file",mimeType:r.fileData.mimeType,fileId:r.fileData.fileUri}:Ve(r,"executableCode")?{type:"non_standard",value:r}:Ve(r,"codeExecutionResult")?{type:"non_standard",value:r}:{type:"non_standard",value:r}),a=ku(()=>"thought"in r&&r.thought?{type:"reasoning",reasoning:i.type==="text"?i.text:"",reasoningContentBlock:i}:i),s={thought:r.thought,thoughtSignature:r.thoughtSignature,partMetadata:r.partMetadata,...a};for(const o in s)s[o]===void 0&&delete s[o];yield s}}return Array.from(e())}const Qze={translateContent:W7,translateContentChunk:W7};globalThis.lc_block_translators_registry??(globalThis.lc_block_translators_registry=new Map([["anthropic",wze],["bedrock-converse",Vze],["deepseek",Gze],["google",Qze],["google-genai",Kze],["google-vertexai",Zze],["groq",Xze],["ollama",Jze],["openai",Ize],["xai",Yze]]));function Lre(t){return globalThis.lc_block_translators_registry.get(t)}function e8e(t,e){return Hi(t,e)??{}}function Dre(t,e){const n={};return((t==null?void 0:t.audio)!==void 0||(e==null?void 0:e.audio)!==void 0)&&(n.audio=((t==null?void 0:t.audio)??0)+((e==null?void 0:e.audio)??0)),((t==null?void 0:t.image)!==void 0||(e==null?void 0:e.image)!==void 0)&&(n.image=((t==null?void 0:t.image)??0)+((e==null?void 0:e.image)??0)),((t==null?void 0:t.video)!==void 0||(e==null?void 0:e.video)!==void 0)&&(n.video=((t==null?void 0:t.video)??0)+((e==null?void 0:e.video)??0)),((t==null?void 0:t.document)!==void 0||(e==null?void 0:e.document)!==void 0)&&(n.document=((t==null?void 0:t.document)??0)+((e==null?void 0:e.document)??0)),((t==null?void 0:t.text)!==void 0||(e==null?void 0:e.text)!==void 0)&&(n.text=((t==null?void 0:t.text)??0)+((e==null?void 0:e.text)??0)),n}function t8e(t,e){const n={...Dre(t,e)};return((t==null?void 0:t.cache_read)!==void 0||(e==null?void 0:e.cache_read)!==void 0)&&(n.cache_read=((t==null?void 0:t.cache_read)??0)+((e==null?void 0:e.cache_read)??0)),((t==null?void 0:t.cache_creation)!==void 0||(e==null?void 0:e.cache_creation)!==void 0)&&(n.cache_creation=((t==null?void 0:t.cache_creation)??0)+((e==null?void 0:e.cache_creation)??0)),n}function n8e(t,e){const n={...Dre(t,e)};return((t==null?void 0:t.reasoning)!==void 0||(e==null?void 0:e.reasoning)!==void 0)&&(n.reasoning=((t==null?void 0:t.reasoning)??0)+((e==null?void 0:e.reasoning)??0)),n}function Bre(t,e){return{input_tokens:((t==null?void 0:t.input_tokens)??0)+((e==null?void 0:e.input_tokens)??0),output_tokens:((t==null?void 0:t.output_tokens)??0)+((e==null?void 0:e.output_tokens)??0),total_tokens:((t==null?void 0:t.total_tokens)??0)+((e==null?void 0:e.total_tokens)??0),input_token_details:t8e(t==null?void 0:t.input_token_details,e==null?void 0:e.input_token_details),output_token_details:n8e(t==null?void 0:t.output_token_details,e==null?void 0:e.output_token_details)}}var fa=class extends Nf{constructor(e){var r;let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{n=e;const i=(r=n.additional_kwargs)==null?void 0:r.tool_calls,a=n.tool_calls;i!=null&&i.length>0&&(a===void 0||a.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `pnpm install @langchain/anthropic`,","pnpm install @langchain/openai`, etc."].join(" "));try{if(i!=null&&a===void 0){const[s,o]=zze(i);n.tool_calls=s??[],n.invalid_tool_calls=o??[]}else n.tool_calls=n.tool_calls??[],n.invalid_tool_calls=n.invalid_tool_calls??[]}catch{n.tool_calls=[],n.invalid_tool_calls=[]}if(n.response_metadata!==void 0&&"output_version"in n.response_metadata&&n.response_metadata.output_version==="v1"&&(n.contentBlocks=n.content,n.content=void 0),n.contentBlocks!==void 0){n.tool_calls&&n.contentBlocks.push(...n.tool_calls.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})));const s=n.contentBlocks.filter(o=>o.type==="tool_call").filter(o=>{var l;return!((l=n.tool_calls)!=null&&l.some(c=>c.id===o.id&&c.name===o.name))});s.length>0&&(n.tool_calls=s.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})))}}super(n);U(this,"type","ai");U(this,"tool_calls",[]);U(this,"invalid_tool_calls",[]);U(this,"usage_metadata");typeof n!="string"&&(this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=Lre(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls){const n=this.tool_calls.filter(r=>!e.some(i=>i.id===r.id&&i.name===r.name));e.push(...n.map(r=>({type:"tool_call",id:r.id,name:r.name,args:r.args})))}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};function $L(t){return t._getType()==="ai"}function V7(t){return t._getType()==="ai"}var mr=class extends If{constructor(e){let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0||e.tool_call_chunks.length===0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const r=l8e(e.tool_call_chunks??[]);n={...e,tool_call_chunks:r.tool_call_chunks,tool_calls:r.tool_calls,invalid_tool_calls:r.invalid_tool_calls,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n);U(this,"type","ai");U(this,"tool_calls",[]);U(this,"invalid_tool_calls",[]);U(this,"tool_call_chunks",[]);U(this,"usage_metadata");this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=Lre(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls&&typeof this.content!="string"){const n=this.content.filter(r=>r.type==="tool_call").map(r=>r.id);for(const r of this.tool_calls)r.id&&!n.includes(r.id)&&e.push({...r,type:"tool_call",id:r.id,name:r.name,args:r.args})}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const n={content:Du(this.content,e.content),additional_kwargs:Hi(this.additional_kwargs,e.additional_kwargs),response_metadata:e8e(this.response_metadata,e.response_metadata),tool_call_chunks:[],tool_calls:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const i=Dv(this.tool_call_chunks,e.tool_call_chunks);i!==void 0&&i.length>0&&(n.tool_call_chunks=i)}if(this.tool_calls!==void 0||e.tool_calls!==void 0){const i=Dv(this.tool_calls,e.tool_calls);i!==void 0&&i.length>0&&(n.tool_calls=i)}(this.usage_metadata!==void 0||e.usage_metadata!==void 0)&&(n.usage_metadata=Bre(this.usage_metadata,e.usage_metadata));const r=this.constructor;return new r(n)}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}},ML=class Fre extends Nf{constructor(n,r){(typeof n=="string"||Array.isArray(n))&&(n={content:n,role:r});super(n);U(this,"type","generic");U(this,"role");this.role=n.role}static lc_name(){return"ChatMessage"}static _chatMessageClass(){return Fre}static isInstance(n){return super.isInstance(n)&&n.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},Ure=class extends If{constructor(e,n){(typeof e=="string"||Array.isArray(e))&&(e={content:e,role:n});super(e);U(this,"type","generic");U(this,"role");this.role=e.role}static lc_name(){return"ChatMessageChunk"}concat(e){const n=this.constructor;return new n({content:Du(this.content,e.content),additional_kwargs:Hi(this.additional_kwargs,e.additional_kwargs),response_metadata:Hi(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},zre=class extends If{constructor(){super(...arguments);U(this,"type","function")}static lc_name(){return"FunctionMessageChunk"}concat(e){const n=this.constructor;return new n({content:Du(this.content,e.content),additional_kwargs:Hi(this.additional_kwargs,e.additional_kwargs),response_metadata:Hi(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}},Bv=class extends Nf{constructor(e){super(e);U(this,"type","human")}static lc_name(){return"HumanMessage"}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},qre=class extends If{constructor(e){super(e);U(this,"type","human")}static lc_name(){return"HumanMessageChunk"}concat(e){const n=this.constructor;return new n({content:Du(this.content,e.content),additional_kwargs:Hi(this.additional_kwargs,e.additional_kwargs),response_metadata:Hi(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},r8e=class extends Nf{constructor(e){super({...e,content:[]});U(this,"type","remove");U(this,"id");this.id=e.id}get _printableFields(){return{...super._printableFields,id:this.id}}static isInstance(e){return super.isInstance(e)&&e.type==="remove"}},G7=class _w extends Nf{constructor(n){super(n);U(this,"type","system")}static lc_name(){return"SystemMessage"}concat(n){if(typeof n=="string")return new _w({...this,content:Du(this.content,n)});if(_w.isInstance(n))return new _w({...this,additional_kwargs:{...this.additional_kwargs,...n.additional_kwargs},response_metadata:{...this.response_metadata,...n.response_metadata},content:Du(this.content,n.content)});throw new Error("Unexpected chunk type for system message")}static isInstance(n){return super.isInstance(n)&&n.type==="system"}},s2=class extends If{constructor(e){super(e);U(this,"type","system")}static lc_name(){return"SystemMessageChunk"}concat(e){const n=this.constructor;return new n({content:Du(this.content,e.content),additional_kwargs:Hi(this.additional_kwargs,e.additional_kwargs),response_metadata:Hi(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="system"}};const i8e=t=>t();function a8e(t){return Sre(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function s8e(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function nI(t){let e,n;if(s8e(t)){const r=t.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",n=t.kwargs}else{const{type:r,...i}=t;e=r,n=i}if(e==="human"||e==="user")return new Bv(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...i}=n;if(!Array.isArray(r))return new fa(n);const a=r.map(a8e);return new fa({...i,tool_calls:a})}else{if(e==="system")return new G7(n);if(e==="developer")return new G7({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new RL({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});if(e==="remove"&&"id"in n&&typeof n.id=="string")return new r8e({...n,id:n.id});throw AL(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function ww(t){if(typeof t=="string")return new Bv(t);if(PL(t))return t;if(Array.isArray(t)){const[e,n]=t;return nI({type:e,content:n})}else if(Bze(t)){const{role:e,...n}=t;return nI({...n,type:e})}else return nI(t)}function Hre(t,e="Human",n="AI"){const r=[];for(const i of t){let a;if(i.type==="human")a=e;else if(i.type==="ai")a=n;else if(i.type==="system")a="System";else if(i.type==="tool")a="Tool";else if(i.type==="generic")a=i.role;else throw new Error(`Got unsupported message type: ${i.type}`);const s=i.name?`${i.name}, `:"",o=i.text;let l=`${a}: ${s}${o}`;if(i.type==="ai"){const c=i;c.tool_calls&&c.tool_calls.length>0?l+=JSON.stringify(c.tool_calls):c.additional_kwargs&&"function_call"in c.additional_kwargs&&(l+=JSON.stringify(c.additional_kwargs.function_call))}r.push(l)}return r.join(`
`)}function o8e(t){var n;const e=t._getType();if(e==="human")return new qre({...t});if(e==="ai"){let r={...t};return"tool_calls"in r&&(r={...r,tool_call_chunks:(n=r.tool_calls)==null?void 0:n.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),new mr({...r})}else{if(e==="system")return new s2({...t});if(e==="function")return new zre({...t});if(ML.isInstance(t))return new Ure({...t});throw new Error("Unknown message type.")}}function l8e(t){var i,a;const e=t.reduce((s,o)=>{const l=s.findIndex(([c])=>"id"in o&&o.id&&"index"in o&&o.index!==void 0?o.id===c.id&&o.index===c.index:"id"in o&&o.id?o.id===c.id:"index"in o&&o.index!==void 0?o.index===c.index:!1);return l!==-1?s[l].push(o):s.push([o]),s},[]),n=[],r=[];for(const s of e){let o=null;const l=((i=s[0])==null?void 0:i.name)??"",c=s.map(p=>p.args||"").join("").trim(),u=c.length?c:"{}",f=(a=s[0])==null?void 0:a.id;try{if(o=CL(u),!f||o===null||typeof o!="object"||Array.isArray(o))throw new Error("Malformed tool call chunk args.");n.push({name:l,args:o,id:f,type:"tool_call"})}catch{r.push({name:l,args:u,id:f,error:"Malformed args.",type:"invalid_tool_call"})}}return{tool_call_chunks:t,tool_calls:n,invalid_tool_calls:r}}var rI={};const c8e=()=>typeof window<"u"&&typeof window.document<"u",u8e=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",d8e=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),LL=()=>typeof Deno<"u",f8e=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!LL(),Wre=()=>{let t;return c8e()?t="browser":f8e()?t="node":u8e()?t="webworker":d8e()?t="jsdom":LL()?t="deno":t="other",t};let iI;function h8e(){return iI===void 0&&(iI={library:"langchain-js",runtime:Wre()}),iI}function gl(t){try{return typeof process<"u"?rI==null?void 0:rI[t]:LL()?Deno==null?void 0:Deno.env.get(t):void 0}catch{return}}const p8e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Cy(t){return typeof t=="string"&&p8e.test(t)}function m8e(t){if(!Cy(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var Yr=[];for(var aI=0;aI<256;++aI)Yr.push((aI+256).toString(16).slice(1));function DL(t,e=0){return(Yr[t[e+0]]+Yr[t[e+1]]+Yr[t[e+2]]+Yr[t[e+3]]+"-"+Yr[t[e+4]]+Yr[t[e+5]]+"-"+Yr[t[e+6]]+Yr[t[e+7]]+"-"+Yr[t[e+8]]+Yr[t[e+9]]+"-"+Yr[t[e+10]]+Yr[t[e+11]]+Yr[t[e+12]]+Yr[t[e+13]]+Yr[t[e+14]]+Yr[t[e+15]]).toLowerCase()}var x_,g8e=new Uint8Array(16);function Vre(){if(!x_&&(x_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x_(g8e)}function y8e(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var v8e="6ba7b810-9dad-11d1-80b4-00c04fd430c8",b8e="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function _8e(t,e,n){function r(i,a,s,o){var l;if(typeof i=="string"&&(i=y8e(i)),typeof a=="string"&&(a=m8e(a)),((l=a)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(a),c.set(i,a.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,s){o=o||0;for(var u=0;u<16;++u)s[o+u]=c[u];return s}return DL(c)}try{r.name=t}catch{}return r.DNS=v8e,r.URL=b8e,r}var w8e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const K7={randomUUID:w8e};function Ld(t,e,n){if(K7.randomUUID&&!t)return K7.randomUUID();t=t||{};var r=t.random||(t.rng||Vre)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,DL(r)}function x8e(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function sI(t,e){return t<<e|t>>>32-e}function S8e(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var a=t.length/4+2,s=Math.ceil(a/16),o=new Array(s),l=0;l<s;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=t[l*64+u*4]<<24|t[l*64+u*4+1]<<16|t[l*64+u*4+2]<<8|t[l*64+u*4+3];o[l]=c}o[s-1][14]=(t.length-1)*8/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=(t.length-1)*8&4294967295;for(var f=0;f<s;++f){for(var p=new Uint32Array(80),m=0;m<16;++m)p[m]=o[f][m];for(var _=16;_<80;++_)p[_]=sI(p[_-3]^p[_-8]^p[_-14]^p[_-16],1);for(var y=n[0],b=n[1],x=n[2],w=n[3],T=n[4],A=0;A<80;++A){var E=Math.floor(A/20),C=sI(y,5)+x8e(E,b,x,w)+T+e[E]+p[A]>>>0;T=w,w=x,x=sI(b,30)>>>0,b=y,y=C}n[0]=n[0]+y>>>0,n[1]=n[1]+b>>>0,n[2]=n[2]+x>>>0,n[3]=n[3]+w>>>0,n[4]=n[4]+T>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var T8e=_8e("v5",80,S8e),Z7=null,X7=null,Ys=0;function bu(t,e,n){t=t||{};var r=0,i=new Uint8Array(16),a=t.random||(t.rng||Vre)(),s=t.msecs!==void 0?t.msecs:Date.now(),o=t.seq!==void 0?t.seq:null,l=X7,c=Z7;return s>Ys&&t.msecs===void 0&&(Ys=s,o!==null&&(l=null,c=null)),o!==null&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,c=o&524287),(l===null||c===null)&&(l=a[6]&127,l=l<<8|a[7],c=a[8]&63,c=c<<8|a[9],c=c<<5|a[10]>>>3),s+1e4>Ys&&o===null?++c>524287&&(c=0,++l>4095&&(l=0,Ys++)):Ys=s,X7=l,Z7=c,i[r++]=Ys/1099511627776&255,i[r++]=Ys/4294967296&255,i[r++]=Ys/16777216&255,i[r++]=Ys/65536&255,i[r++]=Ys/256&255,i[r++]=Ys&255,i[r++]=l>>>4&15|112,i[r++]=l&255,i[r++]=c>>>13&63|128,i[r++]=c>>>5&255,i[r++]=c<<3&255|a[10]&7,i[r++]=a[11],i[r++]=a[12],i[r++]=a[13],i[r++]=a[14],i[r++]=a[15],DL(i)}var E8e=class{};function A8e(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}var fT=class extends E8e{constructor(e){super();U(this,"lc_serializable",!1);U(this,"lc_kwargs");U(this,"ignoreLLM",!1);U(this,"ignoreChain",!1);U(this,"ignoreAgent",!1);U(this,"ignoreRetriever",!1);U(this,"ignoreCustomEvent",!1);U(this,"raiseError",!1);U(this,"awaitHandlers",gl("LANGCHAIN_CALLBACKS_BACKGROUND")==="false");this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Ere(this.constructor)]}copy(){return new this.constructor(this)}toJSON(){return Mv.prototype.toJSON.call(this)}toJSONNotImplemented(){return Mv.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends fT{constructor(){super();U(this,"name",bu());Object.assign(this,e)}}return new n}};const O8e=t=>{const e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"},C8e="gen_ai.operation.name",k8e="gen_ai.system",J7="gen_ai.request.model",N8e="gen_ai.response.model",Y7="gen_ai.usage.input_tokens",Q7="gen_ai.usage.output_tokens",eH="gen_ai.usage.total_tokens",I8e="gen_ai.request.max_tokens",P8e="gen_ai.request.temperature",R8e="gen_ai.request.top_p",j8e="gen_ai.request.frequency_penalty",$8e="gen_ai.request.presence_penalty",M8e="gen_ai.response.finish_reasons",L8e="gen_ai.prompt",D8e="gen_ai.completion",B8e="gen_ai.request.extra_query",F8e="gen_ai.request.extra_body",U8e="gen_ai.serialized.name",z8e="gen_ai.serialized.signature",q8e="gen_ai.serialized.doc",H8e="gen_ai.response.id",W8e="gen_ai.response.service_tier",V8e="gen_ai.response.system_fingerprint",G8e="gen_ai.usage.input_token_details",K8e="gen_ai.usage.output_token_details",Z8e="langsmith.trace.session_id",X8e="langsmith.trace.session_name",J8e="langsmith.span.kind",Y8e="langsmith.trace.name",Q8e="langsmith.metadata",tH="langsmith.span.tags",eqe="langsmith.request.streaming",tqe="langsmith.request.headers",nqe=(...t)=>fetch(...t),Gre=Symbol.for("ls:fetch_implementation"),rqe=()=>globalThis[Gre]===void 0,iqe=t=>async(...e)=>{if(t||Mi("DEBUG")==="true"){const[r,i]=e;console.log(` ${(i==null?void 0:i.method)||"GET"} ${r}`)}const n=await(globalThis[Gre]??nqe)(...e);return(t||Mi("DEBUG")==="true")&&console.log(` ${n.status} ${n.statusText} ${n.url}`),n},Kre=()=>Mi("PROJECT")??El("LANGCHAIN_SESSION")??"default",nH={};function xw(t){nH[t]||(console.warn(t),nH[t]=!0)}const Ee=t=>BigInt(t),Zre=Ee("0x9E3779B1"),Xre=Ee("0x85EBCA77"),aqe=Ee("0xC2B2AE3D"),Bu=Ee("0x9E3779B185EBCA87"),mf=Ee("0xC2B2AE3D27D4EB4F"),Jre=Ee("0x165667B19E3779F9"),BL=Ee("0x85EBCA77C2B2AE63"),sqe=Ee("0x27D4EB2F165667C5"),oqe=Ee("0x165667919E3779F9"),lqe=Ee("0x9FB21C651E98DF25");function cqe(t){const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=parseInt(t.substring(n,n+2),16);return e}const el=cqe("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),ap=(Ee(1)<<Ee(128))-Ee(1),Pt=(Ee(1)<<Ee(64))-Ee(1),o1=(Ee(1)<<Ee(32))-Ee(1),ic=64,Yre=ic/8,uqe=8,S_=4;function An(t,e=0){return new Uint8Array(t.buffer,t.byteOffset+e,t.length-e)}function Dn(t,e=0){return new DataView(t.buffer,t.byteOffset+e).getBigUint64(0,!0)}function Bh(t,e=0){return new DataView(t.buffer,t.byteOffset+e).getUint32(0,!0)}function oI(t,e=0){return t[e]}const dqe=t=>(t&Ee(255))<<Ee(56)|(t&Ee(65280))<<Ee(40)|(t&Ee(16711680))<<Ee(24)|(t&Ee(4278190080))<<Ee(8)|(t&Ee(0xff00000000))>>Ee(8)|(t&Ee(0xff0000000000))>>Ee(24)|(t&Ee(0xff000000000000))>>Ee(40)|(t&Ee(0xff00000000000000))>>Ee(56),fqe=t=>(t=(t&Ee(65535))<<Ee(16)|(t&Ee(4294901760))>>Ee(16),t=(t&Ee(16711935))<<Ee(8)|(t&Ee(4278255360))>>Ee(8),t),hqe=(t,e)=>(t&o1)*(e&o1)&Pt,Zp=t=>{if(!t)throw new Error("Assert failed")};function pqe(t,e){return(t<<e|t>>Ee(32)-e)&o1}function Qre(t,e,n){for(let r=0;r<Yre;r++){const i=Dn(e,r*8),a=i^Dn(n,r*8);t[r^1]+=i,t[r]+=hqe(a,a>>Ee(32))}return t}function rH(t,e,n,r){for(let i=0;i<r;i++)Qre(t,An(e,i*ic),An(n,i*8));return t}function mqe(t,e){for(let n=0;n<Yre;n++){const r=Dn(e,n*8);let i=t[n];i=o2(i,Ee(47)),i^=r,i*=Zre,t[n]=i&Pt}return t}function T_(t,e){return eie(t[0]^Dn(e,0),t[1]^Dn(e,uqe))}function iH(t,e,n){let r=n;return r+=T_(t.slice(0),An(e,0*S_)),r+=T_(t.slice(2),An(e,4*S_)),r+=T_(t.slice(4),An(e,8*S_)),r+=T_(t.slice(6),An(e,12*S_)),ll(r&Pt)}function gqe(t,e,n,r,i){const a=Math.floor((n.byteLength-ic)/8),s=ic*a,o=Math.floor((e.byteLength-1)/s);for(let l=0;l<o;l++)t=rH(t,An(e,l*s),n,a),t=i(t,An(n,n.byteLength-ic));{const l=Math.floor((e.byteLength-1-s*o)/ic);t=rH(t,An(e,o*s),n,l),t=r(t,An(e,e.byteLength-ic),An(n,n.byteLength-ic-7))}return t}function yqe(t,e,n){let r=new BigUint64Array([aqe,Bu,mf,Jre,BL,Xre,sqe,Zre]);Zp(t.length>128),r=gqe(r,t,e,Qre,mqe),Zp(r.length*8==64);{const i=iH(r,An(e,11),Ee(t.byteLength)*Bu&Pt);return iH(r,An(e,e.byteLength-ic-11),~(Ee(t.byteLength)*mf)&Pt)<<Ee(64)|i}}function eie(t,e){const n=t*e&ap;return n&Pt^n>>Ee(64)}function aH(t,e,n){return eie((Dn(t,0)^Dn(e,0)+n)&Pt,(Dn(t,8)^Dn(e,8)-n)&Pt)}function Sw(t,e,n,r,i){let a=t&Pt,s=t>>Ee(64)&Pt;return a+=aH(e,r,i),a^=Dn(n,0)+Dn(n,8),a&=Pt,s+=aH(n,An(r,16),i),s^=Dn(e,0)+Dn(e,8),s&=Pt,s<<Ee(64)|a}function ll(t){return t^=t>>Ee(37),t*=oqe,t&=Pt,t^=t>>Ee(32),t}function l1(t){return t^=t>>Ee(33),t*=mf,t&=Pt,t^=t>>Ee(29),t*=Jre,t&=Pt,t^=t>>Ee(32),t}function vqe(t,e,n){const r=t.byteLength;Zp(r>0&&r<=3);const i=Ee(oI(t,r-1))|Ee(r<<8)|Ee(oI(t,0)<<16)|Ee(oI(t,r>>1)<<24),a=(Ee(Bh(e,0))^Ee(Bh(e,4)))+n,s=(i^a)&Pt,o=(Ee(Bh(e,8))^Ee(Bh(e,12)))-n,l=(pqe(fqe(i),Ee(13))^o)&Pt;return(l1(l)&Pt)<<Ee(64)|l1(s)}function o2(t,e){return t^t>>e}function bqe(t,e,n){const r=t.byteLength;Zp(r>=4&&r<=8);{const i=Bh(t,0),a=Bh(t,r-4),s=Ee(i)|Ee(a)<<Ee(32),o=(Dn(e,16)^Dn(e,24))+n&Pt;let c=(s^o)*(Bu+(Ee(r)<<Ee(2)))&ap;return c+=(c&Pt)<<Ee(65),c&=ap,c^=c>>Ee(67),o2(o2(c&Pt,Ee(35))*lqe&Pt,Ee(28))|ll(c>>Ee(64))<<Ee(64)}}function _qe(t,e,n){const r=t.byteLength;Zp(r>=9&&r<=16);{const i=(Dn(e,32)^Dn(e,40))+n&Pt,a=(Dn(e,48)^Dn(e,56))-n&Pt,s=Dn(t);let o=Dn(t,r-8),l=(s^o^i)*Bu;const c=(l&Pt)+(Ee(r-1)<<Ee(54));l=l&(ap^Pt)|c,o^=a,l+=o+(o&o1)*(Xre-Ee(1))<<Ee(64),l&=ap,l^=dqe(l>>Ee(64));let u=(l&Pt)*mf;return u+=(l>>Ee(64))*mf<<Ee(64),u&=ap,ll(u&Pt)|ll(u>>Ee(64))<<Ee(64)}}function wqe(t,e){const n=t.byteLength;return Zp(n<=16),n>8?_qe(t,el,e):n>=4?bqe(t,el,e):n>0?vqe(t,el,e):l1(e^Dn(el,64)^Dn(el,72))|l1(e^Dn(el,80)^Dn(el,88))<<Ee(64)}function l2(t){return~t+Ee(1)&Pt}function xqe(t,e,n){let r=Ee(t.byteLength)*Bu&Pt,i=Ee(t.byteLength-1)/Ee(32);for(;i>=0;){const o=Number(i);r=Sw(r,An(t,16*o),An(t,t.byteLength-16*(o+1)),An(e,32*o),n),i--}let a=r+(r>>Ee(64))&Pt;a=ll(a);let s=(r&Pt)*Bu+(r>>Ee(64))*BL+(Ee(t.byteLength)-n&Pt)*mf;return s&=Pt,s=l2(ll(s)),a|s<<Ee(64)}function Sqe(t,e,n){let r=Ee(t.byteLength)*Bu&Pt;for(let s=32;s<160;s+=32)r=Sw(r,An(t,s-32),An(t,s-16),An(e,s-32),n);r=ll(r&Pt)|ll(r>>Ee(64))<<Ee(64);for(let s=160;s<=t.byteLength;s+=32)r=Sw(r,An(t,s-32),An(t,s-16),An(e,3+s-160),n);r=Sw(r,An(t,t.byteLength-16),An(t,t.byteLength-32),An(e,103),l2(n));let i=r+(r>>Ee(64))&Pt;i=ll(i);let a=(r&Pt)*Bu+(r>>Ee(64))*BL+(Ee(t.byteLength)-n&Pt)*mf;return a&=Pt,a=l2(ll(a)),i|a<<Ee(64)}function Tqe(t,e=Ee(0)){const n=t.byteLength;return n<=16?wqe(t,e):n<=128?xqe(t,el,e):n<=240?Sqe(t,el,e):yqe(t,el)}function Eqe(t){const e=new Uint8Array(16),n=new DataView(e.buffer),r=t&Pt,i=t>>Ee(64);return n.setBigUint64(0,i,!1),n.setBigUint64(8,r,!1),e}const tie=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Tt(t,e){if(!tie.test(t)){const n=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(n)}return t}function Aqe(t){const e=typeof t=="string"?Date.parse(t):t;return bu({msecs:e,seq:0})}function Oqe(t){if(!tie.test(t))return null;const e=t[14];return parseInt(e,16)}function Cqe(t){const e=t.replace(/-/g,""),n=new Uint8Array(16);for(let r=0;r<16;r++)n[r]=parseInt(e.slice(r*2,r*2+2),16);return n}function kqe(t){const e=Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join("");return`${e.slice(0,8)}-${e.slice(8,12)}-${e.slice(12,16)}-${e.slice(16,20)}-${e.slice(20)}`}const Nqe=new TextEncoder;function Iqe(t){const e=Nqe.encode(t),n=Tqe(e);return Eqe(n)}function E_(t,e){const n=`${t}:${e}`,r=Iqe(n),i=new Uint8Array(16);if(Oqe(t)===7){const s=Cqe(t);i.set(s.slice(0,6),0)}else{const s=Date.now();i[0]=s/1099511627776&255,i[1]=s/4294967296&255,i[2]=s/16777216&255,i[3]=s/65536&255,i[4]=s/256&255,i[5]=s&255}return i[6]=112|r[0]&15,i[7]=r[1],i[8]=128|r[2]&63,i.set(r.slice(3,10),9),kqe(i)}function Pqe(t,e){throw new Error("dump() is not supported in browser environments.")}function Rqe(t){throw new Error("load() is not supported in browser environments.")}function jqe(t,e){return e===null?!1:Date.now()-t.createdAt>e*1e3}class $qe{constructor(e={}){Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ttlSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshIntervalSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_metrics",{enumerable:!0,configurable:!0,writable:!0,value:{hits:0,misses:0,refreshes:0,refreshErrors:0}}),this.configure(e)}get metrics(){return{...this._metrics}}get totalRequests(){return this._metrics.hits+this._metrics.misses}get hitRate(){const e=this.totalRequests;return e>0?this._metrics.hits/e:0}resetMetrics(){this._metrics={hits:0,misses:0,refreshes:0,refreshErrors:0}}get(e,n){if(this.maxSize===0)return;const r=this.cache.get(e);if(!r){this._metrics.misses+=1;return}return this.cache.delete(e),this.cache.set(e,{...r,refreshFunc:n}),this._metrics.hits+=1,r.value}set(e,n,r){if(this.maxSize===0)return;if(this.refreshTimer===void 0&&this.startRefreshLoop(),!this.cache.has(e)&&this.cache.size>=this.maxSize){const a=this.cache.keys().next().value;a!==void 0&&this.cache.delete(a)}const i={value:n,createdAt:Date.now(),refreshFunc:r};this.cache.delete(e),this.cache.set(e,i)}invalidate(e){this.cache.delete(e)}clear(){this.cache.clear()}get size(){return this.cache.size}stop(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=void 0)}dump(e){for(const[n,r]of this.cache.entries())r.value;Pqe()}load(e){const n=Rqe();if(!n)return 0;let r=0;const i=Date.now();for(const[a,s]of Object.entries(n)){if(this.cache.size>=this.maxSize)break;const o={value:s,createdAt:i};this.cache.set(a,o),r+=1}return r}startRefreshLoop(){this.stop(),this.ttlSeconds!==null&&(this.refreshTimer=setInterval(()=>{this.refreshStaleEntries().catch(e=>{console.warn("Unexpected error in cache refresh loop:",e)})},this.refreshIntervalSeconds*1e3),this.refreshTimer.unref&&this.refreshTimer.unref())}getStaleEntries(){const e=[];for(const[n,r]of this.cache.entries())jqe(r,this.ttlSeconds)&&e.push([n,r]);return e}async refreshStaleEntries(){const e=this.getStaleEntries();if(e.length!==0){for(const[n,r]of e)if(r.refreshFunc!==void 0)try{const i=await r.refreshFunc();this.set(n,i,r.refreshFunc),this._metrics.refreshes+=1}catch(i){this._metrics.refreshErrors+=1,console.warn(`Failed to refresh cache entry ${n}:`,i)}}}configure(e){this.stop(),this.refreshIntervalSeconds=e.refreshIntervalSeconds??60,this.maxSize=e.maxSize??100,this.ttlSeconds=e.ttlSeconds??300}}const sH=new $qe,nie="0.5.4";var ky={};let Xo;const Mqe=()=>typeof window<"u"&&typeof window.document<"u",Lqe=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Dqe=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),rie=()=>typeof Deno<"u",Bqe=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!rie(),iie=()=>Xo||(typeof Bun<"u"?Xo="bun":Mqe()?Xo="browser":Bqe()?Xo="node":Lqe()?Xo="webworker":Dqe()?Xo="jsdom":rie()?Xo="deno":Xo="other",Xo);let lI;function aie(){if(lI===void 0){const t=iie(),e=Uqe();lI={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:nie,...e}}return lI}function sie(){const t=Fqe(),e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,i]of Object.entries(t))typeof i=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[r]=i);return e}function Fqe(){const t={};try{if(typeof process<"u"&&ky)for(const[e,n]of Object.entries(ky))(e.startsWith("LANGCHAIN_")||e.startsWith("LANGSMITH_"))&&n!=null&&((e.toLowerCase().includes("key")||e.toLowerCase().includes("secret")||e.toLowerCase().includes("token"))&&typeof n=="string"?t[e]=n.slice(0,2)+"*".repeat(n.length-4)+n.slice(-2):t[e]=n)}catch{}return t}function El(t){try{return typeof process<"u"?ky==null?void 0:ky[t]:void 0}catch{return}}function Mi(t){return El(`LANGSMITH_${t}`)||El(`LANGCHAIN_${t}`)}let cI;function Uqe(){if(cI!==void 0)return cI;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of t){const r=El(n);r!==void 0&&(e[n]=r)}return cI=e,e}function oie(){return El("OTEL_ENABLED")==="true"||Mi("OTEL_ENABLED")==="true"}class zqe{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...n){!this.hasWarned&&oie()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let r;if(n.length===1&&typeof n[0]=="function"?r=n[0]:n.length===2&&typeof n[1]=="function"?r=n[1]:n.length===3&&typeof n[2]=="function"&&(r=n[2]),typeof r=="function")return r()}}class qqe{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new zqe})}getTracer(e,n){return this.mockTracer}getActiveSpan(){}setSpan(e,n){return e}getSpan(e){}setSpanContext(e,n){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class Hqe{active(){return{}}with(e,n){return n()}}const uI=Symbol.for("ls:otel_trace"),dI=Symbol.for("ls:otel_context"),oH=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),Wqe=new qqe,Vqe=new Hqe;class Gqe{getTraceInstance(){return globalThis[uI]??Wqe}getContextInstance(){return globalThis[dI]??Vqe}initializeGlobalInstances(e){globalThis[uI]===void 0&&(globalThis[uI]=e.trace),globalThis[dI]===void 0&&(globalThis[dI]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[oH]=e}getDefaultOTLPTracerComponents(){return globalThis[oH]??void 0}}const FL=new Gqe;function lie(){return FL.getTraceInstance()}function Kqe(){return FL.getContextInstance()}function Zqe(){return FL.getDefaultOTLPTracerComponents()}const Xqe={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function Jqe(t){return Xqe[t]||t}class Yqe{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,n){for(const r of e)try{if(!r.run)continue;if(r.operation==="post"){const i=this.createSpanForRun(r,r.run,n.get(r.id));i&&!r.run.end_time&&this.spans.set(r.id,i)}else this.updateSpanForRun(r,r.run)}catch(i){console.error(`Error processing operation ${r.id}:`,i)}}createSpanForRun(e,n,r){const i=r&&lie().getSpan(r);if(i)try{return this.finishSpanSetup(i,n,e)}catch(a){console.error(`Failed to create span for run ${e.id}:`,a);return}}finishSpanSetup(e,n,r){return this.setSpanAttributes(e,n,r),n.error?(e.setStatus({code:2}),e.recordException(new Error(n.error))):e.setStatus({code:1}),n.end_time&&e.end(new Date(n.end_time)),e}updateSpanForRun(e,n){try{const r=this.spans.get(e.id);if(!r){console.debug(`No span found for run ${e.id} during update`);return}this.setSpanAttributes(r,n,e),n.error?(r.setStatus({code:2}),r.recordException(new Error(n.error))):r.setStatus({code:1});const i=n.end_time;i&&(r.end(new Date(i)),this.spans.delete(e.id))}catch(r){console.error(`Failed to update span for run ${e.id}:`,r)}}extractModelName(e){var n;if((n=e.extra)!=null&&n.metadata){const r=e.extra.metadata;if(r.ls_model_name)return r.ls_model_name;if(r.invocation_params){const i=r.invocation_params;if(i.model)return i.model;if(i.model_name)return i.model_name}}}setSpanAttributes(e,n,r){var o;if("run_type"in n&&n.run_type){e.setAttribute(J8e,n.run_type);const l=Jqe(n.run_type||"chain");e.setAttribute(C8e,l)}"name"in n&&n.name&&e.setAttribute(Y8e,n.name),"session_id"in n&&n.session_id&&e.setAttribute(Z8e,n.session_id),"session_name"in n&&n.session_name&&e.setAttribute(X8e,n.session_name),this.setGenAiSystem(e,n);const i=this.extractModelName(n);i&&e.setAttribute(J7,i),"prompt_tokens"in n&&typeof n.prompt_tokens=="number"&&e.setAttribute(Y7,n.prompt_tokens),"completion_tokens"in n&&typeof n.completion_tokens=="number"&&e.setAttribute(Q7,n.completion_tokens),"total_tokens"in n&&typeof n.total_tokens=="number"&&e.setAttribute(eH,n.total_tokens),this.setInvocationParameters(e,n);const a=((o=n.extra)==null?void 0:o.metadata)||{};for(const[l,c]of Object.entries(a))c!=null&&e.setAttribute(`${Q8e}.${l}`,String(c));const s=n.tags;if(s&&Array.isArray(s)?e.setAttribute(tH,s.join(", ")):s&&e.setAttribute(tH,String(s)),"serialized"in n&&typeof n.serialized=="object"){const l=n.serialized;l.name&&e.setAttribute(U8e,String(l.name)),l.signature&&e.setAttribute(z8e,String(l.signature)),l.doc&&e.setAttribute(q8e,String(l.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,n){let r="langchain";const i=this.extractModelName(n);if(i){const a=i.toLowerCase();a.includes("anthropic")||a.startsWith("claude")?r="anthropic":a.includes("bedrock")?r="aws.bedrock":a.includes("azure")&&a.includes("openai")?r="az.ai.openai":a.includes("azure")&&a.includes("inference")?r="az.ai.inference":a.includes("cohere")?r="cohere":a.includes("deepseek")?r="deepseek":a.includes("gemini")?r="gemini":a.includes("groq")?r="groq":a.includes("watson")||a.includes("ibm")?r="ibm.watsonx.ai":a.includes("mistral")?r="mistral_ai":a.includes("gpt")||a.includes("openai")?r="openai":a.includes("perplexity")||a.includes("sonar")?r="perplexity":a.includes("vertex")?r="vertex_ai":(a.includes("xai")||a.includes("grok"))&&(r="xai")}e.setAttribute(k8e,r)}setInvocationParameters(e,n){var i,a;if(!((a=(i=n.extra)==null?void 0:i.metadata)!=null&&a.invocation_params))return;const r=n.extra.metadata.invocation_params;r.max_tokens!==void 0&&e.setAttribute(I8e,r.max_tokens),r.temperature!==void 0&&e.setAttribute(P8e,r.temperature),r.top_p!==void 0&&e.setAttribute(R8e,r.top_p),r.frequency_penalty!==void 0&&e.setAttribute(j8e,r.frequency_penalty),r.presence_penalty!==void 0&&e.setAttribute($8e,r.presence_penalty)}setIOAttributes(e,n){if(n.run.inputs)try{const r=n.run.inputs;typeof r=="object"&&r!==null&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(J7,r.model),r.stream!==void 0&&e.setAttribute(eqe,r.stream),r.extra_headers&&e.setAttribute(tqe,JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute(B8e,JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute(F8e,JSON.stringify(r.extra_body))),e.setAttribute(L8e,JSON.stringify(r))}catch(r){console.debug(`Failed to process inputs for run ${n.id}`,r)}if(n.run.outputs)try{const r=n.run.outputs,i=this.getUnifiedRunTokens(r);if(i&&(e.setAttribute(Y7,i[0]),e.setAttribute(Q7,i[1]),e.setAttribute(eH,i[0]+i[1])),r&&typeof r=="object"){if(r.model&&e.setAttribute(N8e,String(r.model)),r.id&&e.setAttribute(H8e,r.id),r.choices&&Array.isArray(r.choices)){const a=r.choices.map(s=>s.finish_reason).filter(s=>s).map(String);a.length>0&&e.setAttribute(M8e,a.join(", "))}if(r.service_tier&&e.setAttribute(W8e,r.service_tier),r.system_fingerprint&&e.setAttribute(V8e,r.system_fingerprint),r.usage_metadata&&typeof r.usage_metadata=="object"){const a=r.usage_metadata;a.input_token_details&&e.setAttribute(G8e,JSON.stringify(a.input_token_details)),a.output_token_details&&e.setAttribute(K8e,JSON.stringify(a.output_token_details))}}e.setAttribute(D8e,JSON.stringify(r))}catch(r){console.debug(`Failed to process outputs for run ${n.id}`,r)}}getUnifiedRunTokens(e){if(!e)return null;let n=this.extractUnifiedRunTokens(e.usage_metadata);if(n)return n;const r=Object.keys(e);for(const s of r){const o=e[s];if(!(!o||typeof o!="object")&&(n=this.extractUnifiedRunTokens(o.usage_metadata),n||o.lc===1&&o.kwargs&&typeof o.kwargs=="object"&&(n=this.extractUnifiedRunTokens(o.kwargs.usage_metadata),n)))return n}const i=e.generations||[];if(!Array.isArray(i))return null;const a=Array.isArray(i[0])?i.flat():i;for(const s of a)if(typeof s=="object"&&s.message&&typeof s.message=="object"&&s.message.kwargs&&typeof s.message.kwargs=="object"&&(n=this.extractUnifiedRunTokens(s.message.kwargs.usage_metadata),n))return n;return null}extractUnifiedRunTokens(e){return!e||typeof e!="object"||typeof e.input_tokens!="number"||typeof e.output_tokens!="number"?null:[e.input_tokens,e.output_tokens]}}const Qqe=Object.prototype.toString,e9e=t=>Qqe.call(t)==="[object Error]",t9e=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function n9e(t){if(!(t&&e9e(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:t9e.has(n)}function r9e(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function A_(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}let i9e=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function a9e(t,e){const n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1;let i=Math.round(r*e.minTimeout*e.factor**(n-1));return i=Math.min(i,e.maxTimeout),i}function lH(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function s9e({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:i}){var m,_,y;const a=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(a instanceof i9e)throw a.originalError;const s=Number.isFinite(i.retries)?Math.max(0,i.retries-n):i.retries,o=i.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:a,attemptNumber:e,retriesLeft:s,retriesConsumed:n});if(await i.onFailedAttempt(l),lH(r,o)<=0)throw a;const c=await i.shouldConsumeRetry(l),u=lH(r,o);if(u<=0||s<=0)throw a;if(a instanceof TypeError&&!n9e(a)){if(c)throw a;return(m=i.signal)==null||m.throwIfAborted(),!1}if(!await i.shouldRetry(l))throw a;if(!c)return(_=i.signal)==null||_.throwIfAborted(),!1;const f=a9e(n,i),p=Math.min(f,u);return p>0&&await new Promise((b,x)=>{var A,E;const w=()=>{var C;clearTimeout(T),(C=i.signal)==null||C.removeEventListener("abort",w),x(i.signal.reason)},T=setTimeout(()=>{var C;(C=i.signal)==null||C.removeEventListener("abort",w),b()},p);i.unref&&((A=T.unref)==null||A.call(T)),(E=i.signal)==null||E.addEventListener("abort",w,{once:!0})}),(y=i.signal)==null||y.throwIfAborted(),!0}async function o9e(t,e={}){var a,s,o;if(e={...e},r9e(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),A_("factor",e.factor,{min:0,allowInfinity:!1}),A_("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),A_("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),A_("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(a=e.signal)==null||a.throwIfAborted();let n=0,r=0;const i=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{(s=e.signal)==null||s.throwIfAborted();const l=await t(n);return(o=e.signal)==null||o.throwIfAborted(),l}catch(l){await s9e({error:l,attemptNumber:n,retriesConsumed:r,startTime:i,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var O_={},fI={exports:{}},cH;function l9e(){return cH||(cH=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,f||l,p),_=n?n+c:c;return l._events[_]?l._events[_].fn?l._events[_]=[l._events[_],m]:l._events[_].push(m):(l._events[_]=m,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,_=new Array(m);p<m;p++)_[p]=f[p].fn;return _},o.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,u,f,p,m,_){var y=n?n+c:c;if(!this._events[y])return!1;var b=this._events[y],x=arguments.length,w,T;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),x){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,f),!0;case 4:return b.fn.call(b.context,u,f,p),!0;case 5:return b.fn.call(b.context,u,f,p,m),!0;case 6:return b.fn.call(b.context,u,f,p,m,_),!0}for(T=1,w=new Array(x-1);T<x;T++)w[T-1]=arguments[T];b.fn.apply(b.context,w)}else{var A=b.length,E;for(T=0;T<A;T++)switch(b[T].once&&this.removeListener(c,b[T].fn,void 0,!0),x){case 1:b[T].fn.call(b[T].context);break;case 2:b[T].fn.call(b[T].context,u);break;case 3:b[T].fn.call(b[T].context,u,f);break;case 4:b[T].fn.call(b[T].context,u,f,p);break;default:if(!w)for(E=1,w=new Array(x-1);E<x;E++)w[E-1]=arguments[E];b[T].fn.apply(b[T].context,w)}}return!0},o.prototype.on=function(c,u,f){return a(this,c,u,f,!1)},o.prototype.once=function(c,u,f){return a(this,c,u,f,!0)},o.prototype.removeListener=function(c,u,f,p){var m=n?n+c:c;if(!this._events[m])return this;if(!u)return s(this,m),this;var _=this._events[m];if(_.fn)_.fn===u&&(!p||_.once)&&(!f||_.context===f)&&s(this,m);else{for(var y=0,b=[],x=_.length;y<x;y++)(_[y].fn!==u||p&&!_[y].once||f&&_[y].context!==f)&&b.push(_[y]);b.length?this._events[m]=b.length===1?b[0]:b:s(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(fI)),fI.exports}var Eg={exports:{}},hI,uH;function c9e(){return uH||(uH=1,hI=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})))),hI}var dH;function u9e(){if(dH)return Eg.exports;dH=1;const t=c9e();class e extends Error{constructor(i){super(i),this.name="TimeoutError"}}const n=(r,i,a)=>new Promise((s,o)=>{if(typeof i!="number"||i<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(i===1/0){s(r);return}const l=setTimeout(()=>{if(typeof a=="function"){try{s(a())}catch(f){o(f)}return}const c=typeof a=="string"?a:`Promise timed out after ${i} milliseconds`,u=a instanceof Error?a:new e(c);typeof r.cancel=="function"&&r.cancel(),o(u)},i);t(r.then(s,o),()=>{clearTimeout(l)})});return Eg.exports=n,Eg.exports.default=n,Eg.exports.TimeoutError=e,Eg.exports}var C_={},k_={},fH;function d9e(){if(fH)return k_;fH=1,Object.defineProperty(k_,"__esModule",{value:!0});function t(e,n,r){let i=0,a=e.length;for(;a>0;){const s=a/2|0;let o=i+s;r(e[o],n)<=0?(i=++o,a-=s+1):a=s}return i}return k_.default=t,k_}var hH;function f9e(){if(hH)return C_;hH=1,Object.defineProperty(C_,"__esModule",{value:!0});const t=d9e();class e{constructor(){this._queue=[]}enqueue(r,i){i=Object.assign({priority:0},i);const a={priority:i.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=i.priority){this._queue.push(a);return}const s=t.default(this._queue,a,(o,l)=>l.priority-o.priority);this._queue.splice(s,0,a)}dequeue(){const r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(i=>i.priority===r.priority).map(i=>i.run)}get size(){return this._queue.length}}return C_.default=e,C_}var pH;function h9e(){if(pH)return O_;pH=1,Object.defineProperty(O_,"__esModule",{value:!0});const t=l9e(),e=u9e(),n=f9e(),r=()=>{},i=new e.TimeoutError;class a extends t{constructor(o){var l,c,u,f;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,o=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},o),!(typeof o.intervalCap=="number"&&o.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(c=(l=o.intervalCap)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""}\` (${typeof o.intervalCap})`);if(o.interval===void 0||!(Number.isFinite(o.interval)&&o.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(f=(u=o.interval)===null||u===void 0?void 0:u.toString())!==null&&f!==void 0?f:""}\` (${typeof o.interval})`);this._carryoverConcurrencyCount=o.carryoverConcurrencyCount,this._isIntervalIgnored=o.intervalCap===1/0||o.interval===0,this._intervalCap=o.intervalCap,this._interval=o.interval,this._queue=new o.queueClass,this._queueClass=o.queueClass,this.concurrency=o.concurrency,this._timeout=o.timeout,this._throwOnTimeout=o.throwOnTimeout===!0,this._isPaused=o.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const o=Date.now();if(this._intervalId===void 0){const l=this._intervalEnd-o;if(l<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},l)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const o=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const l=this._queue.dequeue();return l?(this.emit("active"),l(),o&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(o){if(!(typeof o=="number"&&o>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${o}\` (${typeof o})`);this._concurrency=o,this._processQueue()}async add(o,l={}){return new Promise((c,u)=>{const f=async()=>{this._pendingCount++,this._intervalCount++;try{const p=this._timeout===void 0&&l.timeout===void 0?o():e.default(Promise.resolve(o()),l.timeout===void 0?this._timeout:l.timeout,()=>{(l.throwOnTimeout===void 0?this._throwOnTimeout:l.throwOnTimeout)&&u(i)});c(await p)}catch(p){u(p)}this._next()};this._queue.enqueue(f,l),this._tryToStartAnother(),this.emit("add")})}async addAll(o,l){return Promise.all(o.map(async c=>this.add(c,l)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(o=>{const l=this._resolveEmpty;this._resolveEmpty=()=>{l(),o()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(o=>{const l=this._resolveIdle;this._resolveIdle=()=>{l(),o()}})}get size(){return this._queue.size}sizeBy(o){return this._queue.filter(o).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(o){this._timeout=o}}return O_.default=a,O_}var p9e=h9e();const pc=Ut(p9e),m9e="default"in pc?pc.default:pc,g9e=[408,425,429,500,502,503,504];let mH=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.maxQueueSizeBytes=e.maxQueueSizeBytes,this.queue=new m9e({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){return this.callWithOptions({},e,...n)}callWithOptions(e,n,...r){const i=e.sizeBytes??0;if(this.maxQueueSizeBytes!==void 0&&i>0&&this.queueSizeBytes+i>this.maxQueueSizeBytes)return Promise.reject(new Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${i} bytes.`));i>0&&(this.queueSizeBytes+=i);const a=this.onFailedResponseHook;let s=this.queue.add(()=>o9e(()=>n(...r).catch(o=>{throw o instanceof Error?o:new Error(o)}),{async onFailedAttempt({error:o}){if(typeof o!="object"||o==null)throw o;const l="message"in o&&typeof o.message=="string"?o.message:void 0;if(l!=null&&l.startsWith("Cancel")||l!=null&&l.startsWith("TimeoutError")||l!=null&&l.startsWith("AbortError")||"name"in o&&o.name==="TimeoutError"||"code"in o&&o.code==="ECONNABORTED")throw o;const c="response"in o?o.response:void 0;if(a&&await a(c))return;const u=(c==null?void 0:c.status)??("status"in o?o.status:void 0);if(u!=null&&(typeof u=="number"||typeof u=="string")&&!g9e.includes(+u))throw o},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return i>0&&(s=s.finally(()=>{this.queueSizeBytes-=i})),e.signal?Promise.race([s,new Promise((o,l)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{l(new Error("AbortError"))})})]):s}};function gH(t){return typeof(t==null?void 0:t._getType)=="function"}function yH(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}var N_={exports:{}},pI,vH;function hT(){if(vH)return pI;vH=1;const t="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=e-6;return pI={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},pI}var mI,bH;function pT(){if(bH)return mI;bH=1;var t={};return mI=typeof process=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},mI}var _H;function Cb(){return _H||(_H=1,(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=hT(),a=pT();e=t.exports={};const s=e.re=[],o=e.safeRe=[],l=e.src=[],c=e.safeSrc=[],u=e.t={};let f=0;const p="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",i],[p,r]],_=b=>{for(const[x,w]of m)b=b.split(`${x}*`).join(`${x}{0,${w}}`).split(`${x}+`).join(`${x}{1,${w}}`);return b},y=(b,x,w)=>{const T=_(x),A=f++;a(b,A,x),u[b]=A,l[A]=x,c[A]=T,s[A]=new RegExp(x,w?"g":void 0),o[A]=new RegExp(T,w?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),y("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${p}+`),y("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),y("FULL",`^${l[u.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),y("LOOSE",`^${l[u.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),y("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",l[u.COERCE],!0),y("COERCERTLFULL",l[u.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",y("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",y("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(N_,N_.exports)),N_.exports}var gI,wH;function UL(){if(wH)return gI;wH=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return gI=r=>r?typeof r!="object"?t:r:e,gI}var yI,xH;function cie(){if(xH)return yI;xH=1;const t=/^[0-9]+$/,e=(r,i)=>{if(typeof r=="number"&&typeof i=="number")return r===i?0:r<i?-1:1;const a=t.test(r),s=t.test(i);return a&&s&&(r=+r,i=+i),r===i?0:a&&!s?-1:s&&!a?1:r<i?-1:1};return yI={compareIdentifiers:e,rcompareIdentifiers:(r,i)=>e(i,r)},yI}var vI,SH;function Wi(){if(SH)return vI;SH=1;const t=pT(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=hT(),{safeRe:r,t:i}=Cb(),a=UL(),{compareIdentifiers:s}=cie();class o{constructor(c,u){if(u=a(u),c instanceof o){if(c.loose===!!u.loose&&c.includePrerelease===!!u.includePrerelease)return c;c=c.version}else if(typeof c!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof c}".`);if(c.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",c,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const f=c.trim().match(u.loose?r[i.LOOSE]:r[i.FULL]);if(!f)throw new TypeError(`Invalid Version: ${c}`);if(this.raw=c,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const m=+p;if(m>=0&&m<n)return m}return p}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(c){if(t("SemVer.compare",this.version,this.options,c),!(c instanceof o)){if(typeof c=="string"&&c===this.version)return 0;c=new o(c,this.options)}return c.version===this.version?0:this.compareMain(c)||this.comparePre(c)}compareMain(c){return c instanceof o||(c=new o(c,this.options)),this.major<c.major?-1:this.major>c.major?1:this.minor<c.minor?-1:this.minor>c.minor?1:this.patch<c.patch?-1:this.patch>c.patch?1:0}comparePre(c){if(c instanceof o||(c=new o(c,this.options)),this.prerelease.length&&!c.prerelease.length)return-1;if(!this.prerelease.length&&c.prerelease.length)return 1;if(!this.prerelease.length&&!c.prerelease.length)return 0;let u=0;do{const f=this.prerelease[u],p=c.prerelease[u];if(t("prerelease compare",u,f,p),f===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(f===void 0)return-1;if(f===p)continue;return s(f,p)}while(++u)}compareBuild(c){c instanceof o||(c=new o(c,this.options));let u=0;do{const f=this.build[u],p=c.build[u];if(t("build compare",u,f,p),f===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(f===void 0)return-1;if(f===p)continue;return s(f,p)}while(++u)}inc(c,u,f){if(c.startsWith("pre")){if(!u&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(u){const p=`-${u}`.match(this.options.loose?r[i.PRERELEASELOOSE]:r[i.PRERELEASE]);if(!p||p[1]!==u)throw new Error(`invalid identifier: ${u}`)}}switch(c){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,f),this.inc("pre",u,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,f),this.inc("pre",u,f);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(f)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(u===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(u){let m=[u,p];f===!1&&(m=[u]),s(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${c}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return vI=o,vI}var bI,TH;function xm(){if(TH)return bI;TH=1;const t=Wi();return bI=(n,r,i=!1)=>{if(n instanceof t)return n;try{return new t(n,r)}catch(a){if(!i)return null;throw a}},bI}var _I,EH;function y9e(){if(EH)return _I;EH=1;const t=xm();return _I=(n,r)=>{const i=t(n,r);return i?i.version:null},_I}var wI,AH;function v9e(){if(AH)return wI;AH=1;const t=xm();return wI=(n,r)=>{const i=t(n.trim().replace(/^[=v]+/,""),r);return i?i.version:null},wI}var xI,OH;function b9e(){if(OH)return xI;OH=1;const t=Wi();return xI=(n,r,i,a,s)=>{typeof i=="string"&&(s=a,a=i,i=void 0);try{return new t(n instanceof t?n.version:n,i).inc(r,a,s).version}catch{return null}},xI}var SI,CH;function _9e(){if(CH)return SI;CH=1;const t=xm();return SI=(n,r)=>{const i=t(n,null,!0),a=t(r,null,!0),s=i.compare(a);if(s===0)return null;const o=s>0,l=o?i:a,c=o?a:i,u=!!l.prerelease.length;if(!!c.prerelease.length&&!u){if(!c.patch&&!c.minor)return"major";if(c.compareMain(l)===0)return c.minor&&!c.patch?"minor":"patch"}const p=u?"pre":"";return i.major!==a.major?p+"major":i.minor!==a.minor?p+"minor":i.patch!==a.patch?p+"patch":"prerelease"},SI}var TI,kH;function w9e(){if(kH)return TI;kH=1;const t=Wi();return TI=(n,r)=>new t(n,r).major,TI}var EI,NH;function x9e(){if(NH)return EI;NH=1;const t=Wi();return EI=(n,r)=>new t(n,r).minor,EI}var AI,IH;function S9e(){if(IH)return AI;IH=1;const t=Wi();return AI=(n,r)=>new t(n,r).patch,AI}var OI,PH;function T9e(){if(PH)return OI;PH=1;const t=xm();return OI=(n,r)=>{const i=t(n,r);return i&&i.prerelease.length?i.prerelease:null},OI}var CI,RH;function $o(){if(RH)return CI;RH=1;const t=Wi();return CI=(n,r,i)=>new t(n,i).compare(new t(r,i)),CI}var kI,jH;function E9e(){if(jH)return kI;jH=1;const t=$o();return kI=(n,r,i)=>t(r,n,i),kI}var NI,$H;function A9e(){if($H)return NI;$H=1;const t=$o();return NI=(n,r)=>t(n,r,!0),NI}var II,MH;function zL(){if(MH)return II;MH=1;const t=Wi();return II=(n,r,i)=>{const a=new t(n,i),s=new t(r,i);return a.compare(s)||a.compareBuild(s)},II}var PI,LH;function O9e(){if(LH)return PI;LH=1;const t=zL();return PI=(n,r)=>n.sort((i,a)=>t(i,a,r)),PI}var RI,DH;function C9e(){if(DH)return RI;DH=1;const t=zL();return RI=(n,r)=>n.sort((i,a)=>t(a,i,r)),RI}var jI,BH;function mT(){if(BH)return jI;BH=1;const t=$o();return jI=(n,r,i)=>t(n,r,i)>0,jI}var $I,FH;function qL(){if(FH)return $I;FH=1;const t=$o();return $I=(n,r,i)=>t(n,r,i)<0,$I}var MI,UH;function uie(){if(UH)return MI;UH=1;const t=$o();return MI=(n,r,i)=>t(n,r,i)===0,MI}var LI,zH;function die(){if(zH)return LI;zH=1;const t=$o();return LI=(n,r,i)=>t(n,r,i)!==0,LI}var DI,qH;function HL(){if(qH)return DI;qH=1;const t=$o();return DI=(n,r,i)=>t(n,r,i)>=0,DI}var BI,HH;function WL(){if(HH)return BI;HH=1;const t=$o();return BI=(n,r,i)=>t(n,r,i)<=0,BI}var FI,WH;function fie(){if(WH)return FI;WH=1;const t=uie(),e=die(),n=mT(),r=HL(),i=qL(),a=WL();return FI=(o,l,c,u)=>{switch(l){case"===":return typeof o=="object"&&(o=o.version),typeof c=="object"&&(c=c.version),o===c;case"!==":return typeof o=="object"&&(o=o.version),typeof c=="object"&&(c=c.version),o!==c;case"":case"=":case"==":return t(o,c,u);case"!=":return e(o,c,u);case">":return n(o,c,u);case">=":return r(o,c,u);case"<":return i(o,c,u);case"<=":return a(o,c,u);default:throw new TypeError(`Invalid operator: ${l}`)}},FI}var UI,VH;function k9e(){if(VH)return UI;VH=1;const t=Wi(),e=xm(),{safeRe:n,t:r}=Cb();return UI=(a,s)=>{if(a instanceof t)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;s=s||{};let o=null;if(!s.rtl)o=a.match(s.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const m=s.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let _;for(;(_=m.exec(a))&&(!o||o.index+o[0].length!==a.length);)(!o||_.index+_[0].length!==o.index+o[0].length)&&(o=_),m.lastIndex=_.index+_[1].length+_[2].length;m.lastIndex=-1}if(o===null)return null;const l=o[2],c=o[3]||"0",u=o[4]||"0",f=s.includePrerelease&&o[5]?`-${o[5]}`:"",p=s.includePrerelease&&o[6]?`+${o[6]}`:"";return e(`${l}.${c}.${u}${f}${p}`,s)},UI}var zI,GH;function N9e(){if(GH)return zI;GH=1;class t{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,r)}return this}}return zI=t,zI}var qI,KH;function Mo(){if(KH)return qI;KH=1;const t=/\s+/g;class e{constructor(W,q){if(q=i(q),W instanceof e)return W.loose===!!q.loose&&W.includePrerelease===!!q.includePrerelease?W:new e(W.raw,q);if(W instanceof a)return this.raw=W.value,this.set=[[W]],this.formatted=void 0,this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=W.trim().replace(t," "),this.set=this.raw.split("||").map(K=>this.parseRange(K.trim())).filter(K=>K.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const K=this.set[0];if(this.set=this.set.filter(V=>!y(V[0])),this.set.length===0)this.set=[K];else if(this.set.length>1){for(const V of this.set)if(V.length===1&&b(V[0])){this.set=[V];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let W=0;W<this.set.length;W++){W>0&&(this.formatted+="||");const q=this.set[W];for(let K=0;K<q.length;K++)K>0&&(this.formatted+=" "),this.formatted+=q[K].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(W){const K=((this.options.includePrerelease&&m)|(this.options.loose&&_))+":"+W,V=r.get(K);if(V)return V;const J=this.options.loose,Q=J?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];W=W.replace(Q,L(this.options.includePrerelease)),s("hyphen replace",W),W=W.replace(l[c.COMPARATORTRIM],u),s("comparator trim",W),W=W.replace(l[c.TILDETRIM],f),s("tilde trim",W),W=W.replace(l[c.CARETTRIM],p),s("caret trim",W);let M=W.split(" ").map(ue=>w(ue,this.options)).join(" ").split(/\s+/).map(ue=>j(ue,this.options));J&&(M=M.filter(ue=>(s("loose invalid filter",ue,this.options),!!ue.match(l[c.COMPARATORLOOSE])))),s("range list",M);const Y=new Map,se=M.map(ue=>new a(ue,this.options));for(const ue of se){if(y(ue))return[ue];Y.set(ue.value,ue)}Y.size>1&&Y.has("")&&Y.delete("");const ge=[...Y.values()];return r.set(K,ge),ge}intersects(W,q){if(!(W instanceof e))throw new TypeError("a Range is required");return this.set.some(K=>x(K,q)&&W.set.some(V=>x(V,q)&&K.every(J=>V.every(Q=>J.intersects(Q,q)))))}test(W){if(!W)return!1;if(typeof W=="string")try{W=new o(W,this.options)}catch{return!1}for(let q=0;q<this.set.length;q++)if(B(this.set[q],W,this.options))return!0;return!1}}qI=e;const n=N9e(),r=new n,i=UL(),a=gT(),s=pT(),o=Wi(),{safeRe:l,t:c,comparatorTrimReplace:u,tildeTrimReplace:f,caretTrimReplace:p}=Cb(),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:_}=hT(),y=z=>z.value==="<0.0.0-0",b=z=>z.value==="",x=(z,W)=>{let q=!0;const K=z.slice();let V=K.pop();for(;q&&K.length;)q=K.every(J=>V.intersects(J,W)),V=K.pop();return q},w=(z,W)=>(z=z.replace(l[c.BUILD],""),s("comp",z,W),z=C(z,W),s("caret",z),z=A(z,W),s("tildes",z),z=N(z,W),s("xrange",z),z=Z(z,W),s("stars",z),z),T=z=>!z||z.toLowerCase()==="x"||z==="*",A=(z,W)=>z.trim().split(/\s+/).map(q=>E(q,W)).join(" "),E=(z,W)=>{const q=W.loose?l[c.TILDELOOSE]:l[c.TILDE];return z.replace(q,(K,V,J,Q,M)=>{s("tilde",z,K,V,J,Q,M);let Y;return T(V)?Y="":T(J)?Y=`>=${V}.0.0 <${+V+1}.0.0-0`:T(Q)?Y=`>=${V}.${J}.0 <${V}.${+J+1}.0-0`:M?(s("replaceTilde pr",M),Y=`>=${V}.${J}.${Q}-${M} <${V}.${+J+1}.0-0`):Y=`>=${V}.${J}.${Q} <${V}.${+J+1}.0-0`,s("tilde return",Y),Y})},C=(z,W)=>z.trim().split(/\s+/).map(q=>R(q,W)).join(" "),R=(z,W)=>{s("caret",z,W);const q=W.loose?l[c.CARETLOOSE]:l[c.CARET],K=W.includePrerelease?"-0":"";return z.replace(q,(V,J,Q,M,Y)=>{s("caret",z,V,J,Q,M,Y);let se;return T(J)?se="":T(Q)?se=`>=${J}.0.0${K} <${+J+1}.0.0-0`:T(M)?J==="0"?se=`>=${J}.${Q}.0${K} <${J}.${+Q+1}.0-0`:se=`>=${J}.${Q}.0${K} <${+J+1}.0.0-0`:Y?(s("replaceCaret pr",Y),J==="0"?Q==="0"?se=`>=${J}.${Q}.${M}-${Y} <${J}.${Q}.${+M+1}-0`:se=`>=${J}.${Q}.${M}-${Y} <${J}.${+Q+1}.0-0`:se=`>=${J}.${Q}.${M}-${Y} <${+J+1}.0.0-0`):(s("no pr"),J==="0"?Q==="0"?se=`>=${J}.${Q}.${M}${K} <${J}.${Q}.${+M+1}-0`:se=`>=${J}.${Q}.${M}${K} <${J}.${+Q+1}.0-0`:se=`>=${J}.${Q}.${M} <${+J+1}.0.0-0`),s("caret return",se),se})},N=(z,W)=>(s("replaceXRanges",z,W),z.split(/\s+/).map(q=>D(q,W)).join(" ")),D=(z,W)=>{z=z.trim();const q=W.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return z.replace(q,(K,V,J,Q,M,Y)=>{s("xRange",z,K,V,J,Q,M,Y);const se=T(J),ge=se||T(Q),ue=ge||T(M),H=ue;return V==="="&&H&&(V=""),Y=W.includePrerelease?"-0":"",se?V===">"||V==="<"?K="<0.0.0-0":K="*":V&&H?(ge&&(Q=0),M=0,V===">"?(V=">=",ge?(J=+J+1,Q=0,M=0):(Q=+Q+1,M=0)):V==="<="&&(V="<",ge?J=+J+1:Q=+Q+1),V==="<"&&(Y="-0"),K=`${V+J}.${Q}.${M}${Y}`):ge?K=`>=${J}.0.0${Y} <${+J+1}.0.0-0`:ue&&(K=`>=${J}.${Q}.0${Y} <${J}.${+Q+1}.0-0`),s("xRange return",K),K})},Z=(z,W)=>(s("replaceStars",z,W),z.trim().replace(l[c.STAR],"")),j=(z,W)=>(s("replaceGTE0",z,W),z.trim().replace(l[W.includePrerelease?c.GTE0PRE:c.GTE0],"")),L=z=>(W,q,K,V,J,Q,M,Y,se,ge,ue,H)=>(T(K)?q="":T(V)?q=`>=${K}.0.0${z?"-0":""}`:T(J)?q=`>=${K}.${V}.0${z?"-0":""}`:Q?q=`>=${q}`:q=`>=${q}${z?"-0":""}`,T(se)?Y="":T(ge)?Y=`<${+se+1}.0.0-0`:T(ue)?Y=`<${se}.${+ge+1}.0-0`:H?Y=`<=${se}.${ge}.${ue}-${H}`:z?Y=`<${se}.${ge}.${+ue+1}-0`:Y=`<=${Y}`,`${q} ${Y}`.trim()),B=(z,W,q)=>{for(let K=0;K<z.length;K++)if(!z[K].test(W))return!1;if(W.prerelease.length&&!q.includePrerelease){for(let K=0;K<z.length;K++)if(s(z[K].semver),z[K].semver!==a.ANY&&z[K].semver.prerelease.length>0){const V=z[K].semver;if(V.major===W.major&&V.minor===W.minor&&V.patch===W.patch)return!0}return!1}return!0};return qI}var HI,ZH;function gT(){if(ZH)return HI;ZH=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,f){if(f=n(f),u instanceof e){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),s("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(u){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],p=u.match(f);if(!p)throw new TypeError(`Invalid comparator: ${u}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new o(p[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(s("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new o(u,this.options)}catch{return!1}return a(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new l(this.value,f).test(u.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||a(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||a(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}HI=e;const n=UL(),{safeRe:r,t:i}=Cb(),a=fie(),s=pT(),o=Wi(),l=Mo();return HI}var WI,XH;function yT(){if(XH)return WI;XH=1;const t=Mo();return WI=(n,r,i)=>{try{r=new t(r,i)}catch{return!1}return r.test(n)},WI}var VI,JH;function I9e(){if(JH)return VI;JH=1;const t=Mo();return VI=(n,r)=>new t(n,r).set.map(i=>i.map(a=>a.value).join(" ").trim().split(" ")),VI}var GI,YH;function P9e(){if(YH)return GI;YH=1;const t=Wi(),e=Mo();return GI=(r,i,a)=>{let s=null,o=null,l=null;try{l=new e(i,a)}catch{return null}return r.forEach(c=>{l.test(c)&&(!s||o.compare(c)===-1)&&(s=c,o=new t(s,a))}),s},GI}var KI,QH;function R9e(){if(QH)return KI;QH=1;const t=Wi(),e=Mo();return KI=(r,i,a)=>{let s=null,o=null,l=null;try{l=new e(i,a)}catch{return null}return r.forEach(c=>{l.test(c)&&(!s||o.compare(c)===1)&&(s=c,o=new t(s,a))}),s},KI}var ZI,eW;function j9e(){if(eW)return ZI;eW=1;const t=Wi(),e=Mo(),n=mT();return ZI=(i,a)=>{i=new e(i,a);let s=new t("0.0.0");if(i.test(s)||(s=new t("0.0.0-0"),i.test(s)))return s;s=null;for(let o=0;o<i.set.length;++o){const l=i.set[o];let c=null;l.forEach(u=>{const f=new t(u.semver.version);switch(u.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!c||n(f,c))&&(c=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${u.operator}`)}}),c&&(!s||n(s,c))&&(s=c)}return s&&i.test(s)?s:null},ZI}var XI,tW;function $9e(){if(tW)return XI;tW=1;const t=Mo();return XI=(n,r)=>{try{return new t(n,r).range||"*"}catch{return null}},XI}var JI,nW;function VL(){if(nW)return JI;nW=1;const t=Wi(),e=gT(),{ANY:n}=e,r=Mo(),i=yT(),a=mT(),s=qL(),o=WL(),l=HL();return JI=(u,f,p,m)=>{u=new t(u,m),f=new r(f,m);let _,y,b,x,w;switch(p){case">":_=a,y=o,b=s,x=">",w=">=";break;case"<":_=s,y=l,b=a,x="<",w="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(u,f,m))return!1;for(let T=0;T<f.set.length;++T){const A=f.set[T];let E=null,C=null;if(A.forEach(R=>{R.semver===n&&(R=new e(">=0.0.0")),E=E||R,C=C||R,_(R.semver,E.semver,m)?E=R:b(R.semver,C.semver,m)&&(C=R)}),E.operator===x||E.operator===w||(!C.operator||C.operator===x)&&y(u,C.semver))return!1;if(C.operator===w&&b(u,C.semver))return!1}return!0},JI}var YI,rW;function M9e(){if(rW)return YI;rW=1;const t=VL();return YI=(n,r,i)=>t(n,r,">",i),YI}var QI,iW;function L9e(){if(iW)return QI;iW=1;const t=VL();return QI=(n,r,i)=>t(n,r,"<",i),QI}var eP,aW;function D9e(){if(aW)return eP;aW=1;const t=Mo();return eP=(n,r,i)=>(n=new t(n,i),r=new t(r,i),n.intersects(r,i)),eP}var tP,sW;function B9e(){if(sW)return tP;sW=1;const t=yT(),e=$o();return tP=(n,r,i)=>{const a=[];let s=null,o=null;const l=n.sort((p,m)=>e(p,m,i));for(const p of l)t(p,r,i)?(o=p,s||(s=p)):(o&&a.push([s,o]),o=null,s=null);s&&a.push([s,null]);const c=[];for(const[p,m]of a)p===m?c.push(p):!m&&p===l[0]?c.push("*"):m?p===l[0]?c.push(`<=${m}`):c.push(`${p} - ${m}`):c.push(`>=${p}`);const u=c.join(" || "),f=typeof r.raw=="string"?r.raw:String(r);return u.length<f.length?u:r},tP}var nP,oW;function F9e(){if(oW)return nP;oW=1;const t=Mo(),e=gT(),{ANY:n}=e,r=yT(),i=$o(),a=(f,p,m={})=>{if(f===p)return!0;f=new t(f,m),p=new t(p,m);let _=!1;e:for(const y of f.set){for(const b of p.set){const x=l(y,b,m);if(_=_||x!==null,x)continue e}if(_)return!1}return!0},s=[new e(">=0.0.0-0")],o=[new e(">=0.0.0")],l=(f,p,m)=>{if(f===p)return!0;if(f.length===1&&f[0].semver===n){if(p.length===1&&p[0].semver===n)return!0;m.includePrerelease?f=s:f=o}if(p.length===1&&p[0].semver===n){if(m.includePrerelease)return!0;p=o}const _=new Set;let y,b;for(const N of f)N.operator===">"||N.operator===">="?y=c(y,N,m):N.operator==="<"||N.operator==="<="?b=u(b,N,m):_.add(N.semver);if(_.size>1)return null;let x;if(y&&b){if(x=i(y.semver,b.semver,m),x>0)return null;if(x===0&&(y.operator!==">="||b.operator!=="<="))return null}for(const N of _){if(y&&!r(N,String(y),m)||b&&!r(N,String(b),m))return null;for(const D of p)if(!r(N,String(D),m))return!1;return!0}let w,T,A,E,C=b&&!m.includePrerelease&&b.semver.prerelease.length?b.semver:!1,R=y&&!m.includePrerelease&&y.semver.prerelease.length?y.semver:!1;C&&C.prerelease.length===1&&b.operator==="<"&&C.prerelease[0]===0&&(C=!1);for(const N of p){if(E=E||N.operator===">"||N.operator===">=",A=A||N.operator==="<"||N.operator==="<=",y){if(R&&N.semver.prerelease&&N.semver.prerelease.length&&N.semver.major===R.major&&N.semver.minor===R.minor&&N.semver.patch===R.patch&&(R=!1),N.operator===">"||N.operator===">="){if(w=c(y,N,m),w===N&&w!==y)return!1}else if(y.operator===">="&&!r(y.semver,String(N),m))return!1}if(b){if(C&&N.semver.prerelease&&N.semver.prerelease.length&&N.semver.major===C.major&&N.semver.minor===C.minor&&N.semver.patch===C.patch&&(C=!1),N.operator==="<"||N.operator==="<="){if(T=u(b,N,m),T===N&&T!==b)return!1}else if(b.operator==="<="&&!r(b.semver,String(N),m))return!1}if(!N.operator&&(b||y)&&x!==0)return!1}return!(y&&A&&!b&&x!==0||b&&E&&!y&&x!==0||R||C)},c=(f,p,m)=>{if(!f)return p;const _=i(f.semver,p.semver,m);return _>0?f:_<0||p.operator===">"&&f.operator===">="?p:f},u=(f,p,m)=>{if(!f)return p;const _=i(f.semver,p.semver,m);return _<0?f:_>0||p.operator==="<"&&f.operator==="<="?p:f};return nP=a,nP}var rP,lW;function U9e(){if(lW)return rP;lW=1;const t=Cb(),e=hT(),n=Wi(),r=cie(),i=xm(),a=y9e(),s=v9e(),o=b9e(),l=_9e(),c=w9e(),u=x9e(),f=S9e(),p=T9e(),m=$o(),_=E9e(),y=A9e(),b=zL(),x=O9e(),w=C9e(),T=mT(),A=qL(),E=uie(),C=die(),R=HL(),N=WL(),D=fie(),Z=k9e(),j=gT(),L=Mo(),B=yT(),z=I9e(),W=P9e(),q=R9e(),K=j9e(),V=$9e(),J=VL(),Q=M9e(),M=L9e(),Y=D9e(),se=B9e(),ge=F9e();return rP={parse:i,valid:a,clean:s,inc:o,diff:l,major:c,minor:u,patch:f,prerelease:p,compare:m,rcompare:_,compareLoose:y,compareBuild:b,sort:x,rsort:w,gt:T,lt:A,eq:E,neq:C,gte:R,lte:N,cmp:D,coerce:Z,Comparator:j,Range:L,satisfies:B,toComparators:z,maxSatisfying:W,minSatisfying:q,minVersion:K,validRange:V,outside:J,gtr:Q,ltr:M,intersects:Y,simplifyRange:se,subset:ge,SemVer:n,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},rP}U9e();function cu(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,n]=t.split(":"),r=n||"latest";if(e.includes("/")){const[i,a]=e.split("/",2);if(!i||!a)throw new Error(`Invalid identifier format: ${t}`);return[i,a,r]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,r]}}class z9e extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}class q9e extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithNotFoundError",this.status=404}}function cW(t){return t!=null&&typeof t=="object"&&"name"in t&&(t==null?void 0:t.name)==="LangSmithNotFoundError"}async function Ye(t,e,n){let r;if(t.ok){n&&(r=await t.text());return}if(t.status===403)try{const s=await t.json();(s==null?void 0:s.error)==="org_scoped_key_requires_workspace"&&(r="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{const o=new Error(`${t.status} ${t.statusText}`);throw o.status=t==null?void 0:t.status,o}if(r===void 0)try{r=await t.text()}catch{r=""}const i=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Message: ${r}`;if(t.status===404)throw new q9e(i);if(t.status===409)throw new z9e(i);const a=new Error(i);throw a.status=t.status,a}const hie="ERR_CONFLICTING_ENDPOINTS";class H9e extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:hie}),this.name="ConflictingEndpointsError"}}function W9e(t){return typeof t=="object"&&t!==null&&t.code===hie}var uW="[...]",V9e={result:"[Circular]"},c1=[],Fh=[];const G9e=new TextEncoder;function K9e(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function I_(t){return G9e.encode(t)}function pie(t){if(t&&typeof t=="object"&&t!==null){if(t instanceof Map)return Object.fromEntries(t);if(t instanceof Set)return Array.from(t);if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(t instanceof Error)return{name:t.name,message:t.message}}else if(typeof t=="bigint")return t.toString();return t}function Z9e(t){return function(e,n){return pie(n)}}function ka(t,e,n,r,i){var a;try{const s=JSON.stringify(t,Z9e(n),r);return I_(s)}catch(s){if(!((a=s.message)!=null&&a.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),I_("[Unserializable]");Mi("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof i>"u"&&(i=K9e()),c2(t,"",0,[],void 0,0,i);let o;try{Fh.length===0?o=JSON.stringify(t,n,r):o=JSON.stringify(t,X9e(n),r)}catch{return I_("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;c1.length!==0;){const l=c1.pop();l.length===4?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return I_(o)}}function iP(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),c1.push([r,n,e,i])):Fh.push([e,n,t]):(r[n]=t,c1.push([r,n,e]))}function c2(t,e,n,r,i,a,s){a+=1;var o;if(typeof t=="object"&&t!==null){for(o=0;o<r.length;o++)if(r[o]===t){iP(V9e,t,e,i);return}if(typeof s.depthLimit<"u"&&a>s.depthLimit){iP(uW,t,e,i);return}if(typeof s.edgesLimit<"u"&&n+1>s.edgesLimit){iP(uW,t,e,i);return}if(r.push(t),Array.isArray(t))for(o=0;o<t.length;o++)c2(t[o],o,o,r,t,a,s);else{t=pie(t);var l=Object.keys(t);for(o=0;o<l.length;o++){var c=l[o];c2(t[c],c,o,r,t,a,s)}}r.pop()}}function X9e(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(Fh.length>0)for(var r=0;r<Fh.length;r++){var i=Fh[r];if(i[1]===e&&i[0]===n){n=i[2],Fh.splice(r,1);break}}return t.call(this,e,n)}}function dW(t,e,n){if(n)return t;const r=aie(),i=e??sie(),a=t.extra??{},s=a.metadata;return t.extra={...a,runtime:{...r,...a==null?void 0:a.runtime},metadata:{...i,...i.revision_id||"revision_id"in t&&t.revision_id?{revision_id:("revision_id"in t?t.revision_id:void 0)??i.revision_id}:{},...s}},t}const J9e=t=>{const e=(t==null?void 0:t.toString())??Mi("TRACING_SAMPLING_RATE");if(e===void 0)return;const n=parseFloat(e);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},Y9e=t=>{const n=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function Q9e(t){const e=[];for await(const n of t)e.push(n);return e}function P_(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const e7e=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"10",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};function fW(t){return typeof t=="number"?Number(t.toFixed(4)):t}const t7e=24*1024*1024,mie=1024*1024*1024,n7e=1e4,r7e=100,hW="https://api.smith.langchain.com";class i7e{constructor(e){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSizeBytes=e??mie}peek(){return this.items[0]}push(e){let n;const r=new Promise(a=>{n=a}),i=ka(e.item,`Serializing run with id: ${e.item.id}`).length;return this.sizeBytes+i>this.maxSizeBytes&&this.items.length>0?(console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${e.item.id}. Current queue size: ${this.sizeBytes} bytes, attempted addition: ${i} bytes.`),n(),r):(this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:n,itemPromise:r,size:i}),this.sizeBytes+=i,r)}pop({upToSizeBytes:e,upToSize:n}){var a;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const r=[];let i=0;for(;i+(((a=this.peek())==null?void 0:a.size)??0)<e&&this.items.length>0&&r.length<n;){const s=this.items.shift();s&&(r.push(s),i+=s.size,this.sizeBytes-=s.size)}if(r.length===0&&this.items.length>0){const s=this.items.shift();r.push(s),i+=s.size,this.sizeBytes-=s.size}return[r.map(s=>({action:s.action,item:s.payload,otelContext:s.otelContext,apiKey:s.apiKey,apiUrl:s.apiUrl,size:s.size})),()=>r.forEach(s=>s.itemPromiseResolve())]}}class Fv{get _fetch(){return this.fetchImplementation||iqe(this.debug)}constructor(e={}){var i;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitTracedRuntimeInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:El("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_promptCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_multipartDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_runCompressionDisabled",{enumerable:!0,configurable:!0,writable:!0,value:Mi("DISABLE_RUN_COMPRESSION")==="true"}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:El("LANGSMITH_DEBUG")==="true"});const n=Fv.getDefaultClientConfig();if(this.tracingSampleRate=J9e(e.tracingSamplingRate),this.apiUrl=P_(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=P_(e.apiKey??n.apiKey),this.webUrl=P_(e.webUrl??n.webUrl),(i=this.webUrl)!=null&&i.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=P_(e.workspaceId??Mi("WORKSPACE_ID")),this.timeout_ms=e.timeout_ms??9e4,this.caller=new mH({...e.callerOptions??{},maxRetries:4,debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.fetchImplementation=e.fetchImplementation;const r=e.maxIngestMemoryBytes??mie;this.batchIngestCaller=new mH({maxRetries:4,maxConcurrency:this.traceBatchConcurrency,maxQueueSizeBytes:r,...e.callerOptions??{},onFailedResponseHook:e7e,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.omitTracedRuntimeInfo=e.omitTracedRuntimeInfo??!1,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.autoBatchQueue=new i7e(r),this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.batchSizeLimit=e.batchSizeLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,oie()&&(this.langSmithToOTELTranslator=new Yqe),this.cachedLSEnvVarsForMetadata=sie(),e.cache!==void 0&&e.disablePromptCache&&xw("Both 'cache' and 'disablePromptCache' were provided. The 'cache' parameter is deprecated and will be removed in a future version. Using 'cache' parameter value."),e.cache!==void 0?(xw("The 'cache' parameter is deprecated and will be removed in a future version. Use 'configureGlobalPromptCache()' to configure the global cache, or 'disablePromptCache: true' to disable caching for this client."),e.cache===!1?this._promptCache=void 0:e.cache===!0?this._promptCache=sH:this._promptCache=e.cache):e.disablePromptCache||(this._promptCache=sH)}static getDefaultClientConfig(){const e=Mi("API_KEY"),n=Mi("ENDPOINT")??hW,r=Mi("HIDE_INPUTS")==="true",i=Mi("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:Y9e(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${nie}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=await this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=await this.processOutputs(n.outputs)),n}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",i=`${this.apiUrl}${e}?${r}`;return await this.caller.call(async()=>{const s=await this._fetch(i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(s,`fetch ${e}`),s})}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let i=Number(n.get("offset"))||0;const a=Number(n.get("limit"))||100;for(;;){n.set("offset",String(i)),n.set("limit",String(a));const s=`${this.apiUrl}${e}?${n}`,o=await this.caller.call(async()=>{const c=await this._fetch(s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(c,`fetch ${e}`),c}),l=r?r(await o.json()):await o.json();if(l.length===0||(yield l,l.length<a))break;i+=l.length}}async*_getCursorPaginatedList(e,n=null,r="POST",i="runs"){const a=n?{...n}:{};for(;;){const s=JSON.stringify(a),l=await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Ye(u,`fetch ${e}`),u})).json();if(!l||!l[i])break;yield l[i];const c=l.cursors;if(!c||!c.next)break;a.cursor=c.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const i of e)this.filteredPostUuids.has(i.trace_id)?i.id===i.trace_id&&this.filteredPostUuids.delete(i.trace_id):r.push(i);return r}else{const r=[];for(const i of e){const a=i.trace_id??i.id;this.filteredPostUuids.has(a)||(i.id===a?this._shouldSample()?r.push(i):this.filteredPostUuids.add(a):r.push(i))}return r}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e==null?void 0:e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??t7e}async _getBatchSizeLimit(){var n;const e=await this._ensureServerInfo();return this.batchSizeLimit??((n=e==null?void 0:e.batch_ingest_config)==null?void 0:n.size_limit)??r7e}async _getDatasetExamplesMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n}){const r=[];for(;this.autoBatchQueue.items.length>0;){const[i,a]=this.autoBatchQueue.pop({upToSizeBytes:e,upToSize:n});if(!i.length){a();break}const s=i.reduce((c,u)=>{const f=u.apiUrl??this.apiUrl,p=u.apiKey??this.apiKey,_=u.apiKey===this.apiKey&&u.apiUrl===this.apiUrl?"default":`${f}|${p}`;return c[_]||(c[_]=[]),c[_].push(u),c},{}),o=[];for(const[c,u]of Object.entries(s)){const f=this._processBatch(u,{apiUrl:c==="default"?void 0:c.split("|")[0],apiKey:c==="default"?void 0:c.split("|")[1]});o.push(f)}const l=Promise.all(o).finally(a);r.push(l)}return Promise.all(r)}async _processBatch(e,n){var i,a;if(!e.length)return;const r=e.reduce((s,o)=>s+(o.size??0),0);try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(e);else{const s={runCreates:e.filter(c=>c.action==="create").map(c=>c.item),runUpdates:e.filter(c=>c.action==="update").map(c=>c.item)},o=await this._ensureServerInfo();if(!this._multipartDisabled&&(((i=o==null?void 0:o.batch_ingest_config)==null?void 0:i.use_multipart_endpoint)??!0)){const c=!this._runCompressionDisabled&&((a=o==null?void 0:o.instance_flags)==null?void 0:a.gzip_body_enabled);try{await this.multipartIngestRuns(s,{...n,useGzip:c,sizeBytes:r})}catch(u){if(cW(u))this._multipartDisabled=!0,await this.batchIngestRuns(s,{...n,sizeBytes:r});else throw u}}else await this.batchIngestRuns(s,{...n,sizeBytes:r})}}catch(s){console.error("Error exporting batch:",s)}}_sendBatchToOTELTranslator(e){if(this.langSmithToOTELTranslator!==void 0){const n=new Map,r=[];for(const i of e)i.item.id&&i.otelContext&&(n.set(i.item.id,i.otelContext),i.action==="create"?r.push({operation:"post",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}):r.push({operation:"patch",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}));this.langSmithToOTELTranslator.exportBatch(r,n)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=dW(e.item,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);const n=this.autoBatchQueue.push(e);if(this.manualFlushMode)return n;const r=await this._getBatchSizeLimitBytes(),i=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>r||this.autoBatchQueue.items.length>i)&&this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:i}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:i})},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const n=await(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(n7e),...this.fetchOptions});return await Ye(r,"get server info"),r})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(n,null,2)+`
`),n}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${e.status??"Unspecified status code"} ${e.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes(),n=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n})}_cloneCurrentOTELContext(){const e=lie(),n=Kqe();if(this.langSmithToOTELTranslator!==void 0){const r=e.getActiveSpan();if(r)return e.setSpan(n.active(),r)}}async createRun(e,n){if(!this._filterForSampling([e]).length)return;const r={...this.headers,"Content-Type":"application/json"},i=e.project_name;delete e.project_name;const a=await this.prepareRunCreateOrUpdateInputs({session_name:i,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&a.trace_id!==void 0&&a.dotted_order!==void 0){const l=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:a,otelContext:l,apiKey:n==null?void 0:n.apiKey,apiUrl:n==null?void 0:n.apiUrl}).catch(console.error);return}const s=dW(a,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);(n==null?void 0:n.apiKey)!==void 0&&(r["x-api-key"]=n.apiKey),(n==null?void 0:n.workspaceId)!==void 0&&(r["x-tenant-id"]=n.workspaceId);const o=ka(s,`Creating run with id: ${s.id}`);await this.caller.call(async()=>{const l=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Ye(l,"create run",!0),l})}async batchIngestRuns({runCreates:e,runUpdates:n},r){if(e===void 0&&n===void 0)return;let i=await Promise.all((e==null?void 0:e.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]),a=await Promise.all((n==null?void 0:n.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]);if(i.length>0&&a.length>0){const l=i.reduce((u,f)=>(f.id&&(u[f.id]=f),u),{}),c=[];for(const u of a)u.id!==void 0&&l[u.id]?l[u.id]={...l[u.id],...u}:c.push(u);i=Object.values(l),a=c}const s={post:i,patch:a};if(!s.post.length&&!s.patch.length)return;const o={post:[],patch:[]};for(const l of["post","patch"]){const c=l,u=s[c].reverse();let f=u.pop();for(;f!==void 0;)o[c].push(f),f=u.pop()}if(o.post.length>0||o.patch.length>0){const l=o.post.map(c=>c.id).concat(o.patch.map(c=>c.id)).join(",");await this._postBatchIngestRuns(ka(o,`Ingesting runs with ids: ${l}`),r)}}async _postBatchIngestRuns(e,n){const r={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(n==null?void 0:n.apiKey)!==void 0&&(r["x-api-key"]=n.apiKey),await this.batchIngestCaller.callWithOptions({sizeBytes:n==null?void 0:n.sizeBytes},async()=>{const i=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs/batch`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await Ye(i,"batch create run",!0),i})}async multipartIngestRuns({runCreates:e,runUpdates:n},r){if(e===void 0&&n===void 0)return;const i={};let a=[];for(const f of e??[]){const p=await this.prepareRunCreateOrUpdateInputs(f);p.id!==void 0&&p.attachments!==void 0&&(i[p.id]=p.attachments),delete p.attachments,a.push(p)}let s=[];for(const f of n??[])s.push(await this.prepareRunCreateOrUpdateInputs(f));if(a.find(f=>f.trace_id===void 0||f.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(s.find(f=>f.trace_id===void 0||f.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(a.length>0&&s.length>0){const f=a.reduce((m,_)=>(_.id&&(m[_.id]=_),m),{}),p=[];for(const m of s)m.id!==void 0&&f[m.id]?f[m.id]={...f[m.id],...m}:p.push(m);a=Object.values(f),s=p}if(a.length===0&&s.length===0)return;const c=[],u=[];for(const[f,p]of[["post",a],["patch",s]])for(const m of p){const{inputs:_,outputs:y,events:b,extra:x,error:w,serialized:T,attachments:A,...E}=m,C={inputs:_,outputs:y,events:b,extra:x,error:w,serialized:T},R=ka(E,`Serializing for multipart ingestion of run with id: ${E.id}`);u.push({name:`${f}.${E.id}`,payload:new Blob([R],{type:`application/json; length=${R.length}`})});for(const[N,D]of Object.entries(C)){if(D===void 0)continue;const Z=ka(D,`Serializing ${N} for multipart ingestion of run with id: ${E.id}`);u.push({name:`${f}.${E.id}.${N}`,payload:new Blob([Z],{type:`application/json; length=${Z.length}`})})}if(E.id!==void 0){const N=i[E.id];if(N){delete i[E.id];for(const[D,Z]of Object.entries(N)){let j,L;if(Array.isArray(Z)?[j,L]=Z:(j=Z.mimeType,L=Z.data),D.includes(".")){console.warn(`Skipping attachment '${D}' for run ${E.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}u.push({name:`attachment.${E.id}.${D}`,payload:new Blob([L],{type:`${j}; length=${L.byteLength}`})})}}}c.push(`trace=${E.trace_id},id=${E.id}`)}await this._sendMultipartRequest(u,c.join("; "),r)}async _createNodeFetchBody(e,n){const r=[];for(const s of e)r.push(new Blob([`--${n}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${s.name}"\r
`,`Content-Type: ${s.payload.type}\r
\r
`])),r.push(s.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${n}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(e,n){const r=new TextEncoder;return new ReadableStream({async start(a){const s=async o=>{typeof o=="string"?a.enqueue(r.encode(o)):a.enqueue(o)};for(const o of e){await s(`--${n}\r
`),await s(`Content-Disposition: form-data; name="${o.name}"\r
`),await s(`Content-Type: ${o.payload.type}\r
\r
`);const c=o.payload.stream().getReader();try{let u;for(;!(u=await c.read()).done;)a.enqueue(u.value)}finally{c.releaseLock()}await s(`\r
`)}await s(`--${n}--\r
`),a.close()}})}async _sendMultipartRequest(e,n,r){const i="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),a=()=>this._createNodeFetchBody(e,i),s=()=>this._createMultipartStream(e,i),o=async l=>this.batchIngestCaller.callWithOptions({sizeBytes:r==null?void 0:r.sizeBytes},async()=>{const c=await l(),u={...this.headers,"Content-Type":`multipart/form-data; boundary=${i}`};(r==null?void 0:r.apiKey)!==void 0&&(u["x-api-key"]=r.apiKey);let f=c;r!=null&&r.useGzip&&typeof c=="object"&&"pipeThrough"in c&&(f=c.pipeThrough(new CompressionStream("gzip")),u["Content-Encoding"]="gzip");const p=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart`,{method:"POST",headers:u,body:f,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(p,"Failed to send multipart request",!0),p});try{let l,c=!1;rqe()&&!this.multipartStreamingDisabled&&iie()!=="bun"?(c=!0,l=await o(s)):l=await o(a),(!this.multipartStreamingDisabled||c)&&l.status===422&&((r==null?void 0:r.apiUrl)??this.apiUrl)!==hW&&(console.warn(`Streaming multipart upload to ${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${n}".`),this.multipartStreamingDisabled=!0,l=await o(a))}catch(l){if(cW(l))throw l;console.warn(`${l.message.trim()}

Context: ${n}`)}}async updateRun(e,n,r){Tt(e),n.inputs&&(n.inputs=await this.processInputs(n.inputs)),n.outputs&&(n.outputs=await this.processOutputs(n.outputs));const i={...n,id:e};if(!this._filterForSampling([i],!0).length)return;if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){const o=this._cloneCurrentOTELContext();if(n.end_time!==void 0&&i.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:i,otelContext:o,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:i,otelContext:o,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}const a={...this.headers,"Content-Type":"application/json"};(r==null?void 0:r.apiKey)!==void 0&&(a["x-api-key"]=r.apiKey),(r==null?void 0:r.workspaceId)!==void 0&&(a["x-tenant-id"]=r.workspaceId);const s=ka(n,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{const o=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Ye(o,"update run",!0),o})}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){Tt(e);let r=await this._get(`/runs/${e}`);return n&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let i;n.session_id?i=n.session_id:r!=null&&r.projectName?i=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?i=r==null?void 0:r.projectId:i=(await this.readProject({projectName:Mi("PROJECT")||"default"})).id;const a=await this._getTenantId();return`${this.getHostUrl()}/o/${a}/projects/p/${i}/r/${n.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var a;const n=await Q9e(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},i={};n.sort((s,o)=>((s==null?void 0:s.dotted_order)??"").localeCompare((o==null?void 0:o.dotted_order)??""));for(const s of n){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);(a=s.dotted_order)!=null&&a.startsWith(e.dotted_order??"")&&s.id!==e.id&&(s.parent_run_id in r||(r[s.parent_run_id]=[]),r[s.parent_run_id].push(s),i[s.id]=s)}e.child_runs=r[e.id]||[];for(const s in r)s!==e.id&&(i[s].child_runs=r[s]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:i,traceId:a,referenceExampleId:s,startTime:o,executionOrder:l,isRoot:c,runType:u,error:f,id:p,query:m,filter:_,traceFilter:y,treeFilter:b,limit:x,select:w,order:T}=e;let A=[];if(n&&(A=Array.isArray(n)?n:[n]),r){const N=Array.isArray(r)?r:[r],D=await Promise.all(N.map(Z=>this.readProject({projectName:Z}).then(j=>j.id)));A.push(...D)}const E=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],C={session:A.length?A:null,run_type:u,reference_example:s,query:m,filter:_,trace_filter:y,tree_filter:b,execution_order:l,parent_run:i,start_time:o?o.toISOString():null,error:f,id:p,limit:x,trace:a,select:w||E,is_root:c,order:T};C.select.includes("child_run_ids")&&xw("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let R=0;for await(const N of this._getCursorPaginatedList("/runs/query",C))if(x){if(R>=x)break;if(N.length+R>x){yield*N.slice(0,x-R);break}R+=N.length,yield*N}else yield*N}async*listGroupRuns(e){const{projectId:n,projectName:r,groupBy:i,filter:a,startTime:s,endTime:o,limit:l,offset:c}=e,f={session_id:n||(await this.readProject({projectName:r})).id,group_by:i,filter:a,start_time:s?s.toISOString():null,end_time:o?o.toISOString():null,limit:Number(l)||100};let p=Number(c)||0;const m="/runs/group",_=`${this.apiUrl}${m}`;for(;;){const y={...f,offset:p},b=Object.fromEntries(Object.entries(y).filter(([C,R])=>R!==void 0)),x=JSON.stringify(b),T=await(await this.caller.call(async()=>{const C=await this._fetch(_,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:x});return await Ye(C,`Failed to fetch ${m}`),C})).json(),{groups:A,total:E}=T;if(A.length===0)break;for(const C of A)yield C;if(p+=A.length,p>=E)break}}async getRunStats({id:e,trace:n,parentRun:r,runType:i,projectNames:a,projectIds:s,referenceExampleIds:o,startTime:l,endTime:c,error:u,query:f,filter:p,traceFilter:m,treeFilter:_,isRoot:y,dataSourceType:b}){let x=s||[];a&&(x=[...s||[],...await Promise.all(a.map(R=>this.readProject({projectName:R}).then(N=>N.id)))]);const T=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:i,session:x,reference_example:o,start_time:l,end_time:c,error:u,query:f,filter:p,trace_filter:m,tree_filter:_,is_root:y,data_source_type:b}).filter(([R,N])=>N!==void 0)),A=JSON.stringify(T);return await(await this.caller.call(async()=>{const R=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:A});return await Ye(R,"get run stats"),R})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||Ld()};Tt(e);const i=JSON.stringify(r),s=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Ye(o,"share run"),o})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){Tt(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(n,"unshare run",!0),n})}async readRunSharedLink(e){Tt(e);const r=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(i,"read run shared link"),i})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const s of n)r.append("id",s);return Tt(e),await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(s,"list shared runs"),s})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),Tt(e);const i=await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(a,"read dataset shared schema"),a})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};Tt(e);const i=JSON.stringify(r),s=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Ye(o,"share dataset"),o})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async unshareDataset(e){Tt(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(n,"unshare dataset",!0),n})}async readSharedDataset(e){return Tt(e),await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(i,"read shared dataset"),i})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const i=new URLSearchParams;Object.entries(r).forEach(([o,l])=>{Array.isArray(l)?l.forEach(c=>i.append(o,c)):i.append(o,l)});const a=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(o,"list shared examples"),o}),s=await a.json();if(!a.ok)throw"detail"in s?new Error(`Failed to list shared examples.
Status: ${a.status}
Message: ${Array.isArray(s.detail)?s.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${a.status} ${a.statusText}`);return s.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:i=!1,projectExtra:a=null,referenceDatasetId:s=null}){const o=i?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,c=a||{};r&&(c.metadata=r);const u={name:e,extra:c,description:n};s!==null&&(u.reference_dataset_id=s);const f=JSON.stringify(u);return await(await this.caller.call(async()=>{const _=await this._fetch(l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Ye(_,"create project"),_})).json()}async updateProject(e,{name:n=null,description:r=null,metadata:i=null,projectExtra:a=null,endTime:s=null}){const o=`${this.apiUrl}/sessions/${e}`;let l=a;i&&(l={...l||{},metadata:i});const c=JSON.stringify({name:n,extra:l,description:r,end_time:s?new Date(s).toISOString():null});return await(await this.caller.call(async()=>{const p=await this._fetch(o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ye(p,"update project"),p})).json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const i=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Tt(e),r+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide projectName or projectId");const a=await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}${r}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(s,"has project"),s});try{const s=await a.json();return a.ok?Array.isArray(s)?s.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let i="/sessions";const a=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Tt(e),i+=`/${e}`;else if(n!==void 0)a.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&a.append("include_stats",r.toString());const s=await this._get(i,a);let o;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);o=s[0]}else o=s;return o}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:i,referenceDatasetName:a,includeStats:s,datasetVersion:o,referenceFree:l,metadata:c}={}){const u=new URLSearchParams;if(e!==void 0)for(const f of e)u.append("id",f);if(n!==void 0&&u.append("name",n),r!==void 0&&u.append("name_contains",r),i!==void 0)u.append("reference_dataset",i);else if(a!==void 0){const f=await this.readDataset({datasetName:a});u.append("reference_dataset",f.id)}s!==void 0&&u.append("include_stats",s.toString()),o!==void 0&&u.append("dataset_version",o),l!==void 0&&u.append("reference_free",l.toString()),c!==void 0&&u.append("metadata",JSON.stringify(c));for await(const f of this._getPaginated("/sessions",u))yield*f}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,Tt(r),await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(i,`delete session ${r} (${n})`,!0),i})}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:i,description:a,dataType:s,name:o}){const l=`${this.apiUrl}/datasets/upload`,c=new FormData,u=new Blob([e],{type:"text/csv"});return c.append("file",u,n),r.forEach(m=>{c.append("input_keys",m)}),i.forEach(m=>{c.append("output_keys",m)}),a&&c.append("description",a),s&&c.append("data_type",s),o&&c.append("name",o),await(await this.caller.call(async()=>{const m=await this._fetch(l,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ye(m,"upload CSV"),m})).json()}async createDataset(e,{description:n,dataType:r,inputsSchema:i,outputsSchema:a,metadata:s}={}){const o={name:e,description:n,extra:s?{metadata:s}:void 0};r&&(o.data_type=r),i&&(o.inputs_schema_definition=i),a&&(o.outputs_schema_definition=a);const l=JSON.stringify(o);return await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ye(f,"create dataset"),f})).json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const i=new URLSearchParams({limit:"1"});if(e&&n)throw new Error("Must provide either datasetName or datasetId, not both");if(e)Tt(e),r+=`/${e}`;else if(n)i.append("name",n);else throw new Error("Must provide datasetName or datasetId");const a=await this._get(r,i);let s;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);s=a[0]}else s=a;return s}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:i}){let a=e;if(a===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(a!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");a===void 0&&(a=(await this.readDataset({datasetName:n})).id);const s=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,s)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:i,datasetNameContains:a,metadata:s}={}){const o="/datasets",l=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const c of r)l.append("id",c);i!==void 0&&l.append("name",i),a!==void 0&&l.append("name_contains",a),s!==void 0&&l.append("metadata",JSON.stringify(s));for await(const c of this._getPaginated(o,l))yield*c}async updateDataset(e){const{datasetId:n,datasetName:r,...i}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const a=n??(await this.readDataset({datasetName:r})).id;Tt(a);const s=JSON.stringify(i);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Ye(l,"update dataset"),l})).json()}async updateDatasetTag(e){const{datasetId:n,datasetName:r,asOf:i,tag:a}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const s=n??(await this.readDataset({datasetName:r})).id;Tt(s);const o=JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:a});await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${s}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Ye(l,"update dataset tags",!0),l})}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",i=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(i=(await this.readDataset({datasetName:n})).id),i!==void 0)Tt(i),r+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const a=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(a,`delete ${r}`,!0),a})}async indexDataset({datasetId:e,datasetName:n,tag:r}){let i=e;if(!i&&!n)throw new Error("Must provide either datasetName or datasetId");if(i&&n)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:n})).id),Tt(i);const s=JSON.stringify({tag:r});await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Ye(l,"index dataset"),l})).json()}async similarExamples(e,n,r,{filter:i}={}){const a={limit:r,inputs:e};i!==void 0&&(a.filter=i),Tt(n);const s=JSON.stringify(a);return(await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${n}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:s});return await Ye(c,"fetch similar examples"),c})).json()).examples}async createExample(e,n,r){var u;if(pW(e)&&(n!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=n?r==null?void 0:r.datasetId:e.dataset_id;const a=n?r==null?void 0:r.datasetName:e.dataset_name;if(i===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:a})).id);const s=(n?r==null?void 0:r.createdAt:e.created_at)||new Date;let o;pW(e)?o=e:o={inputs:e,outputs:n,created_at:s==null?void 0:s.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const l=await this._uploadExamplesMultipart(i,[o]);return await this.readExample(((u=l.example_ids)==null?void 0:u[0])??Ld())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const w=e;let T=w[0].dataset_id;const A=w[0].dataset_name;if(T===void 0&&A===void 0)throw new Error("Must provide either datasetName or datasetId");if(T!==void 0&&A!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");T===void 0&&(T=(await this.readDataset({datasetName:A})).id);const E=await this._uploadExamplesMultipart(T,w);return await Promise.all(E.example_ids.map(R=>this.readExample(R)))}const{inputs:n,outputs:r,metadata:i,splits:a,sourceRunIds:s,useSourceRunIOs:o,useSourceRunAttachments:l,attachments:c,exampleIds:u,datasetId:f,datasetName:p}=e;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let m=f;const _=p;if(m===void 0&&_===void 0)throw new Error("Must provide either datasetName or datasetId");if(m!==void 0&&_!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");m===void 0&&(m=(await this.readDataset({datasetName:_})).id);const y=n.map((w,T)=>({dataset_id:m,inputs:w,outputs:r==null?void 0:r[T],metadata:i==null?void 0:i[T],split:a==null?void 0:a[T],id:u==null?void 0:u[T],attachments:c==null?void 0:c[T],source_run_id:s==null?void 0:s[T],use_source_run_io:o==null?void 0:o[T],use_source_run_attachments:l==null?void 0:l[T]})),b=await this._uploadExamplesMultipart(m,y);return await Promise.all(b.example_ids.map(w=>this.readExample(w)))}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const i=e.map(s=>gH(s)?yH(s):s),a=gH(n)?yH(n):n;return this.createExample({input:i},{output:a},r)}async readExample(e){Tt(e);const n=`/examples/${e}`,r=await this._get(n),{attachment_urls:i,...a}=r,s=a;return i&&(s.attachments=Object.entries(i).reduce((o,[l,c])=>(o[l.slice(11)]={presigned_url:c.presigned_url,mime_type:c.mime_type},o),{})),s}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:i,splits:a,inlineS3Urls:s,metadata:o,limit:l,offset:c,filter:u,includeAttachments:f}={}){let p;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)p=e;else if(n!==void 0)p=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const m=new URLSearchParams({dataset:p}),_=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;_&&m.append("as_of",_);const y=s??!0;if(m.append("inline_s3_urls",y.toString()),r!==void 0)for(const x of r)m.append("id",x);if(a!==void 0)for(const x of a)m.append("splits",x);if(o!==void 0){const x=JSON.stringify(o);m.append("metadata",x)}l!==void 0&&m.append("limit",l.toString()),c!==void 0&&m.append("offset",c.toString()),u!==void 0&&m.append("filter",u),f===!0&&["attachment_urls","outputs","metadata"].forEach(x=>m.append("select",x));let b=0;for await(const x of this._getPaginated("/examples",m)){for(const w of x){const{attachment_urls:T,...A}=w,E=A;T&&(E.attachments=Object.entries(T).reduce((C,[R,N])=>(C[R.slice(11)]={presigned_url:N.presigned_url,mime_type:N.mime_type||void 0},C),{})),yield E,b++}if(l!==void 0&&b>=l)break}}async deleteExample(e){Tt(e);const n=`/examples/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(r,`delete ${n}`,!0),r})}async deleteExamples(e,n){if(e.forEach(r=>Tt(r)),n!=null&&n.hardDelete){const r=this._getPlatformEndpointPath("datasets/examples/delete");await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}${r}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({example_ids:e,hard_delete:!0}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(i,"hard delete examples",!0),i})}else{const r=new URLSearchParams;e.forEach(i=>r.append("example_ids",i)),await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/examples?${r.toString()}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(i,"delete examples",!0),i})}}async updateExample(e,n){let r;n?r=e:r=e.id,Tt(r);let i;n?i={id:r,...n}:i=e;let a;return i.dataset_id!==void 0?a=i.dataset_id:a=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(a,[i])}async updateExamples(e){let n;return e[0].dataset_id===void 0?n=(await this.readExample(e[0].id)).dataset_id:n=e[0].dataset_id,this._updateExamplesMultipart(n,e)}async readDatasetVersion({datasetId:e,datasetName:n,asOf:r,tag:i}){let a;if(e?a=e:a=(await this.readDataset({datasetName:n})).id,Tt(a),r&&i||!r&&!i)throw new Error("Exactly one of asOf and tag must be specified.");const s=new URLSearchParams;return r!==void 0&&s.append("as_of",typeof r=="string"?r:r.toISOString()),i!==void 0&&s.append("tag",i),await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}/version?${s.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(l,"read dataset version"),l})).json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let i;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:n})).id:i=e,Tt(i);const a=new URLSearchParams,s=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return s&&a.append("as_of",s),await this._get(`/datasets/${i}/splits`,a)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:i,remove:a=!1}){let s;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?s=(await this.readDataset({datasetName:n})).id:s=e,Tt(s);const o={split_name:r,examples:i.map(c=>(Tt(c),c)),remove:a},l=JSON.stringify(o);await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${s}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ye(c,"update dataset splits",!0),c})}async createFeedback(e,n,{score:r,value:i,correction:a,comment:s,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:c,feedbackId:u,feedbackConfig:f,projectId:p,comparativeExperimentId:m,sessionId:_,startTime:y}){var A;if(!e&&!p)throw new Error("One of runId or projectId must be provided");if(e&&p)throw new Error("Only one of runId or projectId can be provided");const b={type:l??"api",metadata:o??{}};c!==void 0&&(b==null?void 0:b.metadata)!==void 0&&!b.metadata.__run&&(b.metadata.__run={run_id:c}),(b==null?void 0:b.metadata)!==void 0&&((A=b.metadata.__run)==null?void 0:A.run_id)!==void 0&&Tt(b.metadata.__run.run_id);const x={id:u??Ld(),run_id:e,key:n,score:fW(r),value:i,correction:a,comment:s,feedback_source:b,comparative_experiment_id:m,feedbackConfig:f,session_id:_??p,start_time:y},w=JSON.stringify(x),T=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const E=await this._fetch(T,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:w});return await Ye(E,"create feedback",!0),E}),x}async updateFeedback(e,{score:n,value:r,correction:i,comment:a}){const s={};n!=null&&(s.score=fW(n)),r!=null&&(s.value=r),i!=null&&(s.correction=i),a!=null&&(s.comment=a),Tt(e);const o=JSON.stringify(s);await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Ye(l,"update feedback",!0),l})}async readFeedback(e){Tt(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){Tt(e);const n=`/feedback/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(r,`delete ${n}`,!0),r})}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const i=new URLSearchParams;if(e)for(const a of e)Tt(a),i.append("run",a);if(n)for(const a of n)i.append("key",a);if(r)for(const a of r)i.append("source",a);for await(const a of this._getPaginated("/feedback",i))yield*a}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:i}={}){const a={run_id:e,feedback_key:n,feedback_config:i};r?typeof r=="string"?a.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(a.expires_in=r):a.expires_in={hours:3};const s=JSON.stringify(a);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Ye(l,"create presigned feedback token"),l})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:i,description:a,metadata:s,id:o}){var f;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const l={id:o,name:e,experiment_ids:n,reference_dataset_id:r,description:a,created_at:(f=i??new Date)==null?void 0:f.toISOString(),extra:{}};s&&(l.extra.metadata=s);const c=JSON.stringify(l);return(await this.caller.call(async()=>{const p=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ye(p,"create comparative experiment"),p})).json()}async*listPresignedFeedbackTokens(e){Tt(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:Array.isArray(e)?n=e:n=[e],n}async _logEvaluationFeedback(e,n,r){const i=this._selectEvalResults(e),a=[];for(const s of i){let o=r||{};s.evaluatorInfo&&(o={...s.evaluatorInfo,...o});let l=null;s.targetRunId?l=s.targetRunId:n&&(l=n.id),a.push(await this.createFeedback(l,s.key,{score:s.score,value:s.value,comment:s.comment,correction:s.correction,sourceInfo:o,sourceRunId:s.sourceRunId,feedbackConfig:s.feedbackConfig,feedbackSourceType:"model",sessionId:n==null?void 0:n.session_id,startTime:n==null?void 0:n.start_time}))}return[i,a]}async logEvaluationFeedback(e,n,r){const[i]=await this._logEvaluationFeedback(e,n,r);return i}async createFeedbackConfig(e){const{feedbackKey:n,feedbackConfig:r,isLowerScoreBetter:i=!1}=e,a={feedback_key:n,feedback_config:r,is_lower_score_better:i};return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/feedback-configs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)});return await Ye(o,"create feedback config"),o})).json()}async*listFeedbackConfigs(e={}){const{feedbackKeys:n,nameContains:r,limit:i}=e,a=new URLSearchParams;n&&n.forEach(o=>{a.append("key",o)}),r&&a.append("name_contains",r),a.append("limit",(i!==void 0?Math.min(i,100):100).toString());let s=0;for await(const o of this._getPaginated("/feedback-configs",a))if(yield*o,s+=o.length,i!==void 0&&s>=i)break}async updateFeedbackConfig(e,n={}){const{feedbackConfig:r,isLowerScoreBetter:i}=n,a={feedback_key:e};return r!==void 0&&(a.feedback_config=r),i!==void 0&&(a.is_lower_score_better=i),(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/feedback-configs`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)});return await Ye(o,"update feedback config"),o})).json()}async deleteFeedbackConfig(e){const n=new URLSearchParams({feedback_key:e});await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/feedback-configs?${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(r,"delete feedback config",!0),r})}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:i,limit:a}=e,s=new URLSearchParams;n&&n.forEach((l,c)=>{Tt(l,`queueIds[${c}]`),s.append("ids",l)}),r&&s.append("name",r),i&&s.append("name_contains",i),s.append("limit",(a!==void 0?Math.min(a,100):100).toString());let o=0;for await(const l of this._getPaginated("/annotation-queues",s))if(yield*l,o++,a!==void 0&&o>=a)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:i,rubricInstructions:a,rubricItems:s}=e,o={name:n,description:r,id:i||Ld(),rubric_instructions:a,rubric_items:s},l=JSON.stringify(Object.fromEntries(Object.entries(o).filter(([u,f])=>f!==void 0)));return(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ye(u,"create annotation queue"),u})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${Tt(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(r,"read annotation queue"),r})).json()}async updateAnnotationQueue(e,n){const{name:r,description:i,rubricInstructions:a,rubricItems:s}=n,o={};r!==void 0&&(o.name=r),i!==void 0&&(o.description=i),a!==void 0&&(o.rubric_instructions=a),s!==void 0&&(o.rubric_items=s);const l=JSON.stringify(o);await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/annotation-queues/${Tt(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ye(c,"update annotation queue",!0),c})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${Tt(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(n,"delete annotation queue",!0),n})}async addRunsToAnnotationQueue(e,n){const r=JSON.stringify(n.map((i,a)=>Tt(i,`runIds[${a}]`).toString()));await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/annotation-queues/${Tt(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Ye(i,"add runs to annotation queue",!0),i})}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${Tt(e,"queueId")}/run`;return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(a,"get run from annotation queue"),a})).json()}async deleteRunFromAnnotationQueue(e,n){await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${Tt(e,"queueId")}/runs/${Tt(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(r,"delete run from annotation queue",!0),r})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${Tt(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(r,"get size from annotation queue"),r})).json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const r=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(i,"get latest commit hash"),i})).json();if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,i,a]=cu(e),s=JSON.stringify({like:n});return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/likes/${r}/${i}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Ye(l,`${n?"like":"unlike"} prompt`),l})).json()}async _getPromptUrl(e){const[n,r,i]=cu(e);if(await this._currentTenantIsOwner(n)){const a=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${r}/${i.substring(0,8)}?organizationId=${a.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${a.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const r of this._getPaginated("/repos",n,i=>i.repos))yield*r}async getPrompt(e){const[n,r,i]=cu(e),a=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(o==null?void 0:o.status)===404?null:(await Ye(o,"get prompt"),o)}),s=await(a==null?void 0:a.json());return s!=null&&s.repo?s.repo:null}async createPrompt(e,n){const r=await this._getSettings();if(n!=null&&n.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[i,a,s]=cu(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);const o={repo_handle:a,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},l=JSON.stringify(o),c=await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Ye(f,"create prompt"),f}),{repo:u}=await c.json();return u}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[i,a,s]=cu(e),o=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${i}/${a}`):r==null?void 0:r.parentCommitHash,l={manifest:JSON.parse(JSON.stringify(n)),parent_commit:o},c=JSON.stringify(l),f=await(await this.caller.call(async()=>{const p=await this._fetch(`${this.apiUrl}/commits/${i}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Ye(p,"create commit"),p})).json();return this._getPromptUrl(`${i}/${a}${f.commit_hash?`:${f.commit_hash}`:""}`)}async updateExamplesMultipart(e,n=[]){return this._updateExamplesMultipart(e,n)}async _updateExamplesMultipart(e,n=[]){var s;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const o of n){const l=o.id,c={...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split}},u=ka(c,`Serializing body for example with id: ${l}`),f=new Blob([u],{type:"application/json"});if(r.append(l,f),o.inputs){const p=ka(o.inputs,`Serializing inputs for example with id: ${l}`),m=new Blob([p],{type:"application/json"});r.append(`${l}.inputs`,m)}if(o.outputs){const p=ka(o.outputs,`Serializing outputs whle updating example with id: ${l}`),m=new Blob([p],{type:"application/json"});r.append(`${l}.outputs`,m)}if(o.attachments)for(const[p,m]of Object.entries(o.attachments)){let _,y;Array.isArray(m)?[_,y]=m:(_=m.mimeType,y=m.data);const b=new Blob([y],{type:`${_}; length=${y.byteLength}`});r.append(`${l}.attachment.${p}`,b)}if(o.attachments_operations){const p=ka(o.attachments_operations,`Serializing attachments while updating example with id: ${l}`),m=new Blob([p],{type:"application/json"});r.append(`${l}.attachments_operations`,m)}}const i=e??((s=n[0])==null?void 0:s.dataset_id);return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${i}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Ye(o,"update examples"),o})).json()}async uploadExamplesMultipart(e,n=[]){return this._uploadExamplesMultipart(e,n)}async _uploadExamplesMultipart(e,n=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const a of n){const s=(a.id??Ld()).toString(),o={created_at:a.created_at,...a.metadata&&{metadata:a.metadata},...a.split&&{split:a.split},...a.source_run_id&&{source_run_id:a.source_run_id},...a.use_source_run_io&&{use_source_run_io:a.use_source_run_io},...a.use_source_run_attachments&&{use_source_run_attachments:a.use_source_run_attachments}},l=ka(o,`Serializing body for uploaded example with id: ${s}`),c=new Blob([l],{type:"application/json"});if(r.append(s,c),a.inputs){const u=ka(a.inputs,`Serializing inputs for uploaded example with id: ${s}`),f=new Blob([u],{type:"application/json"});r.append(`${s}.inputs`,f)}if(a.outputs){const u=ka(a.outputs,`Serializing outputs for uploaded example with id: ${s}`),f=new Blob([u],{type:"application/json"});r.append(`${s}.outputs`,f)}if(a.attachments)for(const[u,f]of Object.entries(a.attachments)){let p,m;Array.isArray(f)?[p,m]=f:(p=f.mimeType,m=f.data);const _=new Blob([m],{type:`${p}; length=${m.byteLength}`});r.append(`${s}.attachment.${u}`,_)}}return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await Ye(a,"upload examples"),a})).json()}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,i]=cu(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const a={};if((n==null?void 0:n.description)!==void 0&&(a.description=n.description),(n==null?void 0:n.readme)!==void 0&&(a.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(a.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(a.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(a.is_archived=n.isArchived),Object.keys(a).length===0)throw new Error("No valid update options provided");const s=JSON.stringify(a);return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/repos/${r}/${i}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Ye(l,"update prompt"),l})).json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,i]=cu(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(s,"delete prompt"),s})).json()}_getPromptCacheKey(e,n){return`${e}${n?":with_model":""}`}async _fetchPromptFromApi(e,n){const[r,i,a]=cu(e),o=await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/commits/${r}/${i}/${a}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ye(l,"pull prompt commit"),l})).json();return{owner:r,repo:i,commit_hash:o.commit_hash,manifest:o.manifest,examples:o.examples}}async pullPromptCommit(e,n){const r=this._fetchPromptFromApi.bind(this,e,n);if(!(n!=null&&n.skipCache)&&this._promptCache){const i=this._getPromptCacheKey(e,n==null?void 0:n.includeModel),a=this._promptCache.get(i,r);if(a)return a;const s=await r();return this._promptCache.set(i,s,r),s}return this._fetchPromptFromApi(e,n)}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel,skipCache:n==null?void 0:n.skipCache});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(i=>i!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:i}=n,[a,s]=this.parseTokenOrUrl(e,r),o=new Fv({apiUrl:a,apiKey:"placeholder"}),l=await o.readSharedDataset(s),c=i||l.name;try{if(await this.hasDataset({datasetId:c})){console.log(`Dataset ${c} already exists in your tenant. Skipping.`);return}}catch{}const u=await o.listSharedExamples(s),f=await this.createDataset(c,{description:l.description,dataType:l.data_type||"kv",inputsSchema:l.inputs_schema_definition??void 0,outputsSchema:l.outputs_schema_definition??void 0});try{await this.createExamples({inputs:u.map(p=>p.inputs),outputs:u.flatMap(p=>p.outputs?[p.outputs]:[]),datasetId:f.id})}catch(p){throw console.error(`An error occurred while creating dataset ${c}. You should delete it manually.`),p}}parseTokenOrUrl(e,n,r=2,i="dataset"){try{return Tt(e),[n,e]}catch{}try{const s=new URL(e).pathname.split("/").filter(o=>o!=="");if(s.length>=r){const o=s[s.length-r];return[n,o]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${e}`)}}cleanup(){this._promptCache&&this._promptCache.stop()}async awaitPendingTraceBatches(){var e,n;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await new Promise(r=>setTimeout(r,1)),await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:r})=>r),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((n=(e=Zqe())==null?void 0:e.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:n.forceFlush())}}function pW(t){return"dataset_id"in t||"dataset_name"in t}const a7e=t=>!!["TRACING_V2","TRACING"].find(n=>Mi(n)==="true"),Nu=Symbol.for("lc:context_variables"),aP=Symbol.for("langsmith:replica_trace_roots");function mW(t,e){if(Nu in t)return t[Nu][e]}function s7e(t,e,n){const r=Nu in t?t[Nu]:{};r[e]=n,t[Nu]=r}const o7e="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function gW(t){const n=Object.keys(t).sort().map(r=>`${r}:${t[r]??""}`).join("|");return T8e(n,o7e)}function l7e(t){return t.replace(/[-:.]/g,"")}function gie(t,e=1){const n=e.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(t).toISOString().slice(0,-1)}${n}Z`}function yie(t,e,n=1){const r=gie(t,n);return{dottedOrder:l7e(r)+e,microsecondPrecisionDatestring:r}}const c7e=new Set(["projectName","updates","reroot"]);function u7e(t){const e={};for(const n of Object.keys(t))c7e.has(n)&&(e[n]=t[n]);return e}class u1{constructor(e,n,r,i){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n,this.project_name=r,this.replicas=i}static fromHeader(e){const n=e.split(",");let r={},i=[],a,s;for(const o of n){const[l,c]=o.split("="),u=decodeURIComponent(c);l==="langsmith-metadata"?r=JSON.parse(u):l==="langsmith-tags"?i=u.split(","):l==="langsmith-project"?a=u:l==="langsmith-replicas"&&(s=JSON.parse(u).map(p=>Array.isArray(p)?p:u7e(p)))}return new u1(r,i,a,s)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class oa{constructor(e){var o;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distributedParentId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_awaitInputsOnPost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),d7e(e)){Object.assign(this,{...e});return}const n=oa.getDefaultConfig(),{metadata:r,...i}=e,a=i.client??oa.getSharedClient(),s={...r,...(o=i==null?void 0:i.extra)==null?void 0:o.metadata};if(i.extra={...i.extra,metadata:s},"id"in i&&i.id==null&&delete i.id,Object.assign(this,{...n,...i,client:a}),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),this.dotted_order||(this._serialized_start_time=gie(this.start_time,this.execution_order)),this.id||(this.id=Aqe(this._serialized_start_time??this.start_time)),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=m7e(this.replicas),!this.dotted_order){const{dottedOrder:l}=yie(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+l:this.dotted_order=l}}set metadata(e){var n;this.extra={...this.extra,metadata:{...(n=this.extra)==null?void 0:n.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){const e=Date.now();return{run_type:"chain",project_name:Kre(),child_runs:[],api_url:El("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:El("LANGCHAIN_API_KEY"),caller_options:{},start_time:e,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return oa.sharedClient||(oa.sharedClient=new Fv),oa.sharedClient}createChild(e){var u,f,p,m,_,y,b;const n=this.child_execution_order+1,r=(u=this.replicas)==null?void 0:u.map(x=>{const{reroot:w,...T}=x;return T}),i=e.replicas??r,a=new oa({...e,parent_run:this,project_name:this.project_name,replicas:i,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});Nu in this&&(a[Nu]=this[Nu]);const s=Symbol.for("lc:child_config"),o=((f=e.extra)==null?void 0:f[s])??this.extra[s];if(h7e(o)){const x={...o},w=f7e(x.callbacks)?(m=(p=x.callbacks).copy)==null?void 0:m.call(p):void 0;w&&(Object.assign(w,{_parentRunId:a.id}),(b=(y=(_=w.handlers)==null?void 0:_.find(vie))==null?void 0:y.updateFromRunTree)==null||b.call(y,a),x.callbacks=w),a.extra[s]=x}const l=new Set;let c=this;for(;c!=null&&!l.has(c.id);)l.add(c.id),c.child_execution_order=Math.max(c.child_execution_order,n),c=c.parent_run;return this.child_runs.push(a),a}async end(e,n,r=Date.now(),i){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??r,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,n,r=!0){var o,l;const i=e.extra??{};if(((o=i==null?void 0:i.runtime)==null?void 0:o.library)===void 0&&(i.runtime||(i.runtime={}),n))for(const[c,u]of Object.entries(n))i.runtime[c]||(i.runtime[c]=u);let a,s;return r?(s=((l=e.parent_run)==null?void 0:l.id)??e.parent_run_id,a=[]):(a=e.child_runs.map(c=>this._convertToCreate(c,n,r)),s=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:a,parent_run_id:s,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_sliceParentId(e,n){if(n.dotted_order){const r=n.dotted_order.split(".");let i=null;for(let a=0;a<r.length;a++)if(r[a].slice(-36)===e){i=a;break}if(i!==null){const a=r.slice(i+1);n.dotted_order=a.join("."),a.length>0?n.trace_id=a[0].slice(-36):n.trace_id=n.id}}n.parent_run_id===e&&(n.parent_run_id=void 0)}_setReplicaTraceRoot(e,n){const r=mW(this,aP)??{};r[e]=n,s7e(this,aP,r);for(const i of this.child_runs)i._setReplicaTraceRoot(e,n)}_remapForProject(e){const{projectName:n,runtimeEnv:r,excludeChildRuns:i=!0,reroot:a=!1,distributedParentId:s,apiUrl:o,apiKey:l,workspaceId:c}=e,u=this._convertToCreate(this,r,i);if(n===this.project_name)return{...u,session_name:n};if(a){if(s)this._sliceParentId(s,u);else if(u.parent_run_id=void 0,u.dotted_order){const w=u.dotted_order.split(".");w.length>0&&(u.dotted_order=w[w.length-1],u.trace_id=u.id)}const x=gW({projectName:n,apiUrl:o,apiKey:l,workspaceId:c});this._setReplicaTraceRoot(x,u.id)}let f;if(!a){const x=mW(this,aP)??{},w=gW({projectName:n,apiUrl:o,apiKey:l,workspaceId:c});if(f=x[w],f&&(u.trace_id=f,u.dotted_order)){const T=u.dotted_order.split(".");let A=null;for(let E=0;E<T.length;E++)if(T[E].slice(-36)===f){A=E;break}if(A!==null){const E=T.slice(A);u.dotted_order=E.join(".")}}}const p=u.id,m=E_(p,n);let _;u.trace_id?_=E_(u.trace_id,n):_=m;let y;u.parent_run_id&&(y=E_(u.parent_run_id,n));let b;return u.dotted_order&&(b=u.dotted_order.split(".").map(T=>{const A=T.slice(-36),E=E_(A,n);return T.slice(0,-36)+E}).join(".")),{...u,id:m,trace_id:_,parent_run_id:y,dotted_order:b,session_name:n}}async postRun(e=!0){this._awaitInputsOnPost&&(this.inputs=await this.inputs);try{const n=aie();if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:i,apiUrl:a,workspaceId:s,reroot:o}of this.replicas){const l=this._remapForProject({projectName:r??this.project_name,runtimeEnv:n,excludeChildRuns:!0,reroot:o,distributedParentId:this.distributedParentId,apiUrl:a,apiKey:i,workspaceId:s});await this.client.createRun(l,{apiKey:i,apiUrl:a,workspaceId:s})}else{const r=this._convertToCreate(this,n,e);await this.client.createRun(r)}if(!e){xw("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const r of this.child_runs)await r.postRun(!1)}this.child_runs=[]}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(e){var n;if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:i,apiUrl:a,workspaceId:s,updates:o,reroot:l}of this.replicas){const c=this._remapForProject({projectName:r??this.project_name,runtimeEnv:void 0,excludeChildRuns:!0,reroot:l,distributedParentId:this.distributedParentId,apiUrl:a,apiKey:i,workspaceId:s}),u={id:c.id,name:c.name,run_type:c.run_type,start_time:c.start_time,outputs:c.outputs,error:c.error,parent_run_id:c.parent_run_id,session_name:c.session_name,reference_example_id:c.reference_example_id,end_time:c.end_time,dotted_order:c.dotted_order,trace_id:c.trace_id,events:c.events,tags:c.tags,extra:c.extra,attachments:this.attachments,...o};e!=null&&e.excludeInputs||(u.inputs=c.inputs),await this.client.updateRun(c.id,u,{apiKey:i,apiUrl:a,workspaceId:s})}else try{const r={name:this.name,run_type:this.run_type,start_time:this._serialized_start_time??this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:((n=this.parent_run)==null?void 0:n.id)??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e!=null&&e.excludeInputs||(r.inputs=this.inputs),await this.client.updateRun(this.id,r)}catch(r){console.error(`Error in patchRun for run ${this.id}`,r)}this.child_runs=[]}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,n){var c,u,f,p;const r=e==null?void 0:e.callbacks;let i,a,s,o=a7e();if(r){const m=((c=r==null?void 0:r.getParentRunId)==null?void 0:c.call(r))??"",_=(u=r==null?void 0:r.handlers)==null?void 0:u.find(y=>(y==null?void 0:y.name)=="langchain_tracer");i=(f=_==null?void 0:_.getRun)==null?void 0:f.call(_,m),a=_==null?void 0:_.projectName,s=_==null?void 0:_.client,o=o||!!_}return i?new oa({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:s,tracingEnabled:o,project_name:a,tags:[...new Set(((i==null?void 0:i.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(p=i==null?void 0:i.extra)==null?void 0:p.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new oa({...n,client:s,tracingEnabled:o,project_name:a})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var u;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=r["langsmith-trace"];if(!i||typeof i!="string")return;const a=i.trim(),s=a.split(".").map(f=>{const[p,m]=f.split("Z");return{strTime:p,time:Date.parse(p+"Z"),uuid:m}}),o=s[0].uuid,l={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(u=s.at(-1))==null?void 0:u.uuid,trace_id:o,dotted_order:a};if(r.baggage&&typeof r.baggage=="string"){const f=u1.fromHeader(r.baggage);l.metadata=f.metadata,l.tags=f.tags,l.project_name=f.project_name,l.replicas=f.replicas}const c=new oa(l);return c.distributedParentId=c.id,c}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new u1((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[i,a]of Object.entries(n))e.set(i,a);return n}}Object.defineProperty(oa,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function d7e(t){return t!=null&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function vie(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function yW(t){return Array.isArray(t)&&t.some(e=>vie(e))}function f7e(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function h7e(t){const e=t==null?void 0:t.callbacks;return t!=null&&typeof e=="object"&&(yW(e==null?void 0:e.handlers)||yW(e))}function p7e(){const t=El("LANGSMITH_RUNS_ENDPOINTS");if(!t)return[];try{const e=JSON.parse(t);if(Array.isArray(e)){const n=[];for(const r of e){if(typeof r!="object"||r===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof r}`);continue}if(typeof r.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_url}`);continue}if(typeof r.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_key}`);continue}n.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key})}return n}else if(typeof e=="object"&&e!==null){g7e(e);const n=[];for(const[r,i]of Object.entries(e)){const a=r.replace(/\/$/,"");if(typeof i=="string")n.push({apiUrl:a,apiKey:i});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof i}`);continue}}return n}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof e}`),[]}catch(e){if(W9e(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function m7e(t){return t?t.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):p7e()}function g7e(t){if(Object.keys(t).length>0&&Mi("ENDPOINT"))throw new H9e}const y7e=t=>{if(t)return t.events=t.events??[],t.child_runs=t.child_runs??[],t};function u2(t,e){if(t)return new oa({...t,start_time:t._serialized_start_time??t.start_time,parent_run:u2(e),child_runs:t.child_runs.map(n=>u2(n)).filter(n=>n!==void 0),extra:{...t.extra,runtime:h8e()},tracingEnabled:!1})}function sP(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function Ag(t){return typeof t._addRunToRunMap=="function"}var kb=class extends fT{constructor(e){super(...arguments);U(this,"runMap",new Map);U(this,"runTreeMap",new Map);U(this,"usesRunTreeMap",!1)}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?y7e(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const{dottedOrder:n,microsecondPrecisionDatestring:r}=yie(new Date(e.start_time).getTime(),e.id,e.execution_order),i={...e},a=this.getRunById(i.parent_run_id);if(i.parent_run_id!==void 0?a?(this._addChildRun(a,i),a.child_execution_order=Math.max(a.child_execution_order,i.child_execution_order),i.trace_id=a.trace_id,a.dotted_order!==void 0&&(i.dotted_order=[a.dotted_order,n].join("."),i._serialized_start_time=r)):i.parent_run_id=void 0:(i.trace_id=i.id,i.dotted_order=n,i._serialized_start_time=r),this.usesRunTreeMap){const s=u2(i,a);s!==void 0&&this.runTreeMap.set(i.id,s)}else this.runMap.set(i.id,i);return i}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),await((r=this.onRunUpdate)==null?void 0:r.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const n=e!==void 0&&this.getRunById(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,i,a,s,o,l){const c=this._getExecutionOrder(i),u=Date.now(),f=o?{...a,metadata:o}:a,p={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:f??{},tags:s||[]};return this._addRunToRunMap(p)}async handleLLMStart(e,n,r,i,a,s,o,l){var u,f;const c=this.getRunById(r)??this._createRunForLLMStart(e,n,r,i,a,s,o,l);return await((u=this.onRunCreate)==null?void 0:u.call(this,c)),await((f=this.onLLMStart)==null?void 0:f.call(this,c)),c}_createRunForChatModelStart(e,n,r,i,a,s,o,l){const c=this._getExecutionOrder(i),u=Date.now(),f=o?{...a,metadata:o}:a,p={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:f??{},tags:s||[]};return this._addRunToRunMap(p)}async handleChatModelStart(e,n,r,i,a,s,o,l){var u,f;const c=this.getRunById(r)??this._createRunForChatModelStart(e,n,r,i,a,s,o,l);return await((u=this.onRunCreate)==null?void 0:u.call(this,c)),await((f=this.onLLMStart)==null?void 0:f.call(this,c)),c}async handleLLMEnd(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s||(s==null?void 0:s.run_type)!=="llm")throw new Error("No LLM run to end.");return s.end_time=Date.now(),s.outputs=e,s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),s.extra={...s.extra,...a},await((o=this.onLLMEnd)==null?void 0:o.call(this,s)),await this._endTrace(s),s}async handleLLMError(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s||(s==null?void 0:s.run_type)!=="llm")throw new Error("No LLM run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),s.extra={...s.extra,...a},await((o=this.onLLMError)==null?void 0:o.call(this,s)),await this._endTrace(s),s}_createRunForChainStart(e,n,r,i,a,s,o,l,c){const u=this._getExecutionOrder(i),f=Date.now(),p={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:n,execution_order:u,child_execution_order:u,run_type:o??"chain",child_runs:[],extra:s?{...c,metadata:s}:{...c},tags:a||[]};return this._addRunToRunMap(p)}async handleChainStart(e,n,r,i,a,s,o,l){var u,f;const c=this.getRunById(r)??this._createRunForChainStart(e,n,r,i,a,s,o,l);return await((u=this.onRunCreate)==null?void 0:u.call(this,c)),await((f=this.onChainStart)==null?void 0:f.call(this,c)),c}async handleChainEnd(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.outputs=sP(e,"output"),s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(s.inputs=sP(a.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,s)),await this._endTrace(s),s}async handleChainError(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(s.inputs=sP(a.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,s)),await this._endTrace(s),s}_createRunForToolStart(e,n,r,i,a,s,o){const l=this._getExecutionOrder(i),c=Date.now(),u={id:r,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{input:n},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(u)}async handleToolStart(e,n,r,i,a,s,o){var c,u;const l=this.getRunById(r)??this._createRunForToolStart(e,n,r,i,a,s,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((u=this.onToolStart)==null?void 0:u.call(this,l)),l}async handleToolEnd(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var a;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const i=r;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((a=this.onAgentAction)==null?void 0:a.call(this,r))}async handleAgentEnd(e,n){var i;const r=this.getRunById(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,r)))}_createRunForRetrieverStart(e,n,r,i,a,s,o){const l=this._getExecutionOrder(i),c=Date.now(),u={id:r,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{query:n},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(u)}async handleRetrieverStart(e,n,r,i,a,s,o){var c,u;const l=this.getRunById(r)??this._createRunForRetrieverStart(e,n,r,i,a,s,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((u=this.onRetrieverStart)==null?void 0:u.call(this,l)),l}async handleRetrieverEnd(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var i;const r=this.getRunById(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,r)))}async handleLLMNewToken(e,n,r,i,a,s){var l;const o=this.getRunById(r);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:s==null?void 0:s.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,e,{chunk:s==null?void 0:s.chunk})),o}};const oP=10,vW=(t=0)=>e=>`\x1B[${e+t}m`,bW=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,_W=(t=0)=>(e,n,r)=>`\x1B[${38+t};2;${e};${n};${r}m`,Hn={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(Hn.modifier);const v7e=Object.keys(Hn.color),b7e=Object.keys(Hn.bgColor);[...v7e,...b7e];function _7e(){const t=new Map;for(const[e,n]of Object.entries(Hn)){for(const[r,i]of Object.entries(n))Hn[r]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},n[r]=Hn[r],t.set(i[0],i[1]);Object.defineProperty(Hn,e,{value:n,enumerable:!1})}return Object.defineProperty(Hn,"codes",{value:t,enumerable:!1}),Hn.color.close="\x1B[39m",Hn.bgColor.close="\x1B[49m",Hn.color.ansi=vW(),Hn.color.ansi256=bW(),Hn.color.ansi16m=_W(),Hn.bgColor.ansi=vW(oP),Hn.bgColor.ansi256=bW(oP),Hn.bgColor.ansi16m=_W(oP),Object.defineProperties(Hn,{rgbToAnsi256:{value(e,n,r){return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},enumerable:!1},hexToRgb:{value(e){const n=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!n)return[0,0,0];let[r]=n;r.length===3&&(r=[...r].map(a=>a+a).join(""));const i=Number.parseInt(r,16);return[i>>16&255,i>>8&255,i&255]},enumerable:!1},hexToAnsi256:{value:e=>Hn.rgbToAnsi256(...Hn.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let n,r,i;if(e>=232)n=((e-232)*10+8)/255,r=n,i=n;else{e-=16;const o=e%36;n=Math.floor(e/36)/5,r=Math.floor(o/6)/5,i=o%6/5}const a=Math.max(n,r,i)*2;if(a===0)return 30;let s=30+(Math.round(i)<<2|Math.round(r)<<1|Math.round(n));return a===2&&(s+=60),s},enumerable:!1},rgbToAnsi:{value:(e,n,r)=>Hn.ansi256ToAnsi(Hn.rgbToAnsi256(e,n,r)),enumerable:!1},hexToAnsi:{value:e=>Hn.ansi256ToAnsi(Hn.hexToAnsi256(e)),enumerable:!1}}),Hn}const bie=_7e();function Ii(t,e){return`${t.open}${e}${t.close}`}function ws(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function wW(t){return typeof t=="string"?t.trim():t==null?t:ws(t,t.toString())}function uu(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:aa}=bie;var xW=class extends kb{constructor(){super(...arguments);U(this,"name","console_callback_handler")}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const i=this.runMap.get(r.parent_run_id);if(i)n.push(i),r=i;else break}return n}getBreadcrumbs(e){const n=[...this.getParents(e).reverse(),e].map((r,i,a)=>{const s=`${r.execution_order}:${r.run_type}:${r.name}`;return i===a.length-1?Ii(bie.bold,s):s}).join(" > ");return Ii(aa.grey,n)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ii(aa.green,"[chain/start]")} [${n}] Entering Chain run with input: ${ws(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ii(aa.cyan,"[chain/end]")} [${n}] [${uu(e)}] Exiting Chain run with output: ${ws(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${Ii(aa.red,"[chain/error]")} [${n}] [${uu(e)}] Chain run errored with error: ${ws(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${Ii(aa.green,"[llm/start]")} [${n}] Entering LLM run with input: ${ws(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ii(aa.cyan,"[llm/end]")} [${n}] [${uu(e)}] Exiting LLM run with output: ${ws(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${Ii(aa.red,"[llm/error]")} [${n}] [${uu(e)}] LLM run errored with error: ${ws(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ii(aa.green,"[tool/start]")} [${n}] Entering Tool run with input: "${wW(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${Ii(aa.cyan,"[tool/end]")} [${n}] [${uu(e)}] Exiting Tool run with output: "${wW((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${Ii(aa.red,"[tool/error]")} [${n}] [${uu(e)}] Tool run errored with error: ${ws(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${Ii(aa.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${ws(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Ii(aa.cyan,"[retriever/end]")} [${n}] [${uu(e)}] Exiting Retriever run with output: ${ws(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${Ii(aa.red,"[retriever/error]")} [${n}] [${uu(e)}] Retriever run errored with error: ${ws(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${Ii(aa.blue,"[agent/action]")} [${r}] Agent selected action: ${ws(n.actions[n.actions.length-1],"[action]")}`)}};let lP;const w7e=()=>(lP===void 0&&(lP=new Fv(gl("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{})),lP);let x7e=class{getStore(){}run(e,n){return n()}};const cP=Symbol.for("ls:tracing_async_local_storage"),S7e=new x7e;let T7e=class{getInstance(){return globalThis[cP]??S7e}initializeGlobalInstance(e){globalThis[cP]===void 0&&(globalThis[cP]=e)}};const E7e=new T7e;function A7e(t=!1){const e=E7e.getInstance().getStore();if(!t&&e===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function GL(t){return typeof t=="function"&&"langsmith:traceable"in t}function O7e(t){let e;for(const n of t)for(const r of n)fa.isInstance(r.message)&&r.message.usage_metadata!==void 0&&(e=Bre(e,r.message.usage_metadata));return e}var uP=class _ie extends kb{constructor(n={}){super(n);U(this,"name","langchain_tracer");U(this,"projectName");U(this,"exampleId");U(this,"client");U(this,"replicas");U(this,"usesRunTreeMap",!0);const{exampleId:r,projectName:i,client:a,replicas:s}=n;this.projectName=i??Kre(),this.replicas=s,this.exampleId=r,this.client=a??w7e();const o=_ie.getTraceableRunTree();o&&this.updateFromRunTree(o)}async persistRun(n){}async onRunCreate(n){var r,i;(r=n.extra)!=null&&r.lc_defers_inputs||await((i=this.getRunTreeWithTracingConfig(n.id))==null?void 0:i.postRun())}async onRunUpdate(n){var i;const r=this.getRunTreeWithTracingConfig(n.id);(i=n.extra)!=null&&i.lc_defers_inputs?await(r==null?void 0:r.postRun()):await(r==null?void 0:r.patchRun())}onLLMEnd(n){const r=n.outputs;if(r!=null&&r.generations){const i=O7e(r.generations);if(i!==void 0){n.extra=n.extra??{};const a=n.extra.metadata??{};a.usage_metadata=i,n.extra.metadata=a}}}getRun(n){return this.runTreeMap.get(n)}updateFromRunTree(n){this.runTreeMap.set(n.id,n);let r=n;const i=new Set;for(;r.parent_run&&!(i.has(r.id)||(i.add(r.id),!r.parent_run));)r=r.parent_run;i.clear();const a=[r];for(;a.length>0;){const s=a.shift();!s||i.has(s.id)||(i.add(s.id),this.runTreeMap.set(s.id,s),s.child_runs&&a.push(...s.child_runs))}this.client=n.client??this.client,this.replicas=n.replicas??this.replicas,this.projectName=n.project_name??this.projectName,this.exampleId=n.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(n){const r=this.runTreeMap.get(n);if(r)return new oa({...r,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return A7e(!0)}catch{return}}};let Ny;function C7e(){return new("default"in pc?pc.default:pc)({autoStart:!0,concurrency:1})}function k7e(){return typeof Ny>"u"&&(Ny=C7e()),Ny}async function Cr(t,e){if(e===!0){const n=Lv();n!==void 0?await n.run(void 0,async()=>t()):await t()}else Ny=k7e(),Ny.add(async()=>{const n=Lv();n!==void 0?await n.run(void 0,async()=>t()):await t()})}const N7e=t=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(e=>gl(e)==="true");function wie(t){var n,r;const e=Lv();if(e!==void 0)return(r=(n=e.getStore())==null?void 0:n[bw])==null?void 0:r[t]}const I7e=Symbol("lc:configure_hooks"),P7e=()=>wie(I7e)||[];var R7e=class{setHandler(t){return this.setHandlers([t])}},vT=class{constructor(t,e,n,r,i,a,s,o){this.runId=t,this.handlers=e,this.inheritableHandlers=n,this.tags=r,this.inheritableTags=i,this.metadata=a,this.inheritableMetadata=s,this._parentRunId=o}get parentRunId(){return this._parentRunId}async handleText(t){await Promise.all(this.handlers.map(e=>Cr(async()=>{var n;try{await((n=e.handleText)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleText: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleCustomEvent(t,e,n,r,i){await Promise.all(this.handlers.map(a=>Cr(async()=>{var s;try{await((s=a.handleCustomEvent)==null?void 0:s.call(a,t,e,this.runId,this.tags,this.metadata))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}},j7e=class extends vT{getChild(t){const e=new mc(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleRetrieverEnd(t){await Promise.all(this.handlers.map(e=>Cr(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetriever`),e.raiseError)throw r}},e.awaitHandlers)))}async handleRetrieverError(t){await Promise.all(this.handlers.map(e=>Cr(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetrieverError: ${r}`),e.raiseError)throw t}},e.awaitHandlers)))}},SW=class extends vT{async handleLLMNewToken(t,e,n,r,i,a){await Promise.all(this.handlers.map(s=>Cr(async()=>{var o;if(!s.ignoreLLM)try{await((o=s.handleLLMNewToken)==null?void 0:o.call(s,t,e??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(l){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleLLMNewToken: ${l}`),s.raiseError)throw l}},s.awaitHandlers)))}async handleLLMError(t,e,n,r,i){await Promise.all(this.handlers.map(a=>Cr(async()=>{var s;if(!a.ignoreLLM)try{await((s=a.handleLLMError)==null?void 0:s.call(a,t,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMError: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleLLMEnd(t,e,n,r,i){await Promise.all(this.handlers.map(a=>Cr(async()=>{var s;if(!a.ignoreLLM)try{await((s=a.handleLLMEnd)==null?void 0:s.call(a,t,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMEnd: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}},$7e=class extends vT{getChild(t){const e=new mc(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleChainError(t,e,n,r,i){await Promise.all(this.handlers.map(a=>Cr(async()=>{var s;if(!a.ignoreChain)try{await((s=a.handleChainError)==null?void 0:s.call(a,t,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainError: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleChainEnd(t,e,n,r,i){await Promise.all(this.handlers.map(a=>Cr(async()=>{var s;if(!a.ignoreChain)try{await((s=a.handleChainEnd)==null?void 0:s.call(a,t,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainEnd: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleAgentAction(t){await Promise.all(this.handlers.map(e=>Cr(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentAction)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentAction: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleAgentEnd(t){await Promise.all(this.handlers.map(e=>Cr(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentEnd: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}},M7e=class extends vT{getChild(t){const e=new mc(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleToolError(t){await Promise.all(this.handlers.map(e=>Cr(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolError: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleToolEnd(t){await Promise.all(this.handlers.map(e=>Cr(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolEnd: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}},mc=class ey extends R7e{constructor(n,r){super();U(this,"handlers",[]);U(this,"inheritableHandlers",[]);U(this,"tags",[]);U(this,"inheritableTags",[]);U(this,"metadata",{});U(this,"inheritableMetadata",{});U(this,"name","callback_manager");U(this,"_parentRunId");this.handlers=(r==null?void 0:r.handlers)??this.handlers,this.inheritableHandlers=(r==null?void 0:r.inheritableHandlers)??this.inheritableHandlers,this.tags=(r==null?void 0:r.tags)??this.tags,this.inheritableTags=(r==null?void 0:r.inheritableTags)??this.inheritableTags,this.metadata=(r==null?void 0:r.metadata)??this.metadata,this.inheritableMetadata=(r==null?void 0:r.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=n}getParentRunId(){return this._parentRunId}async handleLLMStart(n,r,i=void 0,a=void 0,s=void 0,o=void 0,l=void 0,c=void 0){return Promise.all(r.map(async(u,f)=>{const p=f===0&&i?i:bu();return await Promise.all(this.handlers.map(m=>{if(!m.ignoreLLM)return Ag(m)&&m._createRunForLLMStart(n,[u],p,this._parentRunId,s,this.tags,this.metadata,c),Cr(async()=>{var _;try{await((_=m.handleLLMStart)==null?void 0:_.call(m,n,[u],p,this._parentRunId,s,this.tags,this.metadata,c))}catch(y){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleLLMStart: ${y}`),m.raiseError)throw y}},m.awaitHandlers)})),new SW(p,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(n,r,i=void 0,a=void 0,s=void 0,o=void 0,l=void 0,c=void 0){return Promise.all(r.map(async(u,f)=>{const p=f===0&&i?i:bu();return await Promise.all(this.handlers.map(m=>{if(!m.ignoreLLM)return Ag(m)&&m._createRunForChatModelStart(n,[u],p,this._parentRunId,s,this.tags,this.metadata,c),Cr(async()=>{var _,y;try{if(m.handleChatModelStart)await((_=m.handleChatModelStart)==null?void 0:_.call(m,n,[u],p,this._parentRunId,s,this.tags,this.metadata,c));else if(m.handleLLMStart){const b=Hre(u);await((y=m.handleLLMStart)==null?void 0:y.call(m,n,[b],p,this._parentRunId,s,this.tags,this.metadata,c))}}catch(b){if((m.raiseError?console.error:console.warn)(`Error in handler ${m.constructor.name}, handleLLMStart: ${b}`),m.raiseError)throw b}},m.awaitHandlers)})),new SW(p,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(n,r,i=bu(),a=void 0,s=void 0,o=void 0,l=void 0,c=void 0,u=void 0){return await Promise.all(this.handlers.map(f=>{if(!f.ignoreChain)return Ag(f)&&f._createRunForChainStart(n,r,i,this._parentRunId,this.tags,this.metadata,a,l,u),Cr(async()=>{var p;try{await((p=f.handleChainStart)==null?void 0:p.call(f,n,r,i,this._parentRunId,this.tags,this.metadata,a,l,u))}catch(m){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleChainStart: ${m}`),f.raiseError)throw m}},f.awaitHandlers)})),new $7e(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(n,r,i=bu(),a=void 0,s=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreAgent)return Ag(c)&&c._createRunForToolStart(n,r,i,this._parentRunId,this.tags,this.metadata,l),Cr(async()=>{var u;try{await((u=c.handleToolStart)==null?void 0:u.call(c,n,r,i,this._parentRunId,this.tags,this.metadata,l))}catch(f){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleToolStart: ${f}`),c.raiseError)throw f}},c.awaitHandlers)})),new M7e(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(n,r,i=bu(),a=void 0,s=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreRetriever)return Ag(c)&&c._createRunForRetrieverStart(n,r,i,this._parentRunId,this.tags,this.metadata,l),Cr(async()=>{var u;try{await((u=c.handleRetrieverStart)==null?void 0:u.call(c,n,r,i,this._parentRunId,this.tags,this.metadata,l))}catch(f){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleRetrieverStart: ${f}`),c.raiseError)throw f}},c.awaitHandlers)})),new j7e(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(n,r,i,a,s){await Promise.all(this.handlers.map(o=>Cr(async()=>{var l;if(!o.ignoreCustomEvent)try{await((l=o.handleCustomEvent)==null?void 0:l.call(o,n,r,i,this.tags,this.metadata))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}addHandler(n,r=!0){this.handlers.push(n),r&&this.inheritableHandlers.push(n)}removeHandler(n){this.handlers=this.handlers.filter(r=>r!==n),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==n)}setHandlers(n,r=!0){this.handlers=[],this.inheritableHandlers=[];for(const i of n)this.addHandler(i,r)}addTags(n,r=!0){this.removeTags(n),this.tags.push(...n),r&&this.inheritableTags.push(...n)}removeTags(n){this.tags=this.tags.filter(r=>!n.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!n.includes(r))}addMetadata(n,r=!0){this.metadata={...this.metadata,...n},r&&(this.inheritableMetadata={...this.inheritableMetadata,...n})}removeMetadata(n){for(const r of Object.keys(n))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(n=[],r=!0){const i=new ey(this._parentRunId);for(const a of this.handlers){const s=this.inheritableHandlers.includes(a);i.addHandler(a,s)}for(const a of this.tags){const s=this.inheritableTags.includes(a);i.addTags([a],s)}for(const a of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(a);i.addMetadata({[a]:this.metadata[a]},s)}for(const a of n)i.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===a.name)||i.addHandler(a,r);return i}static fromHandlers(n){class r extends fT{constructor(){super();U(this,"name",bu());Object.assign(this,n)}}const i=new this;return i.addHandler(new r),i}static configure(n,r,i,a,s,o,l){return this._configureSync(n,r,i,a,s,o,l)}static _configureSync(n,r,i,a,s,o,l){var m,_;let c;(n||r)&&(Array.isArray(n)||!n?(c=new ey,c.setHandlers((n==null?void 0:n.map(d1))??[],!0)):c=n,c=c.copy(Array.isArray(r)?r.map(d1):r==null?void 0:r.handlers,!1));const u=gl("LANGCHAIN_VERBOSE")==="true"||(l==null?void 0:l.verbose),f=((m=uP.getTraceableRunTree())==null?void 0:m.tracingEnabled)??N7e(),p=f||(gl("LANGCHAIN_TRACING")??!1);if(u||p){if(c||(c=new ey),u&&!c.handlers.some(y=>y.name===xW.prototype.name)){const y=new xW;c.addHandler(y,!0)}if(p&&!c.handlers.some(y=>y.name==="langchain_tracer")&&f){const y=new uP;c.addHandler(y,!0)}if(f){const y=uP.getTraceableRunTree();y&&c._parentRunId===void 0&&(c._parentRunId=y.id,(_=c.handlers.find(b=>b.name==="langchain_tracer"))==null||_.updateFromRunTree(y))}}for(const{contextVar:y,inheritable:b=!0,handlerClass:x,envVar:w}of P7e()){const T=w&&gl(w)==="true"&&x;let A;const E=y!==void 0?wie(y):void 0;E&&O8e(E)?A=E:T&&(A=new x({})),A!==void 0&&(c||(c=new ey),c.handlers.some(C=>C.name===A.name)||c.addHandler(A,b))}return(i||a)&&c&&(c.addTags(i??[]),c.addTags(a??[],!1)),(s||o)&&c&&(c.addMetadata(s??{}),c.addMetadata(o??{},!1)),c}};function d1(t){return"name"in t?t:fT.fromMethods(t)}var L7e=class{getStore(){}run(t,e){return e()}enterWith(t){}};const D7e=new L7e,TW=Symbol.for("lc:child_config");var B7e=class{getInstance(){return Lv()??D7e}getRunnableConfig(){var t,e;return(e=(t=this.getInstance().getStore())==null?void 0:t.extra)==null?void 0:e[TW]}runWithConfig(t,e,n){var c;const r=mc._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata),i=this.getInstance(),a=i.getStore(),s=r==null?void 0:r.getParentRunId(),o=(c=r==null?void 0:r.handlers)==null?void 0:c.find(u=>(u==null?void 0:u.name)==="langchain_tracer");let l;return o&&s?l=o.getRunTreeWithTracingConfig(s):n||(l=new oa({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[TW]:t}),a!==void 0&&a[bw]!==void 0&&(l===void 0&&(l={}),l[bw]=a[bw]),i.run(l,e)}initializeGlobalInstance(t){Lv()===void 0&&pze(t)}};const Fu=new B7e,dP=25;async function xo(t){return mc._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function EW(...t){const e={};for(const n of t.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")e[r]={...e[r],...n[r]};else if(r==="tags"){const i=e[r]??[];e[r]=[...new Set(i.concat(n[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...n[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(r==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(r==="callbacks"){const i=e.callbacks,a=n.callbacks;if(Array.isArray(a))if(!i)e.callbacks=a;else if(Array.isArray(i))e.callbacks=i.concat(a);else{const s=i.copy();for(const o of a)s.addHandler(d1(o),!0);e.callbacks=s}else if(a)if(!i)e.callbacks=a;else if(Array.isArray(i)){const s=a.copy();for(const o of i)s.addHandler(d1(o),!0);e.callbacks=s}else e.callbacks=new mc(a._parentRunId,{handlers:i.handlers.concat(a.handlers),inheritableHandlers:i.inheritableHandlers.concat(a.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(a.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(a.inheritableTags))),metadata:{...i.metadata,...a.metadata}})}else{const i=r;e[i]=n[i]??e[i]}return e}const F7e=new Set(["string","number","boolean"]);function cn(t){var r;const e=Fu.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:i,runName:a,...s}=e;n=Object.entries(s).reduce((o,[l,c])=>(c!==void 0&&(o[l]=c),o),n)}if(t&&(n=Object.entries(t).reduce((i,[a,s])=>(s!==void 0&&(i[a]=s),i),n)),n!=null&&n.configurable)for(const i of Object.keys(n.configurable))F7e.has(typeof n.configurable[i])&&!((r=n.metadata)!=null&&r[i])&&(n.metadata||(n.metadata={}),n.metadata[i]=n.configurable[i]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const i=n.timeout,a=AbortSignal.timeout(i);n.metadata||(n.metadata={}),n.metadata.timeoutMs===void 0&&(n.metadata.timeoutMs=i),n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,a])):n.signal=a,delete n.timeout}return n}function Di(t={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:i,configurable:a,runId:s}={}){const o=cn(t);return e!==void 0&&(delete o.runName,o.callbacks=e),r!==void 0&&(o.recursionLimit=r),n!==void 0&&(o.maxConcurrency=n),i!==void 0&&(o.runName=i),a!==void 0&&(o.configurable={...o.configurable,...a}),s!==void 0&&delete o.runId,o}function Xp(t){if(t)return{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal,store:t.store}}async function Uu(t,e){if(e===void 0)return t;let n;return Promise.race([t.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,i)=>{n=()=>{i(f1(e))},e.addEventListener("abort",n,{once:!0}),e.aborted&&i(f1(e))})]).finally(()=>e.removeEventListener("abort",n))}function f1(t){return(t==null?void 0:t.reason)instanceof Error?t.reason:typeof(t==null?void 0:t.reason)=="string"?new Error(t.reason):new Error("Aborted")}var Al=class d2 extends ReadableStream{constructor(){super(...arguments);U(this,"reader")}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const n=await this.reader.read();return n.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:n.value}}catch(n){throw this.reader.releaseLock(),n}}async return(){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}return{done:!0,value:void 0}}async throw(n){if(this.ensureReader(),this.locked){const r=this.reader.cancel();this.reader.releaseLock(),await r}throw n}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(n){const r=n.getReader();return new d2({start(i){return a();function a(){return r.read().then(({done:s,value:o})=>{if(s){i.close();return}return i.enqueue(o),a()})}},cancel(){r.releaseLock()}})}static fromAsyncGenerator(n){return new d2({async pull(r){const{value:i,done:a}=await n.next();a&&r.close(),r.enqueue(i)},async cancel(r){await n.return(r)}})}};function xie(t,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(i){for(;;)if(i.length===0){const a=await t.next();for(const s of n)s.push(a)}else{if(i[0].done)return;yield i.shift().value}})}function bT(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const n={...t};for(const[r,i]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=bT(n[r],i):n[r]=i;return n}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}var Sm=class{constructor(t){U(this,"generator");U(this,"setup");U(this,"config");U(this,"signal");U(this,"firstResult");U(this,"firstResultUsed",!1);var e;this.generator=t.generator,this.config=t.config,this.signal=t.signal??((e=this.config)==null?void 0:e.signal),this.setup=new Promise((n,r)=>{Fu.runWithConfig(Xp(t.config),async()=>{this.firstResult=t.generator.next(),t.startSetup?this.firstResult.then(t.startSetup).then(n,r):this.firstResult.then(i=>n(void 0),r)},!0)})}async next(...t){var e;return(e=this.signal)==null||e.throwIfAborted(),this.firstResultUsed?Fu.runWithConfig(Xp(this.config),this.signal?async()=>Uu(this.generator.next(...t),this.signal):async()=>this.generator.next(...t),!0):(this.firstResultUsed=!0,this.firstResult)}async return(t){return this.generator.return(t)}async throw(t){return this.generator.throw(t)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function U7e(t,e,n,r,...i){const a=new Sm({generator:e,startSetup:n,signal:r}),s=await a.setup;return{output:t(a,s,...i),setup:s}}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2017-2022 Joachim Wester
* MIT licensed
*/const z7e=Object.prototype.hasOwnProperty;function f2(t,e){return z7e.call(t,e)}function h2(t){if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(t);let e=[];for(let n in t)f2(t,n)&&e.push(n);return e}function vo(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function p2(t){let e=0;const n=t.length;let r;for(;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function dh(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function q7e(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function m2(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(m2(t[n]))return!0}else if(typeof t=="object"){const n=h2(t),r=n.length;for(var e=0;e<r;e++)if(m2(t[n[e]]))return!0}}return!1}function AW(t,e){const n=[t];for(const r in e){const i=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof i<"u"&&n.push(`${r}: ${i}`)}return n.join(`
`)}var H7e=class extends Error{constructor(t,e,n,r,i){super(AW(t,{name:e,index:n,operation:r,tree:i})),this.name=e,this.index=n,this.operation=r,this.tree=i,Object.setPrototypeOf(this,new.target.prototype),this.message=AW(t,{name:e,index:n,operation:r,tree:i})}},W7e=tze({JsonPatchError:()=>nr,_areEquals:()=>zv,applyOperation:()=>Yd,applyPatch:()=>Uv,applyReducer:()=>K7e,deepClone:()=>V7e,getValueByPointer:()=>h1,validate:()=>Sie,validator:()=>p1});const nr=H7e,V7e=vo,Uh={add:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){let r=h1(n,this.path);r&&(r=vo(r));const i=Yd(n,{op:"remove",path:this.from}).removed;return Yd(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){const r=h1(n,this.from);return Yd(n,{op:"add",path:this.path,value:vo(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:zv(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}};var G7e={add:function(t,e,n){return p2(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){return{newDocument:n,removed:t.splice(e,1)[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:Uh.move,copy:Uh.copy,test:Uh.test,_get:Uh._get};function h1(t,e){if(e=="")return t;var n={op:"_get",path:e};return Yd(t,n),n.value}function Yd(t,e,n=!1,r=!0,i=!0,a=0){if(n&&(typeof n=="function"?n(e,0,t,e.path):p1(e,0)),e.path===""){let s={newDocument:t};if(e.op==="add")return s.newDocument=e.value,s;if(e.op==="replace")return s.newDocument=e.value,s.removed=t,s;if(e.op==="move"||e.op==="copy")return s.newDocument=h1(t,e.from),e.op==="move"&&(s.removed=t),s;if(e.op==="test"){if(s.test=zv(t,e.value),s.test===!1)throw new nr("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return s.newDocument=t,s}else{if(e.op==="remove")return s.removed=t,s.newDocument=null,s;if(e.op==="_get")return e.value=t,s;if(n)throw new nr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,t);return s}}else{r||(t=vo(t));const s=(e.path||"").split("/");let o=t,l=1,c=s.length,u,f,p;for(typeof n=="function"?p=n:p=p1;;){if(f=s[l],f&&f.indexOf("~")!=-1&&(f=q7e(f)),i&&(f=="__proto__"||f=="prototype"&&l>0&&s[l-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&u===void 0&&(o[f]===void 0?u=s.slice(0,l).join("/"):l==c-1&&(u=e.path),u!==void 0&&p(e,0,t,u)),l++,Array.isArray(o)){if(f==="-")f=o.length;else{if(n&&!p2(f))throw new nr("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,t);p2(f)&&(f=~~f)}if(l>=c){if(n&&e.op==="add"&&f>o.length)throw new nr("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,t);const m=G7e[e.op].call(e,o,f,t);if(m.test===!1)throw new nr("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return m}}else if(l>=c){const m=Uh[e.op].call(e,o,f,t);if(m.test===!1)throw new nr("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return m}if(o=o[f],n&&l<c&&(!o||typeof o!="object"))throw new nr("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,e,t)}}}function Uv(t,e,n,r=!0,i=!0){if(n&&!Array.isArray(e))throw new nr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=vo(t));const a=new Array(e.length);for(let s=0,o=e.length;s<o;s++)a[s]=Yd(t,e[s],n,!0,i,s),t=a[s].newDocument;return a.newDocument=t,a}function K7e(t,e,n){const r=Yd(t,e);if(r.test===!1)throw new nr("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function p1(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new nr("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Uh[t.op]){if(typeof t.path!="string")throw new nr("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new nr('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new nr("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new nr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&m2(t.value))throw new nr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,a=r.split("/").length;if(i!==a+1&&i!==a)throw new nr("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new nr("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var s=Sie([{op:"_get",path:t.from,value:void 0}],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new nr("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new nr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function Sie(t,e,n){try{if(!Array.isArray(t))throw new nr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Uv(vo(e),vo(t),n||!0);else{n=n||p1;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof nr)return i;throw i}}function zv(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),i,a,s;if(n&&r){if(a=t.length,a!=e.length)return!1;for(i=a;i--!==0;)if(!zv(t[i],e[i]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(t);if(a=o.length,a!==Object.keys(e).length)return!1;for(i=a;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=a;i--!==0;)if(s=o[i],!zv(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2013-2021 Joachim Wester
* MIT license
*/function Tie(t,e,n,r,i){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var a=h2(e),s=h2(t),o=!1,l=s.length-1;l>=0;l--){var c=s[l],u=t[c];if(f2(e,c)&&!(e[c]===void 0&&u!==void 0&&Array.isArray(e)===!1)){var f=e[c];typeof u=="object"&&u!=null&&typeof f=="object"&&f!=null&&Array.isArray(u)===Array.isArray(f)?Tie(u,f,n,r+"/"+dh(c),i):u!==f&&(i&&n.push({op:"test",path:r+"/"+dh(c),value:vo(u)}),n.push({op:"replace",path:r+"/"+dh(c),value:vo(f)}))}else Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+dh(c),value:vo(u)}),n.push({op:"remove",path:r+"/"+dh(c)}),o=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}))}if(!(!o&&a.length==s.length))for(var l=0;l<a.length;l++){var c=a[l];!f2(t,c)&&e[c]!==void 0&&n.push({op:"add",path:r+"/"+dh(c),value:vo(e[c])})}}}function Z7e(t,e,n=!1){var r=[];return Tie(t,e,r,"",n),r}({...W7e});var _u=class{constructor(t){U(this,"ops");this.ops=t.ops??[]}concat(t){const e=this.ops.concat(t.ops),n=Uv({},e);return new Eie({ops:e,state:n[n.length-1].newDocument})}},Eie=class g2 extends _u{constructor(n){super(n);U(this,"state");this.state=n.state}concat(n){const r=this.ops.concat(n.ops),i=Uv(this.state,n.ops);return new g2({ops:r,state:i[i.length-1].newDocument})}static fromRunLogPatch(n){const r=Uv({},n.ops);return new g2({ops:n.ops,state:r[r.length-1].newDocument})}};const X7e=t=>t.name==="log_stream_tracer";async function OW(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=t;if(["retriever","llm","prompt"].includes(t.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function CW(t,e){const{outputs:n}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function J7e(t){return t!==void 0&&t.message!==void 0}var kW=class extends kb{constructor(e){super({_awaitHandler:!0,...e});U(this,"autoClose",!0);U(this,"includeNames");U(this,"includeTypes");U(this,"includeTags");U(this,"excludeNames");U(this,"excludeTypes");U(this,"excludeTags");U(this,"_schemaFormat","original");U(this,"rootId");U(this,"keyMapByRunId",{});U(this,"counterMapByRunName",{});U(this,"transformStream");U(this,"writer");U(this,"receiveStream");U(this,"name","log_stream_tracer");U(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Al.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const i=this.keyMapByRunId[e];i&&await this.writer.write(new _u({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var i;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new _u({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await OW(e,this._schemaFormat)),await this.writer.write(new _u({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await OW(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await CW(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const i=new _u({ops:r});await this.writer.write(i)}finally{if(e.id===this.rootId){const n=new _u({ops:[{op:"replace",path:"/final_output",value:await CW(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const i=this.keyMapByRunId[e.id];if(i===void 0)return;const a=e.inputs.messages!==void 0;let s;a?J7e(r==null?void 0:r.chunk)?s=r==null?void 0:r.chunk:s=new mr({id:`run-${e.id}`,content:n}):s=n;const o=new _u({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${i}/streamed_output/-`,value:s}]});await this.writer.write(o)}};const NW="__run";var m1=class Aie{constructor(e){U(this,"text");U(this,"generationInfo");this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new Aie({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},Jp=class Oie extends m1{constructor(n){super(n);U(this,"message");this.message=n.message}concat(n){return new Oie({text:this.text+n.text,generationInfo:{...this.generationInfo,...n.generationInfo},message:this.message.concat(n.message)})}};function R_({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const Y7e=t=>t.name==="event_stream_tracer";var Q7e=class extends kb{constructor(e){super({_awaitHandler:!0,...e});U(this,"autoClose",!0);U(this,"includeNames");U(this,"includeTypes");U(this,"includeTags");U(this,"excludeNames");U(this,"excludeTypes");U(this,"excludeTags");U(this,"runInfoMap",new Map);U(this,"tappedPromises",new Map);U(this,"transformStream");U(this,"writer");U(this,"receiveStream");U(this,"readableStreamClosed",!1);U(this,"name","event_stream_tracer");U(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream({flush:()=>{this.readableStreamClosed=!0}}),this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Al.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const i=this.runInfoMap.get(e);if(i===void 0){yield r.value;return}function a(o,l){return o==="llm"&&typeof l=="string"?new m1({text:l}):l}let s=this.tappedPromises.get(e);if(s===void 0){let o;s=new Promise(l=>{o=l}),this.tappedPromises.set(e,s);try{const l={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...l,data:{chunk:a(i.runType,r.value)}},i),yield r.value;for await(const c of n)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...l,data:{chunk:a(i.runType,c)}},i),yield c}finally{o==null||o()}}else{yield r.value;for await(const o of n)yield o}}async send(e,n){this.readableStreamClosed||this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var s,o;const n=R_(e),r=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,i);const a=`on_${r}_start`;await this.send({event:a,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},i)}async onLLMNewToken(e,n,r){const i=this.runInfoMap.get(e.id);let a,s;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")s="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?a=new mr({content:n,id:`run-${e.id}`}):a=r.chunk.message;else if(i.runType==="llm")s="on_llm_stream",(r==null?void 0:r.chunk)===void 0?a=new m1({text:n}):a=r.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:s,data:{chunk:a},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var s,o,l;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const i=(s=e.outputs)==null?void 0:s.generations;let a;if(n.runType==="chat_model"){for(const c of i??[]){if(a!==void 0)break;a=(o=c[0])==null?void 0:o.message}r="on_chat_model_end"}else if(n.runType==="llm")a={generations:i==null?void 0:i.map(c=>c.map(u=>({text:u.text,generationInfo:u.generationInfo}))),llmOutput:((l=e.outputs)==null?void 0:l.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:a,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var s,o;const n=R_(e),r=e.run_type??"chain",i={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:e.run_type};let a={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(a={},i.inputs={}):e.inputs.input!==void 0?(a.input=e.inputs.input,i.inputs=e.inputs.input):(a.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${r}_start`,data:a,name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},i)}async onChainEnd(e){var s;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,i=e.inputs??n.inputs??{},a={output:((s=e.outputs)==null?void 0:s.output)??e.outputs,input:i};i.input&&Object.keys(i).length===1&&(a.input=i.input,n.inputs=i.input),await this.sendEndEvent({event:r,data:a,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var i,a;const n=R_(e),r={tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{}},r)}async onToolEnd(e){var i;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onToolError(e){const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);await this.sendEndEvent({event:"on_tool_error",data:{input:n.inputs,error:e.error},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var i,a;const n=R_(e),r={tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,r),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((a=e.extra)==null?void 0:a.metadata)??{}},r)}async onRetrieverEnd(e){var r;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const i=this.runInfoMap.get(r);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:i.tags,metadata:i.metadata,data:n},i)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}};const eHe=Object.prototype.toString,tHe=t=>eHe.call(t)==="[object Error]",nHe=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function rHe(t){if(!(t&&tHe(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:e,stack:n}=t;return e==="Load failed"?n===void 0||"__sentry_captured__"in t:e.startsWith("error sending request for url")?!0:nHe.has(e)}function iHe(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function j_(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}var aHe=class extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}};function sHe(t,e){const n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1;let i=Math.round(r*e.minTimeout*e.factor**(n-1));return i=Math.min(i,e.maxTimeout),i}function IW(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function oHe({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:i}){var m,_,y;const a=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(a instanceof aHe)throw a.originalError;const s=Number.isFinite(i.retries)?Math.max(0,i.retries-n):i.retries,o=i.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:a,attemptNumber:e,retriesLeft:s,retriesConsumed:n});if(await i.onFailedAttempt(l),IW(r,o)<=0)throw a;const c=await i.shouldConsumeRetry(l),u=IW(r,o);if(u<=0||s<=0)throw a;if(a instanceof TypeError&&!rHe(a)){if(c)throw a;return(m=i.signal)==null||m.throwIfAborted(),!1}if(!await i.shouldRetry(l))throw a;if(!c)return(_=i.signal)==null||_.throwIfAborted(),!1;const f=sHe(n,i),p=Math.min(f,u);return p>0&&await new Promise((b,x)=>{var A,E;const w=()=>{var C;clearTimeout(T),(C=i.signal)==null||C.removeEventListener("abort",w),x(i.signal.reason)},T=setTimeout(()=>{var C;(C=i.signal)==null||C.removeEventListener("abort",w),b()},p);i.unref&&((A=T.unref)==null||A.call(T)),(E=i.signal)==null||E.addEventListener("abort",w,{once:!0})}),(y=i.signal)==null||y.throwIfAborted(),!0}async function y2(t,e={}){var a,s,o;if(e={...e},iHe(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),j_("factor",e.factor,{min:0,allowInfinity:!1}),j_("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),j_("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),j_("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(a=e.signal)==null||a.throwIfAborted();let n=0,r=0;const i=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{(s=e.signal)==null||s.throwIfAborted();const l=await t(n);return(o=e.signal)==null||o.throwIfAborted(),l}catch(l){await oHe({error:l,attemptNumber:n,retriesConsumed:r,startTime:i,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}const lHe=[400,401,402,403,404,405,406,407,409],cHe=t=>{if(typeof t!="object"||t===null)return;if("message"in t&&typeof t.message=="string"&&(t.message.startsWith("Cancel")||t.message.startsWith("AbortError"))||"name"in t&&typeof t.name=="string"&&t.name==="AbortError"||"code"in t&&typeof t.code=="string"&&t.code==="ECONNABORTED")throw t;const e="response"in t&&typeof t.response=="object"&&t.response!==null&&"status"in t.response&&typeof t.response.status=="number"?t.response.status:void 0,n="status"in t&&typeof t.status=="number"?t.status:void 0,r=e??n;if(r&&lHe.includes(+r))throw t;if(("error"in t&&typeof t.error=="object"&&t.error!==null&&"code"in t.error&&typeof t.error.code=="string"?t.error.code:void 0)==="insufficient_quota"){const i=new Error("message"in t&&typeof t.message=="string"?t.message:"Insufficient quota");throw i.name="InsufficientQuotaError",i}};var KL=class{constructor(t){U(this,"maxConcurrency");U(this,"maxRetries");U(this,"onFailedAttempt");U(this,"queue");this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.onFailedAttempt=t.onFailedAttempt??cHe,this.queue=new("default"in pc?pc.default:pc)({concurrency:this.maxConcurrency})}async call(t,...e){return this.queue.add(()=>y2(()=>t(...e).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:({error:n})=>{var r;return(r=this.onFailedAttempt)==null?void 0:r.call(this,n)},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,e,...n){if(t.signal){let r;return Promise.race([this.call(e,...n),new Promise((i,a)=>{var s;r=()=>{a(f1(t.signal))},(s=t.signal)==null||s.addEventListener("abort",r,{once:!0})})]).finally(()=>{t.signal&&r&&t.signal.removeEventListener("abort",r)})}return this.call(e,...n)}fetch(...t){return this.call(()=>fetch(...t).then(e=>e.ok?e:Promise.reject(e)))}},Cie=class extends kb{constructor({config:e,onStart:n,onEnd:r,onError:i}){super({_awaitHandler:!0});U(this,"name","RootListenersTracer");U(this,"rootId");U(this,"config");U(this,"argOnStart");U(this,"argOnEnd");U(this,"argOnError");this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};function ZL(t){return t?t.lc_runnable:!1}var uHe=class{constructor(t){U(this,"includeNames");U(this,"includeTypes");U(this,"includeTags");U(this,"excludeNames");U(this,"excludeTypes");U(this,"excludeTags");this.includeNames=t.includeNames,this.includeTypes=t.includeTypes,this.includeTags=t.includeTags,this.excludeNames=t.excludeNames,this.excludeTypes=t.excludeTypes,this.excludeTags=t.excludeTags}includeEvent(t,e){let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const r=t.tags??[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e)),this.includeTags!==void 0&&(n=n||r.some(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e)),this.excludeTags!==void 0&&(n=n&&r.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),n}};const dHe=t=>btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");function ts(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_zod"in e))return!1;const n=e._zod;return typeof n=="object"&&n!==null&&"def"in n}function Pl(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_def"in e)||"_zod"in e)return!1;const n=e._def;return typeof n=="object"&&n!=null&&"typeName"in n}function cl(t){return!t||typeof t!="object"||Array.isArray(t)?!1:!!(ts(t)||Pl(t))}async function kie(t,e){if(ts(t))try{return{success:!0,data:await qJ(t,e)}}catch(n){return{success:!1,error:n}}if(Pl(t))return await t.safeParseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function Nie(t,e){if(ts(t))return await qJ(t,e);if(Pl(t))return await t.parseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function XL(t){var e;if(ts(t))return(e=ks.get(t))==null?void 0:e.description;if(Pl(t)||"description"in t&&typeof t.description=="string")return t.description}function fHe(t){return cl(t)?Pl(t)?t._def.typeName==="ZodString":ts(t)?t._zod.def.type==="string":!1:!1}function Iy(t){return ts(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="object":!1}function Iie(t){return ts(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="array":!1}function hHe(t){return ts(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="optional":!1}function pHe(t){return ts(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="nullable":!1}function v2(t,e=!1){if(Pl(t))return t.strict();if(Iy(t)){const n=t._zod.def.shape;if(e)for(const[a,s]of Object.entries(t._zod.def.shape)){if(Iy(s))n[a]=v2(s,e);else if(Iie(s)){let l=s._zod.def.element;Iy(l)&&(l=v2(l,e)),n[a]=ua(s,{...s._zod.def,element:l})}else n[a]=s;const o=ks.get(s);o&&ks.add(n[a],o)}const r=ua(t,{...t._zod.def,shape:n,catchall:iY(QJ)}),i=ks.get(t);return i&&ks.add(r,i),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function mHe(t){return Pl(t)&&"typeName"in t._def&&t._def.typeName==="ZodEffects"}function gHe(t){return ts(t)&&t._zod.def.type==="pipe"}function Nd(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(Pl(t))return mHe(t)?Nd(t._def.schema,e,n):t;if(ts(t)){let i=t;if(gHe(t)&&(i=Nd(t._zod.def.in,e,n)),e){if(Iy(i)){const s={};for(const[o,l]of Object.entries(i._zod.def.shape))s[o]=Nd(l,e,n);i=ua(i,{...i._zod.def,shape:s})}else if(Iie(i)){const s=Nd(i._zod.def.element,e,n);i=ua(i,{...i._zod.def,element:s})}else if(hHe(i)){const s=Nd(i._zod.def.innerType,e,n);i=ua(i,{...i._zod.def,innerType:s})}else if(pHe(i)){const s=Nd(i._zod.def.innerType,e,n);i=ua(i,{...i._zod.def,innerType:s})}}const a=ks.get(t);return a&&ks.add(i,a),n.set(t,i),i}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function yHe(t,e=!1){return Nd(t,e,new WeakMap)}function fP(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const vHe=["*","_","`"];function bHe(t){let e="";for(const[n,r]of Object.entries(t))e+=`	classDef ${n} ${r};
`;return e}function _He(t,e,n){const{firstNode:r,lastNode:i,nodeColors:a,withStyles:s=!0,curveStyle:o="linear",wrapLabelNWords:l=9}=n??{};let c=s?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(s){const _="default",y={[_]:"{0}({1})"};r!==void 0&&(y[r]="{0}([{1}]):::first"),i!==void 0&&(y[i]="{0}([{1}]):::last");for(const[b,x]of Object.entries(t)){const w=x.name.split(":").pop()??"";let T=vHe.some(E=>w.startsWith(E)&&w.endsWith(E))?`<p>${w}</p>`:w;Object.keys(x.metadata??{}).length&&(T+=`<hr/><small><em>${Object.entries(x.metadata??{}).map(([E,C])=>`${E} = ${C}`).join(`
`)}</em></small>`);const A=(y[b]??y[_]).replace("{0}",fP(b)).replace("{1}",T);c+=`	${A}
`}}const u={};for(const _ of e){const y=_.source.split(":"),b=_.target.split(":"),x=y.filter((w,T)=>w===b[T]).join(":");u[x]||(u[x]=[]),u[x].push(_)}const f=new Set;function p(_){return[..._].sort((y,b)=>y.split(":").length-b.split(":").length)}function m(_,y){const b=_.length===1&&_[0].source===_[0].target;if(y&&!b){const w=y.split(":").pop();if(f.has(y))throw new Error(`Found duplicate subgraph '${w}' at '${y} -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);f.add(y),c+=`	subgraph ${w}
`}const x=p(Object.keys(u).filter(w=>w.startsWith(`${y}:`)&&w!==y&&w.split(":").length===y.split(":").length+1));for(const w of x)m(u[w],w);for(const w of _){const{source:T,target:A,data:E,conditional:C}=w;let R="";if(E!==void 0){let N=E;const D=N.split(" ");D.length>l&&(N=Array.from({length:Math.ceil(D.length/l)},(Z,j)=>D.slice(j*l,(j+1)*l).join(" ")).join("&nbsp;<br>&nbsp;")),R=C?` -. &nbsp;${N}&nbsp; .-> `:` -- &nbsp;${N}&nbsp; --> `}else R=C?" -.-> ":" --> ";c+=`	${fP(T)}${R}${fP(A)};
`}y&&!b&&(c+=`	end
`)}m(u[""]??[],"");for(const _ in u)!_.includes(":")&&_!==""&&m(u[_],_);return s&&(c+=bHe(a??{})),c}async function wHe(t,e){let n=(e==null?void 0:e.backgroundColor)??"white";const r=(e==null?void 0:e.imageType)??"png",i=dHe(t);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const a=`https://mermaid.ink/img/${i}?bgColor=${n}&type=${r}`,s=await fetch(a);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return await s.blob()}const xHe=Symbol("Let zodToJsonSchema decide on which parser to use"),SHe={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},THe=t=>({...SHe,...t}),EHe=t=>{const e=THe(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}},Pie=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")};function Za(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?Pie(e,t.currentPath):e.join("/")}}function Rie(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function un(t,e,n,r,i){t[e]=n,Rie(t,e,r,i)}var Jt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const s of i)a[s]=s;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),s={};for(const o of a)s[o]=i[o];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&a.push(s);return a},t.find=(i,a)=>{for(const s of i)if(a(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Jt||(Jt={}));var PW;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(PW||(PW={}));const Ze=Jt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wu=t=>{switch(typeof t){case"undefined":return Ze.undefined;case"string":return Ze.string;case"number":return Number.isNaN(t)?Ze.nan:Ze.number;case"boolean":return Ze.boolean;case"function":return Ze.function;case"bigint":return Ze.bigint;case"symbol":return Ze.symbol;case"object":return Array.isArray(t)?Ze.array:t===null?Ze.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ze.promise:typeof Map<"u"&&t instanceof Map?Ze.map:typeof Set<"u"&&t instanceof Set?Ze.set:typeof Date<"u"&&t instanceof Date?Ze.date:Ze.object;default:return Ze.unknown}},Re=Jt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class kc extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const s of a.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(s))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof kc))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Jt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n=Object.create(null),r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}kc.create=t=>new kc(t);const b2=(t,e)=>{let n;switch(t.code){case Re.invalid_type:t.received===Ze.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Re.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Jt.jsonStringifyReplacer)}`;break;case Re.unrecognized_keys:n=`Unrecognized key(s) in object: ${Jt.joinValues(t.keys,", ")}`;break;case Re.invalid_union:n="Invalid input";break;case Re.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Jt.joinValues(t.options)}`;break;case Re.invalid_enum_value:n=`Invalid enum value. Expected ${Jt.joinValues(t.options)}, received '${t.received}'`;break;case Re.invalid_arguments:n="Invalid function arguments";break;case Re.invalid_return_type:n="Invalid function return type";break;case Re.invalid_date:n="Invalid date";break;case Re.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Jt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Re.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Re.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Re.custom:n="Invalid input";break;case Re.invalid_intersection_types:n="Intersection results could not be merged";break;case Re.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Re.not_finite:n="Number must be finite";break;default:n=e.defaultError,Jt.assertNever(t)}return{message:n}};let AHe=b2;function OHe(){return AHe}const CHe=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],s={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(s,{data:e,defaultError:o}).message;return{...i,path:a,message:o}};function Le(t,e){const n=OHe(),r=CHe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===b2?void 0:b2].filter(i=>!!i)});t.common.issues.push(r)}class Xa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Et;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,s=await i.value;r.push({key:a,value:s})}return Xa.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:s}=i;if(a.status==="aborted"||s.status==="aborted")return Et;a.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[a.value]=s.value)}return{status:e.value,value:r}}}const Et=Object.freeze({status:"aborted"}),ty=t=>({status:"dirty",value:t}),Bs=t=>({status:"valid",value:t}),RW=t=>t.status==="aborted",jW=t=>t.status==="dirty",Yp=t=>t.status==="valid",g1=t=>typeof Promise<"u"&&t instanceof Promise;var nt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(nt||(nt={}));class zu{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const $W=(t,e)=>{if(Yp(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new kc(t.common.issues);return this._error=n,this._error}}};function Ft(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,o)=>{const{message:l}=t;return s.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??r??o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:l??n??o.defaultError}},description:i}}class Kt{get description(){return this._def.description}_getType(e){return wu(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:wu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Xa,ctx:{common:e.parent.common,data:e.data,parsedType:wu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(g1(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wu(e)},i=this._parseSync({data:e,path:r.path,parent:r});return $W(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wu(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Yp(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Yp(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wu(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(g1(i)?i:Promise.resolve(i));return $W(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const s=e(i),o=()=>a.addIssue({code:Re.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new em({schema:this,typeName:be.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Iu.create(this,this._def)}nullable(){return tm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return yl.create(this)}promise(){return _1.create(this,this._def)}or(e){return v1.create([this,e],this._def)}and(e){return b1.create(this,e,this._def)}transform(e){return new em({...Ft(this._def),schema:this,typeName:be.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new x2({...Ft(this._def),innerType:this,defaultValue:n,typeName:be.ZodDefault})}brand(){return new JHe({typeName:be.ZodBranded,type:this,...Ft(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new S2({...Ft(this._def),innerType:this,catchValue:n,typeName:be.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return JL.create(this,e)}readonly(){return T2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const kHe=/^c[^\s-]{8,}$/i,NHe=/^[0-9a-z]+$/,IHe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,PHe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,RHe=/^[a-z0-9_-]{21}$/i,jHe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,$He=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MHe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,LHe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hP;const DHe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,BHe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,FHe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,UHe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,zHe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,qHe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,jie="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",HHe=new RegExp(`^${jie}$`);function $ie(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function WHe(t){return new RegExp(`^${$ie(t)}$`)}function VHe(t){let e=`${jie}T${$ie(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function GHe(t,e){return!!((e==="v4"||!e)&&DHe.test(t)||(e==="v6"||!e)&&FHe.test(t))}function KHe(t,e){if(!jHe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function ZHe(t,e){return!!((e==="v4"||!e)&&BHe.test(t)||(e==="v6"||!e)&&UHe.test(t))}class Au extends Kt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ze.string){const a=this._getOrReturnCtx(e);return Le(a,{code:Re.invalid_type,expected:Ze.string,received:a.parsedType}),Et}const r=new Xa;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:Re.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:Re.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const s=e.data.length>a.value,o=e.data.length<a.value;(s||o)&&(i=this._getOrReturnCtx(e,i),s?Le(i,{code:Re.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&Le(i,{code:Re.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")MHe.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"email",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")hP||(hP=new RegExp(LHe,"u")),hP.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"emoji",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")PHe.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"uuid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")RHe.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"nanoid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")kHe.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"cuid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")NHe.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"cuid2",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")IHe.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"ulid",code:Re.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Le(i,{validation:"url",code:Re.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"regex",code:Re.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Re.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Re.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Re.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?VHe(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Re.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?HHe.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Re.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?WHe(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Re.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?$He.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"duration",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?GHe(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"ip",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?KHe(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"jwt",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?ZHe(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"cidr",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?zHe.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"base64",code:Re.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?qHe.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"base64url",code:Re.invalid_string,message:a.message}),r.dirty()):Jt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Re.invalid_string,...nt.errToObj(r)})}_addCheck(e){return new Au({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...nt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...nt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...nt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...nt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...nt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...nt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...nt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...nt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...nt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...nt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...nt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...nt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...nt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...nt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...nt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...nt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...nt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...nt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...nt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...nt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...nt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...nt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...nt.errToObj(n)})}nonempty(e){return this.min(1,nt.errToObj(e))}trim(){return new Au({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Au({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Au({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Au.create=t=>new Au({checks:[],typeName:be.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ft(t)});function XHe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return a%s/10**i}class qv extends Kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ze.number){const a=this._getOrReturnCtx(e);return Le(a,{code:Re.invalid_type,expected:Ze.number,received:a.parsedType}),Et}let r;const i=new Xa;for(const a of this._def.checks)a.kind==="int"?Jt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Le(r,{code:Re.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Re.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Re.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?XHe(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Re.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Le(r,{code:Re.not_finite,message:a.message}),i.dirty()):Jt.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,nt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,nt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,nt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,nt.toString(n))}setLimit(e,n,r,i){return new qv({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:nt.toString(i)}]})}_addCheck(e){return new qv({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:nt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:nt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:nt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:nt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:nt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:nt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:nt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:nt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:nt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Jt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}qv.create=t=>new qv({checks:[],typeName:be.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ft(t)});class Hv extends Kt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ze.bigint)return this._getInvalidInput(e);let r;const i=new Xa;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Re.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Re.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Re.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Jt.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Le(n,{code:Re.invalid_type,expected:Ze.bigint,received:n.parsedType}),Et}gte(e,n){return this.setLimit("min",e,!0,nt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,nt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,nt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,nt.toString(n))}setLimit(e,n,r,i){return new Hv({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:nt.toString(i)}]})}_addCheck(e){return new Hv({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:nt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:nt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:nt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:nt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:nt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Hv.create=t=>new Hv({checks:[],typeName:be.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ft(t)});class MW extends Kt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ze.boolean){const r=this._getOrReturnCtx(e);return Le(r,{code:Re.invalid_type,expected:Ze.boolean,received:r.parsedType}),Et}return Bs(e.data)}}MW.create=t=>new MW({typeName:be.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ft(t)});class y1 extends Kt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ze.date){const a=this._getOrReturnCtx(e);return Le(a,{code:Re.invalid_type,expected:Ze.date,received:a.parsedType}),Et}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Le(a,{code:Re.invalid_date}),Et}const r=new Xa;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:Re.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:Re.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Jt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new y1({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:nt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:nt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}y1.create=t=>new y1({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:be.ZodDate,...Ft(t)});class LW extends Kt{_parse(e){if(this._getType(e)!==Ze.symbol){const r=this._getOrReturnCtx(e);return Le(r,{code:Re.invalid_type,expected:Ze.symbol,received:r.parsedType}),Et}return Bs(e.data)}}LW.create=t=>new LW({typeName:be.ZodSymbol,...Ft(t)});class DW extends Kt{_parse(e){if(this._getType(e)!==Ze.undefined){const r=this._getOrReturnCtx(e);return Le(r,{code:Re.invalid_type,expected:Ze.undefined,received:r.parsedType}),Et}return Bs(e.data)}}DW.create=t=>new DW({typeName:be.ZodUndefined,...Ft(t)});class BW extends Kt{_parse(e){if(this._getType(e)!==Ze.null){const r=this._getOrReturnCtx(e);return Le(r,{code:Re.invalid_type,expected:Ze.null,received:r.parsedType}),Et}return Bs(e.data)}}BW.create=t=>new BW({typeName:be.ZodNull,...Ft(t)});class _2 extends Kt{constructor(){super(...arguments),this._any=!0}_parse(e){return Bs(e.data)}}_2.create=t=>new _2({typeName:be.ZodAny,...Ft(t)});class FW extends Kt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Bs(e.data)}}FW.create=t=>new FW({typeName:be.ZodUnknown,...Ft(t)});class qu extends Kt{_parse(e){const n=this._getOrReturnCtx(e);return Le(n,{code:Re.invalid_type,expected:Ze.never,received:n.parsedType}),Et}}qu.create=t=>new qu({typeName:be.ZodNever,...Ft(t)});class UW extends Kt{_parse(e){if(this._getType(e)!==Ze.undefined){const r=this._getOrReturnCtx(e);return Le(r,{code:Re.invalid_type,expected:Ze.void,received:r.parsedType}),Et}return Bs(e.data)}}UW.create=t=>new UW({typeName:be.ZodVoid,...Ft(t)});class yl extends Kt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Ze.array)return Le(n,{code:Re.invalid_type,expected:Ze.array,received:n.parsedType}),Et;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(s||o)&&(Le(n,{code:s?Re.too_big:Re.too_small,minimum:o?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Le(n,{code:Re.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Le(n,{code:Re.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>i.type._parseAsync(new zu(n,s,n.path,o)))).then(s=>Xa.mergeArray(r,s));const a=[...n.data].map((s,o)=>i.type._parseSync(new zu(n,s,n.path,o)));return Xa.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new yl({...this._def,minLength:{value:e,message:nt.toString(n)}})}max(e,n){return new yl({...this._def,maxLength:{value:e,message:nt.toString(n)}})}length(e,n){return new yl({...this._def,exactLength:{value:e,message:nt.toString(n)}})}nonempty(e){return this.min(1,e)}}yl.create=(t,e)=>new yl({type:t,minLength:null,maxLength:null,exactLength:null,typeName:be.ZodArray,...Ft(e)});function Ah(t){if(t instanceof gr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Iu.create(Ah(r))}return new gr({...t._def,shape:()=>e})}else return t instanceof yl?new yl({...t._def,type:Ah(t.element)}):t instanceof Iu?Iu.create(Ah(t.unwrap())):t instanceof tm?tm.create(Ah(t.unwrap())):t instanceof gf?gf.create(t.items.map(e=>Ah(e))):t}class gr extends Kt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Jt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Ze.object){const c=this._getOrReturnCtx(e);return Le(c,{code:Re.invalid_type,expected:Ze.object,received:c.parsedType}),Et}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof qu&&this._def.unknownKeys==="strip"))for(const c in i.data)s.includes(c)||o.push(c);const l=[];for(const c of s){const u=a[c],f=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new zu(i,f,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof qu){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")o.length>0&&(Le(i,{code:Re.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const f=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new zu(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,p=await u.value;c.push({key:f,value:p,alwaysSet:u.alwaysSet})}return c}).then(c=>Xa.mergeObjectSync(r,c)):Xa.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return nt.errToObj,new gr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,s;const i=((s=(a=this._def).errorMap)==null?void 0:s.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:nt.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new gr({...this._def,unknownKeys:"strip"})}passthrough(){return new gr({...this._def,unknownKeys:"passthrough"})}extend(e){return new gr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new gr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:be.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new gr({...this._def,catchall:e})}pick(e){const n={};for(const r of Jt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new gr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Jt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new gr({...this._def,shape:()=>n})}deepPartial(){return Ah(this)}partial(e){const n={};for(const r of Jt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new gr({...this._def,shape:()=>n})}required(e){const n={};for(const r of Jt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Iu;)a=a._def.innerType;n[r]=a}return new gr({...this._def,shape:()=>n})}keyof(){return Mie(Jt.objectKeys(this.shape))}}gr.create=(t,e)=>new gr({shape:()=>t,unknownKeys:"strip",catchall:qu.create(),typeName:be.ZodObject,...Ft(e)});gr.strictCreate=(t,e)=>new gr({shape:()=>t,unknownKeys:"strict",catchall:qu.create(),typeName:be.ZodObject,...Ft(e)});gr.lazycreate=(t,e)=>new gr({shape:t,unknownKeys:"strip",catchall:qu.create(),typeName:be.ZodObject,...Ft(e)});class v1 extends Kt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=a.map(o=>new kc(o.ctx.common.issues));return Le(n,{code:Re.invalid_union,unionErrors:s}),Et}if(n.common.async)return Promise.all(r.map(async a=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let a;const s=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(l=>new kc(l));return Le(n,{code:Re.invalid_union,unionErrors:o}),Et}}get options(){return this._def.options}}v1.create=(t,e)=>new v1({options:t,typeName:be.ZodUnion,...Ft(e)});function w2(t,e){const n=wu(t),r=wu(e);if(t===e)return{valid:!0,data:t};if(n===Ze.object&&r===Ze.object){const i=Jt.objectKeys(e),a=Jt.objectKeys(t).filter(o=>i.indexOf(o)!==-1),s={...t,...e};for(const o of a){const l=w2(t[o],e[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(n===Ze.array&&r===Ze.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const s=t[a],o=e[a],l=w2(s,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===Ze.date&&r===Ze.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class b1 extends Kt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,s)=>{if(RW(a)||RW(s))return Et;const o=w2(a.value,s.value);return o.valid?((jW(a)||jW(s))&&n.dirty(),{status:n.value,value:o.data}):(Le(r,{code:Re.invalid_intersection_types}),Et)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,s])=>i(a,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}b1.create=(t,e,n)=>new b1({left:t,right:e,typeName:be.ZodIntersection,...Ft(n)});class gf extends Kt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ze.array)return Le(r,{code:Re.invalid_type,expected:Ze.array,received:r.parsedType}),Et;if(r.data.length<this._def.items.length)return Le(r,{code:Re.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Et;!this._def.rest&&r.data.length>this._def.items.length&&(Le(r,{code:Re.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new zu(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(a).then(s=>Xa.mergeArray(n,s)):Xa.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new gf({...this._def,rest:e})}}gf.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new gf({items:t,typeName:be.ZodTuple,rest:null,...Ft(e)})};class zW extends Kt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ze.map)return Le(r,{code:Re.invalid_type,expected:Ze.map,received:r.parsedType}),Et;const i=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([o,l],c)=>({key:i._parse(new zu(r,o,r.path,[c,"key"])),value:a._parse(new zu(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Et;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(c.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of s){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Et;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(c.value,u.value)}return{status:n.value,value:o}}}}zW.create=(t,e,n)=>new zW({valueType:e,keyType:t,typeName:be.ZodMap,...Ft(n)});class Wv extends Kt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ze.set)return Le(r,{code:Re.invalid_type,expected:Ze.set,received:r.parsedType}),Et;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Le(r,{code:Re.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Le(r,{code:Re.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function s(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Et;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((l,c)=>a._parse(new zu(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(e,n){return new Wv({...this._def,minSize:{value:e,message:nt.toString(n)}})}max(e,n){return new Wv({...this._def,maxSize:{value:e,message:nt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Wv.create=(t,e)=>new Wv({valueType:t,minSize:null,maxSize:null,typeName:be.ZodSet,...Ft(e)});class qW extends Kt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}qW.create=(t,e)=>new qW({getter:t,typeName:be.ZodLazy,...Ft(e)});class HW extends Kt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Le(n,{received:n.data,code:Re.invalid_literal,expected:this._def.value}),Et}return{status:"valid",value:e.data}}get value(){return this._def.value}}HW.create=(t,e)=>new HW({value:t,typeName:be.ZodLiteral,...Ft(e)});function Mie(t,e){return new Qp({values:t,typeName:be.ZodEnum,...Ft(e)})}class Qp extends Kt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Le(n,{expected:Jt.joinValues(r),received:n.parsedType,code:Re.invalid_type}),Et}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Le(n,{received:n.data,code:Re.invalid_enum_value,options:r}),Et}return Bs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Qp.create(e,{...this._def,...n})}exclude(e,n=this._def){return Qp.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Qp.create=Mie;class WW extends Kt{_parse(e){const n=Jt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ze.string&&r.parsedType!==Ze.number){const i=Jt.objectValues(n);return Le(r,{expected:Jt.joinValues(i),received:r.parsedType,code:Re.invalid_type}),Et}if(this._cache||(this._cache=new Set(Jt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Jt.objectValues(n);return Le(r,{received:r.data,code:Re.invalid_enum_value,options:i}),Et}return Bs(e.data)}get enum(){return this._def.values}}WW.create=(t,e)=>new WW({values:t,typeName:be.ZodNativeEnum,...Ft(e)});class _1 extends Kt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ze.promise&&n.common.async===!1)return Le(n,{code:Re.invalid_type,expected:Ze.promise,received:n.parsedType}),Et;const r=n.parsedType===Ze.promise?n.data:Promise.resolve(n.data);return Bs(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}_1.create=(t,e)=>new _1({type:t,typeName:be.ZodPromise,...Ft(e)});class em extends Kt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===be.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:s=>{Le(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const s=i.transform(r.data,a);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return Et;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?Et:l.status==="dirty"||n.value==="dirty"?ty(l.value):l});{if(n.value==="aborted")return Et;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?Et:o.status==="dirty"||n.value==="dirty"?ty(o.value):o}}if(i.type==="refinement"){const s=o=>{const l=i.refinement(o,a);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Et:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?Et:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Yp(s))return Et;const o=i.transform(s.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Yp(s)?Promise.resolve(i.transform(s.value,a)).then(o=>({status:n.value,value:o})):Et);Jt.assertNever(i)}}em.create=(t,e,n)=>new em({schema:t,typeName:be.ZodEffects,effect:e,...Ft(n)});em.createWithPreprocess=(t,e,n)=>new em({schema:e,effect:{type:"preprocess",transform:t},typeName:be.ZodEffects,...Ft(n)});class Iu extends Kt{_parse(e){return this._getType(e)===Ze.undefined?Bs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Iu.create=(t,e)=>new Iu({innerType:t,typeName:be.ZodOptional,...Ft(e)});class tm extends Kt{_parse(e){return this._getType(e)===Ze.null?Bs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tm.create=(t,e)=>new tm({innerType:t,typeName:be.ZodNullable,...Ft(e)});class x2 extends Kt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ze.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}x2.create=(t,e)=>new x2({innerType:t,typeName:be.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ft(e)});class S2 extends Kt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return g1(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new kc(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new kc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}S2.create=(t,e)=>new S2({innerType:t,typeName:be.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ft(e)});class VW extends Kt{_parse(e){if(this._getType(e)!==Ze.nan){const r=this._getOrReturnCtx(e);return Le(r,{code:Re.invalid_type,expected:Ze.nan,received:r.parsedType}),Et}return{status:"valid",value:e.data}}}VW.create=t=>new VW({typeName:be.ZodNaN,...Ft(t)});class JHe extends Kt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class JL extends Kt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Et:a.status==="dirty"?(n.dirty(),ty(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Et:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new JL({in:e,out:n,typeName:be.ZodPipeline})}}class T2 extends Kt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Yp(i)&&(i.value=Object.freeze(i.value)),i);return g1(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}T2.create=(t,e)=>new T2({innerType:t,typeName:be.ZodReadonly,...Ft(e)});var be;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(be||(be={}));const Lie=Au.create,GW=_2.create;qu.create;yl.create;const Die=gr.create;v1.create;b1.create;gf.create;Qp.create;_1.create;Iu.create;tm.create;function YHe(t,e){var r,i,a;const n={type:"array"};return(r=t.type)!=null&&r._def&&((a=(i=t.type)==null?void 0:i._def)==null?void 0:a.typeName)!==be.ZodAny&&(n.items=on(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&un(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&un(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(un(n,"minItems",t.exactLength.value,t.exactLength.message,e),un(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function QHe(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?un(n,"minimum",r.value,r.message,e):un(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),un(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?un(n,"maximum",r.value,r.message,e):un(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),un(n,"maximum",r.value,r.message,e));break;case"multipleOf":un(n,"multipleOf",r.value,r.message,e);break}return n}function eWe(){return{type:"boolean"}}function Bie(t,e){return on(t.type._def,e)}const tWe=(t,e)=>on(t.innerType._def,e);function Fie(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map(i=>Fie(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return nWe(t,e)}}const nWe=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":un(n,"minimum",r.value,r.message,e);break;case"max":un(n,"maximum",r.value,r.message,e);break}return n};function rWe(t,e){return{...on(t.innerType._def,e),default:t.defaultValue()}}function iWe(t,e){return e.effectStrategy==="input"?on(t.schema._def,e):Za(e)}function aWe(t){return{type:"string",enum:Array.from(t.values)}}const sWe=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function oWe(t,e){const n=[on(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),on(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(a=>{if(sWe(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let s=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...l}=a;s=l}else r=void 0;i.push(s)}}),i.length?{allOf:i,...r}:void 0}function lWe(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let pP;const Qs={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(pP===void 0&&(pP=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),pP),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Uie(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":un(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":un(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":eo(n,"email",r.message,e);break;case"format:idn-email":eo(n,"idn-email",r.message,e);break;case"pattern:zod":Pi(n,Qs.email,r.message,e);break}break;case"url":eo(n,"uri",r.message,e);break;case"uuid":eo(n,"uuid",r.message,e);break;case"regex":Pi(n,r.regex,r.message,e);break;case"cuid":Pi(n,Qs.cuid,r.message,e);break;case"cuid2":Pi(n,Qs.cuid2,r.message,e);break;case"startsWith":Pi(n,RegExp(`^${mP(r.value,e)}`),r.message,e);break;case"endsWith":Pi(n,RegExp(`${mP(r.value,e)}$`),r.message,e);break;case"datetime":eo(n,"date-time",r.message,e);break;case"date":eo(n,"date",r.message,e);break;case"time":eo(n,"time",r.message,e);break;case"duration":eo(n,"duration",r.message,e);break;case"length":un(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),un(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":Pi(n,RegExp(mP(r.value,e)),r.message,e);break;case"ip":r.version!=="v6"&&eo(n,"ipv4",r.message,e),r.version!=="v4"&&eo(n,"ipv6",r.message,e);break;case"base64url":Pi(n,Qs.base64url,r.message,e);break;case"jwt":Pi(n,Qs.jwt,r.message,e);break;case"cidr":r.version!=="v6"&&Pi(n,Qs.ipv4Cidr,r.message,e),r.version!=="v4"&&Pi(n,Qs.ipv6Cidr,r.message,e);break;case"emoji":Pi(n,Qs.emoji(),r.message,e);break;case"ulid":Pi(n,Qs.ulid,r.message,e);break;case"base64":switch(e.base64Strategy){case"format:binary":eo(n,"binary",r.message,e);break;case"contentEncoding:base64":un(n,"contentEncoding","base64",r.message,e);break;case"pattern:zod":Pi(n,Qs.base64,r.message,e);break}break;case"nanoid":Pi(n,Qs.nanoid,r.message,e);break}return n}function mP(t,e){return e.patternStrategy==="escape"?uWe(t):t}const cWe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function uWe(t){let e="";for(let n=0;n<t.length;n++)cWe.has(t[n])||(e+="\\"),e+=t[n];return e}function eo(t,e,n,r){var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):un(t,"format",e,n,r)}function Pi(t,e,n,r){var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:KW(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):un(t,"pattern",KW(e,r),n,r)}function KW(t,e){var l;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let i="",a=!1,s=!1,o=!1;for(let c=0;c<r.length;c++){if(a){i+=r[c],a=!1;continue}if(n.i){if(s){if(r[c].match(/[a-z]/)){o?(i+=r[c],i+=`${r[c-2]}-${r[c]}`.toUpperCase(),o=!1):r[c+1]==="-"&&((l=r[c+2])!=null&&l.match(/[a-z]/))?(i+=r[c],o=!0):i+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){i+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){i+=s?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}i+=r[c],r[c]==="\\"?a=!0:s&&r[c]==="]"?s=!1:!s&&r[c]==="["&&(s=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function zie(t,e){var r,i,a,s,o,l;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===be.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((c,u)=>({...c,[u]:on(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",u]})??Za(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:on(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((i=t.keyType)==null?void 0:i._def.typeName)===be.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){const{type:c,...u}=Uie(t.keyType._def,e);return{...n,propertyNames:u}}else{if(((s=t.keyType)==null?void 0:s._def.typeName)===be.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((o=t.keyType)==null?void 0:o._def.typeName)===be.ZodBranded&&t.keyType._def.type._def.typeName===be.ZodString&&((l=t.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...u}=Bie(t.keyType._def,e);return{...n,propertyNames:u}}}return n}function dWe(t,e){return e.mapStrategy==="record"?zie(t,e):{type:"array",maxItems:125,items:{type:"array",items:[on(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Za(e),on(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Za(e)],minItems:2,maxItems:2}}}function fWe(t){const e=t.values,n=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),r=Array.from(new Set(n.map(i=>typeof i)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:n}}function hWe(t){return t.target==="openAi"?void 0:{not:Za({...t,currentPath:[...t.currentPath,"not"]})}}function pWe(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const w1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function mWe(t,e){if(e.target==="openApi3")return ZW(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in w1&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,a)=>{const s=w1[a._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,a)=>{const s=typeof a._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":return a._def.value===null?[...i,"null"]:i;default:return i}},[]);if(r.length===n.length){const i=r.filter((a,s,o)=>o.indexOf(a)===s);return{type:i.length>1?i:i[0],enum:n.reduce((a,s)=>a.includes(s._def.value)?a:[...a,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(a=>!r.includes(a))],[])};return ZW(t,e)}const ZW=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>on(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function gWe(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:w1[t.innerType._def.typeName],nullable:!0}:{type:[w1[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=on(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=on(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function yWe(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",Rie(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?un(n,"minimum",r.value,r.message,e):un(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),un(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?un(n,"maximum",r.value,r.message,e):un(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),un(n,"maximum",r.value,r.message,e));break;case"multipleOf":un(n,"multipleOf",r.value,r.message,e);break}return n}function vWe(t,e){const n=e.target==="openAi",r={type:"object",properties:{}},i=[],a=t.shape();for(const o in a){let l=a[o];if(l===void 0||l._def===void 0)continue;let c=_We(l);c&&n&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const u=on(l._def,{...e,currentPath:[...e.currentPath,"properties",o],propertyPath:[...e.currentPath,"properties",o]});u!==void 0&&(r.properties[o]=u,c||i.push(o))}i.length&&(r.required=i);const s=bWe(t,e);return s!==void 0&&(r.additionalProperties=s),r}function bWe(t,e){if(t.catchall._def.typeName!=="ZodNever")return on(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function _We(t){try{return t.isOptional()}catch{return!0}}const wWe=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return on(t.innerType._def,e);const n=on(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Za(e)},n]}:Za(e)},xWe=(t,e)=>{if(e.pipeStrategy==="input")return on(t.in._def,e);if(e.pipeStrategy==="output")return on(t.out._def,e);const n=on(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]});return{allOf:[n,on(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]})].filter(r=>r!==void 0)}};function SWe(t,e){return on(t.type._def,e)}function TWe(t,e){const n={type:"array",uniqueItems:!0,items:on(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&un(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&un(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function EWe(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>on(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:on(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>on(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function AWe(t){return{not:Za(t)}}function OWe(t){return Za(t)}const CWe=(t,e)=>on(t.innerType._def,e),kWe=(t,e,n)=>{switch(e){case be.ZodString:return Uie(t,n);case be.ZodNumber:return yWe(t,n);case be.ZodObject:return vWe(t,n);case be.ZodBigInt:return QHe(t,n);case be.ZodBoolean:return eWe();case be.ZodDate:return Fie(t,n);case be.ZodUndefined:return AWe(n);case be.ZodNull:return pWe(n);case be.ZodArray:return YHe(t,n);case be.ZodUnion:case be.ZodDiscriminatedUnion:return mWe(t,n);case be.ZodIntersection:return oWe(t,n);case be.ZodTuple:return EWe(t,n);case be.ZodRecord:return zie(t,n);case be.ZodLiteral:return lWe(t,n);case be.ZodEnum:return aWe(t);case be.ZodNativeEnum:return fWe(t);case be.ZodNullable:return gWe(t,n);case be.ZodOptional:return wWe(t,n);case be.ZodMap:return dWe(t,n);case be.ZodSet:return TWe(t,n);case be.ZodLazy:return()=>t.getter()._def;case be.ZodPromise:return SWe(t,n);case be.ZodNaN:case be.ZodNever:return hWe(n);case be.ZodEffects:return iWe(t,n);case be.ZodAny:return Za(n);case be.ZodUnknown:return OWe(n);case be.ZodDefault:return rWe(t,n);case be.ZodBranded:return Bie(t,n);case be.ZodReadonly:return CWe(t,n);case be.ZodCatch:return tWe(t,n);case be.ZodPipeline:return xWe(t,n);case be.ZodFunction:case be.ZodVoid:case be.ZodSymbol:return;default:return(r=>{})()}};function on(t,e,n=!1){var o;const r=e.seen.get(t);if(e.override){const l=(o=e.override)==null?void 0:o.call(e,t,e,r,n);if(l!==xHe)return l}if(r&&!n){const l=NWe(r,e);if(l!==void 0)return l}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const a=kWe(t,t.typeName,e),s=typeof a=="function"?on(a(),e):a;if(s&&IWe(t,e,s),e.postProcess){const l=e.postProcess(s,t,e);return i.jsonSchema=s,l}return i.jsonSchema=s,s}const NWe=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:Pie(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Za(e)):e.$refStrategy==="seen"?Za(e):void 0}},IWe=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),PWe=(t,e)=>{const n=EHe(e);let r;const i=e==null?void 0:e.name,a=on(t._def,n,!1)??Za(n);n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const s=i===void 0?r?{...a,[n.definitionPath]:r}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:a}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};function E2(t,e){const n=typeof t;if(n!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!E2(t[i],e[i]))return!1;return!0}if(n==="object"){if(!t||!e)return t===e;const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!E2(t[s],e[s]))return!1;return!0}return t===e}function ca(t,e){if(ts(t)){const n=yHe(t,!0);return Iy(n)?lR(v2(n,!0),e):lR(t,e)}return Pl(t)?PWe(t):t}function RWe(t,e){if(t!==void 0&&!Cy(t))return t;if(ZL(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function jWe(t){return ZL(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...ca(t.data.schema),title:t.data.name}}}var qie=class Hie{constructor(e){U(this,"nodes",{});U(this,"edges",[]);this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=Cy(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...jWe(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const i=n??Ld(),a={id:i,data:e,name:RWe(n,e),metadata:r};return this.nodes[i]=a,a}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const a={source:e.id,target:n.id,data:r,conditional:i};return this.edges.push(a),a}firstNode(){return XW(this)}lastNode(){return JW(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(l=>l.id).every(Cy)&&(r="");const i=l=>r?`${r}:${l}`:l;Object.entries(e.nodes).forEach(([l,c])=>{this.nodes[i(l)]={...c,id:i(l)}});const a=e.edges.map(l=>({...l,source:i(l.source),target:i(l.target)}));this.edges=[...this.edges,...a];const s=e.firstNode(),o=e.lastNode();return[s?{id:i(s.id),data:s.data}:void 0,o?{id:i(o.id),data:o.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&XW(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&JW(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),n=new Map;Object.values(e).forEach(i=>{n.set(i,(n.get(i)||0)+1)});const r=i=>{const a=e[i];return Cy(i)&&n.get(a)===1?a:i};return new Hie({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,a])=>[r(i),{...a,id:r(i)}])),edges:this.edges.map(i=>({...i,source:r(i.source),target:r(i.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:a}=e??{},s=this.reid(),o=s.firstNode(),l=s.lastNode();return _He(s.nodes,s.edges,{firstNode:o==null?void 0:o.id,lastNode:l==null?void 0:l.id,withStyles:n,curveStyle:r,nodeColors:i,wrapLabelNWords:a})}async drawMermaidPng(e){return wHe(this.drawMermaid(e),{backgroundColor:e==null?void 0:e.backgroundColor})}};function XW(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function JW(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function $We(t){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const i of t)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return Al.fromReadableStream(n)}function YW(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const MWe=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function A2(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*QW(t,e){for(;;){const{value:n,done:r}=Fu.runWithConfig(Xp(t),e.next.bind(e),!0);if(r)break;yield n}}async function*O2(t,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:i}=await Fu.runWithConfig(Xp(t),n.next.bind(e),!0);if(i)break;yield r}}function qr(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}var Hr=class extends Mv{constructor(){super(...arguments);U(this,"lc_runnable",!0);U(this,"name")}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}withRetry(e){return new Vie({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new x1({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new BWe({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(cn);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:n},(i,a)=>cn(a===0?e:r))}return Array.from({length:n},()=>cn(e))}async batch(e,n,r){var o;const i=this._getOptionsList(n??{},e.length),a=new KL({maxConcurrency:((o=i[0])==null?void 0:o.maxConcurrency)??(r==null?void 0:r.maxConcurrency),onFailedAttempt:l=>{throw l}}),s=e.map((l,c)=>a.call(async()=>{try{return await this.invoke(l,i[c])}catch(u){if(r!=null&&r.returnExceptions)return u;throw u}}));return Promise.all(s)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=cn(n),i=new Sm({generator:this._streamIterator(e,r),config:r});return await i.setup,Al.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=cn(e):n=cn({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){var o;const i=cn(r),a=await((o=await xo(i))==null?void 0:o.handleChainStart(this.toJSON(),qr(n,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(i==null?void 0:i.runName)??this.getName()));delete i.runId;let s;try{s=await Uu(e.call(this,n,i,a),r==null?void 0:r.signal)}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(qr(s,"output"))),s}async _batchWithConfig(e,n,r,i){var c;const a=this._getOptionsList(r??{},n.length),s=await Promise.all(a.map(xo)),o=await Promise.all(s.map(async(u,f)=>{const p=await(u==null?void 0:u.handleChainStart(this.toJSON(),qr(n[f],"input"),a[f].runId,a[f].runType,void 0,void 0,a[f].runName??this.getName()));return delete a[f].runId,p}));let l;try{l=await Uu(e.call(this,n,a,o,i),(c=a==null?void 0:a[0])==null?void 0:c.signal)}catch(u){throw await Promise.all(o.map(f=>f==null?void 0:f.handleChainError(u))),u}return await Promise.all(o.map(u=>u==null?void 0:u.handleChainEnd(qr(l,"output")))),l}_concatOutputChunks(e,n){return bT(e,n)}async*_transformStreamWithConfig(e,n,r){let i,a=!0,s,o=!0;const l=cn(r),c=await xo(l),u=this;async function*f(){for await(const m of e){if(a)if(i===void 0)i=m;else try{i=u._concatOutputChunks(i,m)}catch{i=void 0,a=!1}yield m}}let p;try{const m=await U7e(n.bind(this),f(),async()=>c==null?void 0:c.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,l.runName??this.getName(),void 0,{lc_defers_inputs:!0}),r==null?void 0:r.signal,l);delete l.runId,p=m.setup;const _=p==null?void 0:p.handlers.find(Y7e);let y=m.output;_!==void 0&&p!==void 0&&(y=_.tapOutputIterable(p.runId,y));const b=p==null?void 0:p.handlers.find(X7e);b!==void 0&&p!==void 0&&(y=b.tapOutputIterable(p.runId,y));for await(const x of y)if(yield x,o)if(s===void 0)s=x;else try{s=this._concatOutputChunks(s,x)}catch{s=void 0,o=!1}}catch(m){throw await(p==null?void 0:p.handleChainError(m,void 0,void 0,void 0,{inputs:qr(i,"input")})),m}await(p==null?void 0:p.handleChainEnd(s??{},void 0,void 0,void 0,{inputs:qr(i,"input")}))}getGraph(e){const n=new qie,r=n.addNode({name:`${this.getName()}Input`,schema:GW()}),i=n.addNode(this),a=n.addNode({name:`${this.getName()}Output`,schema:GW()});return n.addEdge(r,i),n.addEdge(i,a),n}pipe(e){return new Nb({first:this,last:Vd(e)})}pick(e){return this.pipe(new FWe(e))}assign(e){return this.pipe(new Xie(new _T({steps:e})))}async*transform(e,n){let r;for await(const i of e)r===void 0?r=i:r=this._concatOutputChunks(r,i);yield*this._streamIterator(r,cn(n))}async*streamLog(e,n,r){const i=new kW({...r,autoClose:!1,_schemaFormat:"original"}),a=cn(n);yield*this._streamLog(e,i,a)}async*_streamLog(e,n,r){const{callbacks:i}=r;if(i===void 0)r.callbacks=[n];else if(Array.isArray(i))r.callbacks=i.concat([n]);else{const l=i.copy();l.addHandler(n,!0),r.callbacks=l}const a=this.stream(e,r);async function s(){try{const l=await a;for await(const c of l){const u=new _u({ops:[{op:"add",path:"/streamed_output/-",value:c}]});await n.writer.write(u)}}finally{await n.writer.close()}}const o=s();try{for await(const l of n)yield l}finally{await o}}streamEvents(e,n,r){let i;if(n.version==="v1")i=this._streamEventsV1(e,n,r);else if(n.version==="v2")i=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?$We(i):Al.fromAsyncGenerator(i)}async*_streamEventsV2(e,n,r){var _;const i=new Q7e({...r,autoClose:!1}),a=cn(n),s=a.runId??Ld();a.runId=s;const o=a.callbacks;if(o===void 0)a.callbacks=[i];else if(Array.isArray(o))a.callbacks=o.concat(i);else{const y=o.copy();y.addHandler(i,!0),a.callbacks=y}const l=new AbortController,c=this;async function u(){let y,b=null;try{n!=null&&n.signal?"any"in AbortSignal?y=AbortSignal.any([l.signal,n.signal]):(y=n.signal,b=()=>{l.abort()},n.signal.addEventListener("abort",b,{once:!0})):y=l.signal;const x=await c.stream(e,{...a,signal:y}),w=i.tapOutputIterable(s,x);for await(const T of w)if(l.signal.aborted)break}finally{await i.finish(),y&&b&&y.removeEventListener("abort",b)}}const f=u();let p=!1,m;try{for await(const y of i){if(!p){y.data.input=e,p=!0,m=y.run_id,yield y;continue}y.run_id===m&&y.event.endsWith("_end")&&(_=y.data)!=null&&_.input&&delete y.data.input,yield y}}finally{l.abort(),await f}}async*_streamEventsV1(e,n,r){let i,a=!1;const s=cn(n),o=s.tags??[],l=s.metadata??{},c=s.runName??this.getName(),u=new kW({...r,autoClose:!1,_schemaFormat:"streaming_events"}),f=new uHe({...r}),p=this._streamLog(e,u,s);for await(const _ of p){if(i?i=i.concat(_):i=Eie.fromRunLogPatch(_),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!a){a=!0;const w={...i.state},T={run_id:w.id,event:`on_${w.type}_start`,name:c,tags:o,metadata:l,data:{input:e}};f.includeEvent(T,w.type)&&(yield T)}const y=_.ops.filter(w=>w.path.startsWith("/logs/")).map(w=>w.path.split("/")[2]),b=[...new Set(y)];for(const w of b){let T,A={};const E=i.state.logs[w];if(E.end_time===void 0?E.streamed_output.length>0?T="stream":T="start":T="end",T==="start")E.inputs!==void 0&&(A.input=E.inputs);else if(T==="end")E.inputs!==void 0&&(A.input=E.inputs),A.output=E.final_output;else if(T==="stream"){const C=E.streamed_output.length;if(C!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${C} instead. Encountered in: "${E.name}"`);A={chunk:E.streamed_output[0]},E.streamed_output=[]}yield{event:`on_${E.type}_${T}`,name:E.name,run_id:E.id,tags:E.tags,metadata:E.metadata,data:A}}const{state:x}=i;if(x.streamed_output.length>0){const w=x.streamed_output.length;if(w!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${w} instead. Encountered in: "${x.name}"`);const T={chunk:x.streamed_output[0]};x.streamed_output=[];const A={event:`on_${x.type}_stream`,run_id:x.id,tags:o,metadata:l,name:c,data:T};f.includeEvent(A,x.type)&&(yield A)}}const m=i==null?void 0:i.state;if(m!==void 0){const _={event:`on_${m.type}_end`,name:c,run_id:m.id,tags:o,metadata:l,data:{output:m.final_output}};f.includeEvent(_,m.type)&&(yield _)}}static isRunnable(e){return ZL(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new x1({bound:this,config:{},configFactories:[i=>({callbacks:[new Cie({config:i,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return UWe(this,e)}},x1=class Wie extends Hr{constructor(n){super(n);U(this,"lc_namespace",["langchain_core","runnables"]);U(this,"lc_serializable",!0);U(this,"bound");U(this,"config");U(this,"kwargs");U(this,"configFactories");this.bound=n.bound,this.kwargs=n.kwargs,this.config=n.config,this.configFactories=n.configFactories}static lc_name(){return"RunnableBinding"}getName(n){return this.bound.getName(n)}async _mergeConfig(...n){const r=EW(this.config,...n);return EW(r,...this.configFactories?await Promise.all(this.configFactories.map(async i=>await i(r))):[])}withConfig(n){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...n}})}withRetry(n){return new Vie({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:n==null?void 0:n.stopAfterAttempt,...n})}async invoke(n,r){return this.bound.invoke(n,await this._mergeConfig(r,this.kwargs))}async batch(n,r,i){const a=Array.isArray(r)?await Promise.all(r.map(async s=>this._mergeConfig(cn(s),this.kwargs))):await this._mergeConfig(cn(r),this.kwargs);return this.bound.batch(n,a,i)}_concatOutputChunks(n,r){return this.bound._concatOutputChunks(n,r)}async*_streamIterator(n,r){yield*this.bound._streamIterator(n,await this._mergeConfig(cn(r),this.kwargs))}async stream(n,r){return this.bound.stream(n,await this._mergeConfig(cn(r),this.kwargs))}async*transform(n,r){yield*this.bound.transform(n,await this._mergeConfig(cn(r),this.kwargs))}streamEvents(n,r,i){const a=this,s=async function*(){yield*a.bound.streamEvents(n,{...await a._mergeConfig(cn(r),a.kwargs),version:r.version},i)};return Al.fromAsyncGenerator(s())}static isRunnableBinding(n){return n.bound&&Hr.isRunnable(n.bound)}withListeners({onStart:n,onEnd:r,onError:i}){return new Wie({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[a=>({callbacks:[new Cie({config:a,onStart:n,onEnd:r,onError:i})]})]})}},Vie=class extends x1{constructor(e){super(e);U(this,"lc_namespace",["langchain_core","runnables"]);U(this,"maxAttemptNumber",3);U(this,"onFailedAttempt",()=>{});this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}static lc_name(){return"RunnableRetry"}_patchConfigForRetry(e,n,r){const i=e>1?`retry:attempt:${e}`:void 0;return Di(n,{callbacks:r==null?void 0:r.getChild(i)})}async _invoke(e,n,r){return y2(i=>super.invoke(e,this._patchConfigForRetry(i,n,r)),{onFailedAttempt:({error:i})=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,i){const a={};try{await y2(async s=>{const o=e.map((p,m)=>m).filter(p=>a[p.toString()]===void 0||a[p.toString()]instanceof Error),l=o.map(p=>e[p]),c=o.map(p=>this._patchConfigForRetry(s,n==null?void 0:n[p],r==null?void 0:r[p])),u=await super.batch(l,c,{...i,returnExceptions:!0});let f;for(let p=0;p<u.length;p+=1){const m=u[p],_=o[p];m instanceof Error&&f===void 0&&(f=m,f.input=l[p]),a[_.toString()]=m}if(f)throw f;return u},{onFailedAttempt:({error:s})=>this.onFailedAttempt(s,s.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(s){if((i==null?void 0:i.returnExceptions)!==!0)throw s}return Object.keys(a).sort((s,o)=>parseInt(s,10)-parseInt(o,10)).map(s=>a[parseInt(s,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}},Nb=class ny extends Hr{constructor(n){super(n);U(this,"first");U(this,"middle",[]);U(this,"last");U(this,"omitSequenceTags",!1);U(this,"lc_serializable",!0);U(this,"lc_namespace",["langchain_core","runnables"]);this.first=n.first,this.middle=n.middle??this.middle,this.last=n.last,this.name=n.name,this.omitSequenceTags=n.omitSequenceTags??this.omitSequenceTags}static lc_name(){return"RunnableSequence"}get steps(){return[this.first,...this.middle,this.last]}async invoke(n,r){var l,c;const i=cn(r),a=await((l=await xo(i))==null?void 0:l.handleChainStart(this.toJSON(),qr(n,"input"),i.runId,void 0,void 0,void 0,i==null?void 0:i.runName));delete i.runId;let s=n,o;try{const u=[this.first,...this.middle];for(let f=0;f<u.length;f+=1)s=await Uu(u[f].invoke(s,Di(i,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${f+1}`)})),r==null?void 0:r.signal);if((c=r==null?void 0:r.signal)!=null&&c.aborted)throw f1(r.signal);o=await this.last.invoke(s,Di(i,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(u){throw await(a==null?void 0:a.handleChainError(u)),u}return await(a==null?void 0:a.handleChainEnd(qr(o,"output"))),o}async batch(n,r,i){var c;const a=this._getOptionsList(r??{},n.length),s=await Promise.all(a.map(xo)),o=await Promise.all(s.map(async(u,f)=>{const p=await(u==null?void 0:u.handleChainStart(this.toJSON(),qr(n[f],"input"),a[f].runId,void 0,void 0,void 0,a[f].runName));return delete a[f].runId,p}));let l=n;try{for(let u=0;u<this.steps.length;u+=1)l=await Uu(this.steps[u].batch(l,o.map((f,p)=>{const m=f==null?void 0:f.getChild(this.omitSequenceTags?void 0:`seq:step:${u+1}`);return Di(a[p],{callbacks:m})}),i),(c=a[0])==null?void 0:c.signal)}catch(u){throw await Promise.all(o.map(f=>f==null?void 0:f.handleChainError(u))),u}return await Promise.all(o.map(u=>u==null?void 0:u.handleChainEnd(qr(l,"output")))),l}_concatOutputChunks(n,r){return this.last._concatOutputChunks(n,r)}async*_streamIterator(n,r){var p;const i=await xo(r),{runId:a,...s}=r??{},o=await(i==null?void 0:i.handleChainStart(this.toJSON(),qr(n,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName)),l=[this.first,...this.middle,this.last];let c=!0,u;async function*f(){yield n}try{let m=l[0].transform(f(),Di(s,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let _=1;_<l.length;_+=1)m=await l[_].transform(m,Di(s,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${_+1}`)}));for await(const _ of m)if((p=r==null?void 0:r.signal)==null||p.throwIfAborted(),yield _,c)if(u===void 0)u=_;else try{u=this._concatOutputChunks(u,_)}catch{u=void 0,c=!1}}catch(m){throw await(o==null?void 0:o.handleChainError(m)),m}await(o==null?void 0:o.handleChainEnd(qr(u,"output")))}getGraph(n){const r=new qie;let i=null;return this.steps.forEach((a,s)=>{const o=a.getGraph(n);s!==0&&o.trimFirstNode(),s!==this.steps.length-1&&o.trimLastNode(),r.extend(o);const l=o.firstNode();if(!l)throw new Error(`Runnable ${a} has no first node`);i&&r.addEdge(i,l),i=o.lastNode()}),r}pipe(n){return ny.isRunnableSequence(n)?new ny({first:this.first,middle:this.middle.concat([this.last,n.first,...n.middle]),last:n.last,name:this.name??n.name}):new ny({first:this.first,middle:[...this.middle,this.last],last:Vd(n),name:this.name})}static isRunnableSequence(n){return Array.isArray(n.middle)&&Hr.isRunnable(n)}static from([n,...r],i){let a={};return typeof i=="string"?a.name=i:i!==void 0&&(a=i),new ny({...a,first:Vd(n),middle:r.slice(0,-1).map(Vd),last:Vd(r[r.length-1])})}},_T=class Gie extends Hr{constructor(n){super(n);U(this,"lc_namespace",["langchain_core","runnables"]);U(this,"lc_serializable",!0);U(this,"steps");this.steps={};for(const[r,i]of Object.entries(n.steps))this.steps[r]=Vd(i)}static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}static from(n){return new Gie({steps:n})}async invoke(n,r){var o;const i=cn(r),a=await((o=await xo(i))==null?void 0:o.handleChainStart(this.toJSON(),{input:n},i.runId,void 0,void 0,void 0,i==null?void 0:i.runName));delete i.runId;const s={};try{const l=Object.entries(this.steps).map(async([c,u])=>{s[c]=await u.invoke(n,Di(i,{callbacks:a==null?void 0:a.getChild(`map:key:${c}`)}))});await Uu(Promise.all(l),r==null?void 0:r.signal)}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(s)),s}async*_transform(n,r,i){const a={...this.steps},s=xie(n,Object.keys(a).length),o=new Map(Object.entries(a).map(([l,c],u)=>{const f=c.transform(s[u],Di(i,{callbacks:r==null?void 0:r.getChild(`map:key:${l}`)}));return[l,f.next().then(p=>({key:l,gen:f,result:p}))]}));for(;o.size;){const{key:l,result:c,gen:u}=await Uu(Promise.race(o.values()),i==null?void 0:i.signal);o.delete(l),c.done||(yield{[l]:c.value},o.set(l,u.next().then(f=>({key:l,gen:u,result:f}))))}}transform(n,r){return this._transformStreamWithConfig(n,this._transform.bind(this),r)}async stream(n,r){async function*i(){yield n}const a=cn(r),s=new Sm({generator:this.transform(i(),a),config:a});return await s.setup,Al.fromAsyncGenerator(s)}},LWe=class Kie extends Hr{constructor(n){super(n);U(this,"lc_serializable",!1);U(this,"lc_namespace",["langchain_core","runnables"]);U(this,"func");if(!GL(n.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=n.func}async invoke(n,r){const[i]=this._getOptionsList(r??{},1),a=await xo(i);return Uu(this.func(Di(i,{callbacks:a}),n),i==null?void 0:i.signal)}async*_streamIterator(n,r){var s,o;const[i]=this._getOptionsList(r??{},1),a=await this.invoke(n,r);if(A2(a)){for await(const l of a)(s=i==null?void 0:i.signal)==null||s.throwIfAborted(),yield l;return}if(MWe(a)){for(;;){(o=i==null?void 0:i.signal)==null||o.throwIfAborted();const l=a.next();if(l.done)break;yield l.value}return}yield a}static from(n){return new Kie({func:n})}};function DWe(t){if(GL(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var wT=class Zie extends Hr{constructor(n){if(GL(n.func))return LWe.from(n.func);super(n);U(this,"lc_namespace",["langchain_core","runnables"]);U(this,"func");DWe(n.func),this.func=n.func}static lc_name(){return"RunnableLambda"}static from(n){return new Zie({func:n})}async _invoke(n,r,i){return new Promise((a,s)=>{const o=Di(r,{callbacks:i==null?void 0:i.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??dP)-1});Fu.runWithConfig(Xp(o),async()=>{var l,c;try{let u=await this.func(n,{...o});if(u&&Hr.isRunnable(u)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");u=await u.invoke(n,{...o,recursionLimit:(o.recursionLimit??dP)-1})}else if(A2(u)){let f;for await(const p of O2(o,u))if((l=r==null?void 0:r.signal)==null||l.throwIfAborted(),f===void 0)f=p;else try{f=this._concatOutputChunks(f,p)}catch{f=p}u=f}else if(YW(u)){let f;for(const p of QW(o,u))if((c=r==null?void 0:r.signal)==null||c.throwIfAborted(),f===void 0)f=p;else try{f=this._concatOutputChunks(f,p)}catch{f=p}u=f}a(u)}catch(u){s(u)}})})}async invoke(n,r){return this._callWithConfig(this._invoke.bind(this),n,r)}async*_transform(n,r,i){var l,c;let a;for await(const u of n)if(a===void 0)a=u;else try{a=this._concatOutputChunks(a,u)}catch{a=u}const s=Di(i,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((i==null?void 0:i.recursionLimit)??dP)-1}),o=await new Promise((u,f)=>{Fu.runWithConfig(Xp(s),async()=>{try{u(await this.func(a,{...s,config:s}))}catch(p){f(p)}})});if(o&&Hr.isRunnable(o)){if((i==null?void 0:i.recursionLimit)===0)throw new Error("Recursion limit reached.");const u=await o.stream(a,s);for await(const f of u)yield f}else if(A2(o))for await(const u of O2(s,o))(l=i==null?void 0:i.signal)==null||l.throwIfAborted(),yield u;else if(YW(o))for(const u of QW(s,o))(c=i==null?void 0:i.signal)==null||c.throwIfAborted(),yield u;else yield o}transform(n,r){return this._transformStreamWithConfig(n,this._transform.bind(this),r)}async stream(n,r){async function*i(){yield n}const a=cn(r),s=new Sm({generator:this.transform(i(),a),config:a});return await s.setup,Al.fromAsyncGenerator(s)}},BWe=class extends Hr{constructor(e){super(e);U(this,"lc_namespace",["langchain_core","runnables"]);U(this,"lc_serializable",!0);U(this,"runnable");U(this,"fallbacks");this.runnable=e.runnable,this.fallbacks=e.fallbacks}static lc_name(){return"RunnableWithFallbacks"}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const r=cn(n),i=await xo(r),{runId:a,...s}=r,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),qr(e,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName)),l=Di(s,{callbacks:o==null?void 0:o.getChild()});return await Fu.runWithConfig(l,async()=>{var u;let c;for(const f of this.runnables()){(u=r==null?void 0:r.signal)==null||u.throwIfAborted();try{const p=await f.invoke(e,l);return await(o==null?void 0:o.handleChainEnd(qr(p,"output"))),p}catch(p){c===void 0&&(c=p)}}throw c===void 0?new Error("No error stored at end of fallback."):(await(o==null?void 0:o.handleChainError(c)),c)})}async*_streamIterator(e,n){var f;const r=cn(n),i=await xo(r),{runId:a,...s}=r,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),qr(e,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName));let l,c;for(const p of this.runnables()){(f=r==null?void 0:r.signal)==null||f.throwIfAborted();const m=Di(s,{callbacks:o==null?void 0:o.getChild()});try{c=O2(m,await p.stream(e,m));break}catch(_){l===void 0&&(l=_)}}if(c===void 0){const p=l??new Error("No error stored at end of fallback.");throw await(o==null?void 0:o.handleChainError(p)),p}let u;try{for await(const p of c){yield p;try{u=u===void 0?u:this._concatOutputChunks(u,p)}catch{u=void 0}}}catch(p){throw await(o==null?void 0:o.handleChainError(p)),p}await(o==null?void 0:o.handleChainEnd(qr(u,"output")))}async batch(e,n,r){var l;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(n??{},e.length),a=await Promise.all(i.map(c=>xo(c))),s=await Promise.all(a.map(async(c,u)=>{const f=await(c==null?void 0:c.handleChainStart(this.toJSON(),qr(e[u],"input"),i[u].runId,void 0,void 0,void 0,i[u].runName));return delete i[u].runId,f}));let o;for(const c of this.runnables()){(l=i[0].signal)==null||l.throwIfAborted();try{const u=await c.batch(e,s.map((f,p)=>Di(i[p],{callbacks:f==null?void 0:f.getChild()})),r);return await Promise.all(s.map((f,p)=>f==null?void 0:f.handleChainEnd(qr(u[p],"output")))),u}catch(u){o===void 0&&(o=u)}}throw o?(await Promise.all(s.map(c=>c==null?void 0:c.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}};function Vd(t){if(typeof t=="function")return new wT({func:t});if(Hr.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[n,r]of Object.entries(t))e[n]=Vd(r);return new _T({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var Xie=class extends Hr{constructor(e){e instanceof _T&&(e={mapper:e});super(e);U(this,"lc_namespace",["langchain_core","runnables"]);U(this,"lc_serializable",!0);U(this,"mapper");this.mapper=e.mapper}static lc_name(){return"RunnableAssign"}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const i=this.mapper.getStepsKeys(),[a,s]=xie(e),o=this.mapper.transform(s,Di(r,{callbacks:n==null?void 0:n.getChild()})),l=o.next();for await(const c of a){if(typeof c!="object"||Array.isArray(c))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof c}`);const u=Object.fromEntries(Object.entries(c).filter(([f])=>!i.includes(f)));Object.keys(u).length>0&&(yield u)}yield(await l).value;for await(const c of o)yield c}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=cn(n),a=new Sm({generator:this.transform(r(),i),config:i});return await a.setup,Al.fromAsyncGenerator(a)}},FWe=class extends Hr{constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e});super(e);U(this,"lc_namespace",["langchain_core","runnables"]);U(this,"lc_serializable",!0);U(this,"keys");this.keys=e.keys}static lc_name(){return"RunnablePick"}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=cn(n),a=new Sm({generator:this.transform(r(),i),config:i});return await a.setup,Al.fromAsyncGenerator(a)}},eV=class extends x1{constructor(e){const n=Nb.from([wT.from(async r=>{let i;if(Sre(r))try{i=await Nie(this.schema,r.args)}catch{throw new nze("Received tool input did not match expected schema",JSON.stringify(r.args))}else i=r;return i}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}});U(this,"name");U(this,"description");U(this,"schema");this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function UWe(t,e){const n=e.name??t.getName(),r=e.description??XL(e.schema);return fHe(e.schema)?new eV({name:n,description:r,schema:Die({input:Lie()}).transform(i=>i.input),bound:t}):new eV({name:n,description:r,schema:e.schema,bound:t})}var zWe=class extends Hr{constructor(e){super(e);U(this,"lc_serializable",!0);U(this,"lc_namespace",["langchain_core","prompts",this._getPromptType()]);U(this,"inputVariables");U(this,"outputParser");U(this,"partialVariables");U(this,"metadata");U(this,"tags");const{inputVariables:n}=e;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}get lc_attributes(){return{partialVariables:void 0}}async mergePartialAndUserVariables(e){const n=this.partialVariables??{},r={};for(const[i,a]of Object.entries(n))typeof a=="string"?r[i]=a:r[i]=await a();return{...r,...e}}async invoke(e,n){const r={...this.metadata,...n==null?void 0:n.metadata},i=[...this.tags??[],...(n==null?void 0:n.tags)??[]];return this._callWithConfig(a=>this.formatPromptValue(a),e,{...n,tags:i,metadata:r,runType:"prompt"})}},Jie=class extends Mv{},Yie=class extends Jie{constructor(e){super({value:e});U(this,"lc_namespace",["langchain_core","prompt_values"]);U(this,"lc_serializable",!0);U(this,"value");this.value=e}static lc_name(){return"StringPromptValue"}toString(){return this.value}toChatMessages(){return[new Bv(this.value)]}},qWe=class extends Jie{constructor(e){Array.isArray(e)&&(e={messages:e});super(e);U(this,"lc_namespace",["langchain_core","prompt_values"]);U(this,"lc_serializable",!0);U(this,"messages");this.messages=e.messages}static lc_name(){return"ChatPromptValue"}toString(){return Hre(this.messages)}toChatMessages(){return this.messages}},HWe=class extends zWe{async formatPromptValue(t){return new Yie(await this.format(t))}};/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var WWe=Object.prototype.toString,Tm=Array.isArray||function(e){return WWe.call(e)==="[object Array]"};function YL(t){return typeof t=="function"}function VWe(t){return Tm(t)?"array":typeof t}function gP(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tV(t,e){return t!=null&&typeof t=="object"&&e in t}function GWe(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var KWe=RegExp.prototype.test;function ZWe(t,e){return KWe.call(t,e)}var XWe=/\S/;function JWe(t){return!ZWe(XWe,t)}var YWe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function QWe(t){return String(t).replace(/[&<>"'`=\/]/g,function(n){return YWe[n]})}var eVe=/\s*/,tVe=/\s+/,nV=/\s*=/,nVe=/\s*\}/,rVe=/#|\^|\/|>|\{|&|=|!/;function iVe(t,e){if(!t)return[];var n=!1,r=[],i=[],a=[],s=!1,o=!1,l="",c=0;function u(){if(s&&!o)for(;a.length;)delete i[a.pop()];else a=[];s=!1,o=!1}var f,p,m;function _(N){if(typeof N=="string"&&(N=N.split(tVe,2)),!Tm(N)||N.length!==2)throw new Error("Invalid tags: "+N);f=new RegExp(gP(N[0])+"\\s*"),p=new RegExp("\\s*"+gP(N[1])),m=new RegExp("\\s*"+gP("}"+N[1]))}_(e||ha.tags);for(var y=new Ib(t),b,x,w,T,A,E;!y.eos();){if(b=y.pos,w=y.scanUntil(f),w)for(var C=0,R=w.length;C<R;++C)T=w.charAt(C),JWe(T)?(a.push(i.length),l+=T):(o=!0,n=!0,l+=" "),i.push(["text",T,b,b+1]),b+=1,T===`
`&&(u(),l="",c=0,n=!1);if(!y.scan(f))break;if(s=!0,x=y.scan(rVe)||"name",y.scan(eVe),x==="="?(w=y.scanUntil(nV),y.scan(nV),y.scanUntil(p)):x==="{"?(w=y.scanUntil(m),y.scan(nVe),y.scanUntil(p),x="&"):w=y.scanUntil(p),!y.scan(p))throw new Error("Unclosed tag at "+y.pos);if(x==">"?A=[x,w,b,y.pos,l,c,n]:A=[x,w,b,y.pos],c++,i.push(A),x==="#"||x==="^")r.push(A);else if(x==="/"){if(E=r.pop(),!E)throw new Error('Unopened section "'+w+'" at '+b);if(E[1]!==w)throw new Error('Unclosed section "'+E[1]+'" at '+b)}else x==="name"||x==="{"||x==="&"?o=!0:x==="="&&_(w)}if(u(),E=r.pop(),E)throw new Error('Unclosed section "'+E[1]+'" at '+y.pos);return sVe(aVe(i))}function aVe(t){for(var e=[],n,r,i=0,a=t.length;i<a;++i)n=t[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(e.push(n),r=n));return e}function sVe(t){for(var e=[],n=e,r=[],i,a,s=0,o=t.length;s<o;++s)switch(i=t[s],i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":a=r.pop(),a[5]=i[2],n=r.length>0?r[r.length-1][4]:e;break;default:n.push(i)}return e}function Ib(t){this.string=t,this.tail=t,this.pos=0}Ib.prototype.eos=function(){return this.tail===""};Ib.prototype.scan=function(e){var n=this.tail.match(e);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};Ib.prototype.scanUntil=function(e){var n=this.tail.search(e),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r};function nm(t,e){this.view=t,this.cache={".":this.view},this.parent=e}nm.prototype.push=function(e){return new nm(e,this)};nm.prototype.lookup=function(e){var n=this.cache,r;if(n.hasOwnProperty(e))r=n[e];else{for(var i=this,a,s,o,l=!1;i;){if(e.indexOf(".")>0)for(a=i.view,s=e.split("."),o=0;a!=null&&o<s.length;)o===s.length-1&&(l=tV(a,s[o])||GWe(a,s[o])),a=a[s[o++]];else a=i.view[e],l=tV(i.view,e);if(l){r=a;break}i=i.parent}n[e]=r}return YL(r)&&(r=r.call(this.view)),r};function Vi(){this.templateCache={_cache:{},set:function(e,n){this._cache[e]=n},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}Vi.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};Vi.prototype.parse=function(e,n){var r=this.templateCache,i=e+":"+(n||ha.tags).join(":"),a=typeof r<"u",s=a?r.get(i):void 0;return s==null&&(s=iVe(e,n),a&&r.set(i,s)),s};Vi.prototype.render=function(e,n,r,i){var a=this.getConfigTags(i),s=this.parse(e,a),o=n instanceof nm?n:new nm(n,void 0);return this.renderTokens(s,o,r,e,i)};Vi.prototype.renderTokens=function(e,n,r,i,a){for(var s="",o,l,c,u=0,f=e.length;u<f;++u)c=void 0,o=e[u],l=o[0],l==="#"?c=this.renderSection(o,n,r,i,a):l==="^"?c=this.renderInverted(o,n,r,i,a):l===">"?c=this.renderPartial(o,n,r,a):l==="&"?c=this.unescapedValue(o,n):l==="name"?c=this.escapedValue(o,n,a):l==="text"&&(c=this.rawValue(o)),c!==void 0&&(s+=c);return s};Vi.prototype.renderSection=function(e,n,r,i,a){var s=this,o="",l=n.lookup(e[1]);function c(p){return s.render(p,n,r,a)}if(l){if(Tm(l))for(var u=0,f=l.length;u<f;++u)o+=this.renderTokens(e[4],n.push(l[u]),r,i,a);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")o+=this.renderTokens(e[4],n.push(l),r,i,a);else if(YL(l)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,i.slice(e[3],e[5]),c),l!=null&&(o+=l)}else o+=this.renderTokens(e[4],n,r,i,a);return o}};Vi.prototype.renderInverted=function(e,n,r,i,a){var s=n.lookup(e[1]);if(!s||Tm(s)&&s.length===0)return this.renderTokens(e[4],n,r,i,a)};Vi.prototype.indentPartial=function(e,n,r){for(var i=n.replace(/[^ \t]/g,""),a=e.split(`
`),s=0;s<a.length;s++)a[s].length&&(s>0||!r)&&(a[s]=i+a[s]);return a.join(`
`)};Vi.prototype.renderPartial=function(e,n,r,i){if(r){var a=this.getConfigTags(i),s=YL(r)?r(e[1]):r[e[1]];if(s!=null){var o=e[6],l=e[5],c=e[4],u=s;l==0&&c&&(u=this.indentPartial(s,c,o));var f=this.parse(u,a);return this.renderTokens(f,n,r,u,i)}}};Vi.prototype.unescapedValue=function(e,n){var r=n.lookup(e[1]);if(r!=null)return r};Vi.prototype.escapedValue=function(e,n,r){var i=this.getConfigEscape(r)||ha.escape,a=n.lookup(e[1]);if(a!=null)return typeof a=="number"&&i===ha.escape?String(a):i(a)};Vi.prototype.rawValue=function(e){return e[1]};Vi.prototype.getConfigTags=function(e){return Tm(e)?e:e&&typeof e=="object"?e.tags:void 0};Vi.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!Tm(e))return e.escape};var ha={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){Vv.templateCache=t},get templateCache(){return Vv.templateCache}},Vv=new Vi;ha.clearCache=function(){return Vv.clearCache()};ha.parse=function(e,n){return Vv.parse(e,n)};ha.render=function(e,n,r,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+VWe(e)+'" was given as the first argument for mustache#render(template, view, partials)');return Vv.render(e,n,r,i)};ha.escape=QWe;ha.Scanner=Ib;ha.Context=nm;ha.Writer=Vi;function Qie(){ha.escape=t=>t}const eae=t=>{const e=t.split(""),n=[],r=(a,s)=>{for(let o=s;o<e.length;o+=1)if(a.includes(e[o]))return o;return-1};let i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")n.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")n.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){const a=r("}",i);if(a<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:e.slice(i+1,a).join("")}),i=a+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{const a=r("{}",i),s=(a<0?e.slice(i):e.slice(i,a)).join("");n.push({type:"literal",text:s}),i=a<0?e.length:a}}return n},tae=(t,e=[])=>{const n=[];for(const r of t)if(r[0]==="name"){const i=r[1].includes(".")?r[1].split(".")[0]:r[1];n.push({type:"variable",name:i})}else if(["#","&","^",">"].includes(r[0])){if(n.push({type:"variable",name:r[1]}),r[0]==="#"&&r.length>4&&Array.isArray(r[4])){const i=[...e,r[1]],a=tae(r[4],i);n.push(...a)}}else n.push({type:"literal",text:r[1]});return n},oVe=t=>(Qie(),tae(ha.parse(t))),lVe=(t,e)=>eae(t).reduce((n,r)=>{if(r.type==="variable"){if(r.name in e)return n+(typeof e[r.name]=="string"?e[r.name]:JSON.stringify(e[r.name]));throw new Error(`(f-string) Missing value for input ${r.name}`)}return n+r.text},""),cVe=(t,e)=>(Qie(),ha.render(t,e)),C2={"f-string":lVe,mustache:cVe},uVe={"f-string":eae,mustache:oVe},ry=(t,e,n)=>{try{return C2[e](t,n)}catch(r){throw AL(r,"INVALID_PROMPT_INPUT")}},dVe=(t,e)=>uVe[e](t),fVe=(t,e,n)=>{if(!(e in C2)){const r=Object.keys(C2);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${r}`)}try{const r=Object.fromEntries(n.map(i=>[i,"foo"]));Array.isArray(t)?t.forEach(i=>{if(i.type==="text"&&"text"in i&&typeof i.text=="string")ry(i.text,e,r);else if(i.type==="image_url"){if(typeof i.image_url=="string")ry(i.image_url,e,r);else if(typeof i.image_url=="object"&&i.image_url!==null&&"url"in i.image_url&&typeof i.image_url.url=="string"){const a=i.image_url.url;ry(a,e,r)}}else throw new Error(`Invalid message template received. ${JSON.stringify(i,null,2)}`)}):ry(t,e,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}};var nae=class iy extends HWe{constructor(n){super(n);U(this,"template");U(this,"templateFormat","f-string");U(this,"validateTemplate",!0);U(this,"additionalContentFields");if(n.templateFormat==="mustache"&&n.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,n),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),fVe(this.template,this.templateFormat,r)}}static lc_name(){return"PromptTemplate"}_getPromptType(){return"prompt"}async format(n){const r=await this.mergePartialAndUserVariables(n);return ry(this.template,this.templateFormat,r)}static fromExamples(n,r,i,a=`

`,s=""){return new iy({inputVariables:i,template:[s,...n,r].join(a)})}static fromTemplate(n,r){const{templateFormat:i="f-string",...a}=r??{},s=new Set;return dVe(n,i).forEach(o=>{o.type==="variable"&&s.add(o.name)}),new iy({inputVariables:[...s],templateFormat:i,template:n,...a})}async partial(n){const r=this.inputVariables.filter(a=>!(a in n)),i={...this.partialVariables??{},...n};return new iy({...this,inputVariables:r,partialVariables:i})}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(n){if(!n.template)throw new Error("Prompt template must have a template");return new iy({inputVariables:n.input_variables,template:n.template,templateFormat:n.template_format})}};function $_(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}function yt(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function fe(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let rae=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return rae=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function k2(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const N2=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class ot extends Error{}let pa=class I2 extends ot{constructor(e,n,r,i){super(`${I2.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=n;const a=n;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new xT({message:r,cause:N2(n)});const a=n==null?void 0:n.error;return e===400?new iae(e,a,r,i):e===401?new aae(e,a,r,i):e===403?new sae(e,a,r,i):e===404?new oae(e,a,r,i):e===409?new lae(e,a,r,i):e===422?new cae(e,a,r,i):e===429?new uae(e,a,r,i):e>=500?new dae(e,a,r,i):new I2(e,a,r,i)}},qa=class extends pa{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},xT=class extends pa{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},ST=class extends xT{constructor({message:e}={}){super({message:e??"Request timed out."})}},iae=class extends pa{},aae=class extends pa{},sae=class extends pa{},oae=class extends pa{},lae=class extends pa{},cae=class extends pa{},uae=class extends pa{},dae=class extends pa{};class fae extends ot{constructor(){super("Could not parse response content as the length limit was reached")}}class hae extends ot{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class ay extends Error{constructor(e){super(e)}}const hVe=/^[a-z][a-z0-9+.-]*:/i,pVe=t=>hVe.test(t);let la=t=>(la=Array.isArray,la(t)),rV=la;function pae(t){return typeof t!="object"?{}:t??{}}function mVe(t){if(!t)return!0;for(const e in t)return!1;return!0}function gVe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function yP(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const yVe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ot(`${t} must be an integer`);if(e<0)throw new ot(`${t} must be a positive integer`);return e},vVe=t=>{try{return JSON.parse(t)}catch{return}},Pb=t=>new Promise(e=>setTimeout(e,t)),Oh="6.22.0",bVe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function _Ve(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const wVe=()=>{var n;const t=_Ve();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oh,"X-Stainless-OS":aV(Deno.build.os),"X-Stainless-Arch":iV(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oh,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oh,"X-Stainless-OS":aV(globalThis.process.platform??"unknown"),"X-Stainless-Arch":iV(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=xVe();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oh,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Oh,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function xVe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${a}.${s}`}}}return null}const iV=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",aV=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let sV;const SVe=()=>sV??(sV=wVe());function TVe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function mae(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function gae(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return mae({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function yae(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function EVe(t){var r,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(r=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const AVe=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),vae="RFC3986",bae=t=>String(t),oV={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:bae},OVe="RFC1738";let P2=(t,e)=>(P2=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),P2(t,e));const Jo=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),vP=1024,CVe=(t,e,n,r,i)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let s="";for(let o=0;o<a.length;o+=vP){const l=a.length>=vP?a.slice(o,o+vP):a,c=[];for(let u=0;u<l.length;++u){let f=l.charCodeAt(u);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||i===OVe&&(f===40||f===41)){c[c.length]=l.charAt(u);continue}if(f<128){c[c.length]=Jo[f];continue}if(f<2048){c[c.length]=Jo[192|f>>6]+Jo[128|f&63];continue}if(f<55296||f>=57344){c[c.length]=Jo[224|f>>12]+Jo[128|f>>6&63]+Jo[128|f&63];continue}u+=1,f=65536+((f&1023)<<10|l.charCodeAt(u)&1023),c[c.length]=Jo[240|f>>18]+Jo[128|f>>12&63]+Jo[128|f>>6&63]+Jo[128|f&63]}s+=c.join("")}return s};function kVe(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function lV(t,e){if(la(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const _ae={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},wae=function(t,e){Array.prototype.push.apply(t,la(e)?e:[e])};let cV;const Or={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:CVe,encodeValuesOnly:!1,format:vae,formatter:bae,indices:!1,serializeDate(t){return(cV??(cV=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function NVe(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const bP={};function xae(t,e,n,r,i,a,s,o,l,c,u,f,p,m,_,y,b,x){let w=t,T=x,A=0,E=!1;for(;(T=T.get(bP))!==void 0&&!E;){const Z=T.get(t);if(A+=1,typeof Z<"u"){if(Z===A)throw new RangeError("Cyclic object value");E=!0}typeof T.get(bP)>"u"&&(A=0)}if(typeof c=="function"?w=c(e,w):w instanceof Date?w=p==null?void 0:p(w):n==="comma"&&la(w)&&(w=lV(w,function(Z){return Z instanceof Date?p==null?void 0:p(Z):Z})),w===null){if(a)return l&&!y?l(e,Or.encoder,b,"key",m):e;w=""}if(NVe(w)||kVe(w)){if(l){const Z=y?e:l(e,Or.encoder,b,"key",m);return[(_==null?void 0:_(Z))+"="+(_==null?void 0:_(l(w,Or.encoder,b,"value",m)))]}return[(_==null?void 0:_(e))+"="+(_==null?void 0:_(String(w)))]}const C=[];if(typeof w>"u")return C;let R;if(n==="comma"&&la(w))y&&l&&(w=lV(w,l)),R=[{value:w.length>0?w.join(",")||null:void 0}];else if(la(c))R=c;else{const Z=Object.keys(w);R=u?Z.sort(u):Z}const N=o?String(e).replace(/\./g,"%2E"):String(e),D=r&&la(w)&&w.length===1?N+"[]":N;if(i&&la(w)&&w.length===0)return D+"[]";for(let Z=0;Z<R.length;++Z){const j=R[Z],L=typeof j=="object"&&typeof j.value<"u"?j.value:w[j];if(s&&L===null)continue;const B=f&&o?j.replace(/\./g,"%2E"):j,z=la(w)?typeof n=="function"?n(D,B):D:D+(f?"."+B:"["+B+"]");x.set(t,A);const W=new WeakMap;W.set(bP,x),wae(C,xae(L,z,n,r,i,a,s,o,n==="comma"&&y&&la(w)?null:l,c,u,f,p,m,_,y,b,W))}return C}function IVe(t=Or){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Or.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=vae;if(typeof t.format<"u"){if(!P2(oV,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=oV[n];let i=Or.filter;(typeof t.filter=="function"||la(t.filter))&&(i=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in _ae?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Or.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const s=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Or.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Or.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Or.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Or.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Or.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Or.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Or.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Or.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Or.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Or.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Or.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Or.strictNullHandling}}function PVe(t,e={}){let n=t;const r=IVe(e);let i,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):la(r.filter)&&(a=r.filter,i=a);const s=[];if(typeof n!="object"||n===null)return"";const o=_ae[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const c=new WeakMap;for(let p=0;p<i.length;++p){const m=i[p];r.skipNulls&&n[m]===null||wae(s,xae(n[m],m,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const u=s.join(r.delimiter);let f=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),u.length>0?f+u:""}function RVe(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let uV;function QL(t){let e;return(uV??(e=new globalThis.TextEncoder,uV=e.encode.bind(e)))(t)}let dV;function fV(t){let e;return(dV??(e=new globalThis.TextDecoder,dV=e.decode.bind(e)))(t)}var Na,Ia;let TT=class{constructor(){Na.set(this,void 0),Ia.set(this,void 0),yt(this,Na,new Uint8Array),yt(this,Ia,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?QL(e):e;yt(this,Na,RVe([fe(this,Na,"f"),n]));const r=[];let i;for(;(i=jVe(fe(this,Na,"f"),fe(this,Ia,"f")))!=null;){if(i.carriage&&fe(this,Ia,"f")==null){yt(this,Ia,i.index);continue}if(fe(this,Ia,"f")!=null&&(i.index!==fe(this,Ia,"f")+1||i.carriage)){r.push(fV(fe(this,Na,"f").subarray(0,fe(this,Ia,"f")-1))),yt(this,Na,fe(this,Na,"f").subarray(fe(this,Ia,"f"))),yt(this,Ia,null);continue}const a=fe(this,Ia,"f")!==null?i.preceding-1:i.preceding,s=fV(fe(this,Na,"f").subarray(0,a));r.push(s),yt(this,Na,fe(this,Na,"f").subarray(i.index)),yt(this,Ia,null)}return r}flush(){return fe(this,Na,"f").length?this.decode(`
`):[]}};Na=new WeakMap,Ia=new WeakMap;TT.NEWLINE_CHARS=new Set([`
`,"\r"]);TT.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function jVe(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function $Ve(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const S1={off:0,error:200,warn:300,info:400,debug:500},hV=(t,e,n)=>{if(t){if(gVe(S1,t))return t;ei(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(S1))}`)}};function sy(){}function M_(t,e,n){return!e||S1[t]>S1[n]?sy:e[t].bind(e)}const MVe={error:sy,warn:sy,info:sy,debug:sy};let pV=new WeakMap;function ei(t){const e=t.logger,n=t.logLevel??"off";if(!e)return MVe;const r=pV.get(e);if(r&&r[0]===n)return r[1];const i={error:M_("error",e,n),warn:M_("warn",e,n),info:M_("info",e,n),debug:M_("debug",e,n)};return pV.set(e,[n,i]),i}const Id=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Og;let Gv=class oy{constructor(e,n,r){this.iterator=e,Og.set(this,void 0),this.controller=n,yt(this,Og,r)}static fromSSEResponse(e,n,r){let i=!1;const a=r?ei(r):console;async function*s(){if(i)throw new ot("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const l of LVe(e,n))if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let c;try{c=JSON.parse(l.data)}catch(u){throw a.error("Could not parse message into JSON:",l.data),a.error("From chunk:",l.raw),u}if(c&&c.error)throw new pa(void 0,c.error,void 0,e.headers);yield c}else{let c;try{c=JSON.parse(l.data)}catch(u){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),u}if(l.event=="error")throw new pa(void 0,c.error,c.message,void 0);yield{event:l.event,data:c}}}o=!0}catch(l){if(k2(l))return;throw l}finally{o||n.abort()}}return new oy(s,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*a(){const o=new TT,l=yae(e);for await(const c of l)for(const u of o.decode(c))yield u;for(const c of o.flush())yield c}async function*s(){if(i)throw new ot("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const l of a())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(k2(l))return;throw l}finally{o||n.abort()}}return new oy(s,n,r)}[(Og=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const s=r.next();e.push(s),n.push(s)}return a.shift()}});return[new oy(()=>i(e),this.controller,fe(this,Og,"f")),new oy(()=>i(n),this.controller,fe(this,Og,"f"))]}toReadableStream(){const e=this;let n;return mae({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await n.next();if(a)return r.close();const s=QL(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}};async function*LVe(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ot("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ot("Attempted to iterate over a response with no body");const n=new BVe,r=new TT,i=yae(t.body);for await(const a of DVe(i))for(const s of r.decode(a)){const o=n.decode(s);o&&(yield o)}for(const a of r.flush()){const s=n.decode(a);s&&(yield s)}}async function*DVe(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?QL(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let a;for(;(a=$Ve(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}let BVe=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=FVe(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}};function FVe(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Sae(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:a}=e,s=await(async()=>{var f;if(e.options.stream)return ei(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Gv.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const o=n.headers.get("content-type"),l=(f=o==null?void 0:o.split(";")[0])==null?void 0:f.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){if(n.headers.get("content-length")==="0")return;const m=await n.json();return Tae(m,n)}return await n.text()})();return ei(t).debug(`[${r}] response parsed`,Id({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-a})),s}function Tae(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var ly;let Eae=class Aae extends Promise{constructor(e,n,r=Sae){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,ly.set(this,void 0),yt(this,ly,e)}_thenUnwrap(e){return new Aae(fe(this,ly,"f"),this.responsePromise,async(n,r)=>Tae(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(fe(this,ly,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};ly=new WeakMap;var L_;let eD=class{constructor(e,n,r,i){L_.set(this,void 0),yt(this,L_,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new ot("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await fe(this,L_,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(L_=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}},UVe=class extends Eae{constructor(e,n,r){super(e,n,async(i,a)=>new r(i,a.response,await Sae(i,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}},ET=class extends eD{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}};class ar extends eD{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...pae(this.options.query),after:n}}:null}}class T1 extends eD{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...pae(this.options.query),after:e}}:null}}const Oae=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Py(t,e,n){return Oae(),new File(t,e??"unknown_file",n)}function Tw(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const tD=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Kv=async(t,e)=>R2(t.body)?{...t,body:await Cae(t.body,e)}:t,rm=async(t,e)=>({...t,body:await Cae(t.body,e)}),mV=new WeakMap;function zVe(t){const e=typeof t=="function"?t:t.fetch,n=mV.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new i(a).text()}catch{return!0}})();return mV.set(e,r),r}const Cae=async(t,e)=>{if(!await zVe(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>j2(n,r,i))),n},kae=t=>t instanceof Blob&&"name"in t,qVe=t=>typeof t=="object"&&t!==null&&(t instanceof Response||tD(t)||kae(t)),R2=t=>{if(qVe(t))return!0;if(Array.isArray(t))return t.some(R2);if(t&&typeof t=="object"){for(const e in t)if(R2(t[e]))return!0}return!1},j2=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Py([await n.blob()],Tw(n)));else if(tD(n))t.append(e,Py([await new Response(gae(n)).blob()],Tw(n)));else if(kae(n))t.append(e,n,Tw(n));else if(Array.isArray(n))await Promise.all(n.map(r=>j2(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>j2(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},Nae=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",HVe=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Nae(t),WVe=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function VVe(t,e,n){if(Oae(),t=await t,HVe(t))return t instanceof File?t:Py([await t.arrayBuffer()],t.name);if(WVe(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Py(await $2(i),e,n)}const r=await $2(t);if(e||(e=Tw(t)),!(n!=null&&n.type)){const i=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(n={...n,type:i})}return Py(r,e,n)}async function $2(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Nae(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(tD(t))for await(const r of t)e.push(...await $2(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${GVe(t)}`)}return e}function GVe(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}let et=class{constructor(e){this._client=e}};function Iae(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const gV=Object.freeze(Object.create(null)),KVe=(t=Iae)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const a=[],s=n.reduce((u,f,p)=>{var y;/[?#]/.test(f)&&(i=!0);const m=r[p];let _=(i?encodeURIComponent:t)(""+m);return p!==r.length&&(m==null||typeof m=="object"&&m.toString===((y=Object.getPrototypeOf(Object.getPrototypeOf(m.hasOwnProperty??gV)??gV))==null?void 0:y.toString))&&(_=m+"",a.push({start:u.length+f.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(m).slice(8,-1)} is not a valid path parameter`})),u+f+(p===r.length?"":_)},""),o=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(o))!==null;)a.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(a.sort((u,f)=>u.start-f.start),a.length>0){let u=0;const f=a.reduce((p,m)=>{const _=" ".repeat(m.start-u),y="^".repeat(m.length);return u=m.start+m.length,p+_+y},"");throw new ot(`Path parameters result in path with invalid segments:
${a.map(p=>p.error).join(`
`)}
${s}
${f}`)}return s},Ae=KVe(Iae);let Pae=class extends et{list(e,n={},r){return this._client.getAPIList(Ae`/chat/completions/${e}/messages`,ar,{query:n,...r})}};function E1(t){return t!==void 0&&"function"in t&&t.function!==void 0}function ZVe(t,e){const n={...t};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),n}function nD(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Rb(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function XVe(t,e){return!e||!Rae(e)?{...t,choices:t.choices.map(n=>(jae(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:rD(t,e)}function rD(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new fae;if(r.finish_reason==="content_filter")throw new hae;return jae(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(a=>YVe(e,a)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?JVe(e,r.message.content):null}}});return{...t,choices:n}}function JVe(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function YVe(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var a;return E1(i)&&((a=i.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Rb(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function QVe(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var a;return E1(i)&&((a=i.function)==null?void 0:a.name)===e.function.name});return E1(n)&&(Rb(n)||(n==null?void 0:n.function.strict)||!1)}function Rae(t){var e;return nD(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Rb(n)||n.type==="function"&&n.function.strict===!0))??!1}function jae(t){for(const e of t||[])if(e.type!=="function")throw new ot(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function eGe(t){for(const e of t??[]){if(e.type!=="function")throw new ot(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ot(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const A1=t=>(t==null?void 0:t.role)==="assistant",$ae=t=>(t==null?void 0:t.role)==="tool";var M2,Ew,Aw,cy,uy,Ow,dy,tc,fy,O1,C1,Ch,Mae;class iD{constructor(){M2.add(this),this.controller=new AbortController,Ew.set(this,void 0),Aw.set(this,()=>{}),cy.set(this,()=>{}),uy.set(this,void 0),Ow.set(this,()=>{}),dy.set(this,()=>{}),tc.set(this,{}),fy.set(this,!1),O1.set(this,!1),C1.set(this,!1),Ch.set(this,!1),yt(this,Ew,new Promise((e,n)=>{yt(this,Aw,e,"f"),yt(this,cy,n,"f")})),yt(this,uy,new Promise((e,n)=>{yt(this,Ow,e,"f"),yt(this,dy,n,"f")})),fe(this,Ew,"f").catch(()=>{}),fe(this,uy,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},fe(this,M2,"m",Mae).bind(this))},0)}_connected(){this.ended||(fe(this,Aw,"f").call(this),this._emit("connect"))}get ended(){return fe(this,fy,"f")}get errored(){return fe(this,O1,"f")}get aborted(){return fe(this,C1,"f")}abort(){this.controller.abort()}on(e,n){return(fe(this,tc,"f")[e]||(fe(this,tc,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=fe(this,tc,"f")[e];if(!r)return this;const i=r.findIndex(a=>a.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(fe(this,tc,"f")[e]||(fe(this,tc,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{yt(this,Ch,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){yt(this,Ch,!0),await fe(this,uy,"f")}_emit(e,...n){if(fe(this,fy,"f"))return;e==="end"&&(yt(this,fy,!0),fe(this,Ow,"f").call(this));const r=fe(this,tc,"f")[e];if(r&&(fe(this,tc,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!fe(this,Ch,"f")&&!(r!=null&&r.length)&&Promise.reject(i),fe(this,cy,"f").call(this,i),fe(this,dy,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!fe(this,Ch,"f")&&!(r!=null&&r.length)&&Promise.reject(i),fe(this,cy,"f").call(this,i),fe(this,dy,"f").call(this,i),this._emit("end")}}_emitFinal(){}}Ew=new WeakMap,Aw=new WeakMap,cy=new WeakMap,uy=new WeakMap,Ow=new WeakMap,dy=new WeakMap,tc=new WeakMap,fy=new WeakMap,O1=new WeakMap,C1=new WeakMap,Ch=new WeakMap,M2=new WeakSet,Mae=function(e){if(yt(this,O1,!0),e instanceof Error&&e.name==="AbortError"&&(e=new qa),e instanceof qa)return yt(this,C1,!0),this._emit("abort",e);if(e instanceof ot)return this._emit("error",e);if(e instanceof Error){const n=new ot(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new ot(String(e)))};function tGe(t){return typeof t.parse=="function"}var ji,L2,k1,D2,B2,F2,Lae,Dae;const nGe=10;class Bae extends iD{constructor(){super(...arguments),ji.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),$ae(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(A1(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ot("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),fe(this,ji,"m",L2).call(this)}async finalMessage(){return await this.done(),fe(this,ji,"m",k1).call(this)}async finalFunctionToolCall(){return await this.done(),fe(this,ji,"m",D2).call(this)}async finalFunctionToolCallResult(){return await this.done(),fe(this,ji,"m",B2).call(this)}async totalUsage(){return await this.done(),fe(this,ji,"m",F2).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=fe(this,ji,"m",k1).call(this);n&&this._emit("finalMessage",n);const r=fe(this,ji,"m",L2).call(this);r&&this._emit("finalContent",r);const i=fe(this,ji,"m",D2).call(this);i&&this._emit("finalFunctionToolCall",i);const a=fe(this,ji,"m",B2).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",fe(this,ji,"m",F2).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),fe(this,ji,"m",Lae).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(rD(a,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var m,_,y;const i="tool",{tool_choice:a="auto",stream:s,...o}=n,l=typeof a!="string"&&a.type==="function"&&((m=a==null?void 0:a.function)==null?void 0:m.name),{maxChatCompletions:c=nGe}=r||{},u=n.tools.map(b=>{if(Rb(b)){if(!b.$callback)throw new ot("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),f={};for(const b of u)b.type==="function"&&(f[b.function.name||b.function.function.name]=b.function);const p="tools"in n?u.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of n.messages)this._addMessage(b,!1);for(let b=0;b<c;++b){const w=(_=(await this._createChatCompletion(e,{...o,tool_choice:a,tools:p,messages:[...this.messages]},r)).choices[0])==null?void 0:_.message;if(!w)throw new ot("missing message in ChatCompletion response");if(!((y=w.tool_calls)!=null&&y.length))return;for(const T of w.tool_calls){if(T.type!=="function")continue;const A=T.id,{name:E,arguments:C}=T.function,R=f[E];if(R){if(l&&l!==E){const j=`Invalid tool_call: ${JSON.stringify(E)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:A,content:j});continue}}else{const j=`Invalid tool_call: ${JSON.stringify(E)}. Available options are: ${Object.keys(f).map(L=>JSON.stringify(L)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:A,content:j});continue}let N;try{N=tGe(R)?await R.parse(C):C}catch(j){const L=j instanceof Error?j.message:String(j);this._addMessage({role:i,tool_call_id:A,content:L});continue}const D=await R.function(N,this),Z=fe(this,ji,"m",Dae).call(this,D);if(this._addMessage({role:i,tool_call_id:A,content:Z}),l)return}}}}ji=new WeakSet,L2=function(){return fe(this,ji,"m",k1).call(this).content??null},k1=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(A1(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new ot("stream ended without producing a ChatCompletionMessage with role=assistant")},D2=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(A1(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.filter(a=>a.type==="function").at(-1))==null?void 0:n.function}},B2=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if($ae(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(a=>a.type==="function"&&a.id===n.tool_call_id))}))return n.content}},F2=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},Lae=function(e){if(e.n!=null&&e.n>1)throw new ot("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Dae=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class aD extends Bae{static runTools(e,n,r){const i=new aD,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,a)),i}_addMessage(e,n=!0){super._addMessage(e,n),A1(e)&&e.content&&this._emit("content",e.content)}}const Fae=1,Uae=2,zae=4,qae=8,Hae=16,Wae=32,Vae=64,Gae=128,Kae=256,Zae=Gae|Kae,Xae=Hae|Wae|Zae|Vae,Jae=Fae|Uae|Xae,Yae=zae|qae,rGe=Jae|Yae,Fr={STR:Fae,NUM:Uae,ARR:zae,OBJ:qae,NULL:Hae,BOOL:Wae,NAN:Vae,INFINITY:Gae,MINUS_INFINITY:Kae,INF:Zae,SPECIAL:Xae,ATOM:Jae,COLLECTION:Yae,ALL:rGe};class iGe extends Error{}class aGe extends Error{}function sGe(t,e=Fr.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return oGe(t.trim(),e)}const oGe=(t,e)=>{const n=t.length;let r=0;const i=p=>{throw new iGe(`${p} at position ${r}`)},a=p=>{throw new aGe(`${p} at position ${r}`)},s=()=>(f(),r>=n&&i("Unexpected end of input"),t[r]==='"'?o():t[r]==="{"?l():t[r]==="["?c():t.substring(r,r+4)==="null"||Fr.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Fr.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Fr.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Fr.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Fr.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Fr.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):u()),o=()=>{const p=r;let m=!1;for(r++;r<n&&(t[r]!=='"'||m&&t[r-1]==="\\");)m=t[r]==="\\"?!m:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(p,++r-Number(m)))}catch(_){a(String(_))}else if(Fr.STR&e)try{return JSON.parse(t.substring(p,r-Number(m))+'"')}catch{return JSON.parse(t.substring(p,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,f();const p={};try{for(;t[r]!=="}";){if(f(),r>=n&&Fr.OBJ&e)return p;const m=o();f(),r++;try{const _=s();Object.defineProperty(p,m,{value:_,writable:!0,enumerable:!0,configurable:!0})}catch(_){if(Fr.OBJ&e)return p;throw _}f(),t[r]===","&&r++}}catch{if(Fr.OBJ&e)return p;i("Expected '}' at end of object")}return r++,p},c=()=>{r++;const p=[];try{for(;t[r]!=="]";)p.push(s()),f(),t[r]===","&&r++}catch{if(Fr.ARR&e)return p;i("Expected ']' at end of array")}return r++,p},u=()=>{if(r===0){t==="-"&&Fr.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(Fr.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(m))}}const p=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Fr.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(p,r))}catch{t.substring(p,r)==="-"&&Fr.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(p,t.lastIndexOf("e")))}catch(_){a(String(_))}}},f=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return s()},yV=t=>sGe(t,Fr.ALL^Fr.NUM);var Tr,Yl,fh,du,_P,D_,wP,xP,SP,B_,TP,vV;class Zv extends Bae{constructor(e){super(),Tr.add(this),Yl.set(this,void 0),fh.set(this,void 0),du.set(this,void 0),yt(this,Yl,e),yt(this,fh,[])}get currentChatCompletionSnapshot(){return fe(this,du,"f")}static fromReadableStream(e){const n=new Zv(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new Zv(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var s;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),fe(this,Tr,"m",_P).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of a)fe(this,Tr,"m",wP).call(this,o);if((s=a.controller.signal)!=null&&s.aborted)throw new qa;return this._addChatCompletion(fe(this,Tr,"m",B_).call(this))}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),fe(this,Tr,"m",_P).call(this),this._connected();const i=Gv.fromReadableStream(e,this.controller);let a;for await(const o of i)a&&a!==o.id&&this._addChatCompletion(fe(this,Tr,"m",B_).call(this)),fe(this,Tr,"m",wP).call(this,o),a=o.id;if((s=i.controller.signal)!=null&&s.aborted)throw new qa;return this._addChatCompletion(fe(this,Tr,"m",B_).call(this))}[(Yl=new WeakMap,fh=new WeakMap,du=new WeakMap,Tr=new WeakSet,_P=function(){this.ended||yt(this,du,void 0)},D_=function(n){let r=fe(this,fh,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},fe(this,fh,"f")[n.index]=r,r)},wP=function(n){var i,a,s,o,l,c,u,f,p,m,_,y,b,x,w;if(this.ended)return;const r=fe(this,Tr,"m",vV).call(this,n);this._emit("chunk",n,r);for(const T of n.choices){const A=r.choices[T.index];T.delta.content!=null&&((i=A.message)==null?void 0:i.role)==="assistant"&&((a=A.message)!=null&&a.content)&&(this._emit("content",T.delta.content,A.message.content),this._emit("content.delta",{delta:T.delta.content,snapshot:A.message.content,parsed:A.message.parsed})),T.delta.refusal!=null&&((s=A.message)==null?void 0:s.role)==="assistant"&&((o=A.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:T.delta.refusal,snapshot:A.message.refusal}),((l=T.logprobs)==null?void 0:l.content)!=null&&((c=A.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=T.logprobs)==null?void 0:u.content,snapshot:((f=A.logprobs)==null?void 0:f.content)??[]}),((p=T.logprobs)==null?void 0:p.refusal)!=null&&((m=A.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(_=T.logprobs)==null?void 0:_.refusal,snapshot:((y=A.logprobs)==null?void 0:y.refusal)??[]});const E=fe(this,Tr,"m",D_).call(this,A);A.finish_reason&&(fe(this,Tr,"m",SP).call(this,A),E.current_tool_call_index!=null&&fe(this,Tr,"m",xP).call(this,A,E.current_tool_call_index));for(const C of T.delta.tool_calls??[])E.current_tool_call_index!==C.index&&(fe(this,Tr,"m",SP).call(this,A),E.current_tool_call_index!=null&&fe(this,Tr,"m",xP).call(this,A,E.current_tool_call_index)),E.current_tool_call_index=C.index;for(const C of T.delta.tool_calls??[]){const R=(b=A.message.tool_calls)==null?void 0:b[C.index];R!=null&&R.type&&((R==null?void 0:R.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(x=R.function)==null?void 0:x.name,index:C.index,arguments:R.function.arguments,parsed_arguments:R.function.parsed_arguments,arguments_delta:((w=C.function)==null?void 0:w.arguments)??""}):(R==null||R.type,void 0))}}},xP=function(n,r){var s,o,l;if(fe(this,Tr,"m",D_).call(this,n).done_tool_calls.has(r))return;const a=(s=n.message.tool_calls)==null?void 0:s[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=(l=(o=fe(this,Yl,"f"))==null?void 0:o.tools)==null?void 0:l.find(u=>E1(u)&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Rb(c)?c.$parseRaw(a.function.arguments):c!=null&&c.function.strict?JSON.parse(a.function.arguments):null})}else a.type},SP=function(n){var i,a;const r=fe(this,Tr,"m",D_).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=fe(this,Tr,"m",TP).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(a=n.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},B_=function(){if(this.ended)throw new ot("stream has ended, this shouldn't happen");const n=fe(this,du,"f");if(!n)throw new ot("request ended without sending any chunks");return yt(this,du,void 0),yt(this,fh,[]),lGe(n,fe(this,Yl,"f"))},TP=function(){var r;const n=(r=fe(this,Yl,"f"))==null?void 0:r.response_format;return nD(n)?n:null},vV=function(n){var r,i,a,s;let o=fe(this,du,"f");const{choices:l,...c}=n;o?Object.assign(o,c):o=yt(this,du,{...c,choices:[]});for(const{delta:u,finish_reason:f,index:p,logprobs:m=null,..._}of n.choices){let y=o.choices[p];if(y||(y=o.choices[p]={finish_reason:f,index:p,message:{},logprobs:m,..._}),m)if(!y.logprobs)y.logprobs=Object.assign({},m);else{const{content:C,refusal:R,...N}=m;Object.assign(y.logprobs,N),C&&((r=y.logprobs).content??(r.content=[]),y.logprobs.content.push(...C)),R&&((i=y.logprobs).refusal??(i.refusal=[]),y.logprobs.refusal.push(...R))}if(f&&(y.finish_reason=f,fe(this,Yl,"f")&&Rae(fe(this,Yl,"f")))){if(f==="length")throw new fae;if(f==="content_filter")throw new hae}if(Object.assign(y,_),!u)continue;const{content:b,refusal:x,function_call:w,role:T,tool_calls:A,...E}=u;if(Object.assign(y.message,E),x&&(y.message.refusal=(y.message.refusal||"")+x),T&&(y.message.role=T),w&&(y.message.function_call?(w.name&&(y.message.function_call.name=w.name),w.arguments&&((a=y.message.function_call).arguments??(a.arguments=""),y.message.function_call.arguments+=w.arguments)):y.message.function_call=w),b&&(y.message.content=(y.message.content||"")+b,!y.message.refusal&&fe(this,Tr,"m",TP).call(this)&&(y.message.parsed=yV(y.message.content))),A){y.message.tool_calls||(y.message.tool_calls=[]);for(const{index:C,id:R,type:N,function:D,...Z}of A){const j=(s=y.message.tool_calls)[C]??(s[C]={});Object.assign(j,Z),R&&(j.id=R),N&&(j.type=N),D&&(j.function??(j.function={name:D.name??"",arguments:""})),D!=null&&D.name&&(j.function.name=D.name),D!=null&&D.arguments&&(j.function.arguments+=D.arguments,QVe(fe(this,Yl,"f"),j)&&(j.function.parsed_arguments=yV(j.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,s)=>n.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Gv(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function lGe(t,e){const{id:n,choices:r,created:i,model:a,system_fingerprint:s,...o}=t,l={...o,id:n,choices:r.map(({message:c,finish_reason:u,index:f,logprobs:p,...m})=>{if(!u)throw new ot(`missing finish_reason for choice ${f}`);const{content:_=null,function_call:y,tool_calls:b,...x}=c,w=c.role;if(!w)throw new ot(`missing role for choice ${f}`);if(y){const{arguments:T,name:A}=y;if(T==null)throw new ot(`missing function_call.arguments for choice ${f}`);if(!A)throw new ot(`missing function_call.name for choice ${f}`);return{...m,message:{content:_,function_call:{arguments:T,name:A},role:w,refusal:c.refusal??null},finish_reason:u,index:f,logprobs:p}}return b?{...m,index:f,finish_reason:u,logprobs:p,message:{...x,role:w,content:_,refusal:c.refusal??null,tool_calls:b.map((T,A)=>{const{function:E,type:C,id:R,...N}=T,{arguments:D,name:Z,...j}=E||{};if(R==null)throw new ot(`missing choices[${f}].tool_calls[${A}].id
${F_(t)}`);if(C==null)throw new ot(`missing choices[${f}].tool_calls[${A}].type
${F_(t)}`);if(Z==null)throw new ot(`missing choices[${f}].tool_calls[${A}].function.name
${F_(t)}`);if(D==null)throw new ot(`missing choices[${f}].tool_calls[${A}].function.arguments
${F_(t)}`);return{...N,id:R,type:C,function:{...j,name:Z,arguments:D}}})}}:{...m,message:{...x,content:_,role:w,refusal:c.refusal??null},finish_reason:u,index:f,logprobs:p}}),created:i,model:a,object:"chat.completion",...s?{system_fingerprint:s}:{}};return XVe(l,e)}function F_(t){return JSON.stringify(t)}class N1 extends Zv{static fromReadableStream(e){const n=new N1(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new N1(n),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,a)),i}}let sD=class extends et{constructor(){super(...arguments),this.messages=new Pae(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(Ae`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(Ae`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",ar,{query:e,...n})}delete(e,n){return this._client.delete(Ae`/chat/completions/${e}`,n)}parse(e,n){return eGe(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>rD(r,e))}runTools(e,n){return e.stream?N1.runTools(this._client,e,n):aD.runTools(this._client,e,n)}stream(e,n){return Zv.createChatCompletion(this._client,e,n)}};sD.Messages=Pae;class oD extends et{constructor(){super(...arguments),this.completions=new sD(this._client)}}oD.Completions=sD;const Qae=Symbol("brand.privateNullableHeaders");function*cGe(t){if(!t)return;if(Qae in t){const{values:r,nulls:i}=t;yield*r.entries();for(const a of i)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():rV(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=rV(r[1])?r[1]:[r[1]];let s=!1;for(const o of a)o!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,o])}}const Fe=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[a,s]of cGe(r)){const o=a.toLowerCase();i.has(o)||(e.delete(a),i.add(o)),s===null?(e.delete(a),n.add(o)):(e.append(a,s),n.delete(o))}}return{[Qae]:!0,values:e,nulls:n}};class ese extends et{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Fe([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class tse extends et{create(e,n){return this._client.post("/audio/transcriptions",rm({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class nse extends et{create(e,n){return this._client.post("/audio/translations",rm({body:e,...n,__metadata:{model:e.model}},this._client))}}class jb extends et{constructor(){super(...arguments),this.transcriptions=new tse(this._client),this.translations=new nse(this._client),this.speech=new ese(this._client)}}jb.Transcriptions=tse;jb.Translations=nse;jb.Speech=ese;let rse=class extends et{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(Ae`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",ar,{query:e,...n})}cancel(e,n){return this._client.post(Ae`/batches/${e}/cancel`,n)}};class ise extends et{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(Ae`/assistants/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(Ae`/assistants/${e}`,{body:n,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",ar,{query:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(Ae`/assistants/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let ase=class extends et{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class sse extends et{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let AT=class extends et{constructor(){super(...arguments),this.sessions=new ase(this._client),this.transcriptionSessions=new sse(this._client)}};AT.Sessions=ase;AT.TranscriptionSessions=sse;class ose extends et{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(Ae`/chatkit/sessions/${e}/cancel`,{...n,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let lse=class extends et{retrieve(e,n){return this._client.get(Ae`/chatkit/threads/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",T1,{query:e,...n,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(Ae`/chatkit/threads/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},r){return this._client.getAPIList(Ae`/chatkit/threads/${e}/items`,T1,{query:n,...r,headers:Fe([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};class OT extends et{constructor(){super(...arguments),this.sessions=new ose(this._client),this.threads=new lse(this._client)}}OT.Sessions=ose;OT.Threads=lse;let cse=class extends et{create(e,n,r){return this._client.post(Ae`/threads/${e}/messages`,{body:n,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(Ae`/threads/${i}/messages/${e}`,{...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...a}=n;return this._client.post(Ae`/threads/${i}/messages/${e}`,{body:a,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(Ae`/threads/${e}/messages`,ar,{query:n,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(Ae`/threads/${i}/messages/${e}`,{...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};class use extends et{retrieve(e,n,r){const{thread_id:i,run_id:a,...s}=n;return this._client.get(Ae`/threads/${i}/runs/${a}/steps/${e}`,{query:s,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:i,...a}=n;return this._client.getAPIList(Ae`/threads/${i}/runs/${e}/steps`,ar,{query:a,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const uGe=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var EP={};const hh=t=>{var e,n,r,i;if(typeof globalThis.process<"u")return((e=EP==null?void 0:EP[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};var ti,Gd,U2,tl,Cw,lo,Kd,zh,Dd,I1,ja,kw,Nw,Ry,hy,py,bV,_V,wV,xV,SV,TV,EV;class jy extends iD{constructor(){super(...arguments),ti.add(this),U2.set(this,[]),tl.set(this,{}),Cw.set(this,{}),lo.set(this,void 0),Kd.set(this,void 0),zh.set(this,void 0),Dd.set(this,void 0),I1.set(this,void 0),ja.set(this,void 0),kw.set(this,void 0),Nw.set(this,void 0),Ry.set(this,void 0)}[(U2=new WeakMap,tl=new WeakMap,Cw=new WeakMap,lo=new WeakMap,Kd=new WeakMap,zh=new WeakMap,Dd=new WeakMap,I1=new WeakMap,ja=new WeakMap,kw=new WeakMap,Nw=new WeakMap,Ry=new WeakMap,ti=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,s)=>n.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Gd;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Gv.fromReadableStream(e,this.controller);for await(const s of i)fe(this,ti,"m",hy).call(this,s);if((a=i.controller.signal)!=null&&a.aborted)throw new qa;return this._addRun(fe(this,ti,"m",py).call(this))}toReadableStream(){return new Gv(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const a=new Gd;return a._run(()=>a._runToolAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,i){var l;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},o=await e.submitToolOutputs(n,s,{...i,signal:this.controller.signal});this._connected();for await(const c of o)fe(this,ti,"m",hy).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new qa;return this._addRun(fe(this,ti,"m",py).call(this))}static createThreadAssistantStream(e,n,r){const i=new Gd;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const a=new Gd;return a._run(()=>a._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return fe(this,kw,"f")}currentRun(){return fe(this,Nw,"f")}currentMessageSnapshot(){return fe(this,lo,"f")}currentRunStepSnapshot(){return fe(this,Ry,"f")}async finalRunSteps(){return await this.done(),Object.values(fe(this,tl,"f"))}async finalMessages(){return await this.done(),Object.values(fe(this,Cw,"f"))}async finalRun(){if(await this.done(),!fe(this,Kd,"f"))throw Error("Final run was not received.");return fe(this,Kd,"f")}async _createThreadAssistantStream(e,n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},s=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const l of s)fe(this,ti,"m",hy).call(this,l);if((o=s.controller.signal)!=null&&o.aborted)throw new qa;return this._addRun(fe(this,ti,"m",py).call(this))}async _createAssistantStream(e,n,r,i){var l;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},o=await e.create(n,s,{...i,signal:this.controller.signal});this._connected();for await(const c of o)fe(this,ti,"m",hy).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new qa;return this._addRun(fe(this,ti,"m",py).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let a=e[r];if(a==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof a=="string"&&typeof i=="string")a+=i;else if(typeof a=="number"&&typeof i=="number")a+=i;else if(yP(a)&&yP(i))a=this.accumulateDelta(a,i);else if(Array.isArray(a)&&Array.isArray(i)){if(a.every(s=>typeof s=="string"||typeof s=="number")){a.push(...i);continue}for(const s of i){if(!yP(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);const o=s.index;if(o==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=a[o];l==null?a.push(s):a[o]=this.accumulateDelta(l,s)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}Gd=jy,hy=function(e){if(!this.ended)switch(yt(this,kw,e),fe(this,ti,"m",wV).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":fe(this,ti,"m",EV).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":fe(this,ti,"m",_V).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":fe(this,ti,"m",bV).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},py=function(){if(this.ended)throw new ot("stream has ended, this shouldn't happen");if(!fe(this,Kd,"f"))throw Error("Final run has not been received");return fe(this,Kd,"f")},bV=function(e){const[n,r]=fe(this,ti,"m",SV).call(this,e,fe(this,lo,"f"));yt(this,lo,n),fe(this,Cw,"f")[n.id]=n;for(const i of r){const a=n.content[i.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let a=i.text,s=n.content[i.index];if(s&&s.type=="text")this._emit("textDelta",a,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=fe(this,zh,"f")){if(fe(this,Dd,"f"))switch(fe(this,Dd,"f").type){case"text":this._emit("textDone",fe(this,Dd,"f").text,fe(this,lo,"f"));break;case"image_file":this._emit("imageFileDone",fe(this,Dd,"f").image_file,fe(this,lo,"f"));break}yt(this,zh,i.index)}yt(this,Dd,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(fe(this,zh,"f")!==void 0){const i=e.data.content[fe(this,zh,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,fe(this,lo,"f"));break;case"text":this._emit("textDone",i.text,fe(this,lo,"f"));break}}fe(this,lo,"f")&&this._emit("messageDone",e.data),yt(this,lo,void 0)}},_V=function(e){const n=fe(this,ti,"m",xV).call(this,e);switch(yt(this,Ry,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==fe(this,I1,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(fe(this,ja,"f")&&this._emit("toolCallDone",fe(this,ja,"f")),yt(this,I1,a.index),yt(this,ja,n.step_details.tool_calls[a.index]),fe(this,ja,"f")&&this._emit("toolCallCreated",fe(this,ja,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":yt(this,Ry,void 0),e.data.step_details.type=="tool_calls"&&fe(this,ja,"f")&&(this._emit("toolCallDone",fe(this,ja,"f")),yt(this,ja,void 0)),this._emit("runStepDone",e.data,n);break}},wV=function(e){fe(this,U2,"f").push(e),this._emit("event",e)},xV=function(e){switch(e.event){case"thread.run.step.created":return fe(this,tl,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=fe(this,tl,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Gd.accumulateDelta(n,r.delta);fe(this,tl,"f")[e.data.id]=i}return fe(this,tl,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":fe(this,tl,"f")[e.data.id]=e.data;break}if(fe(this,tl,"f")[e.data.id])return fe(this,tl,"f")[e.data.id];throw new Error("No snapshot available")},SV=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const a of i.delta.content)if(a.index in n.content){let s=n.content[a.index];n.content[a.index]=fe(this,ti,"m",TV).call(this,a,s)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},TV=function(e,n){return Gd.accumulateDelta(n,e)},EV=function(e){switch(yt(this,Nw,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":yt(this,Kd,e.data),fe(this,ja,"f")&&(this._emit("toolCallDone",fe(this,ja,"f")),yt(this,ja,void 0));break}};let lD=class extends et{constructor(){super(...arguments),this.steps=new use(this._client)}create(e,n,r){const{include:i,...a}=n;return this._client.post(Ae`/threads/${e}/runs`,{query:{include:i},body:a,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(Ae`/threads/${i}/runs/${e}`,{...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:i,...a}=n;return this._client.post(Ae`/threads/${i}/runs/${e}`,{body:a,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(Ae`/threads/${e}/runs`,ar,{query:n,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(Ae`/threads/${i}/runs/${e}/cancel`,{...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return jy.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var a;const i=Fe([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=r==null?void 0:r.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:s,response:o}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const u=parseInt(c);isNaN(u)||(l=u)}}await Pb(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,n,r){return jy.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...a}=n;return this._client.post(Ae`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return jy.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};lD.Steps=use;class CT extends et{constructor(){super(...arguments),this.runs=new lD(this._client),this.messages=new cse(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(Ae`/threads/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(Ae`/threads/${e}`,{body:n,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(Ae`/threads/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return jy.createThreadAssistantStream(e,this._client.beta.threads,n)}}CT.Runs=lD;CT.Messages=cse;let Em=class extends et{constructor(){super(...arguments),this.realtime=new AT(this._client),this.chatkit=new OT(this._client),this.assistants=new ise(this._client),this.threads=new CT(this._client)}};Em.Realtime=AT;Em.ChatKit=OT;Em.Assistants=ise;Em.Threads=CT;let dse=class extends et{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}},fse=class extends et{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(Ae`/containers/${i}/files/${e}/content`,{...r,headers:Fe([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}},cD=class extends et{constructor(){super(...arguments),this.content=new fse(this._client)}create(e,n,r){return this._client.post(Ae`/containers/${e}/files`,Kv({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(Ae`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(Ae`/containers/${e}/files`,ar,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(Ae`/containers/${i}/files/${e}`,{...r,headers:Fe([{Accept:"*/*"},r==null?void 0:r.headers])})}};cD.Content=fse;class uD extends et{constructor(){super(...arguments),this.files=new cD(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(Ae`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",ar,{query:e,...n})}delete(e,n){return this._client.delete(Ae`/containers/${e}`,{...n,headers:Fe([{Accept:"*/*"},n==null?void 0:n.headers])})}}uD.Files=cD;class hse extends et{create(e,n,r){const{include:i,...a}=n;return this._client.post(Ae`/conversations/${e}/items`,{query:{include:i},body:a,...r})}retrieve(e,n,r){const{conversation_id:i,...a}=n;return this._client.get(Ae`/conversations/${i}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(Ae`/conversations/${e}/items`,T1,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(Ae`/conversations/${i}/items/${e}`,r)}}class dD extends et{constructor(){super(...arguments),this.items=new hse(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(Ae`/conversations/${e}`,n)}update(e,n,r){return this._client.post(Ae`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(Ae`/conversations/${e}`,n)}}dD.Items=hse;class pse extends et{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&ei(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?a:(ei(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(s=>(s&&s.data&&s.data.forEach(o=>{const l=o.embedding;o.embedding=uGe(l)}),s)))}}class mse extends et{retrieve(e,n,r){const{eval_id:i,run_id:a}=n;return this._client.get(Ae`/evals/${i}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...a}=n;return this._client.getAPIList(Ae`/evals/${i}/runs/${e}/output_items`,ar,{query:a,...r})}}class fD extends et{constructor(){super(...arguments),this.outputItems=new mse(this._client)}create(e,n,r){return this._client.post(Ae`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(Ae`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(Ae`/evals/${e}/runs`,ar,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(Ae`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(Ae`/evals/${i}/runs/${e}`,r)}}fD.OutputItems=mse;class hD extends et{constructor(){super(...arguments),this.runs=new fD(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(Ae`/evals/${e}`,n)}update(e,n,r){return this._client.post(Ae`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",ar,{query:e,...n})}delete(e,n){return this._client.delete(Ae`/evals/${e}`,n)}}hD.Runs=fD;let gse=class extends et{create(e,n){return this._client.post("/files",rm({body:e,...n},this._client))}retrieve(e,n){return this._client.get(Ae`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",ar,{query:e,...n})}delete(e,n){return this._client.delete(Ae`/files/${e}`,n)}content(e,n){return this._client.get(Ae`/files/${e}/content`,{...n,headers:Fe([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const i=new Set(["processed","error","deleted"]),a=Date.now();let s=await this.retrieve(e);for(;!s.status||!i.has(s.status);)if(await Pb(n),s=await this.retrieve(e),Date.now()-a>r)throw new ST({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return s}};class yse extends et{}let vse=class extends et{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class pD extends et{constructor(){super(...arguments),this.graders=new vse(this._client)}}pD.Graders=vse;class bse extends et{create(e,n,r){return this._client.getAPIList(Ae`/fine_tuning/checkpoints/${e}/permissions`,ET,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(Ae`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(Ae`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let mD=class extends et{constructor(){super(...arguments),this.permissions=new bse(this._client)}};mD.Permissions=bse;class _se extends et{list(e,n={},r){return this._client.getAPIList(Ae`/fine_tuning/jobs/${e}/checkpoints`,ar,{query:n,...r})}}class gD extends et{constructor(){super(...arguments),this.checkpoints=new _se(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(Ae`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",ar,{query:e,...n})}cancel(e,n){return this._client.post(Ae`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(Ae`/fine_tuning/jobs/${e}/events`,ar,{query:n,...r})}pause(e,n){return this._client.post(Ae`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(Ae`/fine_tuning/jobs/${e}/resume`,n)}}gD.Checkpoints=_se;class Am extends et{constructor(){super(...arguments),this.methods=new yse(this._client),this.jobs=new gD(this._client),this.checkpoints=new mD(this._client),this.alpha=new pD(this._client)}}Am.Methods=yse;Am.Jobs=gD;Am.Checkpoints=mD;Am.Alpha=pD;class wse extends et{}class yD extends et{constructor(){super(...arguments),this.graderModels=new wse(this._client)}}yD.GraderModels=wse;class xse extends et{createVariation(e,n){return this._client.post("/images/variations",rm({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",rm({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}let Sse=class extends et{retrieve(e,n){return this._client.get(Ae`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",ET,e)}delete(e,n){return this._client.delete(Ae`/models/${e}`,n)}};class Tse extends et{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class Ese extends et{accept(e,n,r){return this._client.post(Ae`/realtime/calls/${e}/accept`,{body:n,...r,headers:Fe([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(Ae`/realtime/calls/${e}/hangup`,{...n,headers:Fe([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(Ae`/realtime/calls/${e}/refer`,{body:n,...r,headers:Fe([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(Ae`/realtime/calls/${e}/reject`,{body:n,...r,headers:Fe([{Accept:"*/*"},r==null?void 0:r.headers])})}}class Ase extends et{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class kT extends et{constructor(){super(...arguments),this.clientSecrets=new Ase(this._client),this.calls=new Ese(this._client)}}kT.ClientSecrets=Ase;kT.Calls=Ese;function dGe(t,e){return!e||!hGe(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:Ose(t,e)}function Ose(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:gGe(e,i)};if(i.type==="message"){const a=i.content.map(s=>s.type==="output_text"?{...s,parsed:fGe(e,s.text)}:s);return{...i,content:a}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||z2(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const a of i.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function fGe(t,e){var n,r,i,a;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((a=t.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function hGe(t){var e;return!!nD((e=t.text)==null?void 0:e.format)}function pGe(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function mGe(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function gGe(t,e){const n=mGe(t.tools??[],e.name);return{...e,...e,parsed_arguments:pGe(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function z2(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var ph,U_,fu,z_,AV,OV,CV,kV;class vD extends iD{constructor(e){super(),ph.add(this),U_.set(this,void 0),fu.set(this,void 0),z_.set(this,void 0),yt(this,U_,e)}static createResponse(e,n,r){const i=new vD(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),fe(this,ph,"m",AV).call(this);let a,s=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),s=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of a)fe(this,ph,"m",OV).call(this,l,s);if((o=a.controller.signal)!=null&&o.aborted)throw new qa;return fe(this,ph,"m",CV).call(this)}[(U_=new WeakMap,fu=new WeakMap,z_=new WeakMap,ph=new WeakSet,AV=function(){this.ended||yt(this,fu,void 0)},OV=function(n,r){if(this.ended)return;const i=(s,o)=>{(r==null||o.sequence_number>r)&&this._emit(s,o)},a=fe(this,ph,"m",kV).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const s=a.output[n.output_index];if(!s)throw new ot(`missing output at index ${n.output_index}`);if(s.type==="message"){const o=s.content[n.content_index];if(!o)throw new ot(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new ot(`expected content to be 'output_text', got ${o.type}`);i("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const s=a.output[n.output_index];if(!s)throw new ot(`missing output at index ${n.output_index}`);s.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:s.arguments});break}default:i(n.type,n);break}},CV=function(){if(this.ended)throw new ot("stream has ended, this shouldn't happen");const n=fe(this,fu,"f");if(!n)throw new ot("request ended without sending any events");yt(this,fu,void 0);const r=yGe(n,fe(this,U_,"f"));return yt(this,z_,r),r},kV=function(n){var i;let r=fe(this,fu,"f");if(!r){if(n.type!=="response.created")throw new ot(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=yt(this,fu,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const a=r.output[n.output_index];if(!a)throw new ot(`missing output at index ${n.output_index}`);const s=a.type,o=n.part;s==="message"&&o.type!=="reasoning_text"?a.content.push(o):s==="reasoning"&&o.type==="reasoning_text"&&(a.content||(a.content=[]),a.content.push(o));break}case"response.output_text.delta":{const a=r.output[n.output_index];if(!a)throw new ot(`missing output at index ${n.output_index}`);if(a.type==="message"){const s=a.content[n.content_index];if(!s)throw new ot(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new ot(`expected content to be 'output_text', got ${s.type}`);s.text+=n.delta}break}case"response.function_call_arguments.delta":{const a=r.output[n.output_index];if(!a)throw new ot(`missing output at index ${n.output_index}`);a.type==="function_call"&&(a.arguments+=n.delta);break}case"response.reasoning_text.delta":{const a=r.output[n.output_index];if(!a)throw new ot(`missing output at index ${n.output_index}`);if(a.type==="reasoning"){const s=(i=a.content)==null?void 0:i[n.content_index];if(!s)throw new ot(`missing content at index ${n.content_index}`);if(s.type!=="reasoning_text")throw new ot(`expected content to be 'reasoning_text', got ${s.type}`);s.text+=n.delta}break}case"response.completed":{yt(this,fu,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,s)=>n.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=fe(this,z_,"f");if(!e)throw new ot("stream ended without producing a ChatCompletion");return e}}function yGe(t,e){return dGe(t,e)}class Cse extends et{list(e,n={},r){return this._client.getAPIList(Ae`/responses/${e}/input_items`,ar,{query:n,...r})}}class kse extends et{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class NT extends et{constructor(){super(...arguments),this.inputItems=new Cse(this._client),this.inputTokens=new kse(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&z2(r),r))}retrieve(e,n={},r){return this._client.get(Ae`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&z2(i),i))}delete(e,n){return this._client.delete(Ae`/responses/${e}`,{...n,headers:Fe([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>Ose(r,e))}stream(e,n){return vD.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(Ae`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}NT.InputItems=Cse;NT.InputTokens=kse;let Nse=class extends et{retrieve(e,n){return this._client.get(Ae`/skills/${e}/content`,{...n,headers:Fe([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}};class Ise extends et{retrieve(e,n,r){const{skill_id:i}=n;return this._client.get(Ae`/skills/${i}/versions/${e}/content`,{...r,headers:Fe([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let bD=class extends et{constructor(){super(...arguments),this.content=new Ise(this._client)}create(e,n={},r){return this._client.post(Ae`/skills/${e}/versions`,Kv({body:n,...r},this._client))}retrieve(e,n,r){const{skill_id:i}=n;return this._client.get(Ae`/skills/${i}/versions/${e}`,r)}list(e,n={},r){return this._client.getAPIList(Ae`/skills/${e}/versions`,ar,{query:n,...r})}delete(e,n,r){const{skill_id:i}=n;return this._client.delete(Ae`/skills/${i}/versions/${e}`,r)}};bD.Content=Ise;let IT=class extends et{constructor(){super(...arguments),this.content=new Nse(this._client),this.versions=new bD(this._client)}create(e={},n){return this._client.post("/skills",Kv({body:e,...n},this._client))}retrieve(e,n){return this._client.get(Ae`/skills/${e}`,n)}update(e,n,r){return this._client.post(Ae`/skills/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/skills",ar,{query:e,...n})}delete(e,n){return this._client.delete(Ae`/skills/${e}`,n)}};IT.Content=Nse;IT.Versions=bD;class Pse extends et{create(e,n,r){return this._client.post(Ae`/uploads/${e}/parts`,rm({body:n,...r},this._client))}}class _D extends et{constructor(){super(...arguments),this.parts=new Pse(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(Ae`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(Ae`/uploads/${e}/complete`,{body:n,...r})}}_D.Parts=Pse;const vGe=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class Rse extends et{create(e,n,r){return this._client.post(Ae`/vector_stores/${e}/file_batches`,{body:n,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(Ae`/vector_stores/${i}/file_batches/${e}`,{...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(Ae`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...a}=n;return this._client.getAPIList(Ae`/vector_stores/${i}/file_batches/${e}/files`,ar,{query:a,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var a;const i=Fe([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=r==null?void 0:r.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:s,response:o}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(s.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const u=parseInt(c);isNaN(u)||(l=u)}}await Pb(l);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(i==null?void 0:i.maxConcurrency)??5,s=Math.min(a,n.length),o=this._client,l=n.values(),c=[...r];async function u(p){for(let m of p){const _=await o.files.create({file:m,purpose:"assistants"},i);c.push(_.id)}}const f=Array(s).fill(l).map(u);return await vGe(f),await this.createAndPoll(e,{file_ids:c})}}let jse=class extends et{create(e,n,r){return this._client.post(Ae`/vector_stores/${e}/files`,{body:n,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(Ae`/vector_stores/${i}/files/${e}`,{...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:i,...a}=n;return this._client.post(Ae`/vector_stores/${i}/files/${e}`,{body:a,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(Ae`/vector_stores/${e}/files`,ar,{query:n,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(Ae`/vector_stores/${i}/files/${e}`,{...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){var a;const i=Fe([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=r==null?void 0:r.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const s=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),o=s.data;switch(o.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const c=s.response.headers.get("openai-poll-after-ms");if(c){const u=parseInt(c);isNaN(u)||(l=u)}}await Pb(l);break;case"failed":case"completed":return o}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(Ae`/vector_stores/${i}/files/${e}/content`,ET,{...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};class PT extends et{constructor(){super(...arguments),this.files=new jse(this._client),this.fileBatches=new Rse(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(Ae`/vector_stores/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(Ae`/vector_stores/${e}`,{body:n,...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",ar,{query:e,...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(Ae`/vector_stores/${e}`,{...n,headers:Fe([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(Ae`/vector_stores/${e}/search`,ET,{body:n,method:"post",...r,headers:Fe([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}PT.Files=jse;PT.FileBatches=Rse;class $se extends et{create(e,n){return this._client.post("/videos",Kv({body:e,...n},this._client))}retrieve(e,n){return this._client.get(Ae`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",T1,{query:e,...n})}delete(e,n){return this._client.delete(Ae`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(Ae`/videos/${e}/content`,{query:n,...r,headers:Fe([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(Ae`/videos/${e}/remix`,Kv({body:n,...r},this._client))}}var kh,Mse,Iw;class Lse extends et{constructor(){super(...arguments),kh.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");fe(this,kh,"m",Mse).call(this,r);const a=Fe([n]).values,s=fe(this,kh,"m",Iw).call(this,a,"webhook-signature"),o=fe(this,kh,"m",Iw).call(this,a,"webhook-timestamp"),l=fe(this,kh,"m",Iw).call(this,a,"webhook-id"),c=parseInt(o,10);if(isNaN(c))throw new ay("Invalid webhook timestamp format");const u=Math.floor(Date.now()/1e3);if(u-c>i)throw new ay("Webhook timestamp is too old");if(c>u+i)throw new ay("Webhook timestamp is too new");const f=s.split(" ").map(y=>y.startsWith("v1,")?y.substring(3):y),p=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),m=l?`${l}.${o}.${e}`:`${o}.${e}`,_=await crypto.subtle.importKey("raw",p,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const y of f)try{const b=Buffer.from(y,"base64");if(await crypto.subtle.verify("HMAC",_,b,new TextEncoder().encode(m)))return}catch{continue}throw new ay("The given webhook signature does not match the expected signature")}}kh=new WeakSet,Mse=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Iw=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var q2,wD,Pw,Dse;class Rt{constructor({baseURL:e=hh("OPENAI_BASE_URL"),apiKey:n=hh("OPENAI_API_KEY"),organization:r=hh("OPENAI_ORG_ID")??null,project:i=hh("OPENAI_PROJECT_ID")??null,webhookSecret:a=hh("OPENAI_WEBHOOK_SECRET")??null,...s}={}){if(q2.add(this),Pw.set(this,void 0),this.completions=new dse(this),this.chat=new oD(this),this.embeddings=new pse(this),this.files=new gse(this),this.images=new xse(this),this.audio=new jb(this),this.moderations=new Tse(this),this.models=new Sse(this),this.fineTuning=new Am(this),this.graders=new yD(this),this.vectorStores=new PT(this),this.webhooks=new Lse(this),this.beta=new Em(this),this.batches=new rse(this),this.uploads=new _D(this),this.responses=new NT(this),this.realtime=new kT(this),this.conversations=new dD(this),this.evals=new hD(this),this.containers=new uD(this),this.skills=new IT(this),this.videos=new $se(this),n===void 0)throw new ot("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const o={apiKey:n,organization:r,project:i,webhookSecret:a,...s,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&bVe())throw new ot(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??wD.DEFAULT_TIMEOUT,this.logger=o.logger??console;const l="warn";this.logLevel=l,this.logLevel=hV(o.logLevel,"ClientOptions.logLevel",this)??hV(hh("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??TVe(),yt(this,Pw,AVe),this._options=o,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Fe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return PVe(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Oh}`}defaultIdempotencyKey(){return`stainless-node-retry-${rae()}`}makeStatusError(e,n,r,i){return pa.generate(e,n,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof ot?r:new ot(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new ot(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const i=!fe(this,q2,"m",Dse).call(this)&&r||this.baseURL,a=pVe(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return mVe(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new Eae(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var x,w;const i=await e,a=i.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(i);const{req:s,url:o,timeout:l}=await this.buildRequest(i,{retryCount:a-n});await this.prepareRequest(s,{url:o,options:i});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),u=r===void 0?"":`, retryOf: ${r}`,f=Date.now();if(ei(this).debug(`[${c}] sending request`,Id({retryOfRequestLogID:r,method:i.method,url:o,options:i,headers:s.headers})),(x=i.signal)!=null&&x.aborted)throw new qa;const p=new AbortController,m=await this.fetchWithTimeout(o,s,l,p).catch(N2),_=Date.now();if(m instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if((w=i.signal)!=null&&w.aborted)throw new qa;const A=k2(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(n)return ei(this).info(`[${c}] connection ${A?"timed out":"failed"} - ${T}`),ei(this).debug(`[${c}] connection ${A?"timed out":"failed"} (${T})`,Id({retryOfRequestLogID:r,url:o,durationMs:_-f,message:m.message})),this.retryRequest(i,n,r??c);throw ei(this).info(`[${c}] connection ${A?"timed out":"failed"} - error; no more retries left`),ei(this).debug(`[${c}] connection ${A?"timed out":"failed"} (error; no more retries left)`,Id({retryOfRequestLogID:r,url:o,durationMs:_-f,message:m.message})),A?new ST:new xT({cause:m})}const y=[...m.headers.entries()].filter(([T])=>T==="x-request-id").map(([T,A])=>", "+T+": "+JSON.stringify(A)).join(""),b=`[${c}${u}${y}] ${s.method} ${o} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${_-f}ms`;if(!m.ok){const T=await this.shouldRetry(m);if(n&&T){const D=`retrying, ${n} attempts remaining`;return await EVe(m.body),ei(this).info(`${b} - ${D}`),ei(this).debug(`[${c}] response error (${D})`,Id({retryOfRequestLogID:r,url:m.url,status:m.status,headers:m.headers,durationMs:_-f})),this.retryRequest(i,n,r??c,m.headers)}const A=T?"error; no more retries left":"error; not retryable";ei(this).info(`${b} - ${A}`);const E=await m.text().catch(D=>N2(D).message),C=vVe(E),R=C?void 0:E;throw ei(this).debug(`[${c}] response error (${A})`,Id({retryOfRequestLogID:r,url:m.url,status:m.status,headers:m.headers,message:R,durationMs:Date.now()-f})),this.makeStatusError(m.status,C,R,m.headers)}return ei(this).info(b),ei(this).debug(`[${c}] response start`,Id({retryOfRequestLogID:r,url:m.url,status:m.status,headers:m.headers,durationMs:_-f})),{response:m,options:i,controller:p,requestLogID:c,retryOfRequestLogID:r,startTime:f}}getAPIList(e,n,r){return this.requestAPIList(n,r&&"then"in r?r.then(i=>({method:"get",path:e,...i})):{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new UVe(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:a,method:s,...o}=n||{},l=this._makeAbort(i);a&&a.addEventListener("abort",l,{once:!0});const c=setTimeout(l,r),u=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,f={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...o};s&&(f.method=s.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let a;const s=i==null?void 0:i.get("retry-after-ms");if(s){const l=parseFloat(s);Number.isNaN(l)||(a=l)}const o=i==null?void 0:i.get("retry-after");if(o&&!a){const l=parseFloat(o);Number.isNaN(l)?a=Date.parse(o)-Date.now():a=l*1e3}if(!(a&&0<=a&&a<60*1e3)){const l=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Pb(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,s=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return s*o*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:a,query:s,defaultBaseURL:o}=r,l=this.buildURL(a,s,o);"timeout"in r&&yVe("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:c,body:u}=this.buildBody({options:r}),f=await this.buildHeaders({options:e,method:i,bodyHeaders:c,retryCount:n});return{req:{method:i,headers:f,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&u instanceof globalThis.ReadableStream&&{duplex:"half"},...u&&{body:u},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const s=Fe([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...SVe(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(s),s.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Fe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:gae(e)}:fe(this,Pw,"f").call(this,{body:e,headers:r})}}wD=Rt,Pw=new WeakMap,q2=new WeakSet,Dse=function(){return this.baseURL!=="https://api.openai.com/v1"};Rt.OpenAI=wD;Rt.DEFAULT_TIMEOUT=6e5;Rt.OpenAIError=ot;Rt.APIError=pa;Rt.APIConnectionError=xT;Rt.APIConnectionTimeoutError=ST;Rt.APIUserAbortError=qa;Rt.NotFoundError=oae;Rt.ConflictError=lae;Rt.RateLimitError=uae;Rt.BadRequestError=iae;Rt.AuthenticationError=aae;Rt.InternalServerError=dae;Rt.PermissionDeniedError=sae;Rt.UnprocessableEntityError=cae;Rt.InvalidWebhookSignatureError=ay;Rt.toFile=VVe;Rt.Completions=dse;Rt.Chat=oD;Rt.Embeddings=pse;Rt.Files=gse;Rt.Images=xse;Rt.Audio=jb;Rt.Moderations=Tse;Rt.Models=Sse;Rt.FineTuning=Am;Rt.Graders=yD;Rt.VectorStores=PT;Rt.Webhooks=Lse;Rt.Beta=Em;Rt.Batches=rse;Rt.Uploads=_D;Rt.Responses=NT;Rt.Realtime=kT;Rt.Conversations=dD;Rt.Evals=hD;Rt.Containers=uD;Rt.Skills=IT;Rt.Videos=$se;function bGe(t){return!!(String(t).includes("context_length_exceeded")||"message"in t&&typeof t.message=="string"&&(t.message.includes("Input tokens exceed the configured limit")||t.message.includes("exceeds the context window")))}function xD(t){if(!t||typeof t!="object")return t;let e;return t.constructor.name===ST.name&&"message"in t&&typeof t.message=="string"?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===qa.name&&"message"in t&&typeof t.message=="string"?(e=new Error(t.message),e.name="AbortError"):bGe(t)?e=Nre.fromError(t):"status"in t&&t.status===400&&"message"in t&&typeof t.message=="string"&&t.message.includes("tool_calls")?e=$_(t,"INVALID_TOOL_RESULTS"):"status"in t&&t.status===401?e=$_(t,"MODEL_AUTHENTICATION"):"status"in t&&t.status===429?e=$_(t,"MODEL_RATE_LIMIT"):"status"in t&&t.status===404?e=$_(t,"MODEL_NOT_FOUND"):e=t,e}const Qd=t=>t();function $b(t){return t?!!(/^o\d/.test(t??"")||t.startsWith("gpt-5")&&!t.startsWith("gpt-5-chat")):!1}function _Ge(t){return t.role!=="system"&&t.role!=="developer"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function NV(t){var e,n,r;return((e=t.metadata)==null?void 0:e.filename)??((n=t.metadata)==null?void 0:n.name)??((r=t.metadata)==null?void 0:r.title)}function P1(t){var n,r,i;const e=((n=t.metadata)==null?void 0:n.filename)??((r=t.metadata)==null?void 0:r.name)??((i=t.metadata)==null?void 0:i.title);if(!e)throw new Error("a filename or name or title is needed via meta-data for OpenAI when working with multimodal blocks");return e}function Mb(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!ML.isInstance(t))throw new Error("Invalid generic chat message");return _Ge(t);default:throw new Error(`Unknown message type: ${e}`)}}function wGe(t){return!!(t.includes("gpt-5.2-pro")||t.includes("codex"))}function xGe(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:n,azureOpenAIApiKey:r,azureOpenAIBasePath:i,baseURL:a,azureADTokenProvider:s,azureOpenAIEndpoint:o}=t;if((r||s)&&i&&e)return`${i}/${e}`;if((r||s)&&o&&e)return`${o}/openai/deployments/${e}`;if(r||s){if(!n)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${n}.openai.azure.com/openai/deployments/${e}`}return a}function IV(t){return typeof Headers<"u"&&t!==null&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Headers]"}function SGe(t){const e=Qd(()=>{if(IV(t))return t;if(Array.isArray(t))return new Headers(t);if(typeof t=="object"&&t!==null&&"values"in t&&IV(t.values))return t.values;if(typeof t=="object"&&t!==null){const n=Object.entries(t).filter(([,r])=>typeof r=="string").map(([r,i])=>[r,i]);return new Headers(n)}return new Headers});return Object.fromEntries(e.entries())}function TGe(){let t=Wre();return(t==="node"||t==="deno")&&(t=`(${t}/${process.version}; ${process.platform}; ${process.arch})`),t}function EGe(t,e=!1,n="1.0.0"){const r=SGe(t),i=TGe(),a=`langchainjs${e?"-azure":""}-openai`;return{...r,"User-Agent":r["User-Agent"]?`${a}/${n} (${i})${r["User-Agent"]}`:`${a}/${n} (${i})`}}function AGe(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function OGe(t){return t!==void 0&&Hr.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function CGe(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&(cl(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function R1(t){return CGe(t)||OGe(t)||AGe(t)}function kGe(t,e){return{name:t.name,description:t.description,parameters:ca(t.schema)}}function NGe(t,e){let n;return R1(t)?n={type:"function",function:kGe(t)}:n=t,n}function IGe(t,e){let n;return R1(t)?n=NGe(t):n=t,(e==null?void 0:e.strict)!==void 0&&(n.function.strict=e.strict),n}function PGe(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function RGe(t){const e=["namespace functions {",""];for(const n of t)n.description&&e.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(e.push(`type ${n.name} = (_: {`),e.push(Bse(n.parameters,0)),e.push("}) => any;")):e.push(`type ${n.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function Bse(t,e){var r;const n=[];for(const[i,a]of Object.entries(t.properties??{}))a.description&&e<2&&n.push(`// ${a.description}`),(r=t.required)!=null&&r.includes(i)?n.push(`${i}: ${j1(a,e)},`):n.push(`${i}?: ${j1(a,e)},`);return n.map(i=>" ".repeat(e)+i).join(`
`)}function j1(t,e){if(PGe(t))return t.anyOf.map(n=>j1(n,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(n=>`"${n}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",Bse(t,e+2),"}"].join(`
`);case"array":return t.items?`${j1(t.items,e)}[]`:"any[]";default:return""}}function Fse(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function SD(t){return"type"in t&&t.type!=="function"}function jGe(t){return typeof t=="object"&&t!==null&&"extras"in t&&typeof t.extras=="object"&&t.extras!==null&&"providerToolDefinition"in t.extras&&typeof t.extras.providerToolDefinition=="object"&&t.extras.providerToolDefinition!==null}function $Ge(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type!=="function"}function $1(t){return typeof t=="object"&&t!==null&&"metadata"in t&&typeof t.metadata=="object"&&t.metadata!==null&&"customTool"in t.metadata&&typeof t.metadata.customTool=="object"&&t.metadata.customTool!==null}function Use(t){return"type"in t&&t.type==="custom"&&"custom"in t&&typeof t.custom=="object"&&t.custom!==null}function MGe(t){if(t.type==="custom_tool_call")return{...t,type:"tool_call",call_id:t.id,id:t.call_id,name:t.name,isCustomTool:!0,args:{input:t.input}}}function LGe(t){if(t.type==="computer_call")return{...t,type:"tool_call",call_id:t.id,id:t.call_id,name:"computer_use",isComputerTool:!0,args:{action:t.action}}}function DGe(t){return typeof t=="object"&&t!==null&&"type"in t&&t.type==="tool_call"&&"isComputerTool"in t&&t.isComputerTool===!0}function BGe(t){return typeof t=="object"&&t!==null&&"type"in t&&t.type==="tool_call"&&"isCustomTool"in t&&t.isCustomTool===!0}function FGe(t){const e=()=>{if(t.custom.format){if(t.custom.format.type==="grammar")return{type:"grammar",definition:t.custom.format.grammar.definition,syntax:t.custom.format.grammar.syntax};if(t.custom.format.type==="text")return{type:"text"}}};return{type:"custom",name:t.custom.name,description:t.custom.description,format:e()}}function UGe(t){const e=()=>{if(t.format){if(t.format.type==="grammar")return{type:"grammar",grammar:{definition:t.format.definition,syntax:t.format.syntax}};if(t.format.type==="text")return{type:"text"}}};return{type:"custom",custom:{name:t.name,description:t.description,format:e()}}}const zGe=Symbol("Let zodToJsonSchema decide on which parser to use"),PV={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},qGe=t=>typeof t=="string"?{...PV,basePath:["#"],definitions:{},name:t}:{...PV,basePath:["#"],definitions:{},...t},H2=t=>"_def"in t?t._def:t;function HGe(t){if(!t)return!0;for(const e in t)return!1;return!0}const WGe=t=>{const e=qGe(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[H2(i),{def:H2(i),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function zse(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function dn(t,e,n,r,i){t[e]=n,zse(t,e,r,i)}function VGe(){return{}}function GGe(t,e){var r,i;const n={type:"array"};return((i=(r=t.type)==null?void 0:r._def)==null?void 0:i.typeName)!==be.ZodAny&&(n.items=Qt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&dn(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&dn(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(dn(n,"minItems",t.exactLength.value,t.exactLength.message,e),dn(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function KGe(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?dn(n,"minimum",r.value,r.message,e):dn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),dn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?dn(n,"maximum",r.value,r.message,e):dn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),dn(n,"maximum",r.value,r.message,e));break;case"multipleOf":dn(n,"multipleOf",r.value,r.message,e);break}return n}function ZGe(){return{type:"boolean"}}function XGe(t,e){return Qt(t.type._def,e)}const JGe=(t,e)=>Qt(t.innerType._def,e);function qse(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,a)=>qse(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return YGe(t,e)}}const YGe=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":dn(n,"minimum",r.value,r.message,e);break;case"max":dn(n,"maximum",r.value,r.message,e);break}return n};function QGe(t,e){return{...Qt(t.innerType._def,e),default:t.defaultValue()}}function eKe(t,e,n){return e.effectStrategy==="input"?Qt(t.schema._def,e,n):{}}function tKe(t){return{type:"string",enum:[...t.values]}}const nKe=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function rKe(t,e){const n=[Qt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Qt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(a=>{if(nKe(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let s=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...l}=a;s=l}else r=void 0;i.push(s)}}),i.length?{allOf:i,...r}:void 0}function iKe(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let AP;const Td={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(AP===void 0&&(AP=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),AP),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function Hse(t,e){const n={type:"string"};function r(i){return e.patternStrategy==="escape"?aKe(i):i}if(t.checks)for(const i of t.checks)switch(i.kind){case"min":dn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e);break;case"max":dn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":to(n,"email",i.message,e);break;case"format:idn-email":to(n,"idn-email",i.message,e);break;case"pattern:zod":no(n,Td.email,i.message,e);break}break;case"url":to(n,"uri",i.message,e);break;case"uuid":to(n,"uuid",i.message,e);break;case"regex":no(n,i.regex,i.message,e);break;case"cuid":no(n,Td.cuid,i.message,e);break;case"cuid2":no(n,Td.cuid2,i.message,e);break;case"startsWith":no(n,RegExp(`^${r(i.value)}`),i.message,e);break;case"endsWith":no(n,RegExp(`${r(i.value)}$`),i.message,e);break;case"datetime":to(n,"date-time",i.message,e);break;case"date":to(n,"date",i.message,e);break;case"time":to(n,"time",i.message,e);break;case"duration":to(n,"duration",i.message,e);break;case"length":dn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e),dn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"includes":{no(n,RegExp(r(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&to(n,"ipv4",i.message,e),i.version!=="v4"&&to(n,"ipv6",i.message,e);break}case"emoji":no(n,Td.emoji,i.message,e);break;case"ulid":{no(n,Td.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{to(n,"binary",i.message,e);break}case"contentEncoding:base64":{dn(n,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{no(n,Td.base64,i.message,e);break}}break}case"nanoid":no(n,Td.nanoid,i.message,e)}return n}const aKe=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),to=(t,e,n,r)=>{var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):dn(t,"format",e,n,r)},no=(t,e,n,r)=>{var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:RV(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):dn(t,"pattern",RV(e,r),n,r)},RV=(t,e)=>{var c;const n=typeof t=="function"?t():t;if(!e.applyRegexFlags||!n.flags)return n.source;const r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},i=r.i?n.source.toLowerCase():n.source;let a="",s=!1,o=!1,l=!1;for(let u=0;u<i.length;u++){if(s){a+=i[u],s=!1;continue}if(r.i){if(o){if(i[u].match(/[a-z]/)){l?(a+=i[u],a+=`${i[u-2]}-${i[u]}`.toUpperCase(),l=!1):i[u+1]==="-"&&((c=i[u+2])!=null&&c.match(/[a-z]/))?(a+=i[u],l=!0):a+=`${i[u]}${i[u].toUpperCase()}`;continue}}else if(i[u].match(/[a-z]/)){a+=`[${i[u]}${i[u].toUpperCase()}]`;continue}}if(r.m){if(i[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(i[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(r.s&&i[u]==="."){a+=o?`${i[u]}\r
`:`[${i[u]}\r
]`;continue}a+=i[u],i[u]==="\\"?s=!0:o&&i[u]==="]"?o=!1:!o&&i[u]==="["&&(o=!0)}try{const u=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return a};function Wse(t,e){var r,i,a,s;if(e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===be.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((o,l)=>({...o,[l]:Qt(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",l]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:Qt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(((i=t.keyType)==null?void 0:i._def.typeName)===be.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){const o=Object.entries(Hse(t.keyType._def,e)).reduce((l,[c,u])=>c==="type"?l:{...l,[c]:u},{});return{...n,propertyNames:o}}else if(((s=t.keyType)==null?void 0:s._def.typeName)===be.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};return n}function sKe(t,e){if(e.mapStrategy==="record")return Wse(t,e);const n=Qt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Qt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function oKe(t){const e=t.values,r=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(r.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function lKe(){return{not:{}}}function cKe(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const M1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function uKe(t,e){if(e.target==="openApi3")return jV(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in M1&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,a)=>{const s=M1[a._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,a)=>{const s=typeof a._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((a,s,o)=>o.indexOf(a)===s);return{type:i.length>1?i:i[0],enum:n.reduce((a,s)=>a.includes(s._def.value)?a:[...a,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(a=>!r.includes(a))],[])};return jV(t,e)}const jV=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>Qt(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function dKe(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:M1[t.innerType._def.typeName],nullable:!0}:{type:[M1[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Qt(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=Qt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function fKe(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",zse(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?dn(n,"minimum",r.value,r.message,e):dn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),dn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?dn(n,"maximum",r.value,r.message,e):dn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),dn(n,"maximum",r.value,r.message,e));break;case"multipleOf":dn(n,"multipleOf",r.value,r.message,e);break}return n}function hKe(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":Qt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":Qt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function pKe(t,e){const n={type:"object",...Object.entries(t.shape()).reduce((r,[i,a])=>{var l;if(a===void 0||a._def===void 0)return r;const s=[...e.currentPath,"properties",i],o=Qt(a._def,{...e,currentPath:s,propertyPath:s});if(o===void 0)return r;if(e.openaiStrictMode&&a.isOptional()&&!a.isNullable()&&typeof((l=a._def)==null?void 0:l.defaultValue)>"u")throw new Error(`Zod field at \`${s.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[i]:o},required:a.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,i]}},{properties:{},required:[]}),additionalProperties:hKe(t,e)};return n.required.length||delete n.required,n}const mKe=(t,e)=>{if(e.propertyPath&&e.currentPath.slice(0,e.propertyPath.length).toString()===e.propertyPath.toString())return Qt(t.innerType._def,{...e,currentPath:e.currentPath});const n=Qt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},gKe=(t,e)=>{if(e.pipeStrategy==="input")return Qt(t.in._def,e);if(e.pipeStrategy==="output")return Qt(t.out._def,e);const n=Qt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Qt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function yKe(t,e){return Qt(t.type._def,e)}function vKe(t,e){const r={type:"array",uniqueItems:!0,items:Qt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&dn(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&dn(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function bKe(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>Qt(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Qt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>Qt(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function _Ke(){return{not:{}}}function wKe(){return{}}const xKe=(t,e)=>Qt(t.innerType._def,e);function Qt(t,e,n=!1){var s;const r=e.seen.get(t);if(e.override){const o=(s=e.override)==null?void 0:s.call(e,t,e,r,n);if(o!==zGe)return o}if(r&&!n){const o=SKe(r,e);if(o!==void 0)return"$ref"in o&&e.seenRefs.add(o.$ref),o}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const a=EKe(t,t.typeName,e,n);return a&&AKe(t,e,a),i.jsonSchema=a,a}const SKe=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"extract-to-root":const n=t.path.slice(e.basePath.length+1).join("_");return n!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[n]=t.def),{$ref:[...e.basePath,e.definitionPath,n].join("/")};case"relative":return{$ref:TKe(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,i)=>e.currentPath[i]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},TKe=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},EKe=(t,e,n,r)=>{switch(e){case be.ZodString:return Hse(t,n);case be.ZodNumber:return fKe(t,n);case be.ZodObject:return pKe(t,n);case be.ZodBigInt:return KGe(t,n);case be.ZodBoolean:return ZGe();case be.ZodDate:return qse(t,n);case be.ZodUndefined:return _Ke();case be.ZodNull:return cKe(n);case be.ZodArray:return GGe(t,n);case be.ZodUnion:case be.ZodDiscriminatedUnion:return uKe(t,n);case be.ZodIntersection:return rKe(t,n);case be.ZodTuple:return bKe(t,n);case be.ZodRecord:return Wse(t,n);case be.ZodLiteral:return iKe(t,n);case be.ZodEnum:return tKe(t);case be.ZodNativeEnum:return oKe(t);case be.ZodNullable:return dKe(t,n);case be.ZodOptional:return mKe(t,n);case be.ZodMap:return sKe(t,n);case be.ZodSet:return vKe(t,n);case be.ZodLazy:return Qt(t.getter()._def,n);case be.ZodPromise:return yKe(t,n);case be.ZodNaN:case be.ZodNever:return lKe();case be.ZodEffects:return eKe(t,n,r);case be.ZodAny:return VGe();case be.ZodUnknown:return wKe();case be.ZodDefault:return QGe(t,n);case be.ZodBranded:return XGe(t,n);case be.ZodReadonly:return xKe(t,n);case be.ZodCatch:return JGe(t,n);case be.ZodPipeline:return gKe(t,n);case be.ZodFunction:case be.ZodVoid:case be.ZodSymbol:return;default:return(i=>{})()}},AKe=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),OKe=(t,e)=>{const n=WGe(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,i=Qt(t._def,r===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,r]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(i.title=a);const s=(()=>{if(HGe(n.definitions))return;const l={},c=new Set;for(let u=0;u<500;u++){const f=Object.entries(n.definitions).filter(([p])=>!c.has(p));if(f.length===0)break;for(const[p,m]of f)l[p]=Qt(H2(m),{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0)??{},c.add(p)}return l})(),o=r===void 0?s?{...i,[n.definitionPath]:s}:i:n.nameStrategy==="duplicate-ref"?{...i,...s||n.seenRefs.size?{[n.definitionPath]:{...s,...n.seenRefs.size?{[r]:i}:void 0}}:void 0}:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,r].join("/"),[n.definitionPath]:{...s,[r]:i}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function CKe(t){if(t.type!=="object")throw new Error(`Root schema must have type: 'object' but got type: ${t.type?`'${t.type}'`:"undefined"}`);const e=structuredClone(t);return nc(e,[],e)}function W2(t){if(typeof t=="boolean")return!1;if(t.type==="null")return!0;for(const e of t.oneOf??[])if(W2(e))return!0;for(const e of t.anyOf??[])if(W2(e))return!0;return!1}function nc(t,e,n){if(typeof t=="boolean")throw new TypeError(`Expected object schema but got boolean; path=${e.join("/")}`);if(!Pd(t))throw new TypeError(`Expected ${JSON.stringify(t)} to be an object; path=${e.join("/")}`);const r=t.$defs;if(Pd(r))for(const[p,m]of Object.entries(r))nc(m,[...e,"$defs",p],n);const i=t.definitions;if(Pd(i))for(const[p,m]of Object.entries(i))nc(m,[...e,"definitions",p],n);t.type==="object"&&!("additionalProperties"in t)&&(t.additionalProperties=!1);const s=t.required??[],o=t.properties;if(Pd(o)){for(const[p,m]of Object.entries(o))if(!W2(m)&&!s.includes(p))throw new Error(`Zod field at \`${[...e,"properties",p].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);t.required=Object.keys(o),t.properties=Object.fromEntries(Object.entries(o).map(([p,m])=>[p,nc(m,[...e,"properties",p],n)]))}const l=t.items;Pd(l)&&(t.items=nc(l,[...e,"items"],n));const c=t.anyOf;Array.isArray(c)&&(t.anyOf=c.map((p,m)=>nc(p,[...e,"anyOf",String(m)],n)));const u=t.allOf;if(Array.isArray(u))if(u.length===1){const p=nc(u[0],[...e,"allOf","0"],n);Object.assign(t,p),delete t.allOf}else t.allOf=u.map((p,m)=>nc(p,[...e,"allOf",String(m)],n));t.default===null&&delete t.default;const f=t.$ref;if(f&&NKe(t,1)){if(typeof f!="string")throw new TypeError(`Received non-string $ref - ${f}; path=${e.join("/")}`);const p=kKe(n,f);if(typeof p=="boolean")throw new Error(`Expected \`$ref: ${f}\` to resolve to an object schema but got boolean`);if(!Pd(p))throw new Error(`Expected \`$ref: ${f}\` to resolve to an object but got ${JSON.stringify(p)}`);return Object.assign(t,{...p,...t}),delete t.$ref,nc(t,e,n)}return t}function kKe(t,e){if(!e.startsWith("#/"))throw new Error(`Unexpected $ref format ${JSON.stringify(e)}; Does not start with #/`);const n=e.slice(2).split("/");let r=t;for(const i of n){if(!Pd(r))throw new Error(`encountered non-object entry while resolving ${e} - ${JSON.stringify(r)}`);const a=r[i];if(a===void 0)throw new Error(`Key ${i} not found while resolving ${e}`);r=a}return r}function Pd(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function NKe(t,e){let n=0;for(const r in t)if(n++,n>e)return!0;return!1}function IKe(t,e){return OKe(t,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function PKe(t){return CKe(lR(t,{target:"draft-7"}))}function RKe(t){return"_zod"in t}function jKe(t,e,n){return ZVe({type:"json_schema",json_schema:{...n,name:e,strict:!0,schema:RKe(t)?PKe(t):IKe(t,{name:e})}},r=>t.parse(JSON.parse(r)))}const $V=["jsonSchema","functionCalling","jsonMode"];function $Ke(t,e){if(typeof e<"u"&&!$V.includes(e))throw new Error(`Invalid method: ${e}. Supported methods are: ${$V.join(", ")}`);const n=!t.startsWith("gpt-3")&&!t.startsWith("gpt-4-")&&t!=="gpt-4";if(n&&!e)return"jsonSchema";if(!n&&e==="jsonSchema")throw new Error(`JSON Schema is not supported for model "${t}". Please use a different method, e.g. "functionCalling" or "jsonMode".`);return e??"functionCalling"}function MKe(t,e){const n={...t};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),n}function LKe(t,e,n){if(Pl(t))return jKe(t,e,n);if(ts(t))return MKe({type:"json_schema",json_schema:{...n,name:e,strict:!0,schema:ca(t,{cycles:"ref",reused:"ref",override(r){r.jsonSchema.title=e}})}},r=>Hve(t,JSON.parse(r)));throw new Error("Unsupported schema response format")}function DKe(t,e){if(e&&typeof e=="object"&&"images"in e&&Array.isArray(e.images)){const n=e.images.filter(r=>{var i;return typeof((i=r==null?void 0:r.image_url)==null?void 0:i.url)=="string"}).map(r=>({type:"image",url:r.image_url.url}));return[{type:"text",text:t},...n]}return t}const BKe={"gpt-4o-2024-11-20":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5.3-codex":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-codex":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-pro":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:272e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-mini":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-ada-002":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-chat-latest":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"codex-mini-latest":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5.1-codex-max":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-05-13":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5.2-chat-latest":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5.2-codex":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o1:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5.1":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini-deep-research":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5.3-codex-spark":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},o3:{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-3-small":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1536,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1-nano":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"text-embedding-3-large":{maxInputTokens:8191,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-3.5-turbo":{maxInputTokens:16385,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1,imageUrlInputs:!1,pdfToolMessage:!1,imageToolMessage:!1,toolChoice:!0},"gpt-5.1-codex-mini":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5.2":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4-turbo":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o4-mini":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4.1-mini":{maxInputTokens:1047576,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-preview":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-pro":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5.1-codex":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5.2-pro":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o3-mini":{maxInputTokens:2e5,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:1e5,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o-2024-08-06":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-mini":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5.1-chat-latest":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4":{maxInputTokens:8192,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-5-nano":{maxInputTokens:4e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"o1-mini":{maxInputTokens:128e3,imageInputs:!1,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0},"gpt-4o":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:16384,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0,toolChoice:!0}};/**
* [js-sha256]{@link https://github.com/emn178/js-sha256}
*
* @version 0.11.1
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2014-2025
* @license MIT
*/var We="0123456789abcdef".split(""),FKe=[-2147483648,8388608,32768,128],ro=[24,16,8,0],q_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Br=[];function Ao(t,e){e?(Br[0]=Br[16]=Br[1]=Br[2]=Br[3]=Br[4]=Br[5]=Br[6]=Br[7]=Br[8]=Br[9]=Br[10]=Br[11]=Br[12]=Br[13]=Br[14]=Br[15]=0,this.blocks=Br):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}Ao.prototype.update=function(t){if(!this.finalized){var e,n=typeof t;if(n!=="string"){if(n==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var r,i=0,a,s=t.length,o=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,this.block=o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),e)for(a=this.start;i<s&&a<64;++i)o[a>>>2]|=t[i]<<ro[a++&3];else for(a=this.start;i<s&&a<64;++i)r=t.charCodeAt(i),r<128?o[a>>>2]|=r<<ro[a++&3]:r<2048?(o[a>>>2]|=(192|r>>>6)<<ro[a++&3],o[a>>>2]|=(128|r&63)<<ro[a++&3]):r<55296||r>=57344?(o[a>>>2]|=(224|r>>>12)<<ro[a++&3],o[a>>>2]|=(128|r>>>6&63)<<ro[a++&3],o[a>>>2]|=(128|r&63)<<ro[a++&3]):(r=65536+((r&1023)<<10|t.charCodeAt(++i)&1023),o[a>>>2]|=(240|r>>>18)<<ro[a++&3],o[a>>>2]|=(128|r>>>12&63)<<ro[a++&3],o[a>>>2]|=(128|r>>>6&63)<<ro[a++&3],o[a>>>2]|=(128|r&63)<<ro[a++&3]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=o[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Ao.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>>2]|=FKe[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};Ao.prototype.hash=function(){var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=this.blocks,c,u,f,p,m,_,y,b,x,w,T;for(c=16;c<64;++c)m=l[c-15],u=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3,m=l[c-2],f=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,l[c]=l[c-16]+u+l[c-7]+f<<0;for(T=e&n,c=0;c<64;c+=4)this.first?(this.is224?(b=300032,m=l[0]-1413257819,o=m-150054599<<0,r=m+24177077<<0):(b=704751109,m=l[0]-210244248,o=m-1521486534<<0,r=m+143694565<<0),this.first=!1):(u=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),f=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),b=t&e,p=b^t&n^T,y=i&a^~i&s,m=o+f+y+q_[c]+l[c],_=u+p,o=r+m<<0,r=m+_<<0),u=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),f=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),x=r&t,p=x^r&e^b,y=s&o^~s&i,m=a+f+y+q_[c+1]+l[c+1],_=u+p,s=n+m<<0,n=m+_<<0,u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),f=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),w=n&r,p=w^n&t^x,y=a&s^~a&o,m=i+f+y+q_[c+2]+l[c+2],_=u+p,a=e+m<<0,e=m+_<<0,u=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),f=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),T=e&n,p=T^e&r^w,y=a&s^~a&o,m=i+f+y+q_[c+3]+l[c+3],_=u+p,i=t+m<<0,t=m+_<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0,this.h5=this.h5+a<<0,this.h6=this.h6+s<<0,this.h7=this.h7+o<<0};Ao.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=We[t>>>28&15]+We[t>>>24&15]+We[t>>>20&15]+We[t>>>16&15]+We[t>>>12&15]+We[t>>>8&15]+We[t>>>4&15]+We[t&15]+We[e>>>28&15]+We[e>>>24&15]+We[e>>>20&15]+We[e>>>16&15]+We[e>>>12&15]+We[e>>>8&15]+We[e>>>4&15]+We[e&15]+We[n>>>28&15]+We[n>>>24&15]+We[n>>>20&15]+We[n>>>16&15]+We[n>>>12&15]+We[n>>>8&15]+We[n>>>4&15]+We[n&15]+We[r>>>28&15]+We[r>>>24&15]+We[r>>>20&15]+We[r>>>16&15]+We[r>>>12&15]+We[r>>>8&15]+We[r>>>4&15]+We[r&15]+We[i>>>28&15]+We[i>>>24&15]+We[i>>>20&15]+We[i>>>16&15]+We[i>>>12&15]+We[i>>>8&15]+We[i>>>4&15]+We[i&15]+We[a>>>28&15]+We[a>>>24&15]+We[a>>>20&15]+We[a>>>16&15]+We[a>>>12&15]+We[a>>>8&15]+We[a>>>4&15]+We[a&15]+We[s>>>28&15]+We[s>>>24&15]+We[s>>>20&15]+We[s>>>16&15]+We[s>>>12&15]+We[s>>>8&15]+We[s>>>4&15]+We[s&15];return this.is224||(l+=We[o>>>28&15]+We[o>>>24&15]+We[o>>>20&15]+We[o>>>16&15]+We[o>>>12&15]+We[o>>>8&15]+We[o>>>4&15]+We[o&15]),l};Ao.prototype.toString=Ao.prototype.hex;Ao.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=[t>>>24&255,t>>>16&255,t>>>8&255,t&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255];return this.is224||l.push(o>>>24&255,o>>>16&255,o>>>8&255,o&255),l};Ao.prototype.array=Ao.prototype.digest;Ao.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};const UKe=(...t)=>new Ao(!1,!0).update(t.join("")).hex(),zKe=(...t)=>UKe(t.join("_"));var qKe=class{constructor(){U(this,"keyEncoder",zKe)}makeDefaultKeyEncoder(t){this.keyEncoder=t}};const HKe=new Map;var WKe=class Vse extends qKe{constructor(n){super();U(this,"cache");this.cache=n??new Map}lookup(n,r){return Promise.resolve(this.cache.get(this.keyEncoder(n,r))??null)}async update(n,r,i){this.cache.set(this.keyEncoder(n,r),i)}static global(){return new Vse(HKe)}},Cg={},MV;function VKe(){if(MV)return Cg;MV=1,Cg.byteLength=o,Cg.toByteArray=c,Cg.fromByteArray=p;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=r.length;i<a;++i)t[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(m){var _=m.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=m.indexOf("=");y===-1&&(y=_);var b=y===_?0:4-y%4;return[y,b]}function o(m){var _=s(m),y=_[0],b=_[1];return(y+b)*3/4-b}function l(m,_,y){return(_+y)*3/4-y}function c(m){var _,y=s(m),b=y[0],x=y[1],w=new n(l(m,b,x)),T=0,A=x>0?b-4:b,E;for(E=0;E<A;E+=4)_=e[m.charCodeAt(E)]<<18|e[m.charCodeAt(E+1)]<<12|e[m.charCodeAt(E+2)]<<6|e[m.charCodeAt(E+3)],w[T++]=_>>16&255,w[T++]=_>>8&255,w[T++]=_&255;return x===2&&(_=e[m.charCodeAt(E)]<<2|e[m.charCodeAt(E+1)]>>4,w[T++]=_&255),x===1&&(_=e[m.charCodeAt(E)]<<10|e[m.charCodeAt(E+1)]<<4|e[m.charCodeAt(E+2)]>>2,w[T++]=_>>8&255,w[T++]=_&255),w}function u(m){return t[m>>18&63]+t[m>>12&63]+t[m>>6&63]+t[m&63]}function f(m,_,y){for(var b,x=[],w=_;w<y;w+=3)b=(m[w]<<16&16711680)+(m[w+1]<<8&65280)+(m[w+2]&255),x.push(u(b));return x.join("")}function p(m){for(var _,y=m.length,b=y%3,x=[],w=16383,T=0,A=y-b;T<A;T+=w)x.push(f(m,T,T+w>A?A:T+w));return b===1?(_=m[y-1],x.push(t[_>>2]+t[_<<4&63]+"==")):b===2&&(_=(m[y-2]<<8)+m[y-1],x.push(t[_>>10]+t[_>>4&63]+t[_<<2&63]+"=")),x.join("")}return Cg}var GKe=VKe();const KKe=Ut(GKe);var ZKe=Object.defineProperty,XKe=(t,e,n)=>e in t?ZKe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JKe=(t,e,n)=>(XKe(t,e+"",n),n);function YKe(t,e){let n=Array.from({length:t.length},(r,i)=>({start:i,end:i+1}));for(;n.length>1;){let r=null;for(let i=0;i<n.length-1;i++){const a=t.slice(n[i].start,n[i+1].end),s=e.get(a.join(","));s!=null&&(r==null||s<r[0])&&(r=[s,i])}if(r!=null){const i=r[1];n[i]={start:n[i].start,end:n[i+1].end},n.splice(i+1,1)}else break}return n}function QKe(t,e){return t.length===1?[e.get(t.join(","))]:YKe(t,e).map(n=>e.get(t.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function eZe(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var V2=class{constructor(t,e){U(this,"specialTokens");U(this,"inverseSpecialTokens");U(this,"patStr");U(this,"textEncoder",new TextEncoder);U(this,"textDecoder",new TextDecoder("utf-8"));U(this,"rankMap",new Map);U(this,"textMap",new Map);this.patStr=t.pat_str;const n=t.bpe_ranks.split(`
`).filter(Boolean).reduce((r,i)=>{const[a,s,...o]=i.split(" "),l=Number.parseInt(s,10);return o.forEach((c,u)=>r[c]=l+u),r},{});for(const[r,i]of Object.entries(n)){const a=KKe.toByteArray(r);this.rankMap.set(a.join(","),i),this.textMap.set(i,a)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[i,a])=>(r[a]=this.textEncoder.encode(i),r),{})}encode(t,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),i=V2.specialTokenRegex(Object.keys(this.specialTokens)),a=[],s=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(n==="all"?Object.keys(this.specialTokens).filter(c=>!s.has(c)):n);if(o.size>0){const c=V2.specialTokenRegex([...o]),u=t.match(c);if(u!=null)throw new Error(`The text contains a special token that is not allowed: ${u[0]}`)}let l=0;for(;;){let c=null,u=l;for(;i.lastIndex=u,c=i.exec(t),!(c==null||s.has(c[0]));)u=c.index+1;const f=(c==null?void 0:c.index)??t.length;for(const m of t.substring(l,f).matchAll(r)){const _=this.textEncoder.encode(m[0]),y=this.rankMap.get(_.join(","));if(y!=null){a.push(y);continue}a.push(...QKe(_,this.rankMap))}if(c==null)break;let p=this.specialTokens[c[0]];a.push(p),l=c.index+c[0].length}return a}decode(t){const e=[];let n=0;for(let a=0;a<t.length;++a){const s=t[a],o=this.textMap.get(s)??this.inverseSpecialTokens[s];o!=null&&(e.push(o),n+=o.length)}const r=new Uint8Array(n);let i=0;for(const a of e)r.set(a,i),i+=a.length;return this.textDecoder.decode(r)}},Gse=V2;JKe(Gse,"specialTokenRegex",t=>new RegExp(t.map(e=>eZe(e)).join("|"),"g"));function tZe(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}const H_={},nZe=new KL({});async function rZe(t){return t in H_||(H_[t]=nZe.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new Gse(e)).catch(e=>{throw delete H_[t],e})),await H_[t]}async function iZe(t){return rZe(tZe(t))}const aZe=t=>t.startsWith("gpt-5")?"gpt-5":t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t;function TD(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}const sZe=()=>!1;var oZe=class extends Hr{constructor(e){super(e);U(this,"verbose");U(this,"callbacks");U(this,"tags");U(this,"metadata");this.verbose=e.verbose??sZe(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}get lc_attributes(){return{callbacks:void 0,verbose:void 0}}},lZe=class extends oZe{constructor({callbacks:e,callbackManager:n,...r}){const{cache:i,...a}=r;super({callbacks:e??n,...a});U(this,"caller");U(this,"cache");U(this,"_encoding");typeof i=="object"?this.cache=i:i?this.cache=WKe.global():this.cache=void 0,this.caller=new KL(r??{})}get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}async getNumTokens(e){let n;typeof e=="string"?n=e:n=e.map(i=>typeof i=="string"?i:i.type==="text"&&"text"in i?i.text:"").join("");let r=Math.ceil(n.length/4);if(!this._encoding)try{this._encoding=await iZe("modelName"in this?aZe(this.modelName):"gpt2")}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}if(this._encoding)try{r=this._encoding.encode(n).length}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new Yie(e):Array.isArray(e)?new qWe(e.map(ww)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([i,a])=>a!==void 0).map(([i,a])=>`${i}:${JSON.stringify(a)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}get profile(){return{}}},im=class extends Hr{constructor(e){super(e);U(this,"lc_namespace",["langchain_core","runnables"]);U(this,"lc_serializable",!0);U(this,"func");e&&(this.func=e.func)}static lc_name(){return"RunnablePassthrough"}async invoke(e,n){const r=cn(n);return this.func&&await this.func(e,r),this._callWithConfig(i=>Promise.resolve(i),e,r)}async*transform(e,n){const r=cn(n);let i,a=!0;for await(const s of this._transformStreamWithConfig(e,o=>o,r))if(yield s,a)if(i===void 0)i=s;else try{i=bT(i,s)}catch{i=void 0,a=!1}this.func&&i!==void 0&&await this.func(i,r)}static assign(e){return new Xie(new _T({steps:e}))}};const cZe=t=>t();function OP(t){const e=t.constructor;return new e({...t,content:t.contentBlocks,response_metadata:{...t.response_metadata,output_version:"v1"}})}function CP(t){const e=[];for(const n of t){let r=n;if(Array.isArray(n.content))for(let i=0;i<n.content.length;i++){const a=n.content[i];(Pre(a)||Rre(a))&&r===n&&(r=new n.constructor({...r,content:[...n.content.slice(0,i),vze(a),...n.content.slice(i+1)]}))}e.push(r)}return e}var Kse=class Rd extends lZe{constructor(n){super(n);U(this,"lc_namespace",["langchain","chat_models",this._llmType()]);U(this,"disableStreaming",!1);U(this,"outputVersion");this.outputVersion=cZe(()=>{const r=n.outputVersion??gl("LC_OUTPUT_VERSION");return r&&["v0","v1"].includes(r)?r:"v0"})}get callKeys(){return[...super.callKeys,"outputVersion"]}_separateRunnableConfigFromCallOptionsCompat(n){const[r,i]=super._separateRunnableConfigFromCallOptions(n);return i.signal=r.signal,[r,i]}async invoke(n,r){const i=Rd._convertInputToPromptValue(n);return(await this.generatePrompt([i],r,r==null?void 0:r.callbacks)).generations[0][0].message}async*_streamResponseChunks(n,r,i){throw new Error("Not implemented.")}async*_streamIterator(n,r){var i,a,s;if(this._streamResponseChunks===Rd.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(n,r);else{const o=Rd._convertInputToPromptValue(n).toChatMessages(),[l,c]=this._separateRunnableConfigFromCallOptionsCompat(r),u={...l.metadata,...this.getLsParams(c)},f=await mc.configure(l.callbacks,this.callbacks,l.tags,this.tags,u,this.metadata,{verbose:this.verbose}),p={options:c,invocation_params:this==null?void 0:this.invocationParams(c),batch_size:1},m=c.outputVersion??this.outputVersion,_=await(f==null?void 0:f.handleChatModelStart(this.toJSON(),[CP(o)],l.runId,void 0,p,void 0,void 0,l.runName));let y,b;try{for await(const x of this._streamResponseChunks(o,c,_==null?void 0:_[0])){if((i=c.signal)==null||i.throwIfAborted(),x.message.id==null){const w=(a=_==null?void 0:_.at(0))==null?void 0:a.runId;w!=null&&x.message._updateId(`run-${w}`)}x.message.response_metadata={...x.generationInfo,...x.message.response_metadata},m==="v1"?yield OP(x.message):yield x.message,y?y=y.concat(x):y=x,V7(x.message)&&x.message.usage_metadata!==void 0&&(b={tokenUsage:{promptTokens:x.message.usage_metadata.input_tokens,completionTokens:x.message.usage_metadata.output_tokens,totalTokens:x.message.usage_metadata.total_tokens}})}(s=c.signal)==null||s.throwIfAborted()}catch(x){throw await Promise.all((_??[]).map(w=>w==null?void 0:w.handleLLMError(x))),x}await Promise.all((_??[]).map(x=>x==null?void 0:x.handleLLMEnd({generations:[[y]],llmOutput:b})))}}getLsParams(n){const r=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:n.stop,ls_provider:r}}async _generateUncached(n,r,i,a){var p,m,_,y;const s=n.map(b=>b.map(ww));let o;if(a!==void 0&&a.length===s.length)o=a;else{const b={...i.metadata,...this.getLsParams(r)},x=await mc.configure(i.callbacks,this.callbacks,i.tags,this.tags,b,this.metadata,{verbose:this.verbose}),w={options:r,invocation_params:this==null?void 0:this.invocationParams(r),batch_size:1};o=await(x==null?void 0:x.handleChatModelStart(this.toJSON(),s.map(CP),i.runId,void 0,w,void 0,void 0,i.runName))}const l=r.outputVersion??this.outputVersion,c=[],u=[];if(o!=null&&o[0].handlers.find(A8e)&&!this.disableStreaming&&s.length===1&&this._streamResponseChunks!==Rd.prototype._streamResponseChunks)try{const b=await this._streamResponseChunks(s[0],r,o==null?void 0:o[0]);let x,w;for await(const T of b){if((p=r.signal)!=null&&p.aborted){const A=x==null?void 0:x.message;throw new R7("Model invocation was aborted.",A)}if(T.message.id==null){const A=(m=o==null?void 0:o.at(0))==null?void 0:m.runId;A!=null&&T.message._updateId(`run-${A}`)}x===void 0?x=T:x=bT(x,T),V7(T.message)&&T.message.usage_metadata!==void 0&&(w={tokenUsage:{promptTokens:T.message.usage_metadata.input_tokens,completionTokens:T.message.usage_metadata.output_tokens,totalTokens:T.message.usage_metadata.total_tokens}})}if((_=r.signal)!=null&&_.aborted){const T=x==null?void 0:x.message;throw new R7("Model invocation was aborted.",T)}if(x===void 0)throw new Error("Received empty response from chat model call.");c.push([x]),await(o==null?void 0:o[0].handleLLMEnd({generations:c,llmOutput:w}))}catch(b){throw await(o==null?void 0:o[0].handleLLMError(b)),b}else{const b=await Promise.allSettled(s.map(async(x,w)=>{const T=await this._generate(x,{...r,promptIndex:w},o==null?void 0:o[w]);if(l==="v1")for(const A of T.generations)A.message=OP(A.message);return T}));await Promise.all(b.map(async(x,w)=>{var T,A,E;if(x.status==="fulfilled"){const C=x.value;for(const R of C.generations){if(R.message.id==null){const N=(T=o==null?void 0:o.at(0))==null?void 0:T.runId;N!=null&&R.message._updateId(`run-${N}`)}R.message.response_metadata={...R.generationInfo,...R.message.response_metadata}}return C.generations.length===1&&(C.generations[0].message.response_metadata={...C.llmOutput,...C.generations[0].message.response_metadata}),c[w]=C.generations,u[w]=C.llmOutput,(A=o==null?void 0:o[w])==null?void 0:A.handleLLMEnd({generations:[C.generations],llmOutput:C.llmOutput})}else return await((E=o==null?void 0:o[w])==null?void 0:E.handleLLMError(x.reason)),Promise.reject(x.reason)}))}const f={generations:c,llmOutput:u.length?(y=this._combineLLMOutput)==null?void 0:y.call(this,...u):void 0};return Object.defineProperty(f,NW,{value:o?{runIds:o==null?void 0:o.map(b=>b.runId)}:void 0,configurable:!0}),f}async _generateCached({messages:n,cache:r,llmStringKey:i,parsedOptions:a,handledOptions:s}){const o=n.map(x=>x.map(ww)),l={...s.metadata,...this.getLsParams(a)},c=await mc.configure(s.callbacks,this.callbacks,s.tags,this.tags,l,this.metadata,{verbose:this.verbose}),u={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:1},f=await(c==null?void 0:c.handleChatModelStart(this.toJSON(),o.map(CP),s.runId,void 0,u,void 0,void 0,s.runName)),p=[],m=(await Promise.allSettled(o.map(async(x,w)=>{const T=Rd._convertInputToPromptValue(x).toString(),A=await r.lookup(T,i);return A==null&&p.push(w),A}))).map((x,w)=>({result:x,runManager:f==null?void 0:f[w]})).filter(({result:x})=>x.status==="fulfilled"&&x.value!=null||x.status==="rejected"),_=a.outputVersion??this.outputVersion,y=[];await Promise.all(m.map(async({result:x,runManager:w},T)=>{if(x.status==="fulfilled"){const A=x.value;return y[T]=A.map(E=>("message"in E&&PL(E.message)&&$L(E.message)&&(E.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},_==="v1"&&(E.message=OP(E.message))),E.generationInfo={...E.generationInfo,tokenUsage:{}},E)),A.length&&await(w==null?void 0:w.handleLLMNewToken(A[0].text)),w==null?void 0:w.handleLLMEnd({generations:[A]},void 0,void 0,void 0,{cached:!0})}else return await(w==null?void 0:w.handleLLMError(x.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(x.reason)}));const b={generations:y,missingPromptIndices:p,startedRunManagers:f};return Object.defineProperty(b,NW,{value:f?{runIds:f==null?void 0:f.map(x=>x.runId)}:void 0,configurable:!0}),b}async generate(n,r,i){let a;Array.isArray(r)?a={stop:r}:a=r;const s=n.map(y=>y.map(ww)),[o,l]=this._separateRunnableConfigFromCallOptionsCompat(a);if(o.callbacks=o.callbacks??i,!this.cache)return this._generateUncached(s,l,o);const{cache:c}=this,u=this._getSerializedCacheKeyParametersForCall(l),{generations:f,missingPromptIndices:p,startedRunManagers:m}=await this._generateCached({messages:s,cache:c,llmStringKey:u,parsedOptions:l,handledOptions:o});let _={};if(p.length>0){const y=await this._generateUncached(p.map(b=>s[b]),l,o,m!==void 0?p.map(b=>m==null?void 0:m[b]):void 0);await Promise.all(y.generations.map(async(b,x)=>{const w=p[x];f[w]=b;const T=Rd._convertInputToPromptValue(s[w]).toString();return c.update(T,u,b)})),_=y.llmOutput??{}}return{generations:f,llmOutput:_}}invocationParams(n){return{}}_modelType(){return"base_chat_model"}async generatePrompt(n,r,i){const a=n.map(s=>s.toChatMessages());return this.generate(a,r,i)}withStructuredOutput(n,r){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(r!=null&&r.strict)throw new Error('"strict" mode is not supported for this model by default.');const i=n,a=r==null?void 0:r.name,s=XL(i)??"A function available to call.",o=r==null?void 0:r.method,l=r==null?void 0:r.includeRaw;if(o==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let c=a??"extract",u;cl(i)?u=[{type:"function",function:{name:c,description:s,parameters:ca(i)}}]:("name"in i&&(c=i.name),u=[{type:"function",function:{name:c,description:s,parameters:i}}]);const f=this.bindTools(u),p=wT.from(b=>{if(!mr.isInstance(b))throw new Error("Input is not an AIMessageChunk.");if(!b.tool_calls||b.tool_calls.length===0)throw new Error("No tool calls found in the response.");const x=b.tool_calls.find(w=>w.name===c);if(!x)throw new Error(`No tool call found with name ${c}.`);return x.args});if(!l)return f.pipe(p).withConfig({runName:"StructuredOutput"});const m=im.assign({parsed:(b,x)=>p.invoke(b.raw,x)}),_=im.assign({parsed:()=>null}),y=m.withFallbacks({fallbacks:[_]});return Nb.from([{raw:f},y]).withConfig({runName:"StructuredOutputRunnable"})}},Zse=class extends Hr{parseResultWithPrompt(t,e,n){return this.parseResult(t,n)}_baseMessageToString(t){return typeof t.content=="string"?t.content:this._baseMessageContentToString(t.content)}_baseMessageContentToString(t){return JSON.stringify(t)}async invoke(t,e){return typeof t=="string"?this._callWithConfig(async(n,r)=>this.parseResult([{text:n}],r==null?void 0:r.callbacks),t,{...e,runType:"parser"}):this._callWithConfig(async(n,r)=>this.parseResult([{message:n,text:this._baseMessageToString(n)}],r==null?void 0:r.callbacks),t,{...e,runType:"parser"})}},Xse=class extends Zse{parseResult(t,e){return this.parse(t[0].text,e)}async parseWithPrompt(t,e,n){return this.parse(t,n)}_type(){throw new Error("_type not implemented")}},Xv=class extends Error{constructor(e,n,r,i=!1){super(e);U(this,"llmOutput");U(this,"observation");U(this,"sendToLLM");if(this.llmOutput=n,this.observation=r,this.sendToLLM=i,i&&(r===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");AL(this,"OUTPUT_PARSING_FAILURE")}},uZe=class extends Xse{async*_transform(t){for await(const e of t)typeof e=="string"?yield this.parseResult([{text:e}]):yield this.parseResult([{message:e,text:this._baseMessageToString(e)}])}async*transform(t,e){yield*this._transformStreamWithConfig(t,this._transform.bind(this),{...e,runType:"parser"})}},Jse=class extends uZe{constructor(e){super(e);U(this,"diff",!1);this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let n,r;for await(const i of e){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let a;if(Fze(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");a=new Jp({message:i,text:i.content})}else if(PL(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");a=new Jp({message:o8e(i),text:i.content})}else a=new m1({text:i});r===void 0?r=a:r=r.concat(a);const s=await this.parsePartialResult([r]);s!=null&&!E2(s,n)&&(this.diff?yield this._diff(n,s):yield s,n=s)}}getFormatInstructions(){return""}},G2=class extends Xse{constructor(e){super(e);U(this,"lc_namespace",["langchain","output_parsers","structured"]);this.schema=e}static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const n=Die(Object.fromEntries(Object.entries(e).map(([r,i])=>[r,Lie().describe(i)])));return new this(n)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(ca(this.schema))}
\`\`\`
`}async parse(e){var n,r;try{const i=e.trim(),a=(((n=i.match(/^```(?:json)?\s*([\s\S]*?)```/))==null?void 0:n[1])||((r=i.match(/```json\s*([\s\S]*?)```/))==null?void 0:r[1])||i).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(s,o)=>`"${o.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await Nie(this.schema,JSON.parse(a))}catch(i){throw new Xv(`Failed to parse. Text: "${e}". Error: ${i}`,e)}}},K2=class extends Jse{constructor(){super(...arguments);U(this,"lc_namespace",["langchain_core","output_parsers"]);U(this,"lc_serializable",!0)}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(e,n){return this.diff?super._concatOutputChunks(e,n):n}_diff(e,n){if(n)return e?Z7e(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return j7(e[0].text)}async parse(e){return j7(e,JSON.parse)}getFormatInstructions(){return""}_baseMessageToString(e){return e.text}};const dZe=function(){const t={};t.parser=function(H,$){return new n(H,$)},t.SAXParser=n,t.SAXStream=c,t.createStream=l,t.MAX_BUFFER_LENGTH=64*1024;const e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(H,$){if(!(this instanceof n))return new n(H,$);var ne=this;i(ne),ne.q=ne.c="",ne.bufferCheckPosition=t.MAX_BUFFER_LENGTH,ne.opt=$||{},ne.opt.lowercase=ne.opt.lowercase||ne.opt.lowercasetags,ne.looseCase=ne.opt.lowercase?"toLowerCase":"toUpperCase",ne.tags=[],ne.closed=ne.closedRoot=ne.sawRoot=!1,ne.tag=ne.error=null,ne.strict=!!H,ne.noscript=!!(H||ne.opt.noscript),ne.state=N.BEGIN,ne.strictEntities=ne.opt.strictEntities,ne.ENTITIES=ne.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),ne.attribList=[],ne.opt.xmlns&&(ne.ns=Object.create(_)),ne.trackPosition=ne.opt.position!==!1,ne.trackPosition&&(ne.position=ne.line=ne.column=0),Z(ne,"onready")}Object.create||(Object.create=function(H){function $(){}return $.prototype=H,new $}),Object.keys||(Object.keys=function(H){var $=[];for(var ne in H)H.hasOwnProperty(ne)&&$.push(ne);return $});function r(H){for(var $=Math.max(t.MAX_BUFFER_LENGTH,10),ne=0,X=0,pe=e.length;X<pe;X++){var ye=H[e[X]].length;if(ye>$)switch(e[X]){case"textNode":L(H);break;case"cdata":j(H,"oncdata",H.cdata),H.cdata="";break;case"script":j(H,"onscript",H.script),H.script="";break;default:z(H,"Max buffer length exceeded: "+e[X])}ne=Math.max(ne,ye)}H.bufferCheckPosition=t.MAX_BUFFER_LENGTH-ne+H.position}function i(H){for(var $=0,ne=e.length;$<ne;$++)H[e[$]]=""}function a(H){L(H),H.cdata!==""&&(j(H,"oncdata",H.cdata),H.cdata=""),H.script!==""&&(j(H,"onscript",H.script),H.script="")}n.prototype={end:function(){W(this)},write:ue,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var s=ReadableStream;s||(s=function(){});var o=t.EVENTS.filter(function(H){return H!=="error"&&H!=="end"});function l(H,$){return new c(H,$)}function c(H,$){if(!(this instanceof c))return new c(H,$);s.apply(this),this._parser=new n(H,$),this.writable=!0,this.readable=!0;var ne=this;this._parser.onend=function(){ne.emit("end")},this._parser.onerror=function(X){ne.emit("error",X),ne._parser.error=null},this._decoder=null,o.forEach(function(X){Object.defineProperty(ne,"on"+X,{get:function(){return ne._parser["on"+X]},set:function(pe){if(!pe)return ne.removeAllListeners(X),ne._parser["on"+X]=pe,pe;ne.on(X,pe)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(s.prototype,{constructor:{value:c}}),c.prototype.write=function(H){return this._parser.write(H.toString()),this.emit("data",H),!0},c.prototype.end=function(H){return H&&H.length&&this.write(H),this._parser.end(),!0},c.prototype.on=function(H,$){var ne=this;return!ne._parser["on"+H]&&o.indexOf(H)!==-1&&(ne._parser["on"+H]=function(){var X=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);X.splice(0,0,H),ne.emit.apply(ne,X)}),s.prototype.on.call(ne,H,$)};var u="[CDATA[",f="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",_={xml:p,xmlns:m},y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function T(H){return H===" "||H===`
`||H==="\r"||H==="	"}function A(H){return H==='"'||H==="'"}function E(H){return H===">"||T(H)}function C(H,$){return H.test($)}function R(H,$){return!C(H,$)}var N=0;t.STATE={BEGIN:N++,BEGIN_WHITESPACE:N++,TEXT:N++,TEXT_ENTITY:N++,OPEN_WAKA:N++,SGML_DECL:N++,SGML_DECL_QUOTED:N++,DOCTYPE:N++,DOCTYPE_QUOTED:N++,DOCTYPE_DTD:N++,DOCTYPE_DTD_QUOTED:N++,COMMENT_STARTING:N++,COMMENT:N++,COMMENT_ENDING:N++,COMMENT_ENDED:N++,CDATA:N++,CDATA_ENDING:N++,CDATA_ENDING_2:N++,PROC_INST:N++,PROC_INST_BODY:N++,PROC_INST_ENDING:N++,OPEN_TAG:N++,OPEN_TAG_SLASH:N++,ATTRIB:N++,ATTRIB_NAME:N++,ATTRIB_NAME_SAW_WHITE:N++,ATTRIB_VALUE:N++,ATTRIB_VALUE_QUOTED:N++,ATTRIB_VALUE_CLOSED:N++,ATTRIB_VALUE_UNQUOTED:N++,ATTRIB_VALUE_ENTITY_Q:N++,ATTRIB_VALUE_ENTITY_U:N++,CLOSE_TAG:N++,CLOSE_TAG_SAW_WHITE:N++,SCRIPT:N++,SCRIPT_ENDING:N++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(H){var $=t.ENTITIES[H],ne=typeof $=="number"?String.fromCharCode($):$;t.ENTITIES[H]=ne});for(var D in t.STATE)t.STATE[t.STATE[D]]=D;N=t.STATE;function Z(H,$,ne){H[$]&&H[$](ne)}function j(H,$,ne){H.textNode&&L(H),Z(H,$,ne)}function L(H){H.textNode=B(H.opt,H.textNode),H.textNode&&Z(H,"ontext",H.textNode),H.textNode=""}function B(H,$){return H.trim&&($=$.trim()),H.normalize&&($=$.replace(/\s+/g," ")),$}function z(H,$){return L(H),H.trackPosition&&($+=`
Line: `+H.line+`
Column: `+H.column+`
Char: `+H.c),$=new Error($),H.error=$,Z(H,"onerror",$),H}function W(H){return H.sawRoot&&!H.closedRoot&&q(H,"Unclosed root tag"),H.state!==N.BEGIN&&H.state!==N.BEGIN_WHITESPACE&&H.state!==N.TEXT&&z(H,"Unexpected end"),L(H),H.c="",H.closed=!0,Z(H,"onend"),n.call(H,H.strict,H.opt),H}function q(H,$){if(typeof H!="object"||!(H instanceof n))throw new Error("bad call to strictFail");H.strict&&z(H,$)}function K(H){H.strict||(H.tagName=H.tagName[H.looseCase]());var $=H.tags[H.tags.length-1]||H,ne=H.tag={name:H.tagName,attributes:{}};H.opt.xmlns&&(ne.ns=$.ns),H.attribList.length=0,j(H,"onopentagstart",ne)}function V(H,$){var ne=H.indexOf(":")<0?["",H]:H.split(":"),X=ne[0],pe=ne[1];return $&&H==="xmlns"&&(X="xmlns",pe=""),{prefix:X,local:pe}}function J(H){if(H.strict||(H.attribName=H.attribName[H.looseCase]()),H.attribList.indexOf(H.attribName)!==-1||H.tag.attributes.hasOwnProperty(H.attribName)){H.attribName=H.attribValue="";return}if(H.opt.xmlns){var $=V(H.attribName,!0),ne=$.prefix,X=$.local;if(ne==="xmlns")if(X==="xml"&&H.attribValue!==p)q(H,"xml: prefix must be bound to "+p+`
Actual: `+H.attribValue);else if(X==="xmlns"&&H.attribValue!==m)q(H,"xmlns: prefix must be bound to "+m+`
Actual: `+H.attribValue);else{var pe=H.tag,ye=H.tags[H.tags.length-1]||H;pe.ns===ye.ns&&(pe.ns=Object.create(ye.ns)),pe.ns[X]=H.attribValue}H.attribList.push([H.attribName,H.attribValue])}else H.tag.attributes[H.attribName]=H.attribValue,j(H,"onattribute",{name:H.attribName,value:H.attribValue});H.attribName=H.attribValue=""}function Q(H,$){if(H.opt.xmlns){var ne=H.tag,X=V(H.tagName);ne.prefix=X.prefix,ne.local=X.local,ne.uri=ne.ns[X.prefix]||"",ne.prefix&&!ne.uri&&(q(H,"Unbound namespace prefix: "+JSON.stringify(H.tagName)),ne.uri=X.prefix);var pe=H.tags[H.tags.length-1]||H;ne.ns&&pe.ns!==ne.ns&&Object.keys(ne.ns).forEach(function(_n){j(H,"onopennamespace",{prefix:_n,uri:ne.ns[_n]})});for(var ye=0,le=H.attribList.length;ye<le;ye++){var Ne=H.attribList[ye],je=Ne[0],Xe=Ne[1],st=V(je,!0),kt=st.prefix,vn=st.local,gn=kt===""?"":ne.ns[kt]||"",bn={name:je,value:Xe,prefix:kt,local:vn,uri:gn};kt&&kt!=="xmlns"&&!gn&&(q(H,"Unbound namespace prefix: "+JSON.stringify(kt)),bn.uri=kt),H.tag.attributes[je]=bn,j(H,"onattribute",bn)}H.attribList.length=0}H.tag.isSelfClosing=!!$,H.sawRoot=!0,H.tags.push(H.tag),j(H,"onopentag",H.tag),$||(!H.noscript&&H.tagName.toLowerCase()==="script"?H.state=N.SCRIPT:H.state=N.TEXT,H.tag=null,H.tagName=""),H.attribName=H.attribValue="",H.attribList.length=0}function M(H){if(!H.tagName){q(H,"Weird empty close tag."),H.textNode+="</>",H.state=N.TEXT;return}if(H.script){if(H.tagName!=="script"){H.script+="</"+H.tagName+">",H.tagName="",H.state=N.SCRIPT;return}j(H,"onscript",H.script),H.script=""}var $=H.tags.length,ne=H.tagName;H.strict||(ne=ne[H.looseCase]());for(var X=ne;$--&&H.tags[$].name!==X;)q(H,"Unexpected close tag");if($<0){q(H,"Unmatched closing tag: "+H.tagName),H.textNode+="</"+H.tagName+">",H.state=N.TEXT;return}H.tagName=ne;for(var pe=H.tags.length;pe-- >$;){var ye=H.tag=H.tags.pop();H.tagName=H.tag.name,j(H,"onclosetag",H.tagName);var le={};for(var Ne in ye.ns)le[Ne]=ye.ns[Ne];var je=H.tags[H.tags.length-1]||H;H.opt.xmlns&&ye.ns!==je.ns&&Object.keys(ye.ns).forEach(function(Xe){var st=ye.ns[Xe];j(H,"onclosenamespace",{prefix:Xe,uri:st})})}$===0&&(H.closedRoot=!0),H.tagName=H.attribValue=H.attribName="",H.attribList.length=0,H.state=N.TEXT}function Y(H){var $=H.entity,ne=$.toLowerCase(),X,pe="";return H.ENTITIES[$]?H.ENTITIES[$]:H.ENTITIES[ne]?H.ENTITIES[ne]:($=ne,$.charAt(0)==="#"&&($.charAt(1)==="x"?($=$.slice(2),X=parseInt($,16),pe=X.toString(16)):($=$.slice(1),X=parseInt($,10),pe=X.toString(10))),$=$.replace(/^0+/,""),isNaN(X)||pe.toLowerCase()!==$?(q(H,"Invalid character entity"),"&"+H.entity+";"):String.fromCodePoint(X))}function se(H,$){$==="<"?(H.state=N.OPEN_WAKA,H.startTagPosition=H.position):T($)||(q(H,"Non-whitespace before first tag."),H.textNode=$,H.state=N.TEXT)}function ge(H,$){var ne="";return $<H.length&&(ne=H.charAt($)),ne}function ue(H){var $=this;if(this.error)throw this.error;if($.closed)return z($,"Cannot write after close. Assign an onready handler.");if(H===null)return W($);typeof H=="object"&&(H=H.toString());for(var ne=0,X="";X=ge(H,ne++),$.c=X,!!X;)switch($.trackPosition&&($.position++,X===`
`?($.line++,$.column=0):$.column++),$.state){case N.BEGIN:if($.state=N.BEGIN_WHITESPACE,X==="\uFEFF")continue;se($,X);continue;case N.BEGIN_WHITESPACE:se($,X);continue;case N.TEXT:if($.sawRoot&&!$.closedRoot){for(var pe=ne-1;X&&X!=="<"&&X!=="&";)X=ge(H,ne++),X&&$.trackPosition&&($.position++,X===`
`?($.line++,$.column=0):$.column++);$.textNode+=H.substring(pe,ne-1)}X==="<"&&!($.sawRoot&&$.closedRoot&&!$.strict)?($.state=N.OPEN_WAKA,$.startTagPosition=$.position):(!T(X)&&(!$.sawRoot||$.closedRoot)&&q($,"Text data outside of root node."),X==="&"?$.state=N.TEXT_ENTITY:$.textNode+=X);continue;case N.SCRIPT:X==="<"?$.state=N.SCRIPT_ENDING:$.script+=X;continue;case N.SCRIPT_ENDING:X==="/"?$.state=N.CLOSE_TAG:($.script+="<"+X,$.state=N.SCRIPT);continue;case N.OPEN_WAKA:if(X==="!")$.state=N.SGML_DECL,$.sgmlDecl="";else if(!T(X))if(C(y,X))$.state=N.OPEN_TAG,$.tagName=X;else if(X==="/")$.state=N.CLOSE_TAG,$.tagName="";else if(X==="?")$.state=N.PROC_INST,$.procInstName=$.procInstBody="";else{if(q($,"Unencoded <"),$.startTagPosition+1<$.position){var ye=$.position-$.startTagPosition;X=new Array(ye).join(" ")+X}$.textNode+="<"+X,$.state=N.TEXT}continue;case N.SGML_DECL:($.sgmlDecl+X).toUpperCase()===u?(j($,"onopencdata"),$.state=N.CDATA,$.sgmlDecl="",$.cdata=""):$.sgmlDecl+X==="--"?($.state=N.COMMENT,$.comment="",$.sgmlDecl=""):($.sgmlDecl+X).toUpperCase()===f?($.state=N.DOCTYPE,($.doctype||$.sawRoot)&&q($,"Inappropriately located doctype declaration"),$.doctype="",$.sgmlDecl=""):X===">"?(j($,"onsgmldeclaration",$.sgmlDecl),$.sgmlDecl="",$.state=N.TEXT):(A(X)&&($.state=N.SGML_DECL_QUOTED),$.sgmlDecl+=X);continue;case N.SGML_DECL_QUOTED:X===$.q&&($.state=N.SGML_DECL,$.q=""),$.sgmlDecl+=X;continue;case N.DOCTYPE:X===">"?($.state=N.TEXT,j($,"ondoctype",$.doctype),$.doctype=!0):($.doctype+=X,X==="["?$.state=N.DOCTYPE_DTD:A(X)&&($.state=N.DOCTYPE_QUOTED,$.q=X));continue;case N.DOCTYPE_QUOTED:$.doctype+=X,X===$.q&&($.q="",$.state=N.DOCTYPE);continue;case N.DOCTYPE_DTD:$.doctype+=X,X==="]"?$.state=N.DOCTYPE:A(X)&&($.state=N.DOCTYPE_DTD_QUOTED,$.q=X);continue;case N.DOCTYPE_DTD_QUOTED:$.doctype+=X,X===$.q&&($.state=N.DOCTYPE_DTD,$.q="");continue;case N.COMMENT:X==="-"?$.state=N.COMMENT_ENDING:$.comment+=X;continue;case N.COMMENT_ENDING:X==="-"?($.state=N.COMMENT_ENDED,$.comment=B($.opt,$.comment),$.comment&&j($,"oncomment",$.comment),$.comment=""):($.comment+="-"+X,$.state=N.COMMENT);continue;case N.COMMENT_ENDED:X!==">"?(q($,"Malformed comment"),$.comment+="--"+X,$.state=N.COMMENT):$.state=N.TEXT;continue;case N.CDATA:X==="]"?$.state=N.CDATA_ENDING:$.cdata+=X;continue;case N.CDATA_ENDING:X==="]"?$.state=N.CDATA_ENDING_2:($.cdata+="]"+X,$.state=N.CDATA);continue;case N.CDATA_ENDING_2:X===">"?($.cdata&&j($,"oncdata",$.cdata),j($,"onclosecdata"),$.cdata="",$.state=N.TEXT):X==="]"?$.cdata+="]":($.cdata+="]]"+X,$.state=N.CDATA);continue;case N.PROC_INST:X==="?"?$.state=N.PROC_INST_ENDING:T(X)?$.state=N.PROC_INST_BODY:$.procInstName+=X;continue;case N.PROC_INST_BODY:if(!$.procInstBody&&T(X))continue;X==="?"?$.state=N.PROC_INST_ENDING:$.procInstBody+=X;continue;case N.PROC_INST_ENDING:X===">"?(j($,"onprocessinginstruction",{name:$.procInstName,body:$.procInstBody}),$.procInstName=$.procInstBody="",$.state=N.TEXT):($.procInstBody+="?"+X,$.state=N.PROC_INST_BODY);continue;case N.OPEN_TAG:C(b,X)?$.tagName+=X:(K($),X===">"?Q($):X==="/"?$.state=N.OPEN_TAG_SLASH:(T(X)||q($,"Invalid character in tag name"),$.state=N.ATTRIB));continue;case N.OPEN_TAG_SLASH:X===">"?(Q($,!0),M($)):(q($,"Forward-slash in opening tag not followed by >"),$.state=N.ATTRIB);continue;case N.ATTRIB:if(T(X))continue;X===">"?Q($):X==="/"?$.state=N.OPEN_TAG_SLASH:C(y,X)?($.attribName=X,$.attribValue="",$.state=N.ATTRIB_NAME):q($,"Invalid attribute name");continue;case N.ATTRIB_NAME:X==="="?$.state=N.ATTRIB_VALUE:X===">"?(q($,"Attribute without value"),$.attribValue=$.attribName,J($),Q($)):T(X)?$.state=N.ATTRIB_NAME_SAW_WHITE:C(b,X)?$.attribName+=X:q($,"Invalid attribute name");continue;case N.ATTRIB_NAME_SAW_WHITE:if(X==="=")$.state=N.ATTRIB_VALUE;else{if(T(X))continue;q($,"Attribute without value"),$.tag.attributes[$.attribName]="",$.attribValue="",j($,"onattribute",{name:$.attribName,value:""}),$.attribName="",X===">"?Q($):C(y,X)?($.attribName=X,$.state=N.ATTRIB_NAME):(q($,"Invalid attribute name"),$.state=N.ATTRIB)}continue;case N.ATTRIB_VALUE:if(T(X))continue;A(X)?($.q=X,$.state=N.ATTRIB_VALUE_QUOTED):(q($,"Unquoted attribute value"),$.state=N.ATTRIB_VALUE_UNQUOTED,$.attribValue=X);continue;case N.ATTRIB_VALUE_QUOTED:if(X!==$.q){X==="&"?$.state=N.ATTRIB_VALUE_ENTITY_Q:$.attribValue+=X;continue}J($),$.q="",$.state=N.ATTRIB_VALUE_CLOSED;continue;case N.ATTRIB_VALUE_CLOSED:T(X)?$.state=N.ATTRIB:X===">"?Q($):X==="/"?$.state=N.OPEN_TAG_SLASH:C(y,X)?(q($,"No whitespace between attributes"),$.attribName=X,$.attribValue="",$.state=N.ATTRIB_NAME):q($,"Invalid attribute name");continue;case N.ATTRIB_VALUE_UNQUOTED:if(!E(X)){X==="&"?$.state=N.ATTRIB_VALUE_ENTITY_U:$.attribValue+=X;continue}J($),X===">"?Q($):$.state=N.ATTRIB;continue;case N.CLOSE_TAG:if($.tagName)X===">"?M($):C(b,X)?$.tagName+=X:$.script?($.script+="</"+$.tagName,$.tagName="",$.state=N.SCRIPT):(T(X)||q($,"Invalid tagname in closing tag"),$.state=N.CLOSE_TAG_SAW_WHITE);else{if(T(X))continue;R(y,X)?$.script?($.script+="</"+X,$.state=N.SCRIPT):q($,"Invalid tagname in closing tag."):$.tagName=X}continue;case N.CLOSE_TAG_SAW_WHITE:if(T(X))continue;X===">"?M($):q($,"Invalid characters in closing tag");continue;case N.TEXT_ENTITY:case N.ATTRIB_VALUE_ENTITY_Q:case N.ATTRIB_VALUE_ENTITY_U:var le,Ne;switch($.state){case N.TEXT_ENTITY:le=N.TEXT,Ne="textNode";break;case N.ATTRIB_VALUE_ENTITY_Q:le=N.ATTRIB_VALUE_QUOTED,Ne="attribValue";break;case N.ATTRIB_VALUE_ENTITY_U:le=N.ATTRIB_VALUE_UNQUOTED,Ne="attribValue";break}if(X===";")if($.opt.unparsedEntities){var je=Y($);$.entity="",$.state=le,$.write(je)}else $[Ne]+=Y($),$.entity="",$.state=le;else C($.entity.length?w:x,X)?$.entity+=X:(q($,"Invalid character in entity name"),$[Ne]+="&"+$.entity+X,$.entity="",$.state=le);continue;default:throw new Error($,"Unknown state: "+$.state)}return $.position>=$.bufferCheckPosition&&r($),$}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */return String.fromCodePoint||(function(){var H=String.fromCharCode,$=Math.floor,ne=function(){var X=16384,pe=[],ye,le,Ne=-1,je=arguments.length;if(!je)return"";for(var Xe="";++Ne<je;){var st=Number(arguments[Ne]);if(!isFinite(st)||st<0||st>1114111||$(st)!==st)throw RangeError("Invalid code point: "+st);st<=65535?pe.push(st):(st-=65536,ye=(st>>10)+55296,le=st%1024+56320,pe.push(ye,le)),(Ne+1===je||pe.length>X)&&(Xe+=H.apply(null,pe),pe.length=0)}return Xe};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ne,configurable:!0,writable:!0}):String.fromCodePoint=ne})(),t};dZe();function ED(t,e){if(t.function===void 0)return;let n;if(e!=null&&e.partial)try{n=CL(t.function.arguments??"{}")}catch{return}else try{n=JSON.parse(t.function.arguments)}catch(i){throw new Xv([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}const r={name:t.function.name,args:n,type:"tool_call"};return e!=null&&e.returnId&&(r.id=t.id),r}function fZe(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function Rw(t,e){var n,r;return{name:(n=t.function)==null?void 0:n.name,args:(r=t.function)==null?void 0:r.arguments,id:t.id,error:e,type:"invalid_tool_call"}}var hZe=class extends Jse{constructor(e){super(e);U(this,"returnId",!1);U(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);U(this,"lc_serializable",!0);this.returnId=(e==null?void 0:e.returnId)??this.returnId}static lc_name(){return"JsonOutputToolsParser"}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,n=!0){var s;const r=e[0].message;let i;if($L(r)&&((s=r.tool_calls)!=null&&s.length)?i=r.tool_calls.map(o=>{const{id:l,...c}=o;return this.returnId?{id:l,...c}:c}):r.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(o=>ED(o,{returnId:this.returnId,partial:n}))),!i)return[];const a=[];for(const o of i)if(o!==void 0){const l={type:o.name,args:o.args,id:o.id};a.push(l)}return a}},LV=class extends hZe{constructor(e){super(e);U(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);U(this,"lc_serializable",!0);U(this,"returnId",!1);U(this,"keyName");U(this,"returnSingle",!1);U(this,"zodSchema");this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}static lc_name(){return"JsonOutputKeyToolsParser"}async _validateResult(e){var r;if(this.zodSchema===void 0)return e;const n=await kie(this.zodSchema,e);if(n.success)return n.data;throw new Xv(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify((r=n.error)==null?void 0:r.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const n=(await super.parsePartialResult(e)).filter(i=>i.type===this.keyName);let r=n;if(n.length)return this.returnId||(r=n.map(i=>i.args)),this.returnSingle?r[0]:r}async parseResult(e){const n=(await super.parsePartialResult(e,!1)).filter(i=>i.type===this.keyName);let r=n;if(n.length)return this.returnId||(r=n.map(i=>i.args)),this.returnSingle?this._validateResult(r[0]):await Promise.all(r.map(i=>this._validateResult(i)))}},AD=class extends Kse{constructor(e){var r,i,a,s;super(e??{});U(this,"temperature");U(this,"topP");U(this,"frequencyPenalty");U(this,"presencePenalty");U(this,"n");U(this,"logitBias");U(this,"model","gpt-3.5-turbo");U(this,"modelKwargs");U(this,"stop");U(this,"stopSequences");U(this,"user");U(this,"timeout");U(this,"streaming",!1);U(this,"streamUsage",!0);U(this,"maxTokens");U(this,"logprobs");U(this,"topLogprobs");U(this,"apiKey");U(this,"organization");U(this,"__includeRawResponse");U(this,"client");U(this,"clientConfig");U(this,"supportsStrictToolCalling");U(this,"audio");U(this,"modalities");U(this,"reasoning");U(this,"zdrEnabled");U(this,"service_tier");U(this,"promptCacheKey");U(this,"promptCacheRetention");U(this,"verbosity");U(this,"defaultOptions");U(this,"lc_serializable",!0);const n=typeof((r=e==null?void 0:e.configuration)==null?void 0:r.apiKey)=="string"||typeof((i=e==null?void 0:e.configuration)==null?void 0:i.apiKey)=="function"?(a=e==null?void 0:e.configuration)==null?void 0:a.apiKey:void 0;this.apiKey=(e==null?void 0:e.apiKey)??n??gl("OPENAI_API_KEY"),this.organization=((s=e==null?void 0:e.configuration)==null?void 0:s.organization)??gl("OPENAI_ORGANIZATION"),this.model=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoning=e==null?void 0:e.reasoning,this.maxTokens=(e==null?void 0:e.maxCompletionTokens)??(e==null?void 0:e.maxTokens),this.promptCacheKey=(e==null?void 0:e.promptCacheKey)??this.promptCacheKey,this.promptCacheRetention=(e==null?void 0:e.promptCacheRetention)??this.promptCacheRetention,this.verbosity=(e==null?void 0:e.verbosity)??this.verbosity,this.disableStreaming=(e==null?void 0:e.disableStreaming)===!0,this.streaming=(e==null?void 0:e.streaming)===!0,this.disableStreaming&&(this.streaming=!1),(e==null?void 0:e.streaming)===!1&&(this.disableStreaming=!0),this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),(e==null?void 0:e.service_tier)!==void 0&&(this.service_tier=e.service_tier),this.zdrEnabled=(e==null?void 0:e.zdrEnabled)??!1}_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","reasoning_effort","service_tier"]}get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning","promptCacheKey","promptCacheRetention","verbosity"]}getLsParams(e){const n=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??void 0,ls_max_tokens:n.max_tokens??void 0,ls_stop:e.stop}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}_getReasoningParams(e){if(!$b(this.model))return;let n;return this.reasoning!==void 0&&(n={...n,...this.reasoning}),(e==null?void 0:e.reasoning)!==void 0&&(n={...n,...e.reasoning}),(e==null?void 0:e.reasoningEffort)!==void 0&&(n==null?void 0:n.effort)===void 0&&(n={...n,effort:e.reasoningEffort}),n}_getResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&cl(e.json_schema.schema)?LKe(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return{...this.defaultOptions,...e??{}}}_getClientOptions(e){if(!this.client){const n=xGe({baseURL:this.clientConfig.baseURL}),r={...this.clientConfig,baseURL:n,timeout:this.timeout,maxRetries:0};r.baseURL||delete r.baseURL,r.defaultHeaders=EGe(r.defaultHeaders),this.client=new Rt(r)}return{...this.clientConfig,...e}}_convertChatOpenAIToolToCompletionsTool(e,n){return $1(e)?UGe(e.metadata.customTool):TD(e)?(n==null?void 0:n.strict)!==void 0?{...e,function:{...e.function,strict:n.strict}}:e:IGe(e,n)}bindTools(e,n){let r;return(n==null?void 0:n.strict)!==void 0?r=n.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.withConfig({tools:e.map(i=>SD(i)||$1(i)?i:jGe(i)?i.extras.providerToolDefinition:this._convertChatOpenAIToolToCompletionsTool(i,{strict:r})),...n})}async stream(e,n){return super.stream(e,this._combineCallOptions(n))}async invoke(e,n){return super.invoke(e,this._combineCallOptions(n))}_combineLLMOutput(...e){return e.reduce((n,r)=>(r&&r.tokenUsage&&(n.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,n.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,n.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),n),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}async getNumTokensFromMessages(e){let n=0,r=0,i=0;this.model==="gpt-3.5-turbo-0301"?(r=4,i=-1):(r=3,i=1);const a=await Promise.all(e.map(async s=>{var p,m,_,y,b,x;const[o,l]=await Promise.all([this.getNumTokens(s.content),this.getNumTokens(Mb(s))]),c=s.name!==void 0?i+await this.getNumTokens(s.name):0;let u=o+r+l+c;const f=s;if(f._getType()==="function"&&(u-=2),(p=f.additional_kwargs)!=null&&p.function_call&&(u+=3),(m=f==null?void 0:f.additional_kwargs.function_call)!=null&&m.name&&(u+=await this.getNumTokens((_=f.additional_kwargs.function_call)==null?void 0:_.name)),(y=f.additional_kwargs.function_call)!=null&&y.arguments)try{u+=await this.getNumTokens(JSON.stringify(JSON.parse((b=f.additional_kwargs.function_call)==null?void 0:b.arguments)))}catch(w){console.error("Error parsing function arguments",w,JSON.stringify(f.additional_kwargs.function_call)),u+=await this.getNumTokens((x=f.additional_kwargs.function_call)==null?void 0:x.arguments)}return n+=u,u}));return n+=3,{totalCount:n,countPerMessage:a}}async _getNumTokensFromGenerations(e){return(await Promise.all(e.map(async n=>{var r;return(r=n.message.additional_kwargs)!=null&&r.function_call?(await this.getNumTokensFromMessages([n.message])).countPerMessage[0]:await this.getNumTokens(n.message.content)}))).reduce((n,r)=>n+r,0)}async _getEstimatedTokenCountFromPrompt(e,n,r){let i=(await this.getNumTokensFromMessages(e)).totalCount;if(n&&r!=="auto"){const a=RGe(n);i+=await this.getNumTokens(a),i+=9}return n&&e.find(a=>a._getType()==="system")&&(i-=4),r==="none"?i+=1:typeof r=="object"&&(i+=await this.getNumTokens(r.name)+4),i}async moderateContent(e,n){const r=this._getClientOptions(n==null?void 0:n.options),i={input:e,model:(n==null?void 0:n.model)??"omni-moderation-latest"};return this.caller.call(async()=>{try{return await this.client.moderations.create(i,r)}catch(a){throw xD(a)}})}get profile(){return BKe[this.model]??{}}_getStructuredOutputMethod(e){const n={...e};if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"){if((n==null?void 0:n.method)===void 0)return"jsonSchema"}else n.method==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);return n.method}withStructuredOutput(e,n){let r,i;const{schema:a,name:s,includeRaw:o}={...n,schema:e};if((n==null?void 0:n.strict)!==void 0&&n.method==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");const l=$Ke(this.model,n==null?void 0:n.method);if(l==="jsonMode"){cl(a)?i=G2.fromZodSchema(a):i=new K2;const p=ca(a);r=this.withConfig({outputVersion:"v0",response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:{title:s??"extract",...p}}})}else if(l==="jsonSchema"){const p={name:s??"extract",description:XL(a),schema:a,strict:n==null?void 0:n.strict},m=ca(p.schema);if(r=this.withConfig({outputVersion:"v0",response_format:{type:"json_schema",json_schema:p},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:{title:p.name,description:p.description,...m}}}),cl(a)){const _=G2.fromZodSchema(a);i=wT.from(y=>"parsed"in y.additional_kwargs?y.additional_kwargs.parsed:_)}else i=new K2}else{let p=s??"extract";if(cl(a)){const m=ca(a);r=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:{name:p,description:m.description,parameters:m}}],tool_choice:{type:"function",function:{name:p}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:p,...m}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),i=new LV({returnSingle:!0,keyName:p,zodSchema:a})}else{let m;typeof a.name=="string"&&typeof a.parameters=="object"&&a.parameters!=null?(m=a,p=a.name):(p=a.title??p,m={name:p,description:a.description??"",parameters:a});const _=ca(a);r=this.withConfig({outputVersion:"v0",tools:[{type:"function",function:m}],tool_choice:{type:"function",function:{name:p}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:p,..._}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),i=new LV({returnSingle:!0,keyName:p})}}if(!o)return r.pipe(i);const c=im.assign({parsed:(p,m)=>i.invoke(p.raw,m)}),u=im.assign({parsed:()=>null}),f=c.withFallbacks({fallbacks:[u]});return Nb.from([{raw:r},f])}};const Yse={providerName:"ChatOpenAI",fromStandardTextBlock(t){return{type:"text",text:t.text}},fromStandardImageBlock(t){var e,n;if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url,...(e=t.metadata)!=null&&e.detail?{detail:t.metadata.detail}:{}}};if(t.source_type==="base64")return{type:"image_url",image_url:{url:`data:${t.mime_type??""};base64,${t.data}`,...(n=t.metadata)!=null&&n.detail?{detail:t.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(t){if(t.source_type==="url"){const e=Kp({dataUrl:t.url});if(!e)throw new Error(`URL audio blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);const n=e.mime_type||t.mime_type||"";let r;try{r=$7(n)}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:e.data}}}if(t.source_type==="base64"){let e;try{e=$7(t.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`)}if(e.type!=="audio"||e.subtype!=="wav"&&e.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${t.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:e.subtype,data:t.data}}}throw new Error(`Audio content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(t){var e,n,r,i,a;if(t.source_type==="url"){const s=Kp({dataUrl:t.url}),o=P1(t);if(!s)throw new Error(`URL file blocks with source_type ${t.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:t.url,...(e=t.metadata)!=null&&e.filename||(n=t.metadata)!=null&&n.name?{filename:o}:{}}}}if(t.source_type==="base64"){const s=P1(t);return{type:"file",file:{file_data:`data:${t.mime_type??""};base64,${t.data}`,...(r=t.metadata)!=null&&r.filename||(i=t.metadata)!=null&&i.name||(a=t.metadata)!=null&&a.title?{filename:s}:{}}}}if(t.source_type==="id")return{type:"file",file:{file_id:t.id}};throw new Error(`File content blocks with source_type ${t.source_type} are not supported for ChatOpenAI`)}},pZe=({message:t,rawResponse:e,includeRawResponse:n})=>{var i,a;const r=t.tool_calls;switch(t.role){case"assistant":{const s=[],o=[];for(const u of r??[])try{s.push(ED(u,{returnId:!0}))}catch(f){o.push(Rw(u,f.message))}const l={function_call:t.function_call,tool_calls:r};n!==void 0&&(l.__raw_response=e);const c={model_provider:"openai",model_name:e.model,...e.system_fingerprint?{usage:{...e.usage},system_fingerprint:e.system_fingerprint}:{}};return t.audio&&(l.audio=t.audio),new fa({content:DKe(t.content||"",(a=(i=e.choices)==null?void 0:i[0])==null?void 0:a.message),tool_calls:s,invalid_tool_calls:o,additional_kwargs:l,response_metadata:c,id:e.id})}default:return new ML(t.content||"",t.role??"unknown")}},mZe=({delta:t,rawResponse:e,includeRawResponse:n,defaultRole:r})=>{var l,c;const i=t.role??r,a=t.content??"";let s;t.function_call?s={function_call:t.function_call}:t.tool_calls?s={tool_calls:t.tool_calls}:s={},n&&(s.__raw_response=e),t.audio&&(s.audio={...t.audio,index:e.choices[0].index});const o={model_provider:"openai",usage:{...e.usage}};if(i==="user")return new qre({content:a,response_metadata:o});if(i==="assistant"){const u=[];if(Array.isArray(t.tool_calls))for(const f of t.tool_calls)u.push({name:(l=f.function)==null?void 0:l.name,args:(c=f.function)==null?void 0:c.arguments,id:f.id,index:f.index,type:"tool_call_chunk"});return new mr({content:a,tool_call_chunks:u,additional_kwargs:s,id:e.id,response_metadata:o})}else return i==="system"?new s2({content:a,response_metadata:o}):i==="developer"?new s2({content:a,response_metadata:o,additional_kwargs:{__openai_role__:"developer"}}):i==="function"?new zre({content:a,additional_kwargs:s,name:t.name,response_metadata:o}):i==="tool"?new Uze({content:a,additional_kwargs:s,tool_call_id:t.tool_call_id,response_metadata:o}):new Ure({content:a,role:i,response_metadata:o})},gZe=t=>{if(t.type==="image"){if(t.url)return{type:"image_url",image_url:{url:t.url}};if(t.data)return{type:"image_url",image_url:{url:`data:${t.mimeType};base64,${t.data}`}}}if(t.type==="audio"&&t.data){const e=i8e(()=>{const[,n]=t.mimeType.split("/");return n==="wav"||n==="mp3"?n:"wav"});return{type:"input_audio",input_audio:{data:t.data.toString(),format:e}}}if(t.type==="file"){if(t.data){const e=P1(t);return{type:"file",file:{file_data:`data:${t.mimeType};base64,${t.data}`,filename:e}}}if(t.fileId)return{type:"file",file:{file_id:t.fileId}}}},yZe=({message:t,model:e})=>{let n=Mb(t);if(n==="system"&&$b(e)&&(n="developer"),n==="developer")return{role:"developer",content:t.contentBlocks.filter(i=>i.type==="text")};if(n==="system")return{role:"system",content:t.contentBlocks.filter(i=>i.type==="text")};if(n==="assistant")return{role:"assistant",content:t.contentBlocks.filter(i=>i.type==="text")};if(n==="tool"&&RL.isInstance(t))return{role:"tool",tool_call_id:t.tool_call_id,content:t.contentBlocks.filter(i=>i.type==="text")};if(n==="function")return{role:"function",name:t.name??"",content:t.contentBlocks.filter(i=>i.type==="text").join("")};function*r(i){for(const a of i){a.type==="text"&&(yield{type:"text",text:a.text});const s=gZe(a);s&&(yield s)}}return{role:"user",content:Array.from(r(t.contentBlocks))}},DV=({messages:t,model:e})=>t.flatMap(n=>{var s,o;if("output_version"in n.response_metadata&&((s=n.response_metadata)==null?void 0:s.output_version)==="v1")return yZe({message:n});let r=Mb(n);r==="system"&&$b(e)&&(r="developer");const i=typeof n.content=="string"?n.content:n.content.flatMap(l=>Cc(l)?kL(l,Yse):typeof l=="object"&&l!==null&&"type"in l&&l.type==="tool_use"?[]:l),a={role:r,content:i};return n.name!=null&&(a.name=n.name),n.additional_kwargs.function_call!=null&&(a.function_call=n.additional_kwargs.function_call),fa.isInstance(n)&&((o=n.tool_calls)!=null&&o.length)?a.tool_calls=n.tool_calls.map(fZe):(n.additional_kwargs.tool_calls!=null&&(a.tool_calls=n.additional_kwargs.tool_calls),RL.isInstance(n)&&n.tool_call_id!=null&&(a.tool_call_id=n.tool_call_id)),n.additional_kwargs.audio&&typeof n.additional_kwargs.audio=="object"&&"id"in n.additional_kwargs.audio?[a,{role:"assistant",audio:{id:n.additional_kwargs.audio.id}}]:a});var vZe=class extends AD{invocationParams(t,e){var s;let n;(t==null?void 0:t.strict)!==void 0?n=t.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling);let r={};(t==null?void 0:t.stream_options)!==void 0?r={stream_options:t.stream_options}:this.streamUsage&&(this.streaming||e!=null&&e.streaming)&&(r={stream_options:{include_usage:!0}});const i={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(t==null?void 0:t.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:t==null?void 0:t.functions,function_call:t==null?void 0:t.function_call,tools:(s=t==null?void 0:t.tools)!=null&&s.length?t.tools.map(o=>this._convertChatOpenAIToolToCompletionsTool(o,{strict:n})):void 0,tool_choice:Fse(t==null?void 0:t.tool_choice),response_format:this._getResponseFormat(t==null?void 0:t.response_format),seed:t==null?void 0:t.seed,...r,parallel_tool_calls:t==null?void 0:t.parallel_tool_calls,...this.audio||t!=null&&t.audio?{audio:this.audio||(t==null?void 0:t.audio)}:{},...this.modalities||t!=null&&t.modalities?{modalities:this.modalities||(t==null?void 0:t.modalities)}:{},...this.modelKwargs,prompt_cache_key:(t==null?void 0:t.promptCacheKey)??this.promptCacheKey,prompt_cache_retention:(t==null?void 0:t.promptCacheRetention)??this.promptCacheRetention,verbosity:(t==null?void 0:t.verbosity)??this.verbosity};(t==null?void 0:t.prediction)!==void 0&&(i.prediction=t.prediction),this.service_tier!==void 0&&(i.service_tier=this.service_tier),(t==null?void 0:t.service_tier)!==void 0&&(i.service_tier=t.service_tier);const a=this._getReasoningParams(t);return a!==void 0&&a.effort!==void 0&&(i.reasoning_effort=a.effort),$b(i.model)?i.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:i.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,i}async _generate(t,e,n){var s,o,l;(s=e.signal)==null||s.throwIfAborted();const r={},i=this.invocationParams(e),a=DV({messages:t,model:this.model});if(i.stream){const c=this._streamResponseChunks(t,e,n),u={};for await(const b of c){b.message.response_metadata={...b.generationInfo,...b.message.response_metadata};const x=((o=b.generationInfo)==null?void 0:o.completion)??0;u[x]===void 0?u[x]=b:u[x]=u[x].concat(b)}const f=Object.entries(u).sort(([b],[x])=>parseInt(b,10)-parseInt(x,10)).map(([b,x])=>x),{functions:p,function_call:m}=this.invocationParams(e),_=await this._getEstimatedTokenCountFromPrompt(t,p,m),y=await this._getNumTokensFromGenerations(f);return r.input_tokens=_,r.output_tokens=y,r.total_tokens=_+y,{generations:f,llmOutput:{estimatedTokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}else{const c=await this.completionWithRetry({...i,stream:!1,messages:a},{signal:e==null?void 0:e.signal,...e==null?void 0:e.options}),{completion_tokens:u,prompt_tokens:f,total_tokens:p,prompt_tokens_details:m,completion_tokens_details:_}=(c==null?void 0:c.usage)??{};u&&(r.output_tokens=(r.output_tokens??0)+u),f&&(r.input_tokens=(r.input_tokens??0)+f),p&&(r.total_tokens=(r.total_tokens??0)+p),((m==null?void 0:m.audio_tokens)!==null||(m==null?void 0:m.cached_tokens)!==null)&&(r.input_token_details={...(m==null?void 0:m.audio_tokens)!==null&&{audio:m==null?void 0:m.audio_tokens},...(m==null?void 0:m.cached_tokens)!==null&&{cache_read:m==null?void 0:m.cached_tokens}}),((_==null?void 0:_.audio_tokens)!==null||(_==null?void 0:_.reasoning_tokens)!==null)&&(r.output_token_details={...(_==null?void 0:_.audio_tokens)!==null&&{audio:_==null?void 0:_.audio_tokens},...(_==null?void 0:_.reasoning_tokens)!==null&&{reasoning:_==null?void 0:_.reasoning_tokens}});const y=[];for(const b of(c==null?void 0:c.choices)??[]){const x={text:((l=b.message)==null?void 0:l.content)??"",message:this._convertCompletionsMessageToBaseMessage(b.message??{role:"assistant"},c)};x.generationInfo={...b.finish_reason?{finish_reason:b.finish_reason}:{},...b.logprobs?{logprobs:b.logprobs}:{}},$L(x.message)&&(x.message.usage_metadata=r),x.message=new fa(Object.fromEntries(Object.entries(x.message).filter(([w])=>!w.startsWith("lc_")))),y.push(x)}return{generations:y,llmOutput:{tokenUsage:{promptTokens:r.input_tokens,completionTokens:r.output_tokens,totalTokens:r.total_tokens}}}}}async*_streamResponseChunks(t,e,n){var l,c,u,f,p,m,_,y,b,x,w;const r=DV({messages:t,model:this.model}),i={...this.invocationParams(e,{streaming:!0}),messages:r,stream:!0};let a;const s=await this.completionWithRetry(i,e);let o;for await(const T of s){if((l=e.signal)!=null&&l.aborted)return;const A=(c=T==null?void 0:T.choices)==null?void 0:c[0];if(T.usage&&(o=T.usage),!A)continue;const{delta:E}=A;if(!E)continue;const C=this._convertCompletionsDeltaToBaseMessageChunk(E,T,a);a=E.role??a;const R={prompt:e.promptIndex??0,completion:A.index??0};if(typeof C.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const N={...R};A.finish_reason!=null&&(N.finish_reason=A.finish_reason,N.system_fingerprint=T.system_fingerprint,N.model_name=T.model,N.service_tier=T.service_tier),this.logprobs&&(N.logprobs=A.logprobs);const D=new Jp({message:C,text:C.content,generationInfo:N});yield D,await(n==null?void 0:n.handleLLMNewToken(D.text??"",R,void 0,void 0,void 0,{chunk:D}))}if(o){const T={...((u=o.prompt_tokens_details)==null?void 0:u.audio_tokens)!==null&&{audio:(f=o.prompt_tokens_details)==null?void 0:f.audio_tokens},...((p=o.prompt_tokens_details)==null?void 0:p.cached_tokens)!==null&&{cache_read:(m=o.prompt_tokens_details)==null?void 0:m.cached_tokens}},A={...((_=o.completion_tokens_details)==null?void 0:_.audio_tokens)!==null&&{audio:(y=o.completion_tokens_details)==null?void 0:y.audio_tokens},...((b=o.completion_tokens_details)==null?void 0:b.reasoning_tokens)!==null&&{reasoning:(x=o.completion_tokens_details)==null?void 0:x.reasoning_tokens}};yield new Jp({message:new mr({content:"",response_metadata:{usage:{...o}},usage_metadata:{input_tokens:o.prompt_tokens,output_tokens:o.completion_tokens,total_tokens:o.total_tokens,...Object.keys(T).length>0&&{input_token_details:T},...Object.keys(A).length>0&&{output_token_details:A}}}),text:""})}if((w=e.signal)!=null&&w.aborted)throw new Error("AbortError")}async completionWithRetry(t,e){const n=this._getClientOptions(e),r=t.response_format&&t.response_format.type==="json_schema";return this.caller.call(async()=>{try{return r&&!t.stream?await this.client.chat.completions.parse(t,n):await this.client.chat.completions.create(t,n)}catch(i){throw xD(i)}})}_convertCompletionsDeltaToBaseMessageChunk(t,e,n){return mZe({delta:t,rawResponse:e,includeRawResponse:this.__includeRawResponse,defaultRole:n})}_convertCompletionsMessageToBaseMessage(t,e){return pZe({message:t,rawResponse:e,includeRawResponse:this.__includeRawResponse})}};const qh="__openai_function_call_ids__";function Qse(t){return t.type==="url_citation"?{type:"citation",source:"url_citation",url:t.url,title:t.title,startIndex:t.start_index,endIndex:t.end_index}:t.type==="file_citation"?{type:"citation",source:"file_citation",title:t.filename,startIndex:t.index,file_id:t.file_id}:t.type==="container_file_citation"?{type:"citation",source:"container_file_citation",title:t.filename,startIndex:t.start_index,endIndex:t.end_index,file_id:t.file_id,container_id:t.container_id}:t.type==="file_path"?{type:"citation",source:"file_path",startIndex:t.index,file_id:t.file_id}:{type:"non_standard",value:t}}function bZe(t){if(t.type==="url_citation"||t.type==="file_citation"||t.type==="container_file_citation"||t.type==="file_path")return t;if(t.type==="citation"){const e=t;if(e.source==="url_citation")return{type:"url_citation",url:e.url??"",title:e.title??"",start_index:e.startIndex??0,end_index:e.endIndex??0};if(e.source==="file_citation")return{type:"file_citation",file_id:e.file_id??"",filename:e.title??"",index:e.startIndex??0};if(e.source==="container_file_citation")return{type:"container_file_citation",file_id:e.file_id??"",filename:e.title??"",container_id:e.container_id??"",start_index:e.startIndex??0,end_index:e.endIndex??0};if(e.source==="file_path")return{type:"file_path",file_id:e.file_id??"",index:e.startIndex??0}}return t.type==="non_standard"?t.value:t}const eoe=t=>{var r,i,a,s;const e={...((r=t==null?void 0:t.input_tokens_details)==null?void 0:r.cached_tokens)!=null&&{cache_read:(i=t==null?void 0:t.input_tokens_details)==null?void 0:i.cached_tokens}},n={...((a=t==null?void 0:t.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null&&{reasoning:(s=t==null?void 0:t.output_tokens_details)==null?void 0:s.reasoning_tokens}};return{input_tokens:(t==null?void 0:t.input_tokens)??0,output_tokens:(t==null?void 0:t.output_tokens)??0,total_tokens:(t==null?void 0:t.total_tokens)??0,input_token_details:e,output_token_details:n}},toe=t=>{var l;if(t.error){const c=new Error(t.error.message);throw c.name=t.error.code,c}let e;const n=[],r=[],i=[],a=t.output.map(c=>{if(c.type==="function_call"&&"parsed_arguments"in c){const u={...c};return delete u.parsed_arguments,u}return c}),s={model_provider:"openai",model:t.model,created_at:t.created_at,id:t.id,incomplete_details:t.incomplete_details,metadata:t.metadata,object:t.object,output:a,status:t.status,user:t.user,service_tier:t.service_tier,model_name:t.model},o={};for(const c of t.output)if(c.type==="message")e=c.id,n.push(...c.content.flatMap(u=>u.type==="output_text"?("parsed"in u&&u.parsed!=null&&(o.parsed=u.parsed),{type:"text",text:u.text,annotations:u.annotations.map(Qse)}):u.type==="refusal"?(o.refusal=u.refusal,[]):u));else if(c.type==="function_call"){const u={function:{name:c.name,arguments:c.arguments},id:c.call_id};try{r.push(ED(u,{returnId:!0}))}catch(f){let p;typeof f=="object"&&f!=null&&"message"in f&&typeof f.message=="string"&&(p=f.message),i.push(Rw(u,p))}o[qh]??(o[qh]={}),c.id&&(o[qh][c.call_id]=c.id)}else if(c.type==="reasoning"){o.reasoning=c;const u=(l=c.summary)==null?void 0:l.map(f=>f.text).filter(Boolean).join("");u&&n.push({type:"reasoning",reasoning:u})}else if(c.type==="custom_tool_call"){const u=MGe(c);u?r.push(u):i.push(Rw(c,"Malformed custom tool call"))}else if(c.type==="computer_call"){const u=LGe(c);u?r.push(u):i.push(Rw(c,"Malformed computer call"))}else c.type==="image_generation_call"?(c.result&&n.push({type:"image",mimeType:"image/png",data:c.result,id:c.id,metadata:{status:c.status}}),o.tool_outputs??(o.tool_outputs=[]),o.tool_outputs.push(c)):(o.tool_outputs??(o.tool_outputs=[]),o.tool_outputs.push(c));return new fa({id:e,content:n,tool_calls:r,invalid_tool_calls:i,usage_metadata:eoe(t.usage),additional_kwargs:o,response_metadata:s})},_Ze=t=>{const e=(t.summary.length>1?t.summary.reduce((n,r)=>{const i=n[n.length-1];return i.index===r.index?i.text+=r.text:n.push(r),n},[{...t.summary[0]}]):t.summary).map(n=>Object.fromEntries(Object.entries(n).filter(([r])=>r!=="index")));return{...t,summary:e}},wZe=t=>{var l,c,u;const e=[];let n={},r;const i=[],a={model_provider:"openai"},s={};let o;if(t.type==="response.output_text.delta")e.push({type:"text",text:t.delta,index:t.content_index});else if(t.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[Qse(t.annotation)],index:t.content_index});else if(t.type==="response.output_item.added"&&t.item.type==="message")o=t.item.id;else if(t.type==="response.output_item.added"&&t.item.type==="function_call")i.push({type:"tool_call_chunk",name:t.item.name,args:t.item.arguments,id:t.item.call_id,index:t.output_index}),s[qh]={[t.item.call_id]:t.item.id};else if(t.type==="response.output_item.done"&&t.item.type==="computer_call")i.push({type:"tool_call_chunk",name:"computer_use",args:JSON.stringify({action:t.item.action}),id:t.item.call_id,index:t.output_index}),s.tool_outputs=[t.item];else if(t.type==="response.output_item.done"&&t.item.type==="image_generation_call")t.item.result&&e.push({type:"image",mimeType:"image/png",data:t.item.result,id:t.item.id,metadata:{status:t.item.status}}),s.tool_outputs=[t.item];else if(t.type==="response.output_item.done"&&["web_search_call","file_search_call","code_interpreter_call","shell_call","local_shell_call","mcp_call","mcp_list_tools","mcp_approval_request","custom_tool_call"].includes(t.item.type))s.tool_outputs=[t.item];else if(t.type==="response.created")a.id=t.response.id,a.model_name=t.response.model,a.model=t.response.model;else if(t.type==="response.completed"){const f=toe(t.response);r=eoe(t.response.usage),((c=(l=t.response.text)==null?void 0:l.format)==null?void 0:c.type)==="json_schema"&&(s.parsed??(s.parsed=JSON.parse(f.text)));for(const[p,m]of Object.entries(t.response))p!=="id"&&(p==="output"?a[p]=f.response_metadata.output:a[p]=m)}else if(t.type==="response.function_call_arguments.delta"||t.type==="response.custom_tool_call_input.delta")i.push({type:"tool_call_chunk",args:t.delta,index:t.output_index});else if(t.type==="response.web_search_call.completed"||t.type==="response.file_search_call.completed")n={tool_outputs:{id:t.item_id,type:t.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(t.type==="response.refusal.done")s.refusal=t.refusal;else if(t.type==="response.output_item.added"&&"item"in t&&t.item.type==="reasoning"){const f=t.item.summary?t.item.summary.map((m,_)=>({...m,index:_})):void 0;s.reasoning={id:t.item.id,type:t.item.type,...f?{summary:f}:{}};const p=(u=t.item.summary)==null?void 0:u.map(m=>m.text).filter(Boolean).join("");p&&e.push({type:"reasoning",reasoning:p})}else if(t.type==="response.reasoning_summary_part.added")s.reasoning={type:"reasoning",summary:[{...t.part,index:t.summary_index}]},t.part.text&&e.push({type:"reasoning",reasoning:t.part.text});else if(t.type==="response.reasoning_summary_text.delta")s.reasoning={type:"reasoning",summary:[{text:t.delta,type:"summary_text",index:t.summary_index}]},t.delta&&e.push({type:"reasoning",reasoning:t.delta});else return t.type==="response.image_generation_call.partial_image",null;return new Jp({text:e.map(f=>f.text).join(""),message:new mr({id:o,content:e,tool_call_chunks:i,usage_metadata:r,additional_kwargs:s,response_metadata:a}),generationInfo:n})},xZe=t=>{var r;const e=fa.isInstance(t)&&((r=t.response_metadata)==null?void 0:r.model_provider)==="openai";function*n(){const i=Qd(()=>{try{const w=Mb(t);return w==="system"||w==="developer"||w==="assistant"||w==="user"?w:"assistant"}catch{return"assistant"}});let a;const s=new Set,o=new Set,l=new Map,c=new Map;function*u(){if(!a)return;const w=a.content;(typeof w=="string"&&w.length>0||Array.isArray(w)&&w.length>0)&&(yield a),a=void 0}const f=w=>{a||(a={type:"message",role:i,content:[]}),typeof a.content=="string"?a.content=a.content.length>0?[{type:"input_text",text:a.content},...w]:[...w]:a.content.push(...w)},p=w=>{if(typeof w=="string")return w;try{return JSON.stringify(w??{})}catch{return"{}"}},m=w=>{const T=Qd(()=>{var E;const A=(E=w.metadata)==null?void 0:E.detail;return A==="low"||A==="high"||A==="auto"?A:"auto"});if(w.fileId)return{type:"input_image",detail:T,file_id:w.fileId};if(w.url)return{type:"input_image",detail:T,image_url:w.url};if(w.data){const A=typeof w.data=="string"?w.data:Buffer.from(w.data).toString("base64");return{type:"input_image",detail:T,image_url:`data:${w.mimeType??"image/png"};base64,${A}`}}},_=w=>{if(w.fileId){const T=NV(w);return{type:"input_file",file_id:w.fileId,...T?{filename:T}:{}}}if(w.url){const T=NV(w);return{...T?{filename:T}:{},type:"input_file",file_url:w.url}}if(w.data){const T=P1(w),A=typeof w.data=="string"?w.data:Buffer.from(w.data).toString("base64");return{type:"input_file",file_data:`data:${w.mimeType??"application/octet-stream"};base64,${A}`,...T?{filename:T}:{}}}},y=w=>{const T=Qd(()=>{var C;if(Array.isArray(w.summary)){const R=((C=w.summary)==null?void 0:C.map(N=>N==null?void 0:N.text).filter(N=>typeof N=="string"))??[];if(R.length>0)return R}return w.reasoning?[w.reasoning]:[]}),A=T.length>0?T.map(C=>({type:"summary_text",text:C})):[{type:"summary_text",text:""}],E={type:"reasoning",id:w.id??"",summary:A};return w.reasoning&&(E.content=[{type:"reasoning_text",text:w.reasoning}]),E},b=w=>({type:"function_call",name:w.name??"",call_id:w.id??"",arguments:p(w.args)}),x=w=>{const T=p(w.output),A=w.status==="success"?"completed":w.status==="error"?"incomplete":void 0;return{type:"function_call_output",call_id:w.toolCallId??"",output:T,...A?{status:A}:{}}};for(const w of t.contentBlocks)if(w.type==="text")f([{type:"input_text",text:w.text}]);else if(w.type!=="invalid_tool_call"){if(w.type==="reasoning")yield*u(),yield y(w);else if(w.type==="tool_call"){yield*u();const T=w.id??"";T&&(s.add(T),l.delete(T)),yield b(w)}else if(w.type==="tool_call_chunk"){if(w.id){const T=l.get(w.id)??{name:w.name,args:[]};w.name&&(T.name=w.name),w.args&&T.args.push(w.args),l.set(w.id,T)}}else if(w.type==="server_tool_call"){yield*u();const T=w.id??"";T&&(o.add(T),c.delete(T)),yield b(w)}else if(w.type==="server_tool_call_chunk"){if(w.id){const T=c.get(w.id)??{name:w.name,args:[]};w.name&&(T.name=w.name),w.args&&T.args.push(w.args),c.set(w.id,T)}}else if(w.type==="server_tool_call_result")yield*u(),yield x(w);else if(w.type!=="audio")if(w.type==="file"){const T=_(w);T&&f([T])}else if(w.type==="image"){const T=m(w);T&&f([T])}else if(w.type==="video"){const T=_(w);T&&f([T])}else w.type==="text-plain"?w.text&&f([{type:"input_text",text:w.text}]):w.type==="non_standard"&&e&&(yield*u(),yield w.value)}yield*u();for(const[w,T]of l){if(!w||s.has(w))continue;const A=T.args.join("");!T.name&&!A||(yield{type:"function_call",call_id:w,name:T.name??"",arguments:A})}for(const[w,T]of c){if(!w||o.has(w))continue;const A=T.args.join("");!T.name&&!A||(yield{type:"function_call",call_id:w,name:T.name??"",arguments:A})}}return Array.from(n())},BV=({messages:t,zdrEnabled:e,model:n})=>t.flatMap(r=>{var o,l,c,u;const i=r.response_metadata;if((i==null?void 0:i.output_version)==="v1")return xZe(r);const a=r.additional_kwargs;let s=Mb(r);if(s==="system"&&$b(n)&&(s="developer"),s==="function")throw new Error("Function messages are not supported in Responses API");if(s==="tool"){const f=r;if((a==null?void 0:a.type)==="computer_call_output")return{type:"computer_call_output",output:(()=>{if(typeof f.content=="string")return{type:"input_image",image_url:f.content};if(Array.isArray(f.content)){const m=f.content.find(b=>b.type==="input_image");if(m)return m;const _=f.content.find(b=>b.type==="computer_screenshot");if(_)return _;const y=f.content.find(b=>b.type==="image_url");if(y)return{type:"input_image",image_url:typeof y.image_url=="string"?y.image_url:y.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:f.tool_call_id};if((o=f.additional_kwargs)!=null&&o.customTool)return{type:"custom_tool_call_output",call_id:f.tool_call_id,output:f.content};const p=Array.isArray(f.content)&&f.content.every(m=>typeof m=="object"&&m!==null&&"type"in m&&(m.type==="input_file"||m.type==="input_image"||m.type==="input_text"));return{type:"function_call_output",call_id:f.tool_call_id,id:(l=f.id)!=null&&l.startsWith("fc_")?f.id:void 0,output:p?f.content:typeof f.content!="string"?JSON.stringify(f.content):f.content}}if(s==="assistant"){if(!e&&(i==null?void 0:i.output)!=null&&Array.isArray(i==null?void 0:i.output)&&(i==null?void 0:i.output.length)>0&&(i!=null&&i.output.every(w=>"type"in w)))return i==null?void 0:i.output;const f=[],p=a==null?void 0:a.reasoning,m=!!(p!=null&&p.encrypted_content);if(p&&(!e||m)){const w=_Ze(p);f.push(w)}let{content:_}=r;a!=null&&a.refusal&&(typeof _=="string"&&(_=[{type:"output_text",text:_,annotations:[]}]),_=[..._,{type:"refusal",refusal:a.refusal}]),(typeof _=="string"||_.length>0)&&f.push({type:"message",role:"assistant",...r.id&&!e&&r.id.startsWith("msg_")?{id:r.id}:{},content:Qd(()=>typeof _=="string"?_:_.flatMap(w=>w.type==="text"?{type:"output_text",text:w.text,annotations:(w.annotations??[]).map(bZe)}:w.type==="output_text"||w.type==="refusal"?w:[]))});const y=a==null?void 0:a[qh];fa.isInstance(r)&&((c=r.tool_calls)!=null&&c.length)?f.push(...r.tool_calls.map(w=>BGe(w)?{type:"custom_tool_call",id:w.call_id,call_id:w.id??"",input:w.args.input,name:w.name}:DGe(w)?{type:"computer_call",id:w.call_id,call_id:w.id??"",action:w.args.action}:{type:"function_call",name:w.name,arguments:JSON.stringify(w.args),call_id:w.id,...e?{}:{id:y==null?void 0:y[w.id]}})):a!=null&&a.tool_calls&&f.push(...a.tool_calls.map(w=>({type:"function_call",name:w.function.name,call_id:w.id,arguments:w.function.arguments,...e?{}:{id:y==null?void 0:y[w.id]}})));const b=(u=i==null?void 0:i.output)!=null&&u.length?i==null?void 0:i.output:a.tool_outputs,x=["computer_call","mcp_call","code_interpreter_call","image_generation_call","shell_call","local_shell_call"];if(b!=null){const w=b==null?void 0:b.filter(T=>x.includes(T.type));w.length>0&&f.push(...w)}return f}if(s==="user"||s==="system"||s==="developer"){if(typeof r.content=="string")return{type:"message",role:s,content:r.content};const f=[],p=r.content.flatMap(m=>(m.type==="mcp_approval_response"&&f.push({type:"mcp_approval_response",approval_request_id:m.approval_request_id,approve:m.approve}),Cc(m)?kL(m,Yse):m.type==="text"?{type:"input_text",text:m.text}:m.type==="image_url"?{type:"input_image",image_url:Qd(()=>{if(typeof m.image_url=="string")return m.image_url;if(typeof m.image_url=="object"&&m.image_url!==null&&"url"in m.image_url)return m.image_url.url}),detail:Qd(()=>{if(typeof m.image_url=="string")return"auto";if(typeof m.image_url=="object"&&m.image_url!==null&&"detail"in m.image_url)return m.image_url.detail})}:m.type==="input_text"||m.type==="input_image"||m.type==="input_file"?m:[]));return p.length>0&&f.push({type:"message",role:s,content:p}),f}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${s}`),[]});var SZe=class extends AD{invocationParams(t){var i;let e;(t==null?void 0:t.strict)!==void 0&&(e=t.strict),e===void 0&&this.supportsStrictToolCalling!==void 0&&(e=this.supportsStrictToolCalling);const n={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,service_tier:this.service_tier,stream:this.streaming,previous_response_id:t==null?void 0:t.previous_response_id,truncation:t==null?void 0:t.truncation,include:t==null?void 0:t.include,tools:(i=t==null?void 0:t.tools)!=null&&i.length?this._reduceChatOpenAITools(t.tools,{stream:this.streaming,strict:e}):void 0,tool_choice:$Ge(t==null?void 0:t.tool_choice)?t==null?void 0:t.tool_choice:(()=>{const a=Fse(t==null?void 0:t.tool_choice);if(typeof a=="object"&&"type"in a){if(a.type==="function")return{type:"function",name:a.function.name};if(a.type==="allowed_tools")return{type:"allowed_tools",mode:a.allowed_tools.mode,tools:a.allowed_tools.tools};if(a.type==="custom")return{type:"custom",name:a.custom.name}}})(),text:(()=>{if(t!=null&&t.text)return t.text;const a=this._getResponseFormat(t==null?void 0:t.response_format);return(a==null?void 0:a.type)==="json_schema"?a.json_schema.schema!=null?{format:{type:"json_schema",schema:a.json_schema.schema,description:a.json_schema.description,name:a.json_schema.name,strict:a.json_schema.strict},verbosity:t==null?void 0:t.verbosity}:void 0:{format:a,verbosity:t==null?void 0:t.verbosity}})(),parallel_tool_calls:t==null?void 0:t.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,prompt_cache_key:(t==null?void 0:t.promptCacheKey)??this.promptCacheKey,prompt_cache_retention:(t==null?void 0:t.promptCacheRetention)??this.promptCacheRetention,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},r=this._getReasoningParams(t);return r!==void 0&&(n.reasoning=r),n}async _generate(t,e,n){var i,a;(i=e.signal)==null||i.throwIfAborted();const r=this.invocationParams(e);if(r.stream){const s=this._streamResponseChunks(t,e,n);let o;for await(const l of s)l.message.response_metadata={...l.generationInfo,...l.message.response_metadata},o=(o==null?void 0:o.concat(l))??l;return{generations:o?[o]:[],llmOutput:{estimatedTokenUsage:(a=o==null?void 0:o.message)==null?void 0:a.usage_metadata}}}else{const s=await this.completionWithRetry({input:BV({messages:t,zdrEnabled:this.zdrEnabled??!1,model:this.model}),...r,stream:!1},{signal:e==null?void 0:e.signal,...e==null?void 0:e.options});return{generations:[{text:s.output_text,message:toe(s)}],llmOutput:{id:s.id,estimatedTokenUsage:s.usage?{promptTokens:s.usage.input_tokens,completionTokens:s.usage.output_tokens,totalTokens:s.usage.total_tokens}:void 0}}}}async*_streamResponseChunks(t,e,n){var i;const r=await this.completionWithRetry({...this.invocationParams(e),input:BV({messages:t,zdrEnabled:this.zdrEnabled??!1,model:this.model}),stream:!0},e);for await(const a of r){if((i=e.signal)!=null&&i.aborted)return;const s=wZe(a);s!=null&&(yield s,await(n==null?void 0:n.handleLLMNewToken(s.text||"",{prompt:e.promptIndex??0,completion:0},void 0,void 0,void 0,{chunk:s})))}}async completionWithRetry(t,e){return this.caller.call(async()=>{var r,i;const n=this._getClientOptions(e);try{return((i=(r=t.text)==null?void 0:r.format)==null?void 0:i.type)==="json_schema"&&!t.stream?await this.client.responses.parse(t,n):await this.client.responses.create(t,n)}catch(a){throw xD(a)}})}_reduceChatOpenAITools(t,e){const n=[];for(const r of t)if(SD(r))r.type==="image_generation"&&(e!=null&&e.stream)&&(r.partial_images=1),n.push(r);else if($1(r)){const i=r.metadata.customTool;n.push({type:"custom",name:i.name,description:i.description,format:i.format})}else TD(r)?n.push({type:"function",name:r.function.name,parameters:r.function.parameters,description:r.function.description,strict:(e==null?void 0:e.strict)??null}):Use(r)&&n.push(FGe(r));return n}},noe=class roe extends AD{constructor(n){super(n);U(this,"useResponsesApi",!1);U(this,"responses");U(this,"completions");this.fields=n,this.useResponsesApi=(n==null?void 0:n.useResponsesApi)??!1,this.responses=(n==null?void 0:n.responses)??new SZe(n),this.completions=(n==null?void 0:n.completions)??new vZe(n)}get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}get callKeys(){return[...super.callKeys,"useResponsesApi"]}_useResponsesApi(n){var s,o,l,c,u;const r=(s=n==null?void 0:n.tools)==null?void 0:s.some(SD),i=(n==null?void 0:n.previous_response_id)!=null||(n==null?void 0:n.text)!=null||(n==null?void 0:n.truncation)!=null||(n==null?void 0:n.include)!=null||((o=n==null?void 0:n.reasoning)==null?void 0:o.summary)!=null||((l=this.reasoning)==null?void 0:l.summary)!=null,a=((c=n==null?void 0:n.tools)==null?void 0:c.some(Use))||((u=n==null?void 0:n.tools)==null?void 0:u.some($1));return this.useResponsesApi||r||i||a||wGe(this.model)}getLsParams(n){const r=this._combineCallOptions(n);return this._useResponsesApi(n)?this.responses.getLsParams(r):this.completions.getLsParams(r)}invocationParams(n){const r=this._combineCallOptions(n);return this._useResponsesApi(n)?this.responses.invocationParams(r):this.completions.invocationParams(r)}async _generate(n,r,i){return this._useResponsesApi(r)?this.responses._generate(n,r,i):this.completions._generate(n,r,i)}async*_streamResponseChunks(n,r,i){if(this._useResponsesApi(r)){yield*this.responses._streamResponseChunks(n,this._combineCallOptions(r),i);return}yield*this.completions._streamResponseChunks(n,this._combineCallOptions(r),i)}withConfig(n){const r=new roe(this.fields);return r.defaultOptions={...this.defaultOptions,...n},r}};const TZe=St({type:$t("screenshot")}),EZe=St({type:$t("click"),x:fn(),y:fn(),button:_S(["left","right","wheel","back","forward"]).default("left")}),AZe=St({type:$t("double_click"),x:fn(),y:fn(),button:_S(["left","right","wheel","back","forward"]).default("left")}),OZe=St({type:$t("drag"),path:sf(St({x:fn(),y:fn()}))}),CZe=St({type:$t("keypress"),keys:sf(Lt())}),kZe=St({type:$t("move"),x:fn(),y:fn()}),NZe=St({type:$t("scroll"),x:fn(),y:fn(),scroll_x:fn(),scroll_y:fn()}),IZe=St({type:$t("type"),text:Lt()}),PZe=St({type:$t("wait"),duration:fn().optional()}),RZe=db([TZe,EZe,AZe,OZe,CZe,kZe,NZe,IZe,PZe]);St({action:RZe});const jZe=St({type:$t("exec"),command:sf(Lt()),env:qwe(Lt(),Lt()).optional(),working_directory:Lt().optional(),timeout_ms:fn().optional(),user:Lt().optional()});db([jZe]);St({commands:sf(Lt()).describe("Array of shell commands to execute"),timeout_ms:fn().optional().describe("Optional timeout in milliseconds for the commands"),max_output_length:fn().optional().describe("Optional maximum number of characters to return from each command")});const $Ze=St({type:$t("create_file"),path:Lt(),diff:Lt()}),MZe=St({type:$t("update_file"),path:Lt(),diff:Lt()}),LZe=St({type:$t("delete_file"),path:Lt()});db([$Ze,MZe,LZe]);var FV=class extends Zse{constructor(e){super(e);U(this,"lc_namespace",["langchain","anthropic","output_parsers"]);U(this,"returnId",!1);U(this,"keyName");U(this,"returnSingle",!1);U(this,"zodSchema");this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}static lc_name(){return"AnthropicToolsOutputParser"}async _validateResult(e){let n=e;if(typeof e=="string")try{n=JSON.parse(e)}catch(i){throw new Xv(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(i.message)}`,e)}else n=e;if(this.zodSchema===void 0)return n;const r=await kie(this.zodSchema,n);if(r.success)return r.data;throw new Xv(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(r.error.issues)}`,JSON.stringify(n,null,2))}async parseResult(e){const n=e.flatMap(i=>{const{message:a}=i;return Array.isArray(a.content)?ioe(a.content)[0]:[]});if(n[0]===void 0)throw new Error("No parseable tool calls provided to AnthropicToolsOutputParser.");const[r]=n;return await this._validateResult(r.args)}};function ioe(t){const e=[];for(const n of t)n.type==="tool_use"&&e.push({name:n.name,args:n.input,id:n.id,type:"tool_call"});return e}function DZe(t){if(t)return t==="any"?{type:"any"}:t==="auto"?{type:"auto"}:t==="none"?{type:"none"}:typeof t=="string"?{type:"tool",name:t}:t}const BZe=St({cache_control:sxe().optional().nullable(),defer_loading:Pwe().optional(),input_examples:sf(nx()).optional(),allowed_callers:sf(nx()).optional()}),UV={tool_search_tool_regex_20251119:"advanced-tool-use-2025-11-20",tool_search_tool_bm25_20251119:"advanced-tool-use-2025-11-20",memory_20250818:"context-management-2025-06-27",web_fetch_20250910:"web-fetch-2025-09-10",code_execution_20250825:"code-execution-2025-08-25",computer_20251124:"computer-use-2025-11-24",computer_20250124:"computer-use-2025-01-24",mcp_toolset:"mcp-client-2025-11-20"};function FZe(t){return typeof t=="object"&&t!==null&&"type"in t&&t.type==="thinking"}function UZe(t){return typeof t=="object"&&t!==null&&"type"in t&&t.type==="redacted_thinking"}function aoe(t){return typeof t=="object"&&t!==null&&"type"in t&&t.type==="compaction"}function zZe(t){return typeof t=="object"&&t!==null&&"type"in t&&t.type==="search_result"}function qZe(t){return typeof t!="object"||t==null||!("type"in t)||t.type!=="image"||!("source"in t)||typeof t.source!="object"||t.source==null||!("type"in t.source)?!1:t.source.type==="base64"?!(!("media_type"in t.source)||typeof t.source.media_type!="string"||!("data"in t.source)||typeof t.source.data!="string"):t.source.type==="url"?!(!("url"in t.source)||typeof t.source.url!="string"):!1}const HZe={providerName:"anthropic",fromStandardTextBlock(t){return{type:"text",text:t.text,..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}}},fromStandardImageBlock(t){if(t.source_type==="url"){const e=Kp({dataUrl:t.url,asTypedArray:!1});return e?{type:"image",source:{type:"base64",data:e.data,media_type:e.mime_type},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}}:{type:"image",source:{type:"url",url:t.url},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}}}else{if(t.source_type==="base64")return{type:"image",source:{type:"base64",data:t.data,media_type:t.mime_type??""},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{}};throw new Error(`Unsupported image source type: ${t.source_type}`)}},fromStandardFileBlock(t){const e=(t.mime_type??"").split(";")[0];if(t.source_type==="url"){if(e==="application/pdf"||e==="")return{type:"document",source:{type:"url",url:t.url},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};throw new Error(`Unsupported file mime type for file url source: ${t.mime_type}`)}else if(t.source_type==="text"){if(e==="text/plain"||e==="")return{type:"document",source:{type:"text",data:t.text,media_type:t.mime_type??""},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};throw new Error(`Unsupported file mime type for file text source: ${t.mime_type}`)}else if(t.source_type==="base64"){if(e==="application/pdf"||e==="")return{type:"document",source:{type:"base64",data:t.data,media_type:"application/pdf"},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};if(["image/jpeg","image/png","image/gif","image/webp"].includes(e))return{type:"document",source:{type:"content",content:[{type:"image",source:{type:"base64",data:t.data,media_type:e}}]},..."cache_control"in(t.metadata??{})?{cache_control:t.metadata.cache_control}:{},..."citations"in(t.metadata??{})?{citations:t.metadata.citations}:{},..."context"in(t.metadata??{})?{context:t.metadata.context}:{},..."title"in(t.metadata??{})?{title:t.metadata.title}:{}};throw new Error(`Unsupported file mime type for file base64 source: ${t.mime_type}`)}else throw new Error(`Unsupported file source type: ${t.source_type}`)}},WZe=t=>t();function VZe(t){return typeof t=="object"&&t!==null&&"type"in t&&t.type==="citation"}function GZe(t){function*e(){for(const n of t)VZe(n)&&(n.source==="char"?yield{type:"char_location",file_id:n.url??"",start_char_index:n.startIndex??0,end_char_index:n.endIndex??0,document_title:n.title??null,document_index:0,cited_text:n.citedText??""}:n.source==="page"?yield{type:"page_location",file_id:n.url??"",start_page_number:n.startIndex??0,end_page_number:n.endIndex??0,document_title:n.title??null,document_index:0,cited_text:n.citedText??""}:n.source==="block"?yield{type:"content_block_location",file_id:n.url??"",start_block_index:n.startIndex??0,end_block_index:n.endIndex??0,document_title:n.title??null,document_index:0,cited_text:n.citedText??""}:n.source==="url"?yield{type:"web_search_result_location",url:n.url??"",title:n.title??null,encrypted_index:String(n.startIndex??0),cited_text:n.citedText??""}:n.source==="search"&&(yield{type:"search_result_location",title:n.title??null,start_block_index:n.startIndex??0,end_block_index:n.endIndex??0,search_result_index:0,source:n.source??"",cited_text:n.citedText??""}))}return Array.from(e())}function kg(t){return typeof t=="string"?t:KZe(t)}function KZe(t){const e=[];for(let n=0,{length:r}=t;n<r;n++)e.push(String.fromCharCode(t[n]));return btoa(e.join(""))}function kP(t){return(t??"").split(";")[0].toLowerCase()}function my(t,e){if(t!=null&&typeof t=="object"&&e in t)return t[e]}function mh(t,e){const n=my(e,"cache_control");n!==void 0&&(t.cache_control=n);const r=my(e,"citations");r!==void 0&&(t.citations=r);const i=my(e,"context");i!==void 0&&(t.context=i);const a=my(e,"title");return a!==void 0&&(t.title=a),t}function NP(t,e){const n=my(e,"cache_control");return n!==void 0&&(t.cache_control=n),t}function zV(t){return new Set(["image/jpeg","image/png","image/gif","image/webp"]).has(t)}function ZZe(t){const e=[],n=t.response_metadata,r="model_provider"in n&&(n==null?void 0:n.model_provider)==="anthropic";for(const i of t.contentBlocks)if(i.type==="text")i.annotations?e.push({type:"text",text:i.text,citations:GZe(i.annotations)}):e.push({type:"text",text:i.text});else if(i.type==="tool_call")e.push({type:"tool_use",id:i.id??"",name:i.name,input:i.args});else if(i.type==="tool_call_chunk"){const a=WZe(()=>{if(typeof i.args!="string")return i.args;try{return JSON.parse(i.args)}catch{return{}}});e.push({type:"tool_use",id:i.id??"",name:i.name??"",input:a})}else if(i.type==="reasoning"&&r)e.push({type:"thinking",thinking:i.reasoning,signature:String(i.signature)});else if(i.type==="server_tool_call"&&r)i.name==="web_search"?e.push({type:"server_tool_use",name:i.name,id:i.id??"",input:i.args}):i.name==="code_execution"&&e.push({type:"server_tool_use",name:i.name,id:i.id??"",input:i.args});else if(i.type==="server_tool_call_result"&&r)if(i.name==="web_search"&&Array.isArray(i.output.urls)){const a=i.output.urls.map(s=>({type:"web_search_result",title:"",encrypted_content:"",url:s}));e.push({type:"web_search_tool_result",tool_use_id:i.toolCallId??"",content:a})}else i.name==="code_execution"?e.push({type:"code_execution_tool_result",tool_use_id:i.toolCallId??"",content:i.output}):i.name==="mcp_tool_result"&&e.push({type:"mcp_tool_result",tool_use_id:i.toolCallId??"",content:i.output});else{if(i.type==="audio")throw new Error("Anthropic does not support audio content blocks.");if(i.type==="file"){const a=i.metadata;if(i.fileId){e.push(mh({type:"document",source:{type:"file",file_id:i.fileId}},a));continue}if(i.url){const s=kP(i.mimeType);if(s==="application/pdf"||s===""){e.push(mh({type:"document",source:{type:"url",url:i.url}},a));continue}}if(i.data){const s=kP(i.mimeType);if(s===""||s==="application/pdf")e.push(mh({type:"document",source:{type:"base64",data:kg(i.data),media_type:"application/pdf"}},a));else if(s==="text/plain")e.push(mh({type:"document",source:{type:"text",data:kg(i.data),media_type:"text/plain"}},a));else if(zV(s))e.push(mh({type:"document",source:{type:"content",content:[{type:"image",source:{type:"base64",data:kg(i.data),media_type:s}}]}},a));else throw new Error(`Unsupported file mime type for Anthropic base64 source: ${s}`);continue}throw new Error("File content block must include a fileId, url, or data property.")}else if(i.type==="image"){const a=i.metadata;if(i.fileId){e.push(NP({type:"image",source:{type:"file",file_id:i.fileId}},a));continue}if(i.url){e.push(NP({type:"image",source:{type:"url",url:i.url}},a));continue}if(i.data){const s=kP(i.mimeType)||"image/png";zV(s)&&e.push(NP({type:"image",source:{type:"base64",data:kg(i.data),media_type:s}},a));continue}throw new Error("Image content block must include a fileId, url, or data property.")}else i.type==="video"||(i.type==="text-plain"?i.data&&e.push(mh({type:"document",source:{type:"text",data:kg(i.data),media_type:"text/plain"}},i.metadata)):i.type==="non_standard"&&r&&e.push(i.value))}return e}function IP(t){const e=Kp({dataUrl:t});if(e)return{type:"base64",media_type:e.mime_type,data:e.data};let n;try{n=new URL(t)}catch{throw new Error([`Malformed image URL: ${JSON.stringify(t)}. Content blocks of type 'image_url' must be a valid http, https, or base64-encoded data URL.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join(`

`))}if(n.protocol==="http:"||n.protocol==="https:")return{type:"url",url:t};throw new Error([`Invalid image URL protocol: ${JSON.stringify(n.protocol)}. Anthropic only supports images as http, https, or base64-encoded data URLs on 'image_url' content blocks.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join(`

`))}function XZe(t){const e=[];for(const n of t)if(n._getType()==="tool")if(typeof n.content=="string"){const r=e[e.length-1];(r==null?void 0:r._getType())==="human"&&Array.isArray(r.content)&&"type"in r.content[0]&&r.content[0].type==="tool_result"?r.content.push({type:"tool_result",content:n.content,tool_use_id:n.tool_call_id}):e.push(new Bv({content:[{type:"tool_result",content:n.content,tool_use_id:n.tool_call_id}]}))}else e.push(new Bv({content:[{type:"tool_result",...n.content!=null?{content:Z2(n)}:{},tool_use_id:n.tool_call_id}]}));else e.push(n);return e}function qV(t){if(t.id===void 0)throw new Error('Anthropic requires all tool calls to have an "id".');return{type:"tool_use",id:t.id,name:t.name,input:t.args}}function*JZe(t,e){const n=["bash_code_execution_tool_result","input_json_delta","server_tool_use","text_editor_code_execution_tool_result","tool_result","tool_use","web_search_result","web_search_tool_result"],r=["text","text_delta"];for(const i of t){Cc(i)&&(yield kL(i,HZe));const a="cache_control"in i?i.cache_control:void 0;if(i.type==="image_url"){let s;typeof i.image_url=="string"?s=IP(i.image_url):typeof i.image_url=="object"&&i.image_url!==null&&"url"in i.image_url&&typeof i.image_url.url=="string"&&(s=IP(i.image_url.url)),s&&(yield{type:"image",source:s,...a?{cache_control:a}:{}})}else if(qZe(i))yield i;else if(i.type==="image"){let s;"url"in i&&typeof i.url=="string"?s=IP(i.url):"data"in i&&(typeof i.data=="string"||i.data instanceof Uint8Array)?s={type:"base64",media_type:"mimeType"in i&&typeof i.mimeType=="string"?i.mimeType:"image/jpeg",data:typeof i.data=="string"?i.data:Buffer.from(i.data).toString("base64")}:"fileId"in i&&typeof i.fileId=="string"&&(s={type:"file",file_id:i.fileId}),s&&(yield{type:"image",source:s,...a?{cache_control:a}:{}})}else if(i.type==="file"){let s;"url"in i&&typeof i.url=="string"?s={type:"url",url:i.url}:"data"in i&&(typeof i.data=="string"||i.data instanceof Uint8Array)?s={type:"base64",media_type:"mimeType"in i&&typeof i.mimeType=="string"?i.mimeType:"application/pdf",data:typeof i.data=="string"?i.data:Buffer.from(i.data).toString("base64")}:"fileId"in i&&typeof i.fileId=="string"&&(s={type:"file",file_id:i.fileId}),s&&(yield{type:"document",source:s,...a?{cache_control:a}:{}})}else if(i.type==="document")yield{...i,...a?{cache_control:a}:{}};else if(FZe(i))yield{type:"thinking",thinking:i.thinking,signature:i.signature,...a?{cache_control:a}:{}};else if(UZe(i))yield{type:"redacted_thinking",data:i.data,...a?{cache_control:a}:{}};else if(aoe(i))yield{type:"compaction",content:i.content,...a?{cache_control:a}:{}};else if(zZe(i))yield{type:"search_result",title:i.title,source:i.source,..."cache_control"in i&&i.cache_control?{cache_control:i.cache_control}:{},..."citations"in i&&i.citations?{citations:i.citations}:{},content:i.content};else if(r.find(s=>s===i.type)&&"text"in i)yield{type:"text",text:i.text,...a?{cache_control:a}:{},..."citations"in i&&i.citations?{citations:i.citations}:{}};else if(n.find(s=>s===i.type)){const s={...i};if(s.type==="input_json_delta")continue;if(s.type==="tool_use"&&typeof s.input=="string"){const o=e==null?void 0:e.find(l=>l.id===s.id);o?s.input=o.args:s.input=t.filter(l=>l.index===s.index&&l.type==="input_json_delta"&&typeof l.input=="string").reduce((l,c)=>l+c.input,s.input)}if("index"in s&&delete s.index,"input"in s&&typeof s.input=="string")try{s.input=JSON.parse(s.input)}catch{s.input={}}yield{...s,...a?{cache_control:a}:{}}}else i.type==="container_upload"&&(yield{...i,...a?{cache_control:a}:{}})}}function Z2(t,e){const{content:n}=t;return typeof n=="string"?n:Array.from(JZe(n,e))}function HV(t){const e=XZe(t);let n;return e.length>0&&e[0]._getType()==="system"&&(n=t[0].content),{messages:YZe((n!==void 0?e.slice(1):e).map(r=>{var a,s;let i;if(r._getType()==="human")i="user";else if(r._getType()==="ai")i="assistant";else if(r._getType()==="tool")i="user";else throw r._getType()==="system"?new Error("System messages are only permitted as the first passed message."):new Error(`Message type "${r.type}" is not supported.`);if(fa.isInstance(r)&&((a=r.response_metadata)==null?void 0:a.output_version)==="v1")return{role:i,content:ZZe(r)};if(fa.isInstance(r)&&((s=r.tool_calls)!=null&&s.length)){if(typeof r.content=="string")return r.content===""?{role:i,content:r.tool_calls.map(qV)}:{role:i,content:[{type:"text",text:r.content},...r.tool_calls.map(qV)]};{const{content:o}=r;return r.tool_calls.every(l=>o.find(c=>(c.type==="tool_use"||c.type==="input_json_delta"||c.type==="server_tool_use")&&c.id===l.id))||console.warn('The "tool_calls" field on a message is only respected if content is a string.'),{role:i,content:Z2(r,r.tool_calls)}}}else return{role:i,content:Z2(r,fa.isInstance(r)?r.tool_calls:void 0)}})),system:n}}function WV(t,e){if(!t.messages||t.messages.length===0)return t;const n=[...t.messages],r=n.length-1,i=n[r];if(!i)return t;if(typeof i.content=="string")return n[r]={...i,content:[{type:"text",text:i.content,cache_control:e}]},{...t,messages:n};if(Array.isArray(i.content)&&i.content.length>0){const a=[...i.content],s=a.length-1;return a[s]={...a[s],cache_control:e},n[r]={...i,content:a},{...t,messages:n}}return t}function YZe(t){if(!t||t.length<=1)return t;const e=[];let n=t[0];const r=a=>typeof a=="string"?[{type:"text",text:a}]:a,i=a=>a.role!=="user"||typeof a.content=="string"?!1:Array.isArray(a.content)&&a.content.every(s=>s.type==="tool_result");for(let a=1;a<t.length;a+=1){const s=t[a];i(n)&&i(s)?n={...n,content:[...r(n.content),...r(s.content)]}:(e.push(n),n=s)}return e.push(n),e}function QZe(t,e){var r;const n={model_provider:"anthropic"};if(t.type==="message_start"){const{content:i,usage:a,...s}=t.message,o={};for(const[p,m]of Object.entries(s))m!=null&&(o[p]=m);const{input_tokens:l,output_tokens:c,...u}=a??{},f=soe(a);return{chunk:new mr({content:e.coerceContentToString?"":[],additional_kwargs:o,usage_metadata:e.streamUsage?f:void 0,response_metadata:{...n,usage:{...u}},id:t.message.id})}}else if(t.type==="message_delta"){const i={input_tokens:0,output_tokens:t.usage.output_tokens,total_tokens:t.usage.output_tokens,input_token_details:{cache_creation:t.usage.cache_creation_input_tokens,cache_read:t.usage.cache_read_input_tokens}},a="context_management"in t.delta?{context_management:t.delta.context_management}:void 0;return{chunk:new mr({content:e.coerceContentToString?"":[],response_metadata:a,additional_kwargs:{...t.delta},usage_metadata:e.streamUsage?i:void 0})}}else if(t.type==="content_block_start"&&["tool_use","document","server_tool_use","web_search_tool_result"].includes(t.content_block.type)){const i=t.content_block;let a;return i.type==="tool_use"?a=[{id:i.id,index:t.index,name:i.name,args:""}]:a=[],{chunk:new mr({content:e.coerceContentToString?"":[{index:t.index,...t.content_block,input:i.type==="server_tool_use"||i.type==="tool_use"?"":void 0}],response_metadata:n,additional_kwargs:{},tool_call_chunks:a})}}else if(t.type==="content_block_delta"&&["text_delta","citations_delta","thinking_delta","signature_delta"].includes(t.delta.type)){if(e.coerceContentToString&&"text"in t.delta)return{chunk:new mr({content:t.delta.text})};{const i=t.delta;return"citation"in i&&(i.citations=[i.citation],delete i.citation),i.type==="thinking_delta"||i.type==="signature_delta"?{chunk:new mr({content:[{index:t.index,...i,type:"thinking"}],response_metadata:n})}:{chunk:new mr({content:[{index:t.index,...i,type:"text"}],response_metadata:n})}}}else{if(t.type==="content_block_delta"&&t.delta.type==="input_json_delta")return{chunk:new mr({content:e.coerceContentToString?"":[{index:t.index,input:t.delta.partial_json,type:t.delta.type}],response_metadata:n,additional_kwargs:{},tool_call_chunks:[{index:t.index,args:t.delta.partial_json}]})};if(t.type==="content_block_start"&&t.content_block.type==="text"){const i=(r=t.content_block)==null?void 0:r.text;if(i!==void 0)return{chunk:new mr({content:e.coerceContentToString?i:[{index:t.index,...t.content_block}],response_metadata:n,additional_kwargs:{}})}}else{if(t.type==="content_block_start"&&t.content_block.type==="redacted_thinking")return{chunk:new mr({content:e.coerceContentToString?"":[{index:t.index,...t.content_block}],response_metadata:n})};if(t.type==="content_block_start"&&t.content_block.type==="thinking"){const i=t.content_block.thinking;return{chunk:new mr({content:e.coerceContentToString?i:[{index:t.index,...t.content_block}],response_metadata:n})}}else{if(t.type==="content_block_start"&&aoe(t.content_block))return{chunk:new mr({content:e.coerceContentToString?"":[{index:t.index,...t.content_block}],response_metadata:n})};if(t.type==="content_block_delta"&&t.delta.type==="compaction_delta")return{chunk:new mr({content:e.coerceContentToString?"":[{index:t.index,...t.delta,type:"compaction"}],response_metadata:n})}}}}return null}function eXe(t,e){const n={...e,model_provider:"anthropic"},r=e.usage,i=r!=null?soe(r):void 0;return t.length===1&&t[0].type==="text"?[{text:t[0].text,message:new fa({content:t[0].text,additional_kwargs:e,usage_metadata:i,response_metadata:n,id:e.id})}]:[{text:"",message:new fa({content:t,additional_kwargs:e,tool_calls:ioe(t),usage_metadata:i,response_metadata:n,id:e.id})}]}function soe(t){const e=t.cache_creation_input_tokens??0,n=t.cache_read_input_tokens??0,r=t.input_tokens+e+n;return{input_tokens:r,output_tokens:t.output_tokens,total_tokens:r+t.output_tokens,input_token_details:{cache_creation:e,cache_read:n}}}function W_(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}function VV(t){let e;return t.status===400&&typeof t.message=="string"&&t.message.includes("prompt is too long")?e=Nre.fromError(t):t.status===400&&t.message.includes("tool")?e=W_(t,"INVALID_TOOL_RESULTS"):t.status===401?e=W_(t,"MODEL_AUTHENTICATION"):t.status===404?e=W_(t,"MODEL_NOT_FOUND"):t.status===429?e=W_(t,"MODEL_RATE_LIMIT"):e=t,e}const tXe={"claude-opus-4-5-20251101":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-5-haiku-latest":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-opus-4-1":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-5-sonnet-20241022":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-sonnet-20240229":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-opus-4-6":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:128e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-sonnet-4-6":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-sonnet-4-0":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-opus-4-20250514":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-sonnet-4-5-20250929":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-opus-4-0":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-5-haiku-20241022":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-5-sonnet-20240620":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-7-sonnet-latest":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-7-sonnet-20250219":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-haiku-20240307":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-haiku-4-5-20251001":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-haiku-4-5":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-opus-4-5":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-3-opus-20240229":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:4096,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-sonnet-4-5":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-sonnet-4-20250514":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:64e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0},"claude-opus-4-1-20250805":{maxInputTokens:2e5,imageInputs:!0,audioInputs:!1,pdfInputs:!0,videoInputs:!1,maxOutputTokens:32e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1,imageUrlInputs:!0,pdfToolMessage:!0,imageToolMessage:!0}};function De(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function he(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let ooe=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return ooe=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Jv(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const X2=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class wt extends Error{}class vi extends wt{constructor(e,n,r,i){super(`${vi.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("request-id"),this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new RT({message:r,cause:X2(n)});const a=n;return e===400?new coe(e,a,r,i):e===401?new uoe(e,a,r,i):e===403?new doe(e,a,r,i):e===404?new foe(e,a,r,i):e===409?new hoe(e,a,r,i):e===422?new poe(e,a,r,i):e===429?new moe(e,a,r,i):e>=500?new goe(e,a,r,i):new vi(e,a,r,i)}}class bo extends vi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class RT extends vi{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class loe extends RT{constructor({message:e}={}){super({message:e??"Request timed out."})}}class coe extends vi{}class uoe extends vi{}class doe extends vi{}class foe extends vi{}class hoe extends vi{}class poe extends vi{}class moe extends vi{}class goe extends vi{}const nXe=/^[a-z][a-z0-9+.-]*:/i,rXe=t=>nXe.test(t);let J2=t=>(J2=Array.isArray,J2(t)),GV=J2;function Y2(t){return typeof t!="object"?{}:t??{}}function iXe(t){if(!t)return!0;for(const e in t)return!1;return!0}function aXe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const sXe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new wt(`${t} must be an integer`);if(e<0)throw new wt(`${t} must be a positive integer`);return e},yoe=t=>{try{return JSON.parse(t)}catch{return}},sa=(t,e)=>{const n=t[e];return delete t[e],n},oXe=t=>new Promise(e=>setTimeout(e,t)),Nh="0.74.0",lXe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function cXe(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const uXe=()=>{var n;const t=cXe();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nh,"X-Stainless-OS":ZV(Deno.build.os),"X-Stainless-Arch":KV(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nh,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nh,"X-Stainless-OS":ZV(globalThis.process.platform??"unknown"),"X-Stainless-Arch":KV(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=dXe();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nh,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Nh,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function dXe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${a}.${s}`}}}return null}const KV=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ZV=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let XV;const fXe=()=>XV??(XV=uXe());function hXe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function voe(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function boe(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return voe({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function OD(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function pXe(t){var r,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(r=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const mXe=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});function gXe(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let JV;function CD(t){let e;return(JV??(e=new globalThis.TextEncoder,JV=e.encode.bind(e)))(t)}let YV;function QV(t){let e;return(YV??(e=new globalThis.TextDecoder,YV=e.decode.bind(e)))(t)}var Pa,Ra;class Lb{constructor(){Pa.set(this,void 0),Ra.set(this,void 0),De(this,Pa,new Uint8Array),De(this,Ra,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?CD(e):e;De(this,Pa,gXe([he(this,Pa,"f"),n]));const r=[];let i;for(;(i=yXe(he(this,Pa,"f"),he(this,Ra,"f")))!=null;){if(i.carriage&&he(this,Ra,"f")==null){De(this,Ra,i.index);continue}if(he(this,Ra,"f")!=null&&(i.index!==he(this,Ra,"f")+1||i.carriage)){r.push(QV(he(this,Pa,"f").subarray(0,he(this,Ra,"f")-1))),De(this,Pa,he(this,Pa,"f").subarray(he(this,Ra,"f"))),De(this,Ra,null);continue}const a=he(this,Ra,"f")!==null?i.preceding-1:i.preceding,s=QV(he(this,Pa,"f").subarray(0,a));r.push(s),De(this,Pa,he(this,Pa,"f").subarray(i.index)),De(this,Ra,null)}return r}flush(){return he(this,Pa,"f").length?this.decode(`
`):[]}}Pa=new WeakMap,Ra=new WeakMap;Lb.NEWLINE_CHARS=new Set([`
`,"\r"]);Lb.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function yXe(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function vXe(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const L1={off:0,error:200,warn:300,info:400,debug:500},eG=(t,e,n)=>{if(t){if(aXe(L1,t))return t;$i(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(L1))}`)}};function gy(){}function V_(t,e,n){return!e||L1[t]>L1[n]?gy:e[t].bind(e)}const bXe={error:gy,warn:gy,info:gy,debug:gy};let tG=new WeakMap;function $i(t){const e=t.logger,n=t.logLevel??"off";if(!e)return bXe;const r=tG.get(e);if(r&&r[0]===n)return r[1];const i={error:V_("error",e,n),warn:V_("warn",e,n),info:V_("info",e,n),debug:V_("debug",e,n)};return tG.set(e,[n,i]),i}const jd=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Ng;class ul{constructor(e,n,r){this.iterator=e,Ng.set(this,void 0),this.controller=n,De(this,Ng,r)}static fromSSEResponse(e,n,r){let i=!1;const a=r?$i(r):console;async function*s(){if(i)throw new wt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const l of _Xe(e,n)){if(l.event==="completion")try{yield JSON.parse(l.data)}catch(c){throw a.error("Could not parse message into JSON:",l.data),a.error("From chunk:",l.raw),c}if(l.event==="message_start"||l.event==="message_delta"||l.event==="message_stop"||l.event==="content_block_start"||l.event==="content_block_delta"||l.event==="content_block_stop")try{yield JSON.parse(l.data)}catch(c){throw a.error("Could not parse message into JSON:",l.data),a.error("From chunk:",l.raw),c}if(l.event!=="ping"&&l.event==="error")throw new vi(void 0,yoe(l.data)??l.data,void 0,e.headers)}o=!0}catch(l){if(Jv(l))return;throw l}finally{o||n.abort()}}return new ul(s,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*a(){const o=new Lb,l=OD(e);for await(const c of l)for(const u of o.decode(c))yield u;for(const c of o.flush())yield c}async function*s(){if(i)throw new wt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let o=!1;try{for await(const l of a())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(Jv(l))return;throw l}finally{o||n.abort()}}return new ul(s,n,r)}[(Ng=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const s=r.next();e.push(s),n.push(s)}return a.shift()}});return[new ul(()=>i(e),this.controller,he(this,Ng,"f")),new ul(()=>i(n),this.controller,he(this,Ng,"f"))]}toReadableStream(){const e=this;let n;return voe({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await n.next();if(a)return r.close();const s=CD(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*_Xe(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new wt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new wt("Attempted to iterate over a response with no body");const n=new xXe,r=new Lb,i=OD(t.body);for await(const a of wXe(i))for(const s of r.decode(a)){const o=n.decode(s);o&&(yield o)}for(const a of r.flush()){const s=n.decode(a);s&&(yield s)}}async function*wXe(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?CD(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let a;for(;(a=vXe(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class xXe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=SXe(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function SXe(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function _oe(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:a}=e,s=await(async()=>{var f;if(e.options.stream)return $i(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller):ul.fromSSEResponse(n,e.controller);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const o=n.headers.get("content-type"),l=(f=o==null?void 0:o.split(";")[0])==null?void 0:f.trim();if((l==null?void 0:l.includes("application/json"))||(l==null?void 0:l.endsWith("+json"))){if(n.headers.get("content-length")==="0")return;const m=await n.json();return woe(m,n)}return await n.text()})();return $i(t).debug(`[${r}] response parsed`,jd({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-a})),s}function woe(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}var yy;class jT extends Promise{constructor(e,n,r=_oe){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,yy.set(this,void 0),De(this,yy,e)}_thenUnwrap(e){return new jT(he(this,yy,"f"),this.responsePromise,async(n,r)=>woe(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(he(this,yy,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}yy=new WeakMap;var G_;class xoe{constructor(e,n,r,i){G_.set(this,void 0),De(this,G_,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new wt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await he(this,G_,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(G_=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class TXe extends jT{constructor(e,n,r){super(e,n,async(i,a)=>new r(i,a.response,await _oe(i,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Db extends xoe{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.first_id=r.first_id||null,this.last_id=r.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var n;if((n=this.options.query)!=null&&n.before_id){const r=this.first_id;return r?{...this.options,query:{...Y2(this.options.query),before_id:r}}:null}const e=this.last_id;return e?{...this.options,query:{...Y2(this.options.query),after_id:e}}:null}}class Soe extends xoe{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.next_page=r.next_page||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.next_page;return e?{...this.options,query:{...Y2(this.options.query),page:e}}:null}}const Toe=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function sp(t,e,n){return Toe(),new File(t,e??"unknown_file",n)}function jw(t,e){const n=typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"";return e?n.split(/[\\/]/).pop()||void 0:n}const Eoe=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",kD=async(t,e,n=!0)=>({...t,body:await AXe(t.body,e,n)}),nG=new WeakMap;function EXe(t){const e=typeof t=="function"?t:t.fetch,n=nG.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new i(a).text()}catch{return!0}})();return nG.set(e,r),r}const AXe=async(t,e,n=!0)=>{if(!await EXe(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const r=new FormData;return await Promise.all(Object.entries(t||{}).map(([i,a])=>Q2(r,i,a,n))),r},OXe=t=>t instanceof Blob&&"name"in t,Q2=async(t,e,n,r)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response){let i={};const a=n.headers.get("Content-Type");a&&(i={type:a}),t.append(e,sp([await n.blob()],jw(n,r),i))}else if(Eoe(n))t.append(e,sp([await new Response(boe(n)).blob()],jw(n,r)));else if(OXe(n))t.append(e,sp([n],jw(n,r),{type:n.type}));else if(Array.isArray(n))await Promise.all(n.map(i=>Q2(t,e+"[]",i,r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([i,a])=>Q2(t,`${e}[${i}]`,a,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},Aoe=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",CXe=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Aoe(t),kXe=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function NXe(t,e,n){if(Toe(),t=await t,e||(e=jw(t,!0)),CXe(t))return t instanceof File&&e==null&&n==null?t:sp([await t.arrayBuffer()],e??t.name,{type:t.type,lastModified:t.lastModified,...n});if(kXe(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),sp(await e$(i),e,n)}const r=await e$(t);if(!(n!=null&&n.type)){const i=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(n={...n,type:i})}return sp(r,e,n)}async function e$(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Aoe(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Eoe(t))for await(const r of t)e.push(...await e$(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${IXe(t)}`)}return e}function IXe(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Lo{constructor(e){this._client=e}}const Ooe=Symbol.for("brand.privateNullableHeaders");function*PXe(t){if(!t)return;if(Ooe in t){const{values:r,nulls:i}=t;yield*r.entries();for(const a of i)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():GV(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=GV(r[1])?r[1]:[r[1]];let s=!1;for(const o of a)o!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,o])}}const Ht=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[a,s]of PXe(r)){const o=a.toLowerCase();i.has(o)||(e.delete(a),i.add(o)),s===null?(e.delete(a),n.add(o)):(e.append(a,s),n.delete(o))}}return{[Ooe]:!0,values:e,nulls:n}},$y=Symbol("anthropic.sdk.stainlessHelper");function $w(t){return typeof t=="object"&&t!==null&&$y in t}function Coe(t,e){const n=new Set;if(t)for(const r of t)$w(r)&&n.add(r[$y]);if(e){for(const r of e)if($w(r)&&n.add(r[$y]),Array.isArray(r.content))for(const i of r.content)$w(i)&&n.add(i[$y])}return Array.from(n)}function koe(t,e){const n=Coe(t,e);return n.length===0?{}:{"x-stainless-helper":n.join(", ")}}function RXe(t){return $w(t)?{"x-stainless-helper":t[$y]}:{}}function Noe(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const rG=Object.freeze(Object.create(null)),jXe=(t=Noe)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const a=[],s=n.reduce((u,f,p)=>{var y;/[?#]/.test(f)&&(i=!0);const m=r[p];let _=(i?encodeURIComponent:t)(""+m);return p!==r.length&&(m==null||typeof m=="object"&&m.toString===((y=Object.getPrototypeOf(Object.getPrototypeOf(m.hasOwnProperty??rG)??rG))==null?void 0:y.toString))&&(_=m+"",a.push({start:u.length+f.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(m).slice(8,-1)} is not a valid path parameter`})),u+f+(p===r.length?"":_)},""),o=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(o))!==null;)a.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(a.sort((u,f)=>u.start-f.start),a.length>0){let u=0;const f=a.reduce((p,m)=>{const _=" ".repeat(m.start-u),y="^".repeat(m.length);return u=m.start+m.length,p+_+y},"");throw new wt(`Path parameters result in path with invalid segments:
${a.map(p=>p.error).join(`
`)}
${s}
${f}`)}return s},ii=jXe(Noe);class Ioe extends Lo{list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/files",Db,{query:i,...n,headers:Ht([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n==null?void 0:n.headers])})}delete(e,n={},r){const{betas:i}=n??{};return this._client.delete(ii`/v1/files/${e}`,{...r,headers:Ht([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},r==null?void 0:r.headers])})}download(e,n={},r){const{betas:i}=n??{};return this._client.get(ii`/v1/files/${e}/content`,{...r,headers:Ht([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}retrieveMetadata(e,n={},r){const{betas:i}=n??{};return this._client.get(ii`/v1/files/${e}`,{...r,headers:Ht([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},r==null?void 0:r.headers])})}upload(e,n){const{betas:r,...i}=e;return this._client.post("/v1/files",kD({body:i,...n,headers:Ht([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},RXe(i.file),n==null?void 0:n.headers])},this._client))}}let Poe=class extends Lo{retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(ii`/v1/models/${e}?beta=true`,{...r,headers:Ht([{...(i==null?void 0:i.toString())!=null?{"anthropic-beta":i==null?void 0:i.toString()}:void 0},r==null?void 0:r.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/models?beta=true",Db,{query:i,...n,headers:Ht([{...(r==null?void 0:r.toString())!=null?{"anthropic-beta":r==null?void 0:r.toString()}:void 0},n==null?void 0:n.headers])})}};const Roe={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};function joe(t){var e;return(t==null?void 0:t.output_format)??((e=t==null?void 0:t.output_config)==null?void 0:e.format)}function iG(t,e,n){const r=joe(e);return!e||!("parse"in(r??{}))?{...t,content:t.content.map(i=>{if(i.type==="text"){const a=Object.defineProperty({...i},"parsed_output",{value:null,enumerable:!1});return Object.defineProperty(a,"parsed",{get(){return n.logger.warn("The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead."),null},enumerable:!1})}return i}),parsed_output:null}:$oe(t,e,n)}function $oe(t,e,n){let r=null;const i=t.content.map(a=>{if(a.type==="text"){const s=$Xe(e,a.text);r===null&&(r=s);const o=Object.defineProperty({...a},"parsed_output",{value:s,enumerable:!1});return Object.defineProperty(o,"parsed",{get(){return n.logger.warn("The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead."),s},enumerable:!1})}return a});return{...t,content:i,parsed_output:r}}function $Xe(t,e){const n=joe(t);if((n==null?void 0:n.type)!=="json_schema")return null;try{return"parse"in n?n.parse(e):JSON.parse(e)}catch(r){throw new wt(`Failed to parse structured output: ${r}`)}}const MXe=t=>{let e=0,n=[];for(;e<t.length;){let r=t[e];if(r==="\\"){e++;continue}if(r==="{"){n.push({type:"brace",value:"{"}),e++;continue}if(r==="}"){n.push({type:"brace",value:"}"}),e++;continue}if(r==="["){n.push({type:"paren",value:"["}),e++;continue}if(r==="]"){n.push({type:"paren",value:"]"}),e++;continue}if(r===":"){n.push({type:"separator",value:":"}),e++;continue}if(r===","){n.push({type:"delimiter",value:","}),e++;continue}if(r==='"'){let o="",l=!1;for(r=t[++e];r!=='"';){if(e===t.length){l=!0;break}if(r==="\\"){if(e++,e===t.length){l=!0;break}o+=r+t[e],r=t[++e]}else o+=r,r=t[++e]}r=t[++e],l||n.push({type:"string",value:o});continue}if(r&&/\s/.test(r)){e++;continue}let a=/[0-9]/;if(r&&a.test(r)||r==="-"||r==="."){let o="";for(r==="-"&&(o+=r,r=t[++e]);r&&a.test(r)||r===".";)o+=r,r=t[++e];n.push({type:"number",value:o});continue}let s=/[a-z]/i;if(r&&s.test(r)){let o="";for(;r&&s.test(r)&&e!==t.length;)o+=r,r=t[++e];if(o=="true"||o=="false"||o==="null")n.push({type:"name",value:o});else{e++;continue}continue}e++}return n},Ih=t=>{if(t.length===0)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),Ih(t);case"number":let n=e.value[e.value.length-1];if(n==="."||n==="-")return t=t.slice(0,t.length-1),Ih(t);case"string":let r=t[t.length-2];if((r==null?void 0:r.type)==="delimiter")return t=t.slice(0,t.length-1),Ih(t);if((r==null?void 0:r.type)==="brace"&&r.value==="{")return t=t.slice(0,t.length-1),Ih(t);break;case"delimiter":return t=t.slice(0,t.length-1),Ih(t)}return t},LXe=t=>{let e=[];return t.map(n=>{n.type==="brace"&&(n.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),n.type==="paren"&&(n.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(n=>{n==="}"?t.push({type:"brace",value:"}"}):n==="]"&&t.push({type:"paren",value:"]"})}),t},DXe=t=>{let e="";return t.map(n=>{switch(n.type){case"string":e+='"'+n.value+'"';break;default:e+=n.value;break}}),e},Moe=t=>JSON.parse(DXe(LXe(Ih(MXe(t)))));var bs,hu,gh,Ig,K_,Pg,Rg,Z_,jg,Ql,$g,X_,J_,Ed,Y_,Q_,Mg,PP,aG,ew,RP,jP,$P,sG;const oG="__json_buf";function lG(t){return t.type==="tool_use"||t.type==="server_tool_use"||t.type==="mcp_tool_use"}class D1{constructor(e,n){bs.add(this),this.messages=[],this.receivedMessages=[],hu.set(this,void 0),gh.set(this,null),this.controller=new AbortController,Ig.set(this,void 0),K_.set(this,()=>{}),Pg.set(this,()=>{}),Rg.set(this,void 0),Z_.set(this,()=>{}),jg.set(this,()=>{}),Ql.set(this,{}),$g.set(this,!1),X_.set(this,!1),J_.set(this,!1),Ed.set(this,!1),Y_.set(this,void 0),Q_.set(this,void 0),Mg.set(this,void 0),ew.set(this,r=>{if(De(this,X_,!0),Jv(r)&&(r=new bo),r instanceof bo)return De(this,J_,!0),this._emit("abort",r);if(r instanceof wt)return this._emit("error",r);if(r instanceof Error){const i=new wt(r.message);return i.cause=r,this._emit("error",i)}return this._emit("error",new wt(String(r)))}),De(this,Ig,new Promise((r,i)=>{De(this,K_,r,"f"),De(this,Pg,i,"f")})),De(this,Rg,new Promise((r,i)=>{De(this,Z_,r,"f"),De(this,jg,i,"f")})),he(this,Ig,"f").catch(()=>{}),he(this,Rg,"f").catch(()=>{}),De(this,gh,e),De(this,Mg,(n==null?void 0:n.logger)??console)}get response(){return he(this,Y_,"f")}get request_id(){return he(this,Q_,"f")}async withResponse(){De(this,Ed,!0);const e=await he(this,Ig,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const n=new D1(null);return n._run(()=>n._fromReadableStream(e)),n}static createMessage(e,n,r,{logger:i}={}){const a=new D1(n,{logger:i});for(const s of n.messages)a._addMessageParam(s);return De(a,gh,{...n,stream:!0}),a._run(()=>a._createMessage(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},he(this,ew,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,n=!0){this.receivedMessages.push(e),n&&this._emit("message",e)}async _createMessage(e,n,r){var s;const i=r==null?void 0:r.signal;let a;i&&(i.aborted&&this.controller.abort(),a=this.controller.abort.bind(this.controller),i.addEventListener("abort",a));try{he(this,bs,"m",RP).call(this);const{response:o,data:l}=await e.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(o);for await(const c of l)he(this,bs,"m",jP).call(this,c);if((s=l.controller.signal)!=null&&s.aborted)throw new bo;he(this,bs,"m",$P).call(this)}finally{i&&a&&i.removeEventListener("abort",a)}}_connected(e){this.ended||(De(this,Y_,e),De(this,Q_,e==null?void 0:e.headers.get("request-id")),he(this,K_,"f").call(this,e),this._emit("connect"))}get ended(){return he(this,$g,"f")}get errored(){return he(this,X_,"f")}get aborted(){return he(this,J_,"f")}abort(){this.controller.abort()}on(e,n){return(he(this,Ql,"f")[e]||(he(this,Ql,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=he(this,Ql,"f")[e];if(!r)return this;const i=r.findIndex(a=>a.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(he(this,Ql,"f")[e]||(he(this,Ql,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{De(this,Ed,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){De(this,Ed,!0),await he(this,Rg,"f")}get currentMessage(){return he(this,hu,"f")}async finalMessage(){return await this.done(),he(this,bs,"m",PP).call(this)}async finalText(){return await this.done(),he(this,bs,"m",aG).call(this)}_emit(e,...n){if(he(this,$g,"f"))return;e==="end"&&(De(this,$g,!0),he(this,Z_,"f").call(this));const r=he(this,Ql,"f")[e];if(r&&(he(this,Ql,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!he(this,Ed,"f")&&!(r!=null&&r.length)&&Promise.reject(i),he(this,Pg,"f").call(this,i),he(this,jg,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!he(this,Ed,"f")&&!(r!=null&&r.length)&&Promise.reject(i),he(this,Pg,"f").call(this,i),he(this,jg,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",he(this,bs,"m",PP).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{he(this,bs,"m",RP).call(this),this._connected(null);const s=ul.fromReadableStream(e,this.controller);for await(const o of s)he(this,bs,"m",jP).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new bo;he(this,bs,"m",$P).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}[(hu=new WeakMap,gh=new WeakMap,Ig=new WeakMap,K_=new WeakMap,Pg=new WeakMap,Rg=new WeakMap,Z_=new WeakMap,jg=new WeakMap,Ql=new WeakMap,$g=new WeakMap,X_=new WeakMap,J_=new WeakMap,Ed=new WeakMap,Y_=new WeakMap,Q_=new WeakMap,Mg=new WeakMap,ew=new WeakMap,bs=new WeakSet,PP=function(){if(this.receivedMessages.length===0)throw new wt("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},aG=function(){if(this.receivedMessages.length===0)throw new wt("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new wt("stream ended without producing a content block with type=text");return n.join(" ")},RP=function(){this.ended||De(this,hu,void 0)},jP=function(n){if(this.ended)return;const r=he(this,bs,"m",sG).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const i=r.content.at(-1);switch(n.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",n.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",n.delta.citation,i.citations??[]);break}case"input_json_delta":{lG(i)&&i.input&&this._emit("inputJson",n.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",n.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}case"compaction_delta":{i.type==="compaction"&&i.content&&this._emit("compaction",i.content);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(iG(r,he(this,gh,"f"),{logger:he(this,Mg,"f")}),!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{De(this,hu,r);break}}},$P=function(){if(this.ended)throw new wt("stream has ended, this shouldn't happen");const n=he(this,hu,"f");if(!n)throw new wt("request ended without sending any chunks");return De(this,hu,void 0),iG(n,he(this,gh,"f"),{logger:he(this,Mg,"f")})},sG=function(n){let r=he(this,hu,"f");if(n.type==="message_start"){if(r)throw new wt(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new wt(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.container=n.delta.container,r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,r.context_management=n.context_management,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),n.usage.iterations!=null&&(r.usage.iterations=n.usage.iterations),r;case"content_block_start":return r.content.push(n.content_block),r;case"content_block_delta":{const i=r.content.at(n.index);switch(n.delta.type){case"text_delta":{(i==null?void 0:i.type)==="text"&&(r.content[n.index]={...i,text:(i.text||"")+n.delta.text});break}case"citations_delta":{(i==null?void 0:i.type)==="text"&&(r.content[n.index]={...i,citations:[...i.citations??[],n.delta.citation]});break}case"input_json_delta":{if(i&&lG(i)){let a=i[oG]||"";a+=n.delta.partial_json;const s={...i};if(Object.defineProperty(s,oG,{value:a,enumerable:!1,writable:!0}),a)try{s.input=Moe(a)}catch(o){const l=new wt(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${o}. JSON: ${a}`);he(this,ew,"f").call(this,l)}r.content[n.index]=s}break}case"thinking_delta":{(i==null?void 0:i.type)==="thinking"&&(r.content[n.index]={...i,thinking:i.thinking+n.delta.thinking});break}case"signature_delta":{(i==null?void 0:i.type)==="thinking"&&(r.content[n.index]={...i,signature:n.delta.signature});break}case"compaction_delta":{(i==null?void 0:i.type)==="compaction"&&(r.content[n.index]={...i,content:(i.content||"")+n.delta.content});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("streamEvent",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,s)=>n.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ul(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class Loe extends Error{constructor(e){const n=typeof e=="string"?e:e.map(r=>r.type==="text"?r.text:`[${r.type}]`).join(" ");super(n),this.name="ToolError",this.content=e}}const BXe=1e5,FXe=`You have been working on the task described above but have not yet completed it. Write a continuation summary that will allow you (or another instance of yourself) to resume work efficiently in a future context window where the conversation history will be replaced with this summary. Your summary should be structured, concise, and actionable. Include:
1. Task Overview
The user's core request and success criteria
Any clarifications or constraints they specified
2. Current State
What has been completed so far
Files created, modified, or analyzed (with paths if relevant)
Key outputs or artifacts produced
3. Important Discoveries
Technical constraints or requirements uncovered
Decisions made and their rationale
Errors encountered and how they were resolved
What approaches were tried that didn't work (and why)
4. Next Steps
Specific actions needed to complete the task
Any blockers or open questions to resolve
Priority order if multiple steps remain
5. Context to Preserve
User preferences or style requirements
Domain-specific details that aren't obvious
Any promises made to the user
Be concise but completeerr on the side of including information that would prevent duplicate work or repeated mistakes. Write in a way that enables immediate resumption of the task.
Wrap your summary in <summary></summary> tags.`;var Lg,yh,Ad,Ar,Dg,Oa,ac,pu,Bg,cG,t$;function uG(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}class Doe{constructor(e,n,r){Lg.add(this),this.client=e,yh.set(this,!1),Ad.set(this,!1),Ar.set(this,void 0),Dg.set(this,void 0),Oa.set(this,void 0),ac.set(this,void 0),pu.set(this,void 0),Bg.set(this,0),De(this,Ar,{params:{...n,messages:structuredClone(n.messages)}});const a=["BetaToolRunner",...Coe(n.tools,n.messages)].join(", ");De(this,Dg,{...r,headers:Ht([{"x-stainless-helper":a},r==null?void 0:r.headers])}),De(this,pu,uG())}async*[(yh=new WeakMap,Ad=new WeakMap,Ar=new WeakMap,Dg=new WeakMap,Oa=new WeakMap,ac=new WeakMap,pu=new WeakMap,Bg=new WeakMap,Lg=new WeakSet,cG=async function(){var c;const n=he(this,Ar,"f").params.compactionControl;if(!n||!n.enabled)return!1;let r=0;if(he(this,Oa,"f")!==void 0)try{const u=await he(this,Oa,"f");r=u.usage.input_tokens+(u.usage.cache_creation_input_tokens??0)+(u.usage.cache_read_input_tokens??0)+u.usage.output_tokens}catch{return!1}const i=n.contextTokenThreshold??BXe;if(r<i)return!1;const a=n.model??he(this,Ar,"f").params.model,s=n.summaryPrompt??FXe,o=he(this,Ar,"f").params.messages;if(o[o.length-1].role==="assistant"){const u=o[o.length-1];if(Array.isArray(u.content)){const f=u.content.filter(p=>p.type!=="tool_use");f.length===0?o.pop():u.content=f}}const l=await this.client.beta.messages.create({model:a,messages:[...o,{role:"user",content:[{type:"text",text:s}]}],max_tokens:he(this,Ar,"f").params.max_tokens},{headers:{"x-stainless-helper":"compaction"}});if(((c=l.content[0])==null?void 0:c.type)!=="text")throw new wt("Expected text response for compaction");return he(this,Ar,"f").params.messages=[{role:"user",content:l.content}],!0},Symbol.asyncIterator)](){var e;if(he(this,yh,"f"))throw new wt("Cannot iterate over a consumed stream");De(this,yh,!0),De(this,Ad,!0),De(this,ac,void 0);try{for(;;){let n;try{if(he(this,Ar,"f").params.max_iterations&&he(this,Bg,"f")>=he(this,Ar,"f").params.max_iterations)break;De(this,Ad,!1,"f"),De(this,ac,void 0,"f"),De(this,Bg,(e=he(this,Bg,"f"),e++,e),"f"),De(this,Oa,void 0,"f");const{max_iterations:r,compactionControl:i,...a}=he(this,Ar,"f").params;if(a.stream?(n=this.client.beta.messages.stream({...a},he(this,Dg,"f")),De(this,Oa,n.finalMessage(),"f"),he(this,Oa,"f").catch(()=>{}),yield n):(De(this,Oa,this.client.beta.messages.create({...a,stream:!1},he(this,Dg,"f")),"f"),yield he(this,Oa,"f")),!await he(this,Lg,"m",cG).call(this)){if(!he(this,Ad,"f")){const{role:l,content:c}=await he(this,Oa,"f");he(this,Ar,"f").params.messages.push({role:l,content:c})}const o=await he(this,Lg,"m",t$).call(this,he(this,Ar,"f").params.messages.at(-1));if(o)he(this,Ar,"f").params.messages.push(o);else if(!he(this,Ad,"f"))break}}finally{n&&n.abort()}}if(!he(this,Oa,"f"))throw new wt("ToolRunner concluded without a message from the server");he(this,pu,"f").resolve(await he(this,Oa,"f"))}catch(n){throw De(this,yh,!1),he(this,pu,"f").promise.catch(()=>{}),he(this,pu,"f").reject(n),De(this,pu,uG()),n}}setMessagesParams(e){typeof e=="function"?he(this,Ar,"f").params=e(he(this,Ar,"f").params):he(this,Ar,"f").params=e,De(this,Ad,!0),De(this,ac,void 0)}async generateToolResponse(){const e=await he(this,Oa,"f")??this.params.messages.at(-1);return e?he(this,Lg,"m",t$).call(this,e):null}done(){return he(this,pu,"f").promise}async runUntilDone(){if(!he(this,yh,"f"))for await(const e of this);return this.done()}get params(){return he(this,Ar,"f").params}pushMessages(...e){this.setMessagesParams(n=>({...n,messages:[...n.messages,...e]}))}then(e,n){return this.runUntilDone().then(e,n)}}t$=async function(e){return he(this,ac,"f")!==void 0?he(this,ac,"f"):(De(this,ac,UXe(he(this,Ar,"f").params,e)),he(this,ac,"f"))};async function UXe(t,e=t.messages.at(-1)){if(!e||e.role!=="assistant"||!e.content||typeof e.content=="string")return null;const n=e.content.filter(i=>i.type==="tool_use");return n.length===0?null:{role:"user",content:await Promise.all(n.map(async i=>{const a=t.tools.find(s=>("name"in s?s.name:s.mcp_server_name)===i.name);if(!a||!("run"in a))return{type:"tool_result",tool_use_id:i.id,content:`Error: Tool '${i.name}' not found`,is_error:!0};try{let s=i.input;"parse"in a&&a.parse&&(s=a.parse(s));const o=await a.run(s);return{type:"tool_result",tool_use_id:i.id,content:o}}catch(s){return{type:"tool_result",tool_use_id:i.id,content:s instanceof Loe?s.content:`Error: ${s instanceof Error?s.message:String(s)}`,is_error:!0}}}))}}class $T{constructor(e,n){this.iterator=e,this.controller=n}async*decoder(){const e=new Lb;for await(const n of this.iterator)for(const r of e.decode(n))yield JSON.parse(r);for(const n of e.flush())yield JSON.parse(n)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,n){if(!e.body)throw n.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new wt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new wt("Attempted to iterate over a response with no body");return new $T(OD(e.body),n)}}let Boe=class extends Lo{create(e,n){const{betas:r,...i}=e;return this._client.post("/v1/messages/batches?beta=true",{body:i,...n,headers:Ht([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n==null?void 0:n.headers])})}retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(ii`/v1/messages/batches/${e}?beta=true`,{...r,headers:Ht([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r==null?void 0:r.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",Db,{query:i,...n,headers:Ht([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n==null?void 0:n.headers])})}delete(e,n={},r){const{betas:i}=n??{};return this._client.delete(ii`/v1/messages/batches/${e}?beta=true`,{...r,headers:Ht([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r==null?void 0:r.headers])})}cancel(e,n={},r){const{betas:i}=n??{};return this._client.post(ii`/v1/messages/batches/${e}/cancel?beta=true`,{...r,headers:Ht([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r==null?void 0:r.headers])})}async results(e,n={},r){const i=await this.retrieve(e);if(!i.results_url)throw new wt(`No batch \`results_url\`; Has it finished processing? ${i.processing_status} - ${i.id}`);const{betas:a}=n??{};return this._client.get(i.results_url,{...r,headers:Ht([{"anthropic-beta":[...a??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},r==null?void 0:r.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((s,o)=>$T.fromResponse(o.response,o.controller))}};const dG={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"},zXe=["claude-opus-4-6"];let Bb=class extends Lo{constructor(){super(...arguments),this.batches=new Boe(this._client)}create(e,n){const r=fG(e),{betas:i,...a}=r;a.model in dG&&console.warn(`The model '${a.model}' is deprecated and will reach end-of-life on ${dG[a.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`),a.model in zXe&&a.thinking&&a.thinking.type==="enabled"&&console.warn(`Using Claude with ${a.model} and 'thinking.type=enabled' is deprecated. Use 'thinking.type=adaptive' instead which results in better model performance in our testing: https://platform.claude.com/docs/en/build-with-claude/adaptive-thinking`);let s=this._client._options.timeout;if(!a.stream&&s==null){const l=Roe[a.model]??void 0;s=this._client.calculateNonstreamingTimeout(a.max_tokens,l)}const o=koe(a.tools,a.messages);return this._client.post("/v1/messages?beta=true",{body:a,timeout:s??6e5,...n,headers:Ht([{...(i==null?void 0:i.toString())!=null?{"anthropic-beta":i==null?void 0:i.toString()}:void 0},o,n==null?void 0:n.headers]),stream:r.stream??!1})}parse(e,n){return n={...n,headers:Ht([{"anthropic-beta":[...e.betas??[],"structured-outputs-2025-12-15"].toString()},n==null?void 0:n.headers])},this.create(e,n).then(r=>$oe(r,e,{logger:this._client.logger??console}))}stream(e,n){return D1.createMessage(this,e,n)}countTokens(e,n){const r=fG(e),{betas:i,...a}=r;return this._client.post("/v1/messages/count_tokens?beta=true",{body:a,...n,headers:Ht([{"anthropic-beta":[...i??[],"token-counting-2024-11-01"].toString()},n==null?void 0:n.headers])})}toolRunner(e,n){return new Doe(this._client,e,n)}};function fG(t){var r;if(!t.output_format)return t;if((r=t.output_config)!=null&&r.format)throw new wt("Both output_format and output_config.format were provided. Please use only output_config.format (output_format is deprecated).");const{output_format:e,...n}=t;return{...n,output_config:{...t.output_config,format:e}}}Bb.Batches=Boe;Bb.BetaToolRunner=Doe;Bb.ToolError=Loe;class Foe extends Lo{create(e,n={},r){const{betas:i,...a}=n??{};return this._client.post(ii`/v1/skills/${e}/versions?beta=true`,kD({body:a,...r,headers:Ht([{"anthropic-beta":[...i??[],"skills-2025-10-02"].toString()},r==null?void 0:r.headers])},this._client))}retrieve(e,n,r){const{skill_id:i,betas:a}=n;return this._client.get(ii`/v1/skills/${i}/versions/${e}?beta=true`,{...r,headers:Ht([{"anthropic-beta":[...a??[],"skills-2025-10-02"].toString()},r==null?void 0:r.headers])})}list(e,n={},r){const{betas:i,...a}=n??{};return this._client.getAPIList(ii`/v1/skills/${e}/versions?beta=true`,Soe,{query:a,...r,headers:Ht([{"anthropic-beta":[...i??[],"skills-2025-10-02"].toString()},r==null?void 0:r.headers])})}delete(e,n,r){const{skill_id:i,betas:a}=n;return this._client.delete(ii`/v1/skills/${i}/versions/${e}?beta=true`,{...r,headers:Ht([{"anthropic-beta":[...a??[],"skills-2025-10-02"].toString()},r==null?void 0:r.headers])})}}class ND extends Lo{constructor(){super(...arguments),this.versions=new Foe(this._client)}create(e={},n){const{betas:r,...i}=e??{};return this._client.post("/v1/skills?beta=true",kD({body:i,...n,headers:Ht([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},n==null?void 0:n.headers])},this._client,!1))}retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(ii`/v1/skills/${e}?beta=true`,{...r,headers:Ht([{"anthropic-beta":[...i??[],"skills-2025-10-02"].toString()},r==null?void 0:r.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/skills?beta=true",Soe,{query:i,...n,headers:Ht([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},n==null?void 0:n.headers])})}delete(e,n={},r){const{betas:i}=n??{};return this._client.delete(ii`/v1/skills/${e}?beta=true`,{...r,headers:Ht([{"anthropic-beta":[...i??[],"skills-2025-10-02"].toString()},r==null?void 0:r.headers])})}}ND.Versions=Foe;class Om extends Lo{constructor(){super(...arguments),this.models=new Poe(this._client),this.messages=new Bb(this._client),this.files=new Ioe(this._client),this.skills=new ND(this._client)}}Om.Models=Poe;Om.Messages=Bb;Om.Files=Ioe;Om.Skills=ND;class Uoe extends Lo{create(e,n){const{betas:r,...i}=e;return this._client.post("/v1/complete",{body:i,timeout:this._client._options.timeout??6e5,...n,headers:Ht([{...(r==null?void 0:r.toString())!=null?{"anthropic-beta":r==null?void 0:r.toString()}:void 0},n==null?void 0:n.headers]),stream:e.stream??!1})}}function zoe(t){var e;return(e=t==null?void 0:t.output_config)==null?void 0:e.format}function hG(t,e,n){const r=zoe(e);return!e||!("parse"in(r??{}))?{...t,content:t.content.map(i=>i.type==="text"?Object.defineProperty({...i},"parsed_output",{value:null,enumerable:!1}):i),parsed_output:null}:qoe(t,e)}function qoe(t,e,n){let r=null;const i=t.content.map(a=>{if(a.type==="text"){const s=qXe(e,a.text);return r===null&&(r=s),Object.defineProperty({...a},"parsed_output",{value:s,enumerable:!1})}return a});return{...t,content:i,parsed_output:r}}function qXe(t,e){const n=zoe(t);if((n==null?void 0:n.type)!=="json_schema")return null;try{return"parse"in n?n.parse(e):JSON.parse(e)}catch(r){throw new wt(`Failed to parse structured output: ${r}`)}}var _s,mu,vh,Fg,tw,Ug,zg,nw,qg,ec,Hg,rw,iw,Od,aw,sw,Wg,MP,pG,LP,DP,BP,FP,mG;const gG="__json_buf";function yG(t){return t.type==="tool_use"||t.type==="server_tool_use"}class B1{constructor(e,n){_s.add(this),this.messages=[],this.receivedMessages=[],mu.set(this,void 0),vh.set(this,null),this.controller=new AbortController,Fg.set(this,void 0),tw.set(this,()=>{}),Ug.set(this,()=>{}),zg.set(this,void 0),nw.set(this,()=>{}),qg.set(this,()=>{}),ec.set(this,{}),Hg.set(this,!1),rw.set(this,!1),iw.set(this,!1),Od.set(this,!1),aw.set(this,void 0),sw.set(this,void 0),Wg.set(this,void 0),LP.set(this,r=>{if(De(this,rw,!0),Jv(r)&&(r=new bo),r instanceof bo)return De(this,iw,!0),this._emit("abort",r);if(r instanceof wt)return this._emit("error",r);if(r instanceof Error){const i=new wt(r.message);return i.cause=r,this._emit("error",i)}return this._emit("error",new wt(String(r)))}),De(this,Fg,new Promise((r,i)=>{De(this,tw,r,"f"),De(this,Ug,i,"f")})),De(this,zg,new Promise((r,i)=>{De(this,nw,r,"f"),De(this,qg,i,"f")})),he(this,Fg,"f").catch(()=>{}),he(this,zg,"f").catch(()=>{}),De(this,vh,e),De(this,Wg,(n==null?void 0:n.logger)??console)}get response(){return he(this,aw,"f")}get request_id(){return he(this,sw,"f")}async withResponse(){De(this,Od,!0);const e=await he(this,Fg,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const n=new B1(null);return n._run(()=>n._fromReadableStream(e)),n}static createMessage(e,n,r,{logger:i}={}){const a=new B1(n,{logger:i});for(const s of n.messages)a._addMessageParam(s);return De(a,vh,{...n,stream:!0}),a._run(()=>a._createMessage(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},he(this,LP,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,n=!0){this.receivedMessages.push(e),n&&this._emit("message",e)}async _createMessage(e,n,r){var s;const i=r==null?void 0:r.signal;let a;i&&(i.aborted&&this.controller.abort(),a=this.controller.abort.bind(this.controller),i.addEventListener("abort",a));try{he(this,_s,"m",DP).call(this);const{response:o,data:l}=await e.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(o);for await(const c of l)he(this,_s,"m",BP).call(this,c);if((s=l.controller.signal)!=null&&s.aborted)throw new bo;he(this,_s,"m",FP).call(this)}finally{i&&a&&i.removeEventListener("abort",a)}}_connected(e){this.ended||(De(this,aw,e),De(this,sw,e==null?void 0:e.headers.get("request-id")),he(this,tw,"f").call(this,e),this._emit("connect"))}get ended(){return he(this,Hg,"f")}get errored(){return he(this,rw,"f")}get aborted(){return he(this,iw,"f")}abort(){this.controller.abort()}on(e,n){return(he(this,ec,"f")[e]||(he(this,ec,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=he(this,ec,"f")[e];if(!r)return this;const i=r.findIndex(a=>a.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(he(this,ec,"f")[e]||(he(this,ec,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{De(this,Od,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){De(this,Od,!0),await he(this,zg,"f")}get currentMessage(){return he(this,mu,"f")}async finalMessage(){return await this.done(),he(this,_s,"m",MP).call(this)}async finalText(){return await this.done(),he(this,_s,"m",pG).call(this)}_emit(e,...n){if(he(this,Hg,"f"))return;e==="end"&&(De(this,Hg,!0),he(this,nw,"f").call(this));const r=he(this,ec,"f")[e];if(r&&(he(this,ec,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!he(this,Od,"f")&&!(r!=null&&r.length)&&Promise.reject(i),he(this,Ug,"f").call(this,i),he(this,qg,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!he(this,Od,"f")&&!(r!=null&&r.length)&&Promise.reject(i),he(this,Ug,"f").call(this,i),he(this,qg,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",he(this,_s,"m",MP).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{he(this,_s,"m",DP).call(this),this._connected(null);const s=ul.fromReadableStream(e,this.controller);for await(const o of s)he(this,_s,"m",BP).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new bo;he(this,_s,"m",FP).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}[(mu=new WeakMap,vh=new WeakMap,Fg=new WeakMap,tw=new WeakMap,Ug=new WeakMap,zg=new WeakMap,nw=new WeakMap,qg=new WeakMap,ec=new WeakMap,Hg=new WeakMap,rw=new WeakMap,iw=new WeakMap,Od=new WeakMap,aw=new WeakMap,sw=new WeakMap,Wg=new WeakMap,LP=new WeakMap,_s=new WeakSet,MP=function(){if(this.receivedMessages.length===0)throw new wt("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},pG=function(){if(this.receivedMessages.length===0)throw new wt("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new wt("stream ended without producing a content block with type=text");return n.join(" ")},DP=function(){this.ended||De(this,mu,void 0)},BP=function(n){if(this.ended)return;const r=he(this,_s,"m",mG).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const i=r.content.at(-1);switch(n.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",n.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",n.delta.citation,i.citations??[]);break}case"input_json_delta":{yG(i)&&i.input&&this._emit("inputJson",n.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",n.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(hG(r,he(this,vh,"f"),{logger:he(this,Wg,"f")}),!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{De(this,mu,r);break}}},FP=function(){if(this.ended)throw new wt("stream has ended, this shouldn't happen");const n=he(this,mu,"f");if(!n)throw new wt("request ended without sending any chunks");return De(this,mu,void 0),hG(n,he(this,vh,"f"),{logger:he(this,Wg,"f")})},mG=function(n){let r=he(this,mu,"f");if(n.type==="message_start"){if(r)throw new wt(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new wt(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),r;case"content_block_start":return r.content.push({...n.content_block}),r;case"content_block_delta":{const i=r.content.at(n.index);switch(n.delta.type){case"text_delta":{(i==null?void 0:i.type)==="text"&&(r.content[n.index]={...i,text:(i.text||"")+n.delta.text});break}case"citations_delta":{(i==null?void 0:i.type)==="text"&&(r.content[n.index]={...i,citations:[...i.citations??[],n.delta.citation]});break}case"input_json_delta":{if(i&&yG(i)){let a=i[gG]||"";a+=n.delta.partial_json;const s={...i};Object.defineProperty(s,gG,{value:a,enumerable:!1,writable:!0}),a&&(s.input=Moe(a)),r.content[n.index]=s}break}case"thinking_delta":{(i==null?void 0:i.type)==="thinking"&&(r.content[n.index]={...i,thinking:i.thinking+n.delta.thinking});break}case"signature_delta":{(i==null?void 0:i.type)==="thinking"&&(r.content[n.index]={...i,signature:n.delta.signature});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("streamEvent",i=>{const a=n.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const a of n)a.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,s)=>n.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ul(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class Hoe extends Lo{create(e,n){return this._client.post("/v1/messages/batches",{body:e,...n})}retrieve(e,n){return this._client.get(ii`/v1/messages/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/v1/messages/batches",Db,{query:e,...n})}delete(e,n){return this._client.delete(ii`/v1/messages/batches/${e}`,n)}cancel(e,n){return this._client.post(ii`/v1/messages/batches/${e}/cancel`,n)}async results(e,n){const r=await this.retrieve(e);if(!r.results_url)throw new wt(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);return this._client.get(r.results_url,{...n,headers:Ht([{Accept:"application/binary"},n==null?void 0:n.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((i,a)=>$T.fromResponse(a.response,a.controller))}}class ID extends Lo{constructor(){super(...arguments),this.batches=new Hoe(this._client)}create(e,n){e.model in vG&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${vG[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`),e.model in HXe&&e.thinking&&e.thinking.type==="enabled"&&console.warn(`Using Claude with ${e.model} and 'thinking.type=enabled' is deprecated. Use 'thinking.type=adaptive' instead which results in better model performance in our testing: https://platform.claude.com/docs/en/build-with-claude/adaptive-thinking`);let r=this._client._options.timeout;if(!e.stream&&r==null){const a=Roe[e.model]??void 0;r=this._client.calculateNonstreamingTimeout(e.max_tokens,a)}const i=koe(e.tools,e.messages);return this._client.post("/v1/messages",{body:e,timeout:r??6e5,...n,headers:Ht([i,n==null?void 0:n.headers]),stream:e.stream??!1})}parse(e,n){return this.create(e,n).then(r=>qoe(r,e,{logger:this._client.logger??console}))}stream(e,n){return B1.createMessage(this,e,n,{logger:this._client.logger??console})}countTokens(e,n){return this._client.post("/v1/messages/count_tokens",{body:e,...n})}}const vG={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026","claude-3-5-haiku-latest":"February 19th, 2026","claude-3-5-haiku-20241022":"February 19th, 2026"},HXe=["claude-opus-4-6"];ID.Batches=Hoe;class Woe extends Lo{retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(ii`/v1/models/${e}`,{...r,headers:Ht([{...(i==null?void 0:i.toString())!=null?{"anthropic-beta":i==null?void 0:i.toString()}:void 0},r==null?void 0:r.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/models",Db,{query:i,...n,headers:Ht([{...(r==null?void 0:r.toString())!=null?{"anthropic-beta":r==null?void 0:r.toString()}:void 0},n==null?void 0:n.headers])})}}var UP={};const ow=t=>{var e,n,r,i;if(typeof globalThis.process<"u")return((e=UP==null?void 0:UP[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};var n$,PD,Mw,Voe;const WXe="\\n\\nHuman:",VXe="\\n\\nAssistant:";class vr{constructor({baseURL:e=ow("ANTHROPIC_BASE_URL"),apiKey:n=ow("ANTHROPIC_API_KEY")??null,authToken:r=ow("ANTHROPIC_AUTH_TOKEN")??null,...i}={}){n$.add(this),Mw.set(this,void 0);const a={apiKey:n,authToken:r,...i,baseURL:e||"https://api.anthropic.com"};if(!a.dangerouslyAllowBrowser&&lXe())throw new wt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=a.baseURL,this.timeout=a.timeout??PD.DEFAULT_TIMEOUT,this.logger=a.logger??console;const s="warn";this.logLevel=s,this.logLevel=eG(a.logLevel,"ClientOptions.logLevel",this)??eG(ow("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??s,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??hXe(),De(this,Mw,mXe),this._options=a,this.apiKey=typeof n=="string"?n:null,this.authToken=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.get("x-api-key")||e.get("authorization"))&&!(this.apiKey&&e.get("x-api-key"))&&!n.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!n.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return Ht([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(this.apiKey!=null)return Ht([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(this.authToken!=null)return Ht([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new wt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Nh}`}defaultIdempotencyKey(){return`stainless-node-retry-${ooe()}`}makeStatusError(e,n,r,i){return vi.generate(e,n,r,i)}buildURL(e,n,r){const i=!he(this,n$,"m",Voe).call(this)&&r||this.baseURL,a=rXe(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return iXe(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new wt("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new jT(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var x,w;const i=await e,a=i.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(i);const{req:s,url:o,timeout:l}=await this.buildRequest(i,{retryCount:a-n});await this.prepareRequest(s,{url:o,options:i});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),u=r===void 0?"":`, retryOf: ${r}`,f=Date.now();if($i(this).debug(`[${c}] sending request`,jd({retryOfRequestLogID:r,method:i.method,url:o,options:i,headers:s.headers})),(x=i.signal)!=null&&x.aborted)throw new bo;const p=new AbortController,m=await this.fetchWithTimeout(o,s,l,p).catch(X2),_=Date.now();if(m instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if((w=i.signal)!=null&&w.aborted)throw new bo;const A=Jv(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(n)return $i(this).info(`[${c}] connection ${A?"timed out":"failed"} - ${T}`),$i(this).debug(`[${c}] connection ${A?"timed out":"failed"} (${T})`,jd({retryOfRequestLogID:r,url:o,durationMs:_-f,message:m.message})),this.retryRequest(i,n,r??c);throw $i(this).info(`[${c}] connection ${A?"timed out":"failed"} - error; no more retries left`),$i(this).debug(`[${c}] connection ${A?"timed out":"failed"} (error; no more retries left)`,jd({retryOfRequestLogID:r,url:o,durationMs:_-f,message:m.message})),A?new loe:new RT({cause:m})}const y=[...m.headers.entries()].filter(([T])=>T==="request-id").map(([T,A])=>", "+T+": "+JSON.stringify(A)).join(""),b=`[${c}${u}${y}] ${s.method} ${o} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${_-f}ms`;if(!m.ok){const T=await this.shouldRetry(m);if(n&&T){const D=`retrying, ${n} attempts remaining`;return await pXe(m.body),$i(this).info(`${b} - ${D}`),$i(this).debug(`[${c}] response error (${D})`,jd({retryOfRequestLogID:r,url:m.url,status:m.status,headers:m.headers,durationMs:_-f})),this.retryRequest(i,n,r??c,m.headers)}const A=T?"error; no more retries left":"error; not retryable";$i(this).info(`${b} - ${A}`);const E=await m.text().catch(D=>X2(D).message),C=yoe(E),R=C?void 0:E;throw $i(this).debug(`[${c}] response error (${A})`,jd({retryOfRequestLogID:r,url:m.url,status:m.status,headers:m.headers,message:R,durationMs:Date.now()-f})),this.makeStatusError(m.status,C,R,m.headers)}return $i(this).info(b),$i(this).debug(`[${c}] response start`,jd({retryOfRequestLogID:r,url:m.url,status:m.status,headers:m.headers,durationMs:_-f})),{response:m,options:i,controller:p,requestLogID:c,retryOfRequestLogID:r,startTime:f}}getAPIList(e,n,r){return this.requestAPIList(n,r&&"then"in r?r.then(i=>({method:"get",path:e,...i})):{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new TXe(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:a,method:s,...o}=n||{},l=this._makeAbort(i);a&&a.addEventListener("abort",l,{once:!0});const c=setTimeout(l,r),u=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,f={signal:i.signal,...u?{duplex:"half"}:{},method:"GET",...o};s&&(f.method=s.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let a;const s=i==null?void 0:i.get("retry-after-ms");if(s){const l=parseFloat(s);Number.isNaN(l)||(a=l)}const o=i==null?void 0:i.get("retry-after");if(o&&!a){const l=parseFloat(o);Number.isNaN(l)?a=Date.parse(o)-Date.now():a=l*1e3}if(!(a&&0<=a&&a<60*1e3)){const l=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,l)}return await oXe(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,s=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return s*o*1e3}calculateNonstreamingTimeout(e,n){if(36e5*e/128e3>6e5||n!=null&&e>n)throw new wt("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:a,query:s,defaultBaseURL:o}=r,l=this.buildURL(a,s,o);"timeout"in r&&sXe("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:c,body:u}=this.buildBody({options:r}),f=await this.buildHeaders({options:e,method:i,bodyHeaders:c,retryCount:n});return{req:{method:i,headers:f,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&u instanceof globalThis.ReadableStream&&{duplex:"half"},...u&&{body:u},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const s=Ht([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...fXe(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(s),s.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ht([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:boe(e)}:he(this,Mw,"f").call(this,{body:e,headers:r})}}PD=vr,Mw=new WeakMap,n$=new WeakSet,Voe=function(){return this.baseURL!=="https://api.anthropic.com"};vr.Anthropic=PD;vr.HUMAN_PROMPT=WXe;vr.AI_PROMPT=VXe;vr.DEFAULT_TIMEOUT=6e5;vr.AnthropicError=wt;vr.APIError=vi;vr.APIConnectionError=RT;vr.APIConnectionTimeoutError=loe;vr.APIUserAbortError=bo;vr.NotFoundError=foe;vr.ConflictError=hoe;vr.RateLimitError=moe;vr.BadRequestError=coe;vr.AuthenticationError=uoe;vr.InternalServerError=goe;vr.PermissionDeniedError=doe;vr.UnprocessableEntityError=poe;vr.toFile=NXe;class Fb extends vr{constructor(){super(...arguments),this.completions=new Uoe(this),this.messages=new ID(this),this.models=new Woe(this),this.beta=new Om(this)}}Fb.Completions=Uoe;Fb.Messages=ID;Fb.Models=Woe;Fb.Beta=Om;const GXe=new Set(["date-time","time","date","duration","email","hostname","uri","ipv4","ipv6","uuid"]);function KXe(t){return JSON.parse(JSON.stringify(t))}function ZXe(t){const e=KXe(t);return $d(e)}function $d(t){const e={},n=sa(t,"$ref");if(n!==void 0)return e.$ref=n,e;const r=sa(t,"$defs");if(r!==void 0){const u={};e.$defs=u;for(const[f,p]of Object.entries(r))u[f]=$d(p)}const i=sa(t,"type"),a=sa(t,"anyOf"),s=sa(t,"oneOf"),o=sa(t,"allOf");if(Array.isArray(a))e.anyOf=a.map(u=>$d(u));else if(Array.isArray(s))e.anyOf=s.map(u=>$d(u));else if(Array.isArray(o))e.allOf=o.map(u=>$d(u));else{if(i===void 0)throw new Error("JSON schema must have a type defined if anyOf/oneOf/allOf are not used");e.type=i}const l=sa(t,"description");l!==void 0&&(e.description=l);const c=sa(t,"title");if(c!==void 0&&(e.title=c),i==="object"){const u=sa(t,"properties")||{};e.properties=Object.fromEntries(Object.entries(u).map(([p,m])=>[p,$d(m)])),sa(t,"additionalProperties"),e.additionalProperties=!1;const f=sa(t,"required");f!==void 0&&(e.required=f)}else if(i==="string"){const u=sa(t,"format");u!==void 0&&GXe.has(u)?e.format=u:u!==void 0&&(t.format=u)}else if(i==="array"){const u=sa(t,"items");u!==void 0&&(e.items=$d(u));const f=sa(t,"minItems");f!==void 0&&(f===0||f===1)?e.minItems=f:f!==void 0&&(t.minItems=f)}if(Object.keys(t).length>0){const u=e.description;e.description=(u?u+`

`:"")+"{"+Object.entries(t).map(([f,p])=>`${f}: ${JSON.stringify(p)}`).join(", ")+"}"}return e}const XXe={"claude-opus-4-6":16384,"claude-opus-4-5":16384,"claude-sonnet-4-5":16384,"claude-haiku-4-5":16384,"claude-opus-4-1":16384,"claude-sonnet-4":16384,"claude-opus-4":16384,"claude-3-7-sonnet":8192,"claude-3-5-sonnet":8192,"claude-3-5-haiku":8192,"claude-3-opus":4096,"claude-3-sonnet":4096,"claude-3-haiku":4096},bG=2048;function JXe(t){var e;return t?((e=Object.entries(XXe).find(([n])=>t.startsWith(n)))==null?void 0:e[1])??bG:bG}function YXe(t){return!!(t.tools&&t.tools.length>0)}function QXe(t){var e;for(const n of t.messages??[])if(typeof n.content!="string"){for(const r of n.content??[])if(typeof r=="object"&&r!=null&&r.type==="document"&&typeof r.citations=="object"&&((e=r.citations)!=null&&e.enabled))return!0}return!1}function eJe(t){return!!(t.thinking&&(t.thinking.type==="enabled"||t.thinking.type==="adaptive"))}function tJe(t){var e,n;return!!((n=(e=t.context_management)==null?void 0:e.edits)!=null&&n.some(r=>r.type==="compact_20260112"))}function nJe(t){return"input_schema"in t}function rJe(t){return typeof t=="object"&&t!==null&&"type"in t&&("name"in t||"mcp_server_name"in t)&&typeof t.type=="string"&&["text_editor_","computer_","bash_","web_search_","web_fetch_","str_replace_editor_","str_replace_based_edit_tool_","code_execution_","memory_","tool_search_","mcp_toolset"].some(e=>typeof t.type=="string"&&t.type.startsWith(e))}function iJe(t,e,...n){return Array.from(new Set([...t??[],...e??[],...n.flatMap(r=>Array.from(r))]))}function aJe(t){if(typeof t.content=="string")return t.content;if(Array.isArray(t.content)&&t.content.length>=1&&"input"in t.content[0])return typeof t.content[0].input=="string"?t.content[0].input:JSON.stringify(t.content[0].input);if(Array.isArray(t.content)&&t.content.length>=1&&"text"in t.content[0]&&typeof t.content[0].text=="string")return t.content[0].text}var sJe=class extends Kse{constructor(e){super(e??{});U(this,"lc_serializable",!0);U(this,"anthropicApiKey");U(this,"apiKey");U(this,"apiUrl");U(this,"temperature");U(this,"topK");U(this,"topP");U(this,"maxTokens");U(this,"modelName","claude-3-5-sonnet-latest");U(this,"model","claude-3-5-sonnet-latest");U(this,"invocationKwargs");U(this,"stopSequences");U(this,"streaming",!1);U(this,"clientOptions");U(this,"thinking",{type:"disabled"});U(this,"contextManagement");U(this,"outputConfig");U(this,"inferenceGeo");U(this,"batchClient");U(this,"streamingClient");U(this,"streamUsage",!0);U(this,"betas");U(this,"createClient");if(this.anthropicApiKey=(e==null?void 0:e.apiKey)??(e==null?void 0:e.anthropicApiKey)??gl("ANTHROPIC_API_KEY"),!this.anthropicApiKey&&!(e!=null&&e.createClient))throw new Error("Anthropic API key not found");this.clientOptions=(e==null?void 0:e.clientOptions)??{},this.apiKey=this.anthropicApiKey,this.apiUrl=e==null?void 0:e.anthropicApiUrl,this.modelName=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.model=this.modelName,this.invocationKwargs=(e==null?void 0:e.invocationKwargs)??{},this.topP=(e==null?void 0:e.topP)??this.topP,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topK=(e==null?void 0:e.topK)??this.topK,this.maxTokens=(e==null?void 0:e.maxTokens)??JXe(this.model),this.stopSequences=(e==null?void 0:e.stopSequences)??this.stopSequences,this.streaming=(e==null?void 0:e.streaming)??!1,this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.thinking=(e==null?void 0:e.thinking)??this.thinking,this.contextManagement=(e==null?void 0:e.contextManagement)??this.contextManagement,this.outputConfig=(e==null?void 0:e.outputConfig)??this.outputConfig,this.inferenceGeo=(e==null?void 0:e.inferenceGeo)??this.inferenceGeo,this.betas=(e==null?void 0:e.betas)??this.betas,this.createClient=(e==null?void 0:e.createClient)??(n=>new Fb(n))}static lc_name(){return"ChatAnthropic"}get lc_secrets(){return{anthropicApiKey:"ANTHROPIC_API_KEY",apiKey:"ANTHROPIC_API_KEY"}}get lc_aliases(){return{modelName:"model"}}getLsParams(e){const n=this.invocationParams(e);return{ls_provider:"anthropic",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??void 0,ls_max_tokens:n.max_tokens??void 0,ls_stop:e.stop}}formatStructuredToolToAnthropic(e){if(e)return e.map(n=>{var r;if(R1(n)&&((r=n.extras)!=null&&r.providerToolDefinition))return n.extras.providerToolDefinition;if(rJe(n)||nJe(n))return n;if(TD(n))return{name:n.function.name,description:n.function.description,input_schema:n.function.parameters};if(R1(n))return{name:n.name,description:n.description,input_schema:cl(n.schema)?ca(n.schema):n.schema,...n.extras?BZe.parse(n.extras):{}};throw new Error(`Unknown tool type passed to ChatAnthropic: ${JSON.stringify(n,null,2)}`)})}bindTools(e,n){return this.withConfig({tools:this.formatStructuredToolToAnthropic(e),...n})}invocationParams(e){var o,l,c;const n=DZe(e==null?void 0:e.tool_choice),r=(o=e==null?void 0:e.tools)==null?void 0:o.reduce((u,f)=>{if(typeof f=="object"&&"type"in f&&f.type in UV){const p=UV[f.type];if(!u.includes(p))return[...u,p]}return u},[]),i=(()=>{const u={...this.outputConfig,...e==null?void 0:e.outputConfig};return e!=null&&e.outputFormat&&!u.format&&(u.format=e.outputFormat),Object.keys(u).length>0?u:void 0})(),a=(c=(l=this.contextManagement)==null?void 0:l.edits)!=null&&c.some(u=>u.type==="compact_20260112")?["compact-2026-01-12"]:[],s={model:this.model,stop_sequences:(e==null?void 0:e.stop)??this.stopSequences,stream:this.streaming,max_tokens:this.maxTokens,tools:this.formatStructuredToolToAnthropic(e==null?void 0:e.tools),tool_choice:n,thinking:this.thinking,context_management:this.contextManagement,...this.invocationKwargs,container:e==null?void 0:e.container,betas:iJe(this.betas,e==null?void 0:e.betas,r??[],a),output_config:i,inference_geo:(e==null?void 0:e.inferenceGeo)??this.inferenceGeo,mcp_servers:e==null?void 0:e.mcp_servers};if(this.thinking.type==="enabled"||this.thinking.type==="adaptive"){if(this.topP!==void 0&&this.topK!==-1)throw new Error("topK is not supported when thinking is enabled");if(this.temperature!==void 0&&this.temperature!==1)throw new Error("temperature is not supported when thinking is enabled")}else s.temperature=this.temperature,s.top_k=this.topK,s.top_p=this.topP;return s}_identifyingParams(){return{model_name:this.model,...this.invocationParams()}}identifyingParams(){return{model_name:this.model,...this.invocationParams()}}async*_streamResponseChunks(e,n,r){var c;const i=this.invocationParams(n);let a=HV(e);n.cache_control&&(a=WV(a,n.cache_control));const s={...i,...a,stream:!0},o=!YXe(s)&&!QXe(s)&&!eJe(s)&&!tJe(s),l=await this.createStreamWithRetry(s,{headers:n.headers,signal:n.signal});for await(const u of l){if((c=n.signal)!=null&&c.aborted){l.controller.abort();return}const f=this.streamUsage??n.streamUsage,p=QZe(u,{streamUsage:f,coerceContentToString:o});if(!p)continue;const{chunk:m}=p,_=aJe(m),y=new Jp({message:new mr({content:m.content,additional_kwargs:m.additional_kwargs,tool_call_chunks:m.tool_call_chunks,usage_metadata:f?m.usage_metadata:void 0,response_metadata:m.response_metadata,id:m.id}),text:_??""});yield y,await(r==null?void 0:r.handleLLMNewToken(_??"",void 0,void 0,void 0,void 0,{chunk:y}))}}async _generateNonStreaming(e,n,r,i){let a=HV(e);i&&(a=WV(a,i));const{content:s,...o}=await this.completionWithRetry({...n,stream:!1,...a},r),l=eXe(s,o),{role:c,type:u,...f}=o;return{generations:l,llmOutput:f}}async _generate(e,n,r){var a;if((a=n.signal)==null||a.throwIfAborted(),this.stopSequences&&n.stop)throw new Error('"stopSequence" parameter found in input and default params');const i=this.invocationParams(n);if(i.stream){let s;const o=this._streamResponseChunks(e,n,r);for await(const l of o)s===void 0?s=l:s=s.concat(l);if(s===void 0)throw new Error("No chunks returned from Anthropic API.");return{generations:[{text:s.text,message:s.message}]}}else return this._generateNonStreaming(e,i,{signal:n.signal,headers:n.headers},n.cache_control)}async createStreamWithRetry(e,n){if(!this.streamingClient){const s=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.streamingClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...s,apiKey:this.apiKey,maxRetries:0})}const{betas:r,...i}=e,a=async()=>{var s;try{return(s=e==null?void 0:e.betas)!=null&&s.length?await this.streamingClient.beta.messages.create({...i,betas:r,...this.invocationKwargs,stream:!0},n):await this.streamingClient.messages.create({...i,...this.invocationKwargs,stream:!0},n)}catch(o){throw VV(o)}};return this.caller.call(a)}async completionWithRetry(e,n){if(!this.batchClient){const s=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.batchClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...s,apiKey:this.apiKey,maxRetries:0})}const{betas:r,...i}=e,a=async()=>{var s;try{return(s=e==null?void 0:e.betas)!=null&&s.length?await this.batchClient.beta.messages.create({...i,...this.invocationKwargs,betas:r},n):await this.batchClient.messages.create({...i,...this.invocationKwargs},n)}catch(o){throw VV(o)}};return this.caller.callWithOptions({signal:n.signal??void 0},a)}_llmType(){return"anthropic"}get profile(){return tXe[this.model]??{}}withStructuredOutput(e,n){var p,m;let r,i;const{schema:a,name:s,includeRaw:o}={...n,schema:e};let l=(n==null?void 0:n.method)??"functionCalling";if(l==="jsonMode"&&(console.warn('"jsonMode" is not supported for Anthropic models. Falling back to "jsonSchema".'),l="jsonSchema"),l==="jsonSchema"){i=cl(a)?G2.fromZodSchema(a):new K2;const _=ZXe(ca(a));r=this.withConfig({outputVersion:"v0",outputConfig:{format:{type:"json_schema",schema:_}},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:_}})}else if(l==="functionCalling"){let _=s??"extract",y;if(cl(a)){const b=ca(a);y=[{name:_,description:b.description??"A function available to call.",input_schema:b}],i=new FV({returnSingle:!0,keyName:_,zodSchema:a})}else{let b;typeof a.name=="string"&&typeof a.description=="string"&&typeof a.input_schema=="object"&&a.input_schema!=null?(b=a,_=a.name):b={name:_,description:a.description??"",input_schema:a},y=[b],i=new FV({returnSingle:!0,keyName:_})}if(((p=this.thinking)==null?void 0:p.type)==="enabled"||((m=this.thinking)==null?void 0:m.type)==="adaptive"){const b="Anthropic structured output relies on forced tool calling, which is not supported when `thinking` is enabled. This method will raise OutputParserException if tool calls are not generated. Consider disabling `thinking` or adjust your prompt to ensure the tool is called.";console.warn(b),r=this.withConfig({outputVersion:"v0",tools:y,ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:ca(a)}});const x=w=>{if(!w.tool_calls||w.tool_calls.length===0)throw new Error(b);return w};r=r.pipe(x)}else r=this.withConfig({outputVersion:"v0",tools:y,tool_choice:{type:"tool",name:_},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:ca(a)}})}else throw new TypeError(`Unrecognized structured output method '${l}'. Expected 'functionCalling' or 'jsonSchema'`);if(!o)return r.pipe(i).withConfig({runName:"ChatAnthropicStructuredOutput"});const c=im.assign({parsed:(_,y)=>i.invoke(_.raw,y)}),u=im.assign({parsed:()=>null}),f=c.withFallbacks({fallbacks:[u]});return Nb.from([{raw:r},f]).withConfig({runName:"StructuredOutputRunnable"})}},Goe=class extends sJe{};const oJe=St({command:$t("view"),path:Lt()}),lJe=St({command:$t("create"),path:Lt(),file_text:Lt()}),cJe=St({command:$t("str_replace"),path:Lt(),old_str:Lt(),new_str:Lt()}),uJe=St({command:$t("insert"),path:Lt(),insert_line:fn(),insert_text:Lt()}),dJe=St({command:$t("delete"),path:Lt()}),fJe=St({command:$t("rename"),old_path:Lt(),new_path:Lt()});bS("command",[oJe,lJe,cJe,uJe,dJe,fJe]);const hJe=St({command:$t("view"),path:Lt(),view_range:tM([fn(),fn()]).optional()}),pJe=St({command:$t("str_replace"),path:Lt(),old_str:Lt(),new_str:Lt()}),mJe=St({command:$t("create"),path:Lt(),file_text:Lt()}),gJe=St({command:$t("insert"),path:Lt(),insert_line:fn(),new_str:Lt()});bS("command",[hJe,pJe,mJe,gJe]);const Oo=tM([fn(),fn()]),Koe=St({action:$t("screenshot")}),Zoe=St({action:$t("left_click"),coordinate:Oo}),Xoe=St({action:$t("right_click"),coordinate:Oo}),Joe=St({action:$t("middle_click"),coordinate:Oo}),Yoe=St({action:$t("double_click"),coordinate:Oo}),Qoe=St({action:$t("triple_click"),coordinate:Oo}),ele=St({action:$t("left_click_drag"),start_coordinate:Oo,end_coordinate:Oo}),tle=St({action:$t("left_mouse_down"),coordinate:Oo}),nle=St({action:$t("left_mouse_up"),coordinate:Oo}),rle=St({action:$t("scroll"),coordinate:Oo,scroll_direction:_S(["up","down","left","right"]),scroll_amount:fn()}),ile=St({action:$t("type"),text:Lt()}),ale=St({action:$t("key"),key:Lt()}),sle=St({action:$t("mouse_move"),coordinate:Oo}),ole=St({action:$t("hold_key"),key:Lt()}),lle=St({action:$t("wait"),duration:fn().optional()}),yJe=St({action:$t("zoom"),region:tM([fn(),fn(),fn(),fn()])});bS("action",[Koe,Zoe,Xoe,Joe,Yoe,Qoe,ele,tle,nle,rle,ile,ale,sle,ole,lle]);bS("action",[Koe,Zoe,Xoe,Joe,Yoe,Qoe,ele,tle,nle,rle,ile,ale,sle,ole,lle,yJe]);const vJe=St({command:Lt().describe("The bash command to run")}),bJe=St({restart:$t(!0).describe("Set to true to restart the bash session")});db([vJe,bJe]);const _Je=["openai","anthropic"],RD=t=>{var e,n;return!t.provider||!_Je.includes(t.provider)?{valid:!1,reason:"provider "}:(e=t.model)!=null&&e.trim()?(n=t.apiKey)!=null&&n.trim()?t.temperature!==void 0&&(t.temperature<0||t.temperature>2)?{valid:!1,reason:"temperature  02 "}:{valid:!0}:{valid:!1,reason:"apiKey "}:{valid:!1,reason:"model "}},cle=t=>typeof t=="string"?t:Array.isArray(t)?t.map(e=>typeof e=="string"?e:typeof e=="object"&&e!==null&&"text"in e&&typeof e.text=="string"?e.text:"").join(`
`):"",wJe=t=>{const e=t.indexOf("{"),n=t.lastIndexOf("}"),r=e>=0&&n>e?t.slice(e,n+1):t,i=JSON.parse(r),a=s=>typeof s=="string"?s.trim():"";return{summary:a(i.summary),consensusAssist:a(i.consensusAssist),facilitationAssist:a(i.facilitationAssist),agendaAssist:a(i.agendaAssist),preparationAssist:a(i.preparationAssist)}},xJe=t=>!!(t.summary&&t.consensusAssist&&t.facilitationAssist&&t.agendaAssist&&t.preparationAssist),SJe=async(t,e)=>{const n=xre(t);if(!RD(e??{}).valid||!e)return{assist:n,usedFallback:!0};const i=nae.fromTemplate(["","JSON"," summary, consensusAssist, facilitationAssist, agendaAssist, preparationAssist 5","","",": {meetingTitle}",": {participants}",": {agendaStats}",": {summary}",": {decisions}",": {nextActions}"].join(`
`));try{const a=e.provider==="openai"?new noe({apiKey:e.apiKey,model:e.model,temperature:e.temperature??.2}):new Goe({apiKey:e.apiKey,model:e.model,temperature:e.temperature??.2}),o=await i.pipe(a).invoke({meetingTitle:t.meetingTitle,participants:t.participants.join(", ")||"",agendaStats:t.agendaItems.map(c=>`${c.title}: planned=${c.plannedDurationSec}s, actual=${c.actualDurationSec}s, variance=${c.varianceSec}s`).join(" | ")||"",summary:t.summary||"",decisions:t.decisions||"",nextActions:t.nextActions||""}),l=wJe(cle(o.content));if(!xJe(l))throw new Error("AI response schema mismatch");return Xt.info("Meeting AI assist generated via LangChain",{provider:e.provider,model:e.model},"agenda"),{assist:l,usedFallback:!1}}catch(a){return Xt.warn("Meeting AI assist fallback activated",{provider:e.provider,model:e.model,error:a instanceof Error?a.message:String(a)},"agenda"),{assist:n,usedFallback:!0}}},TJe=async(t,e)=>{const n=t.map(a=>a.text).join(`
`);if(!RD(e??{}).valid||!e)return{summary:n,usedFallback:!0};const i=nae.fromTemplate(["","","37","","",":","{transcript}"].join(`
`));try{const a=e.provider==="openai"?new noe({apiKey:e.apiKey,model:e.model,temperature:e.temperature??.2}):new Goe({apiKey:e.apiKey,model:e.model,temperature:e.temperature??.2}),o=await i.pipe(a).invoke({transcript:n}),l=cle(o.content).trim();return Xt.info("Voice transcript summarized via AI",{provider:e.provider,model:e.model,entryCount:t.length},"voice"),{summary:l,usedFallback:!1}}catch(a){return Xt.warn("Voice transcript AI summarize fallback activated",{provider:e.provider,model:e.model,error:a instanceof Error?a.message:String(a)},"voice"),{summary:n,usedFallback:!0}}},EJe=()=>{var H;const{draft:t,isDialogOpen:e,setDialogOpen:n,updateDraftField:r,setDraftParticipantsFromText:i,addDraftTodo:a,updateDraftTodo:s,removeDraftTodo:o,setDraftTodos:l,addPostedCommentHistory:c,saveDraft:u,reports:f}=EL(),{getLinks:p,githubPat:m,aiProviderConfig:_}=dm(),[y,b]=ee.useState(!1),[x,w]=ee.useState(!1),[T,A]=ee.useState(!1),[E,C]=ee.useState(""),[R,N]=ee.useState(!1),[D,Z]=ee.useState("detailed"),[j,L]=ee.useState(null);ee.useEffect(()=>{e||(C(""),N(!1),Z("detailed"),L(null))},[e]);const B=t==null?void 0:t.id;ee.useEffect(()=>{B&&L(null)},[B]);const z=ee.useMemo(()=>t?xre(t):null,[t]),W=j??z;if(!t||!W)return null;const q=t.participants.join(", "),K=`meeting-report-${t.id}`,V=async()=>{t.markdown.trim()&&await navigator.clipboard.writeText(t.markdown),u()},J=p(`meeting:${t.meetingId}`)[0],Q=((H=f.find($=>$.meetingId===t.meetingId))==null?void 0:H.markdown)??"",M=eze(D,{meetingTitle:t.meetingTitle,summary:t.summary,decisions:t.decisions,nextActions:t.nextActions,todos:t.todos,markdown:t.markdown},{diffOnly:R,previousMarkdown:Q}),Y=()=>{if(!t||!W)return;const $=[W.facilitationAssist,W.agendaAssist,W.preparationAssist].filter(Boolean).join(`
`);r("summary",t.summary.trim()?t.summary:W.summary),r("decisions",t.decisions.trim()?t.decisions:W.consensusAssist),r("nextActions",t.nextActions.trim()?t.nextActions:$),C("AI")},se=async($=!1)=>{A(!0);try{const ne=await SJe(t,_??{provider:"openai",model:"gpt-4o-mini",apiKey:"",temperature:.2});$||L(ne.assist),C(ne.usedFallback?"AI API":$?"AI API ":"LangChainAI")}finally{A(!1)}},ge=async()=>{if(!J||!t.markdown.trim())return;const $=M;if(!$.trim()){C("");return}b(!0),C("");try{const ne=await Cve({owner:J.owner,repo:J.repo,issueNumber:J.issueNumber,body:$,pat:m??void 0});c({meetingId:t.meetingId,meetingTitle:t.meetingTitle,commentUrl:ne.commentUrl}),C("Issue ")}catch(ne){C(ne instanceof Error?ne.message:"Issue ")}finally{b(!1)}},ue=async()=>{if(J){w(!0),C("");try{const $=await Z$({owner:J.owner,repo:J.repo,issueNumber:J.issueNumber,pat:m??void 0}),ne=XUe($.body);l(ne),C(ne.length>0?`${ne.length}ToDoIssue`:"IssueToDo")}catch($){C($ instanceof Error?$.message:"ToDo")}finally{w(!1)}}};return g.jsx(Ms,{open:e,onOpenChange:n,children:g.jsxs(Ja,{className:"flex h-[90dvh] max-h-[90dvh] flex-col overflow-hidden sm:max-w-3xl",children:[g.jsx(Ya,{children:g.jsx(Qa,{children:""})}),g.jsxs(lp,{defaultValue:"basic",className:"flex min-h-0 flex-1 flex-col space-y-4",children:[g.jsxs(cp,{className:"grid w-full grid-cols-3",children:[g.jsx(go,{value:"basic",children:""}),g.jsx(go,{value:"minutes",children:"/ToDo"}),g.jsx(go,{value:"markdown",children:""})]}),g.jsxs("div",{className:"min-h-0 flex-1 overflow-y-auto px-1",children:[g.jsxs(ri,{value:"basic",className:"mt-0 space-y-4",children:[g.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(at,{htmlFor:`${K}-meeting-title`,children:""}),g.jsx(Bn,{id:`${K}-meeting-title`,value:t.meetingTitle,readOnly:!0})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(at,{htmlFor:`${K}-held-at`,children:""}),g.jsx(Bn,{id:`${K}-held-at`,value:new Date(t.heldAt).toLocaleString(),readOnly:!0})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(at,{htmlFor:`${K}-participants`,children:""}),g.jsx(Bn,{id:`${K}-participants`,value:q,onChange:$=>i($.target.value),placeholder:": , , "})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(at,{htmlFor:`${K}-summary`,children:""}),g.jsx(sl,{id:`${K}-summary`,rows:3,value:t.summary,onChange:$=>r("summary",$.target.value)})]}),g.jsxs("div",{className:"space-y-2 rounded-md p-3",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx(at,{children:"AI"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Se,{type:"button",variant:"outline",size:"sm",onClick:()=>se(!0),disabled:T,children:""}),g.jsx(Se,{type:"button",variant:"outline",size:"sm",onClick:()=>se(!1),disabled:T,children:T?"...":"AI"}),g.jsx(Se,{type:"button",variant:"outline",size:"sm",onClick:Y,children:""})]})]}),!(_!=null&&_.apiKey)&&g.jsx("p",{className:"text-xs text-muted-foreground",children:"AIAI API"}),g.jsxs("ul",{className:"list-disc space-y-1 pl-5 text-sm text-muted-foreground",children:[g.jsxs("li",{children:[": ",W.summary]}),g.jsxs("li",{children:[": ",W.consensusAssist]}),g.jsxs("li",{children:[": ",W.facilitationAssist]}),g.jsxs("li",{children:[": ",W.agendaAssist]}),g.jsxs("li",{children:[": ",W.preparationAssist]})]})]}),g.jsxs("div",{className:"space-y-2 rounded-md p-3",children:[g.jsx(at,{children:""}),g.jsx("div",{className:"overflow-x-auto text-sm",children:g.jsxs("table",{className:"w-full border-collapse",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{className:"py-2 text-left",children:""}),g.jsx("th",{className:"py-2 text-right",children:"()"}),g.jsx("th",{className:"py-2 text-right",children:"()"}),g.jsx("th",{className:"py-2 text-right",children:"()"})]})}),g.jsx("tbody",{children:t.agendaItems.map($=>g.jsxs("tr",{children:[g.jsx("td",{className:"py-2 pr-2",children:$.title}),g.jsx("td",{className:"py-2 text-right",children:$.plannedDurationSec}),g.jsx("td",{className:"py-2 text-right",children:$.actualDurationSec}),g.jsx("td",{className:"py-2 text-right",children:$.varianceSec})]},$.agendaId))})]})})]})]}),g.jsxs(ri,{value:"minutes",className:"mt-0 space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(at,{htmlFor:`${K}-decisions`,children:""}),g.jsx(sl,{id:`${K}-decisions`,rows:4,value:t.decisions,onChange:$=>r("decisions",$.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(at,{children:"ToDo"}),g.jsxs("div",{className:"flex gap-2",children:[J&&g.jsx(Se,{type:"button",variant:"outline",size:"sm",onClick:ue,disabled:x,children:x?"...":"Issue"}),g.jsxs(Se,{type:"button",variant:"outline",size:"sm",onClick:a,children:[g.jsx(sb,{className:"mr-1 h-4 w-4"}),""]})]})]}),g.jsxs("div",{className:"space-y-2",children:[t.todos.length===0&&g.jsx("p",{className:"text-sm text-muted-foreground",children:"ToDo"}),t.todos.map($=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(at,{htmlFor:`${K}-todo-${$.id}`,className:"sr-only",children:"ToDo"}),g.jsx(Bn,{id:`${K}-todo-${$.id}`,value:$.text,onChange:ne=>s($.id,{text:ne.target.value}),placeholder:"ToDo"}),g.jsx(Se,{type:"button",variant:"ghost",size:"icon",onClick:()=>o($.id),"aria-label":"ToDo",children:g.jsx(No,{className:"h-4 w-4"})})]},$.id))]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(at,{htmlFor:`${K}-next-actions`,children:""}),g.jsx(sl,{id:`${K}-next-actions`,rows:3,value:t.nextActions,onChange:$=>r("nextActions",$.target.value)})]})]}),g.jsxs(ri,{value:"markdown",className:"mt-0 space-y-2",children:[g.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx(at,{htmlFor:`${K}-post-template`,children:""}),g.jsxs("select",{id:`${K}-post-template`,className:"h-9 w-full rounded-md border bg-background px-3 text-sm",value:D,onChange:$=>Z($.target.value),children:[g.jsx("option",{value:"detailed",children:""}),g.jsx("option",{value:"summary",children:""})]})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx(at,{className:"text-muted-foreground",children:""}),g.jsx("p",{className:"text-sm",children:R?"":""})]})]}),g.jsx(at,{htmlFor:`${K}-markdown-preview`,children:""}),g.jsx(sl,{id:`${K}-markdown-preview`,value:M,rows:14,readOnly:!0})]})]}),g.jsxs("div",{className:"flex flex-wrap justify-end gap-2 pt-3",children:[E&&g.jsx("p",{className:"w-full text-xs text-muted-foreground",children:E}),g.jsx(Se,{type:"button",variant:"outline",onClick:()=>n(!1),children:""}),J&&g.jsxs(g.Fragment,{children:[g.jsxs("label",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[g.jsx("input",{type:"checkbox",checked:R,onChange:$=>N($.target.checked)}),""]}),g.jsx(Se,{type:"button",variant:"outline",onClick:ge,disabled:y||!M.trim(),children:y?"...":"Issue "})]}),g.jsxs(Se,{type:"button",variant:"outline",onClick:V,children:[g.jsx(oS,{className:"mr-1 h-4 w-4"}),""]}),g.jsxs(Se,{type:"button",onClick:u,children:[g.jsx(Rge,{className:"mr-1 h-4 w-4"}),""]})]})]})]})})},AJe=5,_G=t=>{const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},wG=({className:t})=>{const{reports:e,postedCommentHistory:n,deleteReport:r}=EL(),[i,a]=k.useState(null),s=ee.useMemo(()=>i?n.filter(l=>l.meetingId===i.meetingId).slice(0,AJe):[],[n,i]),o=async l=>{l.trim()&&await navigator.clipboard.writeText(l)};return g.jsxs(g.Fragment,{children:[g.jsxs(Mt,{className:ct("grid min-h-0 grid-rows-[auto_minmax(0,1fr)] lg:h-full",t),children:[g.jsx(On,{className:"px-3 py-2",children:g.jsx("div",{className:"flex items-center justify-between",children:g.jsxs(Cn,{className:"flex items-center gap-1.5 text-sm",children:[g.jsx(EJ,{className:"h-3.5 w-3.5"}),"",g.jsxs(ir,{variant:"outline",className:"h-5 px-1.5 text-[10px]",children:[e.length,""]})]})})}),g.jsx(Vt,{className:"px-3 pb-3 pt-0 lg:min-h-0",children:e.length===0?g.jsx("p",{className:"text-xs text-muted-foreground",children:""}):g.jsx("ul",{className:"space-y-1 overflow-auto pr-1 lg:h-full lg:min-h-0",children:e.map(l=>g.jsx("li",{className:"cursor-pointer rounded-sm px-1.5 py-1.5 text-xs hover:bg-muted/50",onClick:()=>a(l),onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),a(l))},role:"button",tabIndex:0,"aria-label":`: ${l.meetingTitle}`,children:g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsxs("div",{className:"min-w-0",children:[g.jsx("p",{className:"truncate font-medium text-foreground",children:l.meetingTitle}),g.jsx("p",{className:"text-muted-foreground",children:_G(l.createdAt)})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx(ni,{content:"",side:"top",children:g.jsx(Se,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:c=>{c.stopPropagation(),a(l)},"aria-label":"",children:g.jsx(W$,{className:"h-3.5 w-3.5"})})}),g.jsx(ni,{content:"",side:"top",children:g.jsx(Se,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:c=>{c.stopPropagation(),o(l.markdown)},"aria-label":"",children:g.jsx(L5,{className:"h-3.5 w-3.5"})})}),g.jsx(ni,{content:"",side:"top",children:g.jsx(Se,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:c=>{c.stopPropagation(),r(l.id)},"aria-label":"",children:g.jsx(No,{className:"h-3.5 w-3.5"})})})]})]})},l.id))})})]}),g.jsx(Ms,{open:!!i,onOpenChange:l=>{l||a(null)},children:g.jsxs(Ja,{className:"max-h-[90dvh] overflow-y-auto sm:max-w-3xl",children:[g.jsx(Ya,{children:g.jsx(Qa,{children:""})}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("p",{className:"text-sm font-medium",children:i==null?void 0:i.meetingTitle}),g.jsx("p",{className:"text-xs text-muted-foreground",children:i?_G(i.createdAt):""}),g.jsx(sl,{value:(i==null?void 0:i.markdown)??"",rows:16,readOnly:!0}),i&&g.jsxs("div",{className:"space-y-1",children:[g.jsx("p",{className:"text-xs font-medium",children:"Issue"}),g.jsx("ul",{className:"space-y-1 text-xs",children:s.map(l=>g.jsx("li",{children:g.jsx("a",{href:l.commentUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:l.commentUrl})},l.id))})]}),g.jsx("div",{className:"flex justify-end",children:g.jsxs(Se,{type:"button",variant:"outline",onClick:()=>i?o(i.markdown):void 0,children:[g.jsx(L5,{className:"mr-1 h-4 w-4"}),""]})})]})]})})]})},xG="(max-width: 767px)",OJe=["header","bold","italic","underline","strike","list","blockquote","code-block","image","link"],CJe=t=>({toolbar:t?[[{header:[1,2,3,!1]}],["bold","italic","underline"],["image","code-block"],[{list:"ordered"},{list:"bullet"}],["link","clean"]]:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],["image","code-block"],[{list:"ordered"},{list:"bullet"}],["blockquote"],["link"],["clean"]]}),kJe=Vu(t=>({isSupported:!1,isListening:!1,language:"ja-JP",interimTranscript:"",confirmedEntries:[],error:null,currentAgendaId:null,startListening:e=>t({isListening:!0,error:null,currentAgendaId:e}),stopListening:()=>t({isListening:!1,interimTranscript:""}),setLanguage:e=>t({language:e}),setInterimTranscript:e=>t({interimTranscript:e}),addConfirmedEntry:e=>t(n=>({confirmedEntries:[...n.confirmedEntries,e],interimTranscript:""})),clearTranscript:()=>t({confirmedEntries:[],interimTranscript:""}),setError:e=>t({error:e}),setIsSupported:e=>t({isSupported:e}),setIsListening:e=>t({isListening:e})})),SG=3;class NJe{constructor(){U(this,"recognition",null);U(this,"shouldRestart",!1);U(this,"restartCount",0);U(this,"callbacks",null);U(this,"currentLang","ja-JP")}isSupported(){return typeof window<"u"&&!!(window.SpeechRecognition??window.webkitSpeechRecognition)}start(e,n){if(!this.isSupported()){n.onError("not-supported");return}this.callbacks=n,this.currentLang=e,this.shouldRestart=!0,this.restartCount=0,this._startRecognition()}stop(){var e;this.shouldRestart=!1,(e=this.recognition)==null||e.stop()}setLanguage(e){this.currentLang=e,this.recognition&&(this.recognition.lang=e)}_startRecognition(){var n;const e=window.SpeechRecognition??window.webkitSpeechRecognition;if(e){this.recognition=new e,this.recognition.lang=this.currentLang,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.maxAlternatives=1,this.recognition.onresult=r=>{var a,s;let i="";for(let o=r.resultIndex;o<r.results.length;o++){const l=r.results[o];if(l.isFinal){const c=l[0].transcript.trim();c&&((a=this.callbacks)==null||a.onConfirmed(c))}else i+=l[0].transcript}(s=this.callbacks)==null||s.onInterim(i)},this.recognition.onerror=r=>{var i,a;r.error==="not-allowed"||r.error==="permission-denied"?(this.shouldRestart=!1,(i=this.callbacks)==null||i.onError("permission-denied")):r.error==="network"?(this.shouldRestart=!1,(a=this.callbacks)==null||a.onError("network")):r.error==="aborted"||r.error},this.recognition.onend=()=>{var r,i,a,s;(r=this.callbacks)==null||r.onInterim(""),this.shouldRestart&&this.restartCount<SG?(this.restartCount++,setTimeout(()=>{this.shouldRestart&&this._startRecognition()},200)):this.shouldRestart&&this.restartCount>=SG?(this.shouldRestart=!1,(i=this.callbacks)==null||i.onError("aborted"),(a=this.callbacks)==null||a.onStopped()):(s=this.callbacks)==null||s.onStopped()},this.recognition.onstart=()=>{this.restartCount=0};try{this.recognition.start()}catch{(n=this.callbacks)==null||n.onError("aborted")}}}}const bh=new NJe,IJe=()=>Date.now().toString(36)+Math.random().toString(36).slice(2);function jD(){const{isListening:t,isSupported:e,interimTranscript:n,confirmedEntries:r,language:i,error:a,currentAgendaId:s,setIsSupported:o,startListening:l,stopListening:c,setInterimTranscript:u,addConfirmedEntry:f,setError:p,setLanguage:m,clearTranscript:_,setIsListening:y}=kJe(),b=k.useRef(t);b.current=t,k.useEffect(()=>{o(bh.isSupported())},[o]);const x=k.useCallback(A=>{if(!bh.isSupported()){p("not-supported");return}l(A),Xt.info("Voice recognition started",{agendaId:A,language:i},"voice"),bh.start(i,{onInterim:E=>u(E),onConfirmed:E=>{const C={id:IJe(),text:E,timestamp:Date.now(),agendaId:A};f(C)},onError:E=>{p(E),c(),Xt.warn("Voice recognition error",{error:E},"voice")},onStopped:()=>{b.current&&c(),Xt.info("Voice recognition stopped",{},"voice")}})},[i,l,c,u,f,p]),w=k.useCallback(()=>{bh.stop(),c(),Xt.info("Voice recognition stopped by user",{},"voice")},[c]),T=k.useCallback(A=>{m(A),bh.setLanguage(A)},[m]);return k.useEffect(()=>()=>{b.current&&(bh.stop(),y(!1))},[y]),{isListening:t,isSupported:e,interimTranscript:n,confirmedEntries:r,language:i,error:a,currentAgendaId:s,start:x,stop:w,setLanguage:T,clearTranscript:_}}const PJe=({agendaId:t})=>{const{isListening:e,isSupported:n,language:r,error:i,start:a,stop:s,setLanguage:o}=jD(),l=()=>{e?s():a(t)},c=g.jsxs(Se,{type:"button",variant:e?"destructive":"outline",size:"sm",disabled:!n,onClick:l,"aria-label":e?"":"",className:ct("relative gap-1.5",e&&"animate-pulse"),children:[e?g.jsx(Cge,{className:"h-4 w-4"}):g.jsx(kge,{className:"h-4 w-4"}),e?"":"",e&&g.jsx(ir,{variant:"secondary",className:"absolute -top-2 -right-2 h-4 w-4 rounded-full p-0 flex items-center justify-center bg-red-500 text-white text-[10px]",children:""})]});return g.jsxs("div",{className:"flex items-center gap-2",children:[n?c:g.jsx(ni,{content:"Chrome / Edge ",children:g.jsx("span",{children:c})}),g.jsxs(_c,{value:r,onValueChange:u=>o(u),disabled:!n||e,children:[g.jsx(bl,{className:"h-8 w-[80px] text-xs",children:g.jsx(wc,{})}),g.jsxs(_l,{children:[g.jsx(Ln,{value:"ja-JP",children:""}),g.jsx(Ln,{value:"en-US",children:"English"})]})]}),i==="permission-denied"&&g.jsx("span",{className:"text-xs text-destructive",children:""}),i==="network"&&g.jsx("span",{className:"text-xs text-destructive",children:""}),i==="aborted"&&g.jsx("span",{className:"text-xs text-destructive",children:""})]})},RJe=t=>{const e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0");return`${n}:${r}:${i}`},jJe=({meetingId:t,agendaId:e,minutesFormat:n,onRequestSummaryDialog:r})=>{const[i,a]=k.useState(!1),s=k.useRef(null),{isListening:o,confirmedEntries:l,interimTranscript:c,clearTranscript:u}=jD(),{updateAgendaMinutes:f,currentMeeting:p}=Ic();k.useEffect(()=>{o&&a(!0)},[o]),k.useEffect(()=>{var y;i&&((y=s.current)==null||y.scrollIntoView({behavior:"smooth"}))},[l,i]);const m=()=>{if(n==="richtext"){r==null||r();return}if(l.length===0)return;const y=p==null?void 0:p.agenda.find(A=>A.id===e);if(!y)return;const b=new Date,x=`${b.getHours().toString().padStart(2,"0")}:${b.getMinutes().toString().padStart(2,"0")}`,w=l.map(A=>`- ${A.text}`).join(`
`),T=`

**** (${x})
${w}`;f(t,e,{minutesContent:y.minutesContent+T,minutesFormat:"markdown"}),u()},_=l.length>0||c.length>0;return g.jsxs("div",{className:"rounded-md border bg-muted/30",children:[g.jsxs("div",{className:"flex items-center justify-between px-3 py-2 cursor-pointer select-none",onClick:()=>a(y=>!y),role:"button",tabIndex:0,onKeyDown:y=>y.key==="Enter"&&a(b=>!b),"aria-expanded":i,"aria-label":"",children:[g.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[g.jsx("span",{className:"text-muted-foreground",children:""}),o&&g.jsxs("span",{className:"flex items-center gap-1 text-xs text-destructive animate-pulse font-normal",children:[g.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-destructive inline-block"}),""]}),l.length>0&&!o&&g.jsxs("span",{className:"text-xs text-muted-foreground font-normal",children:[l.length,""]})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[i&&_&&g.jsx(Se,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",onClick:y=>{y.stopPropagation(),u()},"aria-label":"",children:g.jsx(No,{className:"h-3.5 w-3.5"})}),i?g.jsx(q$,{className:"h-4 w-4 text-muted-foreground"}):g.jsx(sS,{className:"h-4 w-4 text-muted-foreground"})]})]}),i&&g.jsxs("div",{className:"border-t px-3 pb-3 pt-2 space-y-2",children:[g.jsxs(af,{className:"h-40 rounded-md bg-background border px-2 py-1.5 text-sm",children:[l.length===0&&!c&&g.jsx("p",{className:"text-muted-foreground text-xs py-2 text-center",children:o?"...":""}),l.map(y=>g.jsxs("div",{className:"flex gap-2 py-0.5 leading-snug",children:[g.jsx("span",{className:"text-muted-foreground font-mono text-[11px] shrink-0 pt-0.5",children:RJe(y.timestamp)}),g.jsx("span",{children:y.text})]},y.id)),c&&g.jsxs("div",{className:"flex gap-2 py-0.5 leading-snug",children:[g.jsx("span",{className:"text-muted-foreground font-mono text-[11px] shrink-0 pt-0.5",children:""}),g.jsx("span",{className:ct("text-muted-foreground italic"),children:c})]}),g.jsx("div",{ref:s})]}),g.jsx("div",{className:"flex justify-end",children:g.jsx(Se,{type:"button",size:"sm",variant:"secondary",disabled:l.length===0,onClick:m,children:n==="richtext"?"AI":""})})]})]})},$Je=t=>{const e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0");return`${n}:${r}:${i}`},MJe=({isOpen:t,onClose:e,quillRef:n,onInserted:r})=>{const{confirmedEntries:i,clearTranscript:a}=jD(),{aiProviderConfig:s}=dm(),[o,l]=k.useState(""),[c,u]=k.useState(!1),[f,p]=k.useState(!1),m=i.map(b=>b.text).join(`
`),_=k.useCallback(async()=>{if(i.length!==0){u(!0);try{const{summary:b,usedFallback:x}=await TJe(i,s);l(b),p(x)}finally{u(!1)}}},[i,s]);k.useEffect(()=>{t&&i.length>0&&_()},[t]);const y=()=>{var T;const b=(T=n.current)==null?void 0:T.getEditor();if(!b){Xt.warn("Quill editor not available for voice transcript insert",{},"voice");return}const x=b.getLength(),w=`

${o}
`;b.insertText(x,w,"user"),Xt.info("Voice transcript inserted to Quill editor",{chars:w.length},"voice"),a(),r(),e()};return g.jsx(Ms,{open:t,onOpenChange:b=>!b&&e(),children:g.jsxs(Ja,{className:"sm:max-w-2xl max-h-[85vh] flex flex-col gap-4",children:[g.jsx(Ya,{children:g.jsx(Qa,{children:"AI"})}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("p",{className:"text-sm font-medium",children:""}),g.jsx(af,{className:"h-32 rounded-md border bg-muted/30 px-3 py-2 text-sm",children:i.length===0?g.jsx("p",{className:"text-muted-foreground text-xs",children:""}):i.map(b=>g.jsxs("div",{className:"flex gap-2 py-0.5 leading-snug",children:[g.jsx("span",{className:"text-muted-foreground font-mono text-[11px] shrink-0 pt-0.5",children:$Je(b.timestamp)}),g.jsx("span",{children:b.text})]},b.id))})]}),g.jsxs("div",{className:"space-y-1.5 flex-1 min-h-0",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("p",{className:"text-sm font-medium",children:["AI ",f&&g.jsx("span",{className:"ml-2 text-xs text-muted-foreground font-normal",children:"AI"})]}),g.jsxs(Se,{type:"button",variant:"ghost",size:"sm",disabled:c||i.length===0,onClick:()=>void _(),className:"h-7 gap-1.5 text-xs",children:[g.jsx(Kw,{className:`h-3.5 w-3.5 ${c?"animate-spin":""}`}),""]})]}),c?g.jsx("div",{className:"h-32 rounded-md border bg-muted/30 flex items-center justify-center text-sm text-muted-foreground animate-pulse",children:"..."}):g.jsx(sl,{className:"h-40 resize-none text-sm",value:o,onChange:b=>l(b.target.value),placeholder:""})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[g.jsx(Se,{type:"button",variant:"outline",onClick:e,children:""}),g.jsx(Se,{type:"button",disabled:!o.trim()||c,onClick:y,children:"Quill "})]}),g.jsx("span",{className:"sr-only hidden",children:m})]})})},TG=t=>`${Math.ceil(t/60)}`,ule=10,LJe=t=>Object.fromEntries(Array.from({length:t},(e,n)=>[n,!0])),DJe=t=>t.split(`
`).map(e=>e.trim()).filter(Boolean).map(e=>{const[n,r]=e.split("|").map(a=>a.trim()),i=Number.parseInt(r??"",10);return{title:n,plannedDurationMinutes:Number.isFinite(i)&&i>0?i:ule}}).filter(e=>e.title.length>0),dle=t=>t<=70?{color:dt.completed.color,bgColor:dt.completed.bgColor,icon:g.jsx(vc,{className:"w-4 h-4"}),label:""}:t<=90?{color:dt.paused.color,bgColor:dt.paused.bgColor,icon:g.jsx(qy,{className:"w-4 h-4"}),label:""}:t<=100?{color:dt.warning.color,bgColor:dt.warning.bgColor,icon:g.jsx(lb,{className:"w-4 h-4"}),label:""}:{color:dt.overtime.color,bgColor:dt.overtime.bgColor,icon:g.jsx(qy,{className:"w-4 h-4"}),label:""},BJe=({meeting:t,isOpen:e,onClose:n})=>{const{createMeeting:r,updateMeetingTitle:i,addAgenda:a}=Ic(),{githubPat:s}=dm(),[o,l]=k.useState((t==null?void 0:t.title)||""),[c,u]=k.useState(""),[f,p]=k.useState(""),[m,_]=k.useState(""),[y,b]=k.useState(""),[x,w]=k.useState(!1),[T,A]=k.useState([]),[E,C]=k.useState({});k.useEffect(()=>{l((t==null?void 0:t.title)||""),u(""),p(""),_(""),b(""),A([]),C({})},[t]);const R=async()=>{b("");const D=$Y(c);if("error"in D){b(D.error);return}const Z=MY(f);if("error"in Z){b(Z.error);return}const{owner:j,repo:L}=D,B=Z.value;w(!0);try{const z=await Z$({owner:j,repo:L,issueNumber:B,pat:s??void 0});l(z.title);const W=KUe(z.body);A(W),C(LJe(W.length)),_(W.map(q=>q.plannedDurationMinutes?`${q.title} | ${q.plannedDurationMinutes}`:q.title).join(`
`))}catch(z){b(z instanceof Error?z.message:"Issue ")}finally{w(!1)}},N=D=>{D.preventDefault();const Z=LY.safeParse(o.trim());if(Z.success){if(t)i(t.id,Z.data);else{const j=r(Z.data);j&&(T.length>0?T.filter((B,z)=>E[z]):DJe(m)).forEach(B=>{a(j,B.title,(B.plannedDurationMinutes??ule)*60)})}l(""),_(""),u(""),p(""),b(""),A([]),C({}),n()}};return g.jsx(Ms,{open:e,onOpenChange:D=>{D||n()},children:g.jsxs(Ja,{className:"sm:max-w-md [&>button]:hidden",onCloseAutoFocus:D=>{D.preventDefault()},children:[g.jsx(Ya,{children:g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsxs(Qa,{className:"flex items-center gap-2",children:[g.jsx(Zw,{className:"w-5 h-5"}),t?"":""]}),g.jsx(Se,{type:"button",variant:"ghost",size:"sm",onClick:n,"aria-label":"",children:g.jsx(cb,{className:"h-4 w-4"})})]})}),g.jsxs("form",{onSubmit:N,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx(at,{htmlFor:"meeting-title",children:""}),g.jsx(Bn,{id:"meeting-title",placeholder:": ",value:o,onChange:D=>l(D.target.value),required:!0,maxLength:200})]}),!t&&g.jsxs("div",{className:"space-y-3 rounded-md p-3",children:[g.jsx("p",{className:"text-sm font-medium",children:"GitHub Issue "}),g.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx(at,{htmlFor:"meeting-issue-owner-repo",children:"Owner/Repo"}),g.jsx(Bn,{id:"meeting-issue-owner-repo",placeholder:"owner/repo",value:c,onChange:D=>u(D.target.value),maxLength:141})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx(at,{htmlFor:"meeting-issue-number",children:"Issue #"}),g.jsx(Bn,{id:"meeting-issue-number",type:"number",min:"1",max:"999999",placeholder:"36",value:f,onChange:D=>p(D.target.value)})]})]}),y&&g.jsx("p",{className:"text-xs text-destructive",children:y}),g.jsx(Se,{type:"button",variant:"outline",onClick:R,disabled:x,children:x?"...":"Issue "}),T.length>0&&g.jsxs("div",{className:"space-y-1 rounded-md bg-muted/50 p-2",children:[g.jsx("p",{className:"text-xs font-medium",children:""}),g.jsx("ul",{className:"space-y-1",children:T.map((D,Z)=>g.jsx("li",{className:"text-xs",children:g.jsxs("label",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"checkbox",checked:!!E[Z],onChange:j=>C(L=>({...L,[Z]:j.target.checked}))}),g.jsxs("span",{children:[D.title,D.plannedDurationMinutes?`${D.plannedDurationMinutes}`:""]})]})},`${D.title}-${Z}`))})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx(at,{htmlFor:"meeting-issue-agenda-draft",children:"1:  | "}),g.jsx(sl,{id:"meeting-issue-agenda-draft",rows:6,placeholder:`:  | 5
 | 15`,value:m,onChange:D=>_(D.target.value)})]})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[g.jsx(Se,{type:"button",variant:"outline",onClick:n,children:""}),g.jsx(Se,{type:"submit",children:t?"":""})]})]})]})})},FJe=({meetingId:t,agenda:e,isOpen:n,onClose:r})=>{const{addAgenda:i,updateAgenda:a}=Ic(),[s,o]=k.useState((e==null?void 0:e.title)||""),[l,c]=k.useState(e?Math.ceil(e.plannedDuration/60):10),[u,f]=k.useState((e==null?void 0:e.memo)||"");k.useEffect(()=>{o((e==null?void 0:e.title)||""),c(e?Math.ceil(e.plannedDuration/60):10),f((e==null?void 0:e.memo)||"")},[e]);const p=m=>{m.preventDefault();const _=LY.safeParse(s.trim());if(!_.success)return;const y=l*60;e?a(t,e.id,{title:_.data,plannedDuration:y,memo:u,remainingTime:y-e.actualDuration}):i(t,_.data,y,u),o(""),c(10),f(""),r()};return g.jsx(Ms,{open:n,onOpenChange:m=>{m||r()},children:g.jsxs(Ja,{className:"sm:max-w-md [&>button]:hidden",children:[g.jsx(Ya,{children:g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsxs(Qa,{className:"flex items-center gap-2",children:[g.jsx(vc,{className:"w-5 h-5"}),e?"":""]}),g.jsx(Se,{type:"button",variant:"ghost",size:"sm",onClick:r,"aria-label":"",children:g.jsx(cb,{className:"h-4 w-4"})})]})}),g.jsxs("form",{onSubmit:p,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx(at,{htmlFor:"agenda-title",children:""}),g.jsx(Bn,{id:"agenda-title",placeholder:": ",value:s,onChange:m=>o(m.target.value),required:!0,maxLength:200})]}),g.jsxs("div",{children:[g.jsx(at,{htmlFor:"agenda-duration",children:""}),g.jsx(Bn,{id:"agenda-duration",type:"number",min:"1",max:"180",value:l,onChange:m=>c(parseInt(m.target.value)||10),required:!0})]}),g.jsxs("div",{children:[g.jsx(at,{htmlFor:"agenda-memo",children:""}),g.jsx(sl,{id:"agenda-memo",placeholder:"",value:u,onChange:m=>f(m.target.value),rows:3})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[g.jsx(Se,{type:"button",variant:"outline",onClick:r,children:""}),g.jsx(Se,{type:"submit",children:e?"":""})]})]})]})})},UJe=({meeting:t,isOpen:e,onClose:n})=>{const{updateMeetingSettings:r}=Ic(),[i,a]=k.useState(t.settings),s=`meeting:${t.id}`;k.useEffect(()=>{a(t.settings)},[t.settings]);const o=()=>{r(t.id,i),n()};return g.jsx(Ms,{open:e,onOpenChange:l=>{l||n()},children:g.jsxs(Ja,{className:"sm:max-w-md [&>button]:hidden",children:[g.jsx(Ya,{children:g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsxs(Qa,{className:"flex items-center gap-2",children:[g.jsx(bc,{className:"w-5 h-5"}),""]}),g.jsx(Se,{type:"button",variant:"ghost",size:"sm",onClick:n,"aria-label":"",children:g.jsx(cb,{className:"h-4 w-4"})})]})}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx("h4",{className:"font-medium",children:""}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs(at,{className:"text-sm",children:["",g.jsx("div",{className:"text-xs text-muted-foreground",children:""})]}),g.jsx(fo,{checked:i.autoTransition,onCheckedChange:l=>a({...i,autoTransition:l})})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs(at,{className:"text-sm",children:["",g.jsx("div",{className:"text-xs text-muted-foreground",children:""})]}),g.jsx(fo,{checked:i.silentMode,onCheckedChange:l=>a({...i,silentMode:l})})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h4",{className:"font-medium",children:""}),g.jsxs("div",{children:[g.jsx(at,{className:"text-sm mb-2 block",children:""}),g.jsxs(_c,{value:i.bellSettings.soundType,onValueChange:l=>a({...i,bellSettings:{...i.bellSettings,soundType:l}}),children:[g.jsx(bl,{children:g.jsx(wc,{})}),g.jsxs(_l,{children:[g.jsx(Ln,{value:"single",children:""}),g.jsx(Ln,{value:"double",children:""}),g.jsx(Ln,{value:"loop",children:""})]})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(at,{className:"text-xs",children:""}),g.jsx(fo,{checked:i.bellSettings.start,onCheckedChange:l=>a({...i,bellSettings:{...i.bellSettings,start:l}})})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(at,{className:"text-xs",children:"5"}),g.jsx(fo,{checked:i.bellSettings.fiveMinWarning,onCheckedChange:l=>a({...i,bellSettings:{...i.bellSettings,fiveMinWarning:l}})})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(at,{className:"text-xs",children:""}),g.jsx(fo,{checked:i.bellSettings.end,onCheckedChange:l=>a({...i,bellSettings:{...i.bellSettings,end:l}})})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(at,{className:"text-xs",children:""}),g.jsx(fo,{checked:i.bellSettings.overtime,onCheckedChange:l=>a({...i,bellSettings:{...i.bellSettings,overtime:l}})})]})]})]}),g.jsx(DY,{timeLogId:s}),g.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[g.jsx(Se,{variant:"outline",onClick:n,children:""}),g.jsx(Se,{onClick:o,children:""})]})]})]})})},lw=["hsl(var(--chart-1))","hsl(var(--chart-2))","hsl(var(--chart-3))","hsl(var(--chart-4))","hsl(var(--chart-5))"],zJe=({meeting:t})=>{const e=k.useMemo(()=>[...t.agenda].sort((a,s)=>a.order-s.order).map(a=>({id:a.id,title:a.title,plannedDuration:a.plannedDuration})).filter(a=>a.plannedDuration>0),[t.agenda]),n=k.useMemo(()=>e.reduce((a,s)=>a+s.plannedDuration,0),[e]),r=k.useMemo(()=>t.agenda.reduce((a,s)=>a+s.actualDuration,0),[t.agenda]),i=k.useMemo(()=>{if(e.length===0||n<=0)return"hsl(var(--muted))";let a=0;return`conic-gradient(${e.map((o,l)=>{const c=a*100;a+=o.plannedDuration/n;const u=a*100;return`${lw[l%lw.length]} ${c}% ${u}%`}).join(", ")})`},[e,n]);return g.jsxs("div",{className:"space-y-3 rounded-md p-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h4",{className:"flex items-center gap-2 text-sm font-medium",children:[g.jsx(bge,{className:"h-4 w-4"}),""]}),g.jsxs(ir,{variant:"outline",className:"text-[10px]",children:[e.length,""]})]}),e.length===0?g.jsx("p",{className:"text-xs text-muted-foreground",children:""}):g.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-[auto_minmax(0,1fr)] sm:items-center",children:[g.jsx("div",{className:"mx-auto h-32 w-32 rounded-full",style:{background:i},children:g.jsx("div",{className:"flex h-full w-full items-center justify-center p-4",children:g.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center rounded-full bg-background text-center",children:[g.jsx("div",{className:"text-[10px] text-muted-foreground",children:""}),g.jsx("div",{className:"text-xs font-semibold",children:za(n)})]})})}),g.jsx("div",{className:"max-h-28 space-y-1 overflow-y-auto pr-1 text-xs",children:e.map((a,s)=>{const o=n>0?a.plannedDuration/n*100:0;return g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[g.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:lw[s%lw.length]}}),g.jsx("span",{className:"truncate text-muted-foreground",children:a.title})]}),g.jsxs("div",{className:"shrink-0 font-mono text-foreground",children:[Math.round(o),"%"]})]},a.id)})})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 text-xs",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-muted-foreground",children:""}),g.jsx("div",{className:"font-mono font-semibold",children:za(n)})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-muted-foreground",children:""}),g.jsx("div",{className:"font-mono font-semibold",children:za(r)})]})]})]})},EG=({meetingId:t,agenda:e})=>{const{updateAgendaMinutes:n}=Ic(),r=k.useRef(null),[i,a]=k.useState(!1),[s,o]=k.useState(()=>typeof window>"u"?!1:window.matchMedia(xG).matches),l=k.useMemo(()=>CJe(s),[s]);return k.useEffect(()=>{const c=window.matchMedia(xG),u=f=>{o(f.matches)};return c.addEventListener("change",u),()=>c.removeEventListener("change",u)},[]),g.jsxs(Mt,{className:"grid min-h-0 grid-rows-[auto_minmax(0,1fr)] lg:h-full",children:[g.jsx(On,{className:"pb-3",children:g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsx(Cn,{className:"text-base",children:""}),g.jsx(PJe,{agendaId:e.id})]})}),g.jsxs(Vt,{className:"p-3 pt-0 lg:min-h-0 space-y-2",children:[g.jsx(jJe,{meetingId:t,agendaId:e.id,minutesFormat:e.minutesFormat,onRequestSummaryDialog:()=>a(!0)}),g.jsx(MJe,{isOpen:i,onClose:()=>a(!1),quillRef:r,onInserted:()=>a(!1)}),g.jsx("div",{className:"agenda-minutes-editor min-h-[280px] min-w-0 overflow-visible rounded-md bg-background lg:h-full lg:min-h-0 [&_.ql-toolbar]:shrink-0 [&_.ql-toolbar]:flex-wrap [&_.ql-container]:h-[calc(100%-42px)] [&_.ql-container]:min-w-0 [&_.ql-editor]:min-h-[220px] [&_.ql-editor]:break-words max-lg:[&_.ql-editor]:text-base",children:g.jsx(wre,{ref:r,theme:"snow",className:"h-full",value:e.minutesContent,onChange:c=>{c!==e.minutesContent&&n(t,e.id,{minutesContent:c,minutesFormat:"richtext"})},modules:l,formats:OJe},e.id)})]})]})},AG=()=>{const[t,e]=k.useState(!1),{currentMeeting:n,isRunning:r,getCurrentAgenda:i,getProgressPercentage:a,startTimer:s,pauseTimer:o,stopTimer:l,syncTime:c}=Ic(),u=i(),f=a(),p=dle(f),m=(u==null?void 0:u.status)==="paused",_=(u==null?void 0:u.status)==="running"||(u==null?void 0:u.status)==="paused"||(u==null?void 0:u.status)==="overtime";return k.useEffect(()=>{const y=()=>{document.hidden||c()};return document.addEventListener("visibilitychange",y),()=>document.removeEventListener("visibilitychange",y)},[c]),!n||!u?g.jsx(Mt,{className:"text-center py-8",children:g.jsxs(Vt,{children:[g.jsx(vc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),g.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),g.jsx("p",{className:"text-muted-foreground",children:""})]})}):g.jsxs(Mt,{className:ct("grid min-h-0 grid-rows-[auto_minmax(0,1fr)] lg:h-full",r&&"ring-2 ring-ring shadow-lg"),children:[g.jsx(On,{children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs(Cn,{className:"flex items-center gap-2",children:[p.icon,""]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(ir,{variant:"outline",className:p.color,children:p.label}),n.settings.silentMode?g.jsx(Dge,{className:"w-4 h-4 text-muted-foreground"}):g.jsx(Lge,{className:"w-4 h-4 text-muted-foreground"})]})]})}),g.jsxs(Vt,{className:"space-y-6 lg:min-h-0 lg:overflow-y-auto",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("h2",{className:"text-2xl font-bold mb-2",children:u.title}),u.memo&&g.jsx("p",{className:"text-muted-foreground text-sm",children:u.memo})]}),g.jsxs("div",{className:"text-center space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("div",{className:"timer-display-digit font-mono font-bold",children:za(u.remainingTime)}),g.jsxs("div",{className:"text-sm text-muted-foreground",children:[": ",za(u.plannedDuration)]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(um,{value:Math.min(f,100),className:"h-4",indicatorClassName:p.bgColor}),g.jsxs("div",{className:"flex justify-between text-sm",children:[g.jsxs("span",{className:p.color,children:[f.toFixed(1),"% "]}),g.jsx("span",{className:"text-muted-foreground",children:f>100?`+${(f-100).toFixed(1)}% `:""})]})]})]}),g.jsxs("div",{className:"flex justify-center gap-2",children:[g.jsx(ni,{content:"/",side:"top",open:t,onOpenChange:e,children:g.jsx(Se,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>e(y=>!y),"aria-label":t?"":"",children:g.jsx(xge,{className:"h-4 w-4"})})}),r?g.jsxs(Se,{onClick:o,variant:"outline",size:"sm",children:[g.jsx(ib,{className:"mr-1 h-4 w-4"}),""]}):g.jsxs(Se,{onClick:s,size:"sm",children:[g.jsx(ab,{className:"mr-1 h-4 w-4"}),m?"":""]}),g.jsxs(Se,{onClick:l,variant:"destructive",size:"sm",disabled:!_,children:[g.jsx(ob,{className:"w-4 h-4 mr-1"}),""]})]}),g.jsx(zJe,{meeting:n})]})]})},OG=({meetings:t,currentMeetingId:e,isSidePanelOpen:n,className:r,onSelectMeeting:i,onCreateMeeting:a,onEditMeeting:s,onDeleteMeeting:o,onSaveReport:l,onOpenSettings:c,onToggleSidePanel:u})=>g.jsxs(Mt,{className:ct("grid min-h-0 grid-rows-[auto_minmax(0,1fr)] lg:h-full",r),children:[g.jsx(On,{className:"px-3 py-2",children:g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[g.jsxs(Cn,{className:"flex items-center gap-1.5 text-sm",children:[g.jsx(Zw,{className:"h-3.5 w-3.5"}),"",g.jsxs(ir,{variant:"outline",className:"h-5 px-1.5 text-[10px]",children:[t.length,""]})]}),g.jsxs("div",{className:"flex w-full items-center justify-end gap-2 sm:w-auto sm:justify-start",children:[g.jsx(ni,{content:"",side:"top",children:g.jsxs(Se,{type:"button",variant:"secondary",size:"sm",className:"h-7 w-7 p-0 sm:h-7 sm:w-auto sm:px-2 sm:text-xs",onClick:a,"aria-label":"",children:[g.jsx(sb,{className:"h-3.5 w-3.5 sm:mr-1"}),g.jsx("span",{className:"hidden sm:inline",children:""})]})}),g.jsx(ni,{content:"",side:"top",children:g.jsx(Se,{type:"button",variant:"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:c,disabled:!e,children:g.jsx(bc,{className:"mr-1 h-3.5 w-3.5"})})}),g.jsx(ni,{content:n?"":"",side:"top",children:g.jsx(Se,{type:"button",variant:"outline",size:"sm",className:"h-7 w-7 p-0",onClick:u,"aria-label":n?"":"",children:n?g.jsx(Pge,{className:"h-3.5 w-3.5"}):g.jsx(AJ,{className:"h-3.5 w-3.5"})})})]})]})}),g.jsx(Vt,{className:"px-3 pb-3 pt-0 lg:min-h-0 lg:overflow-y-auto",children:t.length===0?g.jsx("p",{className:"text-xs text-muted-foreground",children:""}):g.jsx("div",{className:"space-y-1",children:t.map(f=>g.jsx("div",{className:"px-1 py-1",children:g.jsxs("div",{className:"flex items-center gap-1.5",children:[g.jsxs(Se,{type:"button",variant:f.id===e?"default":"ghost",size:"sm",className:"h-8 flex-1 justify-between px-2 text-xs",onClick:()=>i(f.id),children:[g.jsx("span",{className:"truncate text-left",children:f.title}),g.jsxs("span",{className:"shrink-0 text-[10px] opacity-80",children:[f.agenda.length,""]})]}),g.jsx(ni,{content:"",side:"top",children:g.jsx(Se,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>s(f),"aria-label":"",children:g.jsx(OJ,{className:"h-3.5 w-3.5"})})}),g.jsx(ni,{content:"",side:"top",children:g.jsx(Se,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 text-blue-600 hover:text-blue-700",onClick:()=>l(f),"aria-label":"",children:g.jsx(EJ,{className:"h-3.5 w-3.5"})})}),g.jsx(ni,{content:"",side:"top",children:g.jsx(Se,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 text-red-500 hover:text-red-700",onClick:()=>o(f),"aria-label":"",children:g.jsx(No,{className:"h-3.5 w-3.5"})})})]})},f.id))})})]}),CG=({className:t,onAddAgenda:e,onEditAgenda:n})=>{const{currentMeeting:r,deleteAgenda:i,getCurrentAgenda:a,selectAgenda:s}=Ic(),o=a();return r?g.jsxs(Mt,{className:ct("grid min-h-0 grid-rows-[auto_minmax(0,1fr)] lg:h-full",t),children:[g.jsx(On,{className:"px-3 py-2",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs(Cn,{className:"flex items-center gap-1.5 text-sm",children:[g.jsx(vc,{className:"h-3.5 w-3.5"}),"",g.jsxs(ir,{variant:"outline",className:"h-5 px-1.5 text-[10px]",children:[r.agenda.length,""]})]}),g.jsx(Se,{onClick:()=>{e()},variant:"secondary",size:"sm",className:"h-7 w-7 p-0","aria-label":"",children:g.jsx(sb,{className:"h-3.5 w-3.5"})})]})}),g.jsx(Vt,{className:"px-3 pb-3 pt-0 lg:min-h-0",children:g.jsx("div",{className:"space-y-1.5 overflow-auto pr-1 lg:h-full lg:min-h-0",children:r.agenda.length===0?g.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[g.jsx(vc,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),g.jsx("p",{children:""})]}):[...r.agenda].sort((l,c)=>l.order-c.order).map(l=>{const c=(o==null?void 0:o.id)===l.id,u=l.plannedDuration>0?l.actualDuration/l.plannedDuration*100:0,f=dle(u);return g.jsx("div",{className:ct("cursor-pointer px-2 py-1.5",c&&dt.running.surfaceClass,l.status==="completed"&&dt.completed.surfaceClass,l.status==="overtime"&&dt.overtime.surfaceClass),onClick:()=>s(r.id,l.id),children:g.jsx("div",{className:"flex min-w-0 flex-col gap-1.5 sm:flex-row sm:items-start sm:justify-between",children:g.jsxs("div",{className:"min-w-0 flex-1",children:[g.jsxs("div",{className:"mb-0.5 flex flex-wrap items-center gap-1.5",children:[l.status==="completed"?g.jsx(Hy,{className:`w-3.5 h-3.5 ${dt.completed.color}`}):c?f.icon:g.jsx(SJ,{className:"w-3.5 h-3.5 text-muted-foreground"}),g.jsx("h4",{className:"min-w-0 flex-1 text-sm font-medium break-words sm:truncate",children:l.title}),c&&g.jsx(wge,{className:`w-3.5 h-3.5 ${dt.running.color}`}),g.jsx(ir,{variant:l.status==="pending"?dt.idle.badgeVariant:l.status==="running"?dt.running.badgeVariant:l.status==="paused"?dt.paused.badgeVariant:l.status==="completed"?dt.completed.badgeVariant:l.status==="overtime"?dt.overtime.badgeVariant:dt.idle.badgeVariant,className:"text-[10px]",children:l.status==="pending"?dt.idle.label:l.status==="running"?dt.running.label:l.status==="paused"?dt.paused.label:l.status==="completed"?dt.completed.label:l.status==="overtime"?dt.overtime.label:dt.idle.label})]}),l.memo&&g.jsx("p",{className:"mb-1 text-xs text-muted-foreground line-clamp-2",children:l.memo}),g.jsxs("div",{className:"flex items-center justify-between gap-1.5 text-xs",children:[g.jsxs("div",{className:"flex min-w-0 flex-wrap items-center gap-1.5 sm:gap-3",children:[g.jsxs("span",{className:"break-all sm:break-normal",children:[": ",TG(l.plannedDuration)]}),l.actualDuration>0&&g.jsxs("span",{className:ct("break-all sm:break-normal",f.color),children:[": ",TG(l.actualDuration)]})]}),g.jsxs("div",{className:"flex shrink-0 gap-0.5",children:[g.jsx(ni,{content:"",side:"top",children:g.jsx(Se,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:p=>{p.stopPropagation(),n(l)},"aria-label":"",children:g.jsx(OJ,{className:"h-3.5 w-3.5"})})}),g.jsx(ni,{content:"",side:"top",children:g.jsx(Se,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-destructive hover:text-destructive",onClick:p=>{p.stopPropagation(),i(r.id,l.id)},"aria-label":"",children:g.jsx(No,{className:"h-3.5 w-3.5"})})})]})]}),g.jsx("div",{className:"mt-1",children:g.jsx(um,{value:Math.min(u,100),className:"h-1.5",indicatorClassName:f.bgColor})})]})})},l.id)})})})]}):null},qJe=()=>{const{currentMeeting:t,meetings:e,tick:n,createMeeting:r,deleteMeeting:i,setCurrentMeeting:a,isRunning:s,getCurrentAgenda:o}=Ic(),[l,c]=k.useState(!1),[u,f]=k.useState(null),[p,m]=k.useState(null),[_,y]=k.useState(!1),[b,x]=k.useState(!1),[w,T]=k.useState(!1),[A,E]=k.useState(()=>typeof window>"u"?!1:window.matchMedia("(min-width: 1024px)").matches),[C,R]=k.useState(null),[N,D]=k.useState(!1),{createDraftFromMeeting:Z,setDialogOpen:j}=EL();k.useEffect(()=>{if(s){const z=setInterval(n,1e3);return()=>clearInterval(z)}},[s,n]),k.useEffect(()=>{e.length===0&&r("")},[e.length,r]),k.useEffect(()=>{const z=window.matchMedia("(min-width: 1024px)"),W=K=>{E(K)},q=K=>{W(K.matches)};return z.addEventListener("change",q),()=>z.removeEventListener("change",q)},[]);const L=o(),B=g.jsxs("div",{className:ct("h-full min-h-0",A?"space-y-2 lg:space-y-0 lg:grid lg:grid-rows-[repeat(3,minmax(0,1fr))] lg:gap-2 lg:pr-1":"flex items-start justify-center"),children:[A&&g.jsxs(g.Fragment,{children:[g.jsx(OG,{meetings:e,currentMeetingId:t==null?void 0:t.id,isSidePanelOpen:A,className:"min-h-0",onSelectMeeting:a,onCreateMeeting:()=>{f(null),c(!0)},onEditMeeting:z=>{f(z),c(!0)},onDeleteMeeting:z=>{R(z),D(!0)},onSaveReport:z=>{a(z.id),Z(z),j(!0)},onOpenSettings:()=>x(!0),onToggleSidePanel:()=>E(z=>!z)}),g.jsx(CG,{className:"min-h-0",onAddAgenda:()=>{m(null),y(!0)},onEditAgenda:z=>{m(z),y(!0)}}),g.jsx(wG,{className:"min-h-0"})]}),!A&&g.jsx(Se,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>E(!0),"aria-label":"",children:g.jsx(AJ,{className:"h-3.5 w-3.5"})})]});return g.jsxs("div",{className:"w-full",children:[g.jsxs("div",{className:"lg:hidden flex flex-col gap-3",children:[g.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[g.jsxs(Se,{size:"sm",variant:"outline",onClick:()=>T(!0),children:[g.jsx(Zw,{className:"w-4 h-4 mr-1.5"}),""]}),t&&g.jsxs(Se,{size:"sm",variant:"outline",onClick:()=>x(!0),children:[g.jsx(bc,{className:"w-4 h-4 mr-1.5"}),""]})]}),g.jsx(AG,{}),t&&g.jsx(CG,{onAddAgenda:()=>{m(null),y(!0)},onEditAgenda:z=>{m(z),y(!0)}}),t&&L&&g.jsx(EG,{meetingId:t.id,agenda:L})]}),g.jsxs("div",{className:ct("hidden lg:grid lg:h-[calc(100dvh-160px)] lg:min-h-[560px] gap-4",A?"lg:grid-cols-12":"lg:grid-cols-[minmax(0,44px)_minmax(0,3fr)_minmax(0,6fr)]"),children:[g.jsx("div",{className:ct("min-h-0 min-w-0",A?"lg:col-span-3":"lg:col-span-1"),children:B}),g.jsx("div",{className:ct("min-h-0 min-w-0",A?"lg:col-span-3":"lg:col-span-1"),children:g.jsx(AG,{})}),g.jsx("div",{className:ct("min-h-0 min-w-0",A?"lg:col-span-6":"lg:col-span-1"),children:t&&L?g.jsx(EG,{meetingId:t.id,agenda:L}):g.jsx(Mt,{className:"h-full text-center py-8",children:g.jsxs(Vt,{children:[g.jsx(vc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),g.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),g.jsx("p",{className:"text-muted-foreground",children:""})]})})})]}),g.jsx(Ms,{open:w,onOpenChange:T,children:g.jsxs(Ja,{className:"sm:max-w-lg max-h-[80vh] overflow-y-auto [&>button]:hidden",children:[g.jsx(Ya,{children:g.jsxs("div",{className:"flex items-center justify-between gap-2",children:[g.jsxs(Qa,{className:"flex items-center gap-2",children:[g.jsx(Zw,{className:"w-5 h-5"}),""]}),g.jsx(Se,{type:"button",variant:"ghost",size:"sm",onClick:()=>T(!1),"aria-label":"",children:g.jsx(cb,{className:"h-4 w-4"})})]})}),g.jsxs("div",{className:"space-y-4",children:[g.jsx(OG,{meetings:e,currentMeetingId:t==null?void 0:t.id,isSidePanelOpen:!0,onSelectMeeting:z=>{a(z),T(!1)},onCreateMeeting:()=>{f(null),c(!0)},onEditMeeting:z=>{f(z),c(!0)},onDeleteMeeting:z=>{R(z),D(!0)},onSaveReport:z=>{a(z.id),Z(z),j(!0)},onOpenSettings:()=>{x(!0),T(!1)},onToggleSidePanel:()=>T(!1)}),g.jsx(wG,{})]})]})}),t&&g.jsx(FJe,{meetingId:t.id,agenda:p,isOpen:_,onClose:()=>{y(!1),m(null)}}),g.jsx(BJe,{meeting:u,isOpen:l,onClose:()=>{c(!1),f(null)}}),t&&g.jsx(UJe,{meeting:t,isOpen:b,onClose:()=>x(!1)}),g.jsx(mJ,{open:N,onOpenChange:D,children:g.jsxs(gJ,{maxWidth:"420px",children:[g.jsx(yJ,{children:""}),g.jsx(vJ,{children:C?`${C.title}`:""}),g.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[g.jsx(_J,{children:g.jsx(Se,{type:"button",variant:"outline",onClick:()=>{D(!1),R(null)},children:""})}),g.jsx(bJ,{children:g.jsx(Se,{type:"button",variant:"destructive",onClick:()=>{C&&i(C.id),D(!1),R(null)},children:""})})]})]})}),g.jsx(EJe,{})]})},HJe=()=>g.jsx(qJe,{}),WJe=()=>{const{githubPat:t,setGithubPat:e,aiProviderConfig:n,setAiProviderConfig:r}=dm(),[i,a]=k.useState({provider:(n==null?void 0:n.provider)??"openai",model:(n==null?void 0:n.model)??"gpt-4o-mini",apiKey:(n==null?void 0:n.apiKey)??"",temperature:(n==null?void 0:n.temperature)??.2}),[s,o]=k.useState(!1),[l,c]=k.useState(t??""),[u,f]=k.useState(!1),p=RD(i),m=(M,Y)=>{a(se=>({...se,[M]:Y})),o(!1)},_=()=>{r(i),o(!0)},y=()=>{e(l.trim()||null),f(!0)},[b,x]=k.useState([]),[w,T]=k.useState("all"),[A,E]=k.useState("all"),[C,R]=k.useState(""),[N,D]=k.useState({});k.useEffect(()=>{x(Xt.getStoredLogs())},[]);const Z=k.useMemo(()=>{let M=b;if(w!=="all"){const Y=pn[w];M=M.filter(se=>se.level===Y)}if(A!=="all"&&(M=M.filter(Y=>Y.category===A)),C){const Y=C.toLowerCase();M=M.filter(se=>se.message.toLowerCase().includes(Y)||se.category.toLowerCase().includes(Y)||se.data&&JSON.stringify(se.data).toLowerCase().includes(Y))}return M},[b,w,A,C]),j=Xt.getLogStatistics(),L=k.useMemo(()=>Array.from(new Set(b.map(M=>M.category))).sort(),[b]),B=M=>{switch(M){case pn.ERROR:return g.jsx(Vw,{className:"h-4 w-4 text-red-500"});case pn.WARN:return g.jsx(G$,{className:"h-4 w-4 text-yellow-500"});case pn.INFO:return g.jsx(Gw,{className:"h-4 w-4 text-blue-500"});case pn.DEBUG:return g.jsx(cS,{className:"h-4 w-4 text-green-500"});case pn.TRACE:return g.jsx(W$,{className:"h-4 w-4 text-gray-500"});default:return g.jsx(Gw,{className:"h-4 w-4"})}},z=M=>{switch(M){case pn.ERROR:return"destructive";case pn.WARN:return"outline";case pn.INFO:return"default";case pn.DEBUG:return"secondary";default:return"outline"}},W=()=>{x(Xt.getStoredLogs())},q=()=>{const M=Xt.exportLogs(),Y=new Blob([M],{type:"application/json"}),se=URL.createObjectURL(Y),ge=document.createElement("a");ge.href=se,ge.download=`timer-app-logs-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(se)},K=()=>{window.confirm("")&&(Xt.clearLogs(),x([]),D({}))},V=async M=>{const Y=qY([M]);try{await navigator.clipboard.writeText(Y),D(se=>({...se,[M.id]:"AI"}))}catch(se){Xt.warn("Failed to copy AI prompt",{error:se,logId:M.id},"ui"),D(ge=>({...ge,[M.id]:""}))}},J=M=>new Date(M).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),Q=({entry:M})=>g.jsx(Mt,{className:"mb-2",children:g.jsxs(Vt,{className:"p-4",children:[g.jsxs("div",{className:"flex items-start justify-between mb-2 gap-2",children:[g.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[B(M.level),g.jsx(ir,{variant:z(M.level),children:pn[M.level]}),g.jsx(ir,{variant:"outline",children:M.category})]}),g.jsx("span",{className:"text-xs text-muted-foreground",children:J(M.timestamp)})]}),g.jsx("p",{className:"text-sm font-medium mb-2",children:M.message}),g.jsxs("div",{className:"mb-2",children:[g.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>V(M),children:[g.jsx(oS,{className:"h-4 w-4 mr-2"}),"AI"]}),N[M.id]&&g.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:N[M.id]})]}),M.data!==void 0&&g.jsxs("details",{className:"text-xs",children:[g.jsx("summary",{className:"cursor-pointer text-muted-foreground mb-1",children:""}),g.jsx("pre",{className:"bg-muted p-2 rounded text-xs overflow-x-auto",children:JSON.stringify(M.data,null,2)})]}),M.stackTrace&&g.jsxs("details",{className:"text-xs mt-2",children:[g.jsx("summary",{className:"cursor-pointer text-muted-foreground mb-1",children:""}),g.jsx("pre",{className:"bg-muted p-2 rounded text-xs overflow-x-auto",children:M.stackTrace})]})]})});return g.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:g.jsxs(lp,{defaultValue:"settings",className:"flex flex-col",children:[g.jsxs(cp,{className:"grid w-full grid-cols-2 mb-6",children:[g.jsxs(go,{value:"settings",className:"flex items-center gap-2",children:[g.jsx(M5,{className:"h-4 w-4"}),""]}),g.jsxs(go,{value:"logs",className:"flex items-center gap-2",children:[g.jsx(Vw,{className:"h-4 w-4"}),""]})]}),g.jsx(ri,{value:"settings",children:g.jsxs("div",{className:"space-y-6",children:[g.jsxs(Mt,{children:[g.jsx(On,{children:g.jsxs(Cn,{className:"flex items-center gap-2",children:[g.jsx(M5,{className:"h-5 w-5"}),"AI "]})}),g.jsxs(Vt,{className:"space-y-4",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:"API "}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(at,{htmlFor:"settings-ai-provider",children:"Provider"}),g.jsxs("select",{id:"settings-ai-provider",className:"h-9 w-full rounded-md border border-input bg-background px-3 text-sm",value:i.provider,onChange:M=>m("provider",M.target.value),children:[g.jsx("option",{value:"openai",children:"OpenAI"}),g.jsx("option",{value:"anthropic",children:"Anthropic"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(at,{htmlFor:"settings-ai-model",children:"Model"}),g.jsx(Bn,{id:"settings-ai-model",placeholder:i.provider==="openai"?"gpt-4o-mini":"claude-3-5-haiku-latest",value:i.model,onChange:M=>m("model",M.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(at,{htmlFor:"settings-ai-key",children:["API Key",g.jsx("span",{className:"ml-1 text-xs text-muted-foreground",children:""})]}),g.jsx(Bn,{id:"settings-ai-key",type:"password",placeholder:i.provider==="openai"?"sk-...":"sk-ant-...",value:i.apiKey,onChange:M=>m("apiKey",M.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(at,{htmlFor:"settings-ai-temp",children:["Temperature",g.jsx("span",{className:"ml-1 text-xs text-muted-foreground",children:"02"})]}),g.jsx(Bn,{id:"settings-ai-temp",type:"number",min:"0",max:"2",step:"0.1",value:i.temperature??.2,onChange:M=>m("temperature",Number(M.target.value))})]}),g.jsxs("div",{className:"flex items-center justify-between pt-1",children:[s?g.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600",children:[g.jsx(Hy,{className:"h-3.5 w-3.5"}),""]}):p.valid?g.jsx("span",{}):g.jsxs("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[g.jsx(qy,{className:"h-3.5 w-3.5"}),p.reason]}),g.jsx(Se,{onClick:_,disabled:!p.valid,size:"sm",children:""})]})]})]}),g.jsxs(Mt,{children:[g.jsx(On,{children:g.jsxs(Cn,{className:"flex items-center gap-2",children:[g.jsx(V$,{className:"h-5 w-5"}),"GitHub "]})}),g.jsxs(Vt,{className:"space-y-4",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:"PAT  Issue "}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(at,{htmlFor:"settings-github-pat",children:["GitHub Personal Access Token",g.jsx("span",{className:"ml-1 text-xs text-muted-foreground",children:""})]}),g.jsx(Bn,{id:"settings-github-pat",type:"password",placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",value:l,onChange:M=>{c(M.target.value),f(!1)}}),g.jsxs("p",{className:"text-xs text-muted-foreground",children:[":"," ",g.jsx("code",{className:"rounded bg-muted px-1",children:"repo"}),"Issue "]})]}),g.jsxs("div",{className:"flex items-center justify-between pt-1",children:[u?g.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600",children:[g.jsx(Hy,{className:"h-3.5 w-3.5"}),l.trim()?"":""]}):g.jsx("span",{}),g.jsx(Se,{onClick:y,size:"sm",children:""})]})]})]})]})}),g.jsx(ri,{value:"logs",children:g.jsxs(lp,{defaultValue:"list",className:"flex flex-col",children:[g.jsxs(cp,{className:"grid w-full grid-cols-2 mb-4",children:[g.jsx(go,{value:"list",children:""}),g.jsx(go,{value:"statistics",children:""})]}),g.jsx(ri,{value:"list",children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex gap-2 flex-wrap",children:[g.jsx("div",{className:"flex-1 min-w-[180px]",children:g.jsx(Bn,{placeholder:"...",value:C,onChange:M=>R(M.target.value)})}),g.jsxs(_c,{value:w,onValueChange:T,children:[g.jsx(bl,{className:"w-[140px]",children:g.jsx(wc,{placeholder:""})}),g.jsxs(_l,{children:[g.jsx(Ln,{value:"all",children:""}),g.jsx(Ln,{value:"ERROR",children:""}),g.jsx(Ln,{value:"WARN",children:""}),g.jsx(Ln,{value:"INFO",children:""}),g.jsx(Ln,{value:"DEBUG",children:""}),g.jsx(Ln,{value:"TRACE",children:""})]})]}),g.jsxs(_c,{value:A,onValueChange:E,children:[g.jsx(bl,{className:"w-[140px]",children:g.jsx(wc,{placeholder:""})}),g.jsxs(_l,{children:[g.jsx(Ln,{value:"all",children:""}),L.map(M=>g.jsx(Ln,{value:M,children:M},M))]})]}),g.jsxs(Se,{variant:"outline",size:"sm",onClick:W,children:[g.jsx(Kw,{className:"h-4 w-4 mr-2"}),""]}),g.jsxs(Se,{variant:"outline",size:"sm",onClick:q,children:[g.jsx(H$,{className:"h-4 w-4 mr-2"}),""]}),g.jsxs(Se,{variant:"outline",size:"sm",onClick:K,children:[g.jsx(No,{className:"h-4 w-4 mr-2"}),""]})]}),g.jsx(af,{className:"h-[520px]",children:g.jsx("div",{className:"space-y-2 pr-1",children:Z.length===0?g.jsx(Mt,{children:g.jsx(Vt,{className:"p-8 text-center",children:g.jsx("p",{className:"text-muted-foreground",children:b.length===0?"":""})})}):Z.map(M=>g.jsx(Q,{entry:M},M.id))})})]})}),g.jsx(ri,{value:"statistics",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs(Mt,{children:[g.jsx(On,{children:g.jsx(Cn,{children:""})}),g.jsx(Vt,{children:g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:":"}),g.jsx("span",{className:"font-medium",children:j.totalLogs})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:":"}),g.jsx("span",{className:"font-medium",children:j.sessionCount})]}),j.oldestLog&&g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:":"}),g.jsx("span",{className:"font-medium text-xs",children:J(j.oldestLog)})]}),j.newestLog&&g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:":"}),g.jsx("span",{className:"font-medium text-xs",children:J(j.newestLog)})]})]})})]}),g.jsxs(Mt,{children:[g.jsx(On,{children:g.jsx(Cn,{children:""})}),g.jsx(Vt,{children:g.jsx("div",{className:"space-y-2",children:Object.entries(j.logsByLevel).map(([M,Y])=>g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[B(pn[M]),g.jsx("span",{children:M})]}),g.jsx(ir,{variant:"outline",children:Y})]},M))})})]}),g.jsxs(Mt,{className:"md:col-span-2",children:[g.jsx(On,{children:g.jsx(Cn,{children:""})}),g.jsx(Vt,{children:g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(j.logsByCategory).map(([M,Y])=>g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm",children:M}),g.jsx(ir,{variant:"secondary",children:Y})]},M))})})]})]})})]})})]})})},VJe=()=>g.jsx("footer",{className:"hidden bg-card/30 px-2 py-2 md:block md:px-3",children:g.jsxs("div",{className:"w-full text-center text-xs text-muted-foreground",children:["Created by"," ",g.jsxs("a",{href:"https://github.com/nigoh",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 underline underline-offset-4 hover:text-foreground",children:[g.jsx(V$,{className:"h-3.5 w-3.5"}),"nigoh"]})]})}),fle="timer-color-mode",GJe=t=>t==="light"||t==="dark",KJe=()=>{if(typeof window>"u")return"light";const t=window.localStorage.getItem(fle);return GJe(t)?t:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},ZJe=t=>{typeof document>"u"||document.documentElement.classList.toggle("dark",t==="dark")},XJe=t=>{typeof window>"u"||window.localStorage.setItem(fle,t)},JJe=[{value:"timer",Icon:lb,label:""},{value:"agenda",Icon:Oge,label:""}];function YJe(){const[t,e]=k.useState("timer"),[n,r]=k.useState(KJe),[i,a]=k.useState(()=>{try{return localStorage.getItem("sidebar-open")==="true"}catch{return!1}}),s=()=>{a(c=>{const u=!c;try{localStorage.setItem("sidebar-open",String(u))}catch{}return u})};ee.useEffect(()=>{Xt.info("Application started",{userAgent:navigator.userAgent,screen:{width:window.screen.width,height:window.screen.height},viewport:{width:window.innerWidth,height:window.innerHeight}},"app")},[]),ee.useEffect(()=>{ZJe(n),XJe(n)},[n]);const o=c=>{Xt.userAction("Tab switched",{from:t,to:c}),e(c)},l=()=>{r(c=>{const u=c==="dark"?"light":"dark";return Xt.userAction("Color mode switched",{from:c,to:u}),u})};return g.jsx(aS,{appearance:n,children:g.jsxs("div",{className:"flex min-h-[100svh] bg-background text-foreground",children:[g.jsxs("aside",{className:ct("flex shrink-0 flex-col border-r border-border bg-card transition-all duration-200",i?"w-48":"w-14"),children:[g.jsxs("div",{className:"flex h-14 shrink-0 items-center px-2",children:[g.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-md bg-primary text-primary-foreground",children:g.jsx(lb,{className:"h-4 w-4"})}),i&&g.jsx("span",{className:"ml-2 flex-1 font-semibold",children:"Timer App"}),g.jsx(Se,{variant:"ghost",size:"icon",className:ct("h-8 w-8 shrink-0","ml-auto"),onClick:()=>s(),"aria-label":i?"":"",children:i?g.jsx(Nge,{className:"h-4 w-4"}):g.jsx(Ige,{className:"h-4 w-4"})})]}),g.jsx("nav",{className:"flex-1 py-1","aria-label":"",children:JJe.map(({value:c,Icon:u,label:f})=>{const p=t===c,m=g.jsxs("button",{onClick:()=>o(c),"aria-label":f,"aria-current":p?"page":void 0,className:ct("relative flex w-full items-center gap-3 px-2 py-2.5 text-sm transition-colors",p?"bg-accent font-semibold text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"),children:[p&&g.jsx("span",{className:"absolute inset-y-1 left-0 w-0.5 rounded-r bg-primary"}),g.jsx(u,{className:"h-5 w-5 shrink-0"}),g.jsx("span",{children:f})]},c),_=g.jsxs("button",{onClick:()=>o(c),"aria-label":f,"aria-current":p?"page":void 0,className:ct("relative flex w-full items-center justify-center py-3 text-sm transition-colors",p?"bg-accent font-semibold text-accent-foreground":"text-muted-foreground hover:bg-accent/50 hover:text-foreground"),children:[p&&g.jsx("span",{className:"absolute inset-y-1 left-0 w-0.5 rounded-r bg-primary"}),g.jsx(u,{className:"h-5 w-5 shrink-0"})]});return i?g.jsx(ee.Fragment,{children:m},c):g.jsx(ni,{content:f,side:"right",children:_},c)})}),g.jsxs("div",{className:ct("flex shrink-0 flex-col gap-1 border-t border-border p-2",i?"items-stretch":"items-center"),children:[i?g.jsxs(Se,{variant:"ghost",className:ct("h-9 w-full justify-start gap-3 px-2 shrink-0",t==="settings"&&"bg-accent text-accent-foreground"),onClick:()=>o("settings"),"aria-label":"",children:[g.jsx(bc,{className:"h-4 w-4 shrink-0"}),g.jsx("span",{className:"text-sm",children:""})]}):g.jsx(ni,{content:"",side:"right",children:g.jsx(Se,{variant:"ghost",size:"icon",className:ct("h-9 w-9 shrink-0",t==="settings"&&"bg-accent text-accent-foreground"),onClick:()=>o("settings"),"aria-label":"",children:g.jsx(bc,{className:"h-4 w-4 shrink-0"})})}),i?g.jsxs(Se,{variant:"ghost",className:"h-9 w-full justify-start gap-3 px-2 shrink-0",onClick:l,"aria-label":n==="dark"?"":"",children:[n==="dark"?g.jsx(F5,{className:"h-4 w-4 shrink-0"}):g.jsx(B5,{className:"h-4 w-4 shrink-0"}),g.jsx("span",{className:"text-sm",children:n==="dark"?"":""})]}):g.jsx(ni,{content:n==="dark"?"":"",side:"right",children:g.jsx(Se,{variant:"ghost",size:"icon",className:"h-9 w-9 shrink-0",onClick:l,"aria-label":n==="dark"?"":"",children:n==="dark"?g.jsx(F5,{className:"h-4 w-4 shrink-0"}):g.jsx(B5,{className:"h-4 w-4 shrink-0"})})})]})]}),g.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[g.jsx(lp,{value:t,onValueChange:o,className:"flex flex-1 flex-col",children:g.jsxs("main",{className:"flex-1 p-2 md:p-3",children:[g.jsx(ri,{value:"timer",children:g.jsx(Dh,{componentName:"UnifiedTimer",children:g.jsx(RDe,{})})}),g.jsx(ri,{value:"agenda",children:g.jsx(Dh,{componentName:"AgendaTimer",children:g.jsx(HJe,{})})}),g.jsx(ri,{value:"settings",children:g.jsx(WJe,{})})]})}),g.jsx(VJe,{})]})]})})}Jce.createRoot(document.getElementById("root")).render(g.jsx(ee.StrictMode,{children:g.jsx(YJe,{})}))});export default QJe();
//# sourceMappingURL=index-ytT2NjaV.js.map

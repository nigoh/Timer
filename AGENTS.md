# AGENTS.md（リポジトリ共通ガイド）

## 1) スコープと優先順位
- この `AGENTS.md` のスコープは、**このファイルが置かれたディレクトリ配下（= リポジトリ全体）**です。
- 指示の優先順位は次の通りです。
  1. システム / 開発者 / ユーザーからの直接指示
  2. より深い階層にある `AGENTS.md`
  3. この `AGENTS.md`
  4. その他の一般的な慣習

## 2) エージェント作業手順（必須順序）
エージェントは必ず次の順序で作業してください。
1. **要件確認**: 依頼内容・制約・影響範囲を明確化
2. **設計**: 変更方針、対象ファイル、検証方法を定義
3. **実装**: 設計に沿って最小差分で実装
4. **検証**: テスト・静的解析・動作確認を実施
5. **PR作成**: 変更内容と検証結果をテンプレートに沿って記載

## 3) コーディング規約の参照先
- 実装時は `.github/copilot-instructions.md` を第一のコーディング規約参照先とします。
- 本ガイドは同ファイルと**矛盾しない形**で運用し、矛盾が疑われる場合は `.github/copilot-instructions.md` を優先してください。

## 4) ドキュメント更新義務
- 仕様変更・挙動変更・要件追加/削除を伴う変更では、コード変更と同一PRで次を更新してください。
  - `docs/REQUIREMENTS.md`
  - 関連仕様書（例: `docs/TECHNICAL_SPECS.md`, `docs/UX_DESIGN_SPEC.md`, `docs/FEATURES.md` など）
- 変更が仕様に影響しない場合は、PR本文に「仕様影響なし」の根拠を明記してください。

## 5) PR本文テンプレート（必須項目）
PR本文には、以下の見出しを必ず含めてください。

```md
## 背景
## 変更点
## 影響範囲
## 検証手順
## 未解決事項
```

---

## 補足
- UI層・state層の追加ルールは、必要に応じて `src/` 配下のネストした `AGENTS.md` で定義します。

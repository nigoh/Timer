# 🎯 UX親しみやすいデザイン仕様書

## 📱 全体デザイン方針

### 🎨 親しみやすさを重視したUX設計
- **1タップ操作**: 最重要な操作（開始/停止）は大きなボタンで直感的に
- **視覚的フィードバック**: 色相変化とアイコンで状況を即座に理解
- **カードベースレイアウト**: 情報の整理と見やすさを両立
- **レスポンシブ対応**: デスクトップ・タブレット・モバイル完全対応

## 🚀 会議タイマー新仕様

### 📋 基本構造
```
会議（Meeting）
├── 複数のアジェンダ（Agenda）
│   ├── タイトル
│   ├── 予定時間
│   └── メモ
└── 設定
    ├── 自動遷移
    ├── サイレントモード
    └── ベル設定
```

### ⏱️ タイマー機能

#### 1タップ開始
- **大きな円形ボタン**: 画面中央に配置、タップしやすいサイズ
- **開始**: 緑色の再生ボタン + "開始"テキスト
- **一時停止**: オレンジ色の一時停止ボタン + "一時停止"テキスト

#### 進捗表示
- **リアルタイム更新**: 残り時間を秒単位で表示
- **進捗バー**: 0%→100%→150%まで対応（超過表示）
- **パーセンテージ表示**: 小数点1桁まで正確表示

#### 色相システム
```css
/* 70%まで：緑（余裕） */
.progress-safe {
  background: #10b981; /* bg-green-500 */
  color: #059669; /* text-green-600 */
}

/* 71-90%：橙（残り少） */
.progress-warning {
  background: #f97316; /* bg-orange-500 */
  color: #ea580c; /* text-orange-600 */
}

/* 91-100%：赤（0到達） */
.progress-critical {
  background: #ef4444; /* bg-red-500 */
  color: #dc2626; /* text-red-600 */
}

/* 101%以上：紫（超過） */
.progress-overtime {
  background: #8b5cf6; /* bg-purple-500 */
  color: #7c3aed; /* text-purple-600 */
}
```

### 🔔 多段ベルシステム

#### ベル音の種類
1. **単発ベル** (`bell-single.mp3`)
   - 短い1回のベル音
   - 通常の通知に使用

2. **二打ベル** (`bell-double.mp3`)
   - 2回連続のベル音
   - 重要な通知に使用

3. **ループベル** (`bell-loop.mp3`)
   - 5秒間のループ音
   - 緊急時・超過時に使用

#### 通知タイミング
- **開始時**: アジェンダ開始
- **残り5分**: 終了間近の警告
- **終了時**: 予定時間の終了
- **超過時**: 1分毎の超過警告

#### サイレントモード
- **音声OFF**: すべてのベル音を無効化
- **バイブレーション**: `navigator.vibrate([200, 100, 200])`
- **視覚通知**: ブラウザ通知のみ表示

### ⚙️ 遷移システム

#### 自動遷移
```typescript
// 設定でON/OFF切替可能
settings: {
  autoTransition: boolean; // デフォルト: false
}

// 自動遷移の流れ
currentAgenda.status = 'completed'
  ↓ 1秒待機
nextAgenda.status = 'running' (自動開始の場合)
```

#### 手動遷移
- **次へボタン**: 現在のアジェンダを完了状態に変更
- **前へボタン**: 前のアジェンダに戻る
- **停止ボタン**: 全体を一時停止状態に

### 📱 バックグラウンド対応

#### 時間同期メカニズム
```typescript
// 最後のtick時刻を記録
lastTickTime: number;

// 復帰時の誤差補正
const timeDiff = now - lastTickTime;
currentTime += Math.round(timeDiff / 1000);
```

#### ローカル通知
- **アジェンダ境目**: 自動遷移時の通知
- **Permission管理**: 初回起動時の権限リクエスト
- **タグ付き通知**: 重複防止機能

## 🎨 コンポーネント設計

### メインタイマー表示
```tsx
<TimerDisplay>
  ├── ヘッダー（アジェンダ名・ステータス）
  ├── 時間表示（大きなフォント・残り時間）
  ├── 進捗バー（色相変化・パーセンテージ）
  ├── 1タップ開始ボタン（中央配置）
  └── 制御ボタン（前へ・停止・次へ）
</TimerDisplay>
```

### アジェンダ一覧
```tsx
<AgendaList>
  ├── ヘッダー（追加ボタン）
  └── アジェンダカード[]
      ├── ステータスアイコン
      ├── タイトル・メモ
      ├── 時間情報（予定・実績）
      ├── 進捗バー
      └── 編集・削除ボタン
</AgendaList>
```

### 設定ダイアログ
```tsx
<SettingsDialog>
  ├── 基本設定
  │   ├── 自動遷移
  │   └── サイレントモード
  └── ベル通知設定
      ├── 音の種類選択
      └── 通知タイミング設定
</SettingsDialog>
```

## 📊 状態管理

### Zustandストア構造
```typescript
interface AgendaTimerState {
  // 会議データ
  currentMeeting: Meeting | null;
  meetings: Meeting[];
  
  // タイマー状態
  isRunning: boolean;
  currentTime: number;
  lastTickTime?: number; // バックグラウンド対応
  
  // アクション
  startTimer: () => void;
  pauseTimer: () => void;
  nextAgenda: () => void;
  syncTime: () => void; // 時間同期
}
```

## 🔧 技術スタック

### 新規追加コンポーネント
- `bellSoundManager.ts`: 音声管理ユーティリティ
- `NewAgendaTimer.tsx`: 新仕様のメインコンポーネント
- `new-agenda-timer-store.ts`: Zustand状態管理

### UI/UXライブラリ
- **shadcn/ui**: Switch, Slider, Progress, Select, Textarea
- **Lucide React**: アイコンセット（親しみやすいデザイン）
- **Tailwind CSS**: レスポンシブ・色相システム

## 🎯 ユーザー体験

### 使いやすさの特徴
1. **直感的操作**: 1タップで開始、視覚的フィードバック
2. **情報の整理**: カードベースで情報を分かりやすく表示
3. **状況認識**: 色とアイコンで現在の状況を即座に把握
4. **柔軟な設定**: 自動/手動の切替、音声のカスタマイズ

### アクセシビリティ
- **キーボード操作**: タブナビゲーション対応
- **スクリーンリーダー**: ARIA属性による音声読み上げ
- **色覚対応**: アイコンと色の併用による情報伝達
- **レスポンシブ**: 様々なデバイスサイズに対応

## 📈 パフォーマンス

### 最適化ポイント
- **useCallback**: 重い処理の最適化
- **バックグラウンド対応**: 正確な時間同期
- **音声管理**: Web Audio APIによる高品質再生
- **状態管理**: Zustandによる効率的な状態更新

この新仕様により、会議タイマーはより親しみやすく、使いやすいデザインに進化しました。

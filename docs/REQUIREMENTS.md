# REQUIREMENTS

## 目的
Timer App は、個人作業と会議進行の時間管理を一元化し、時間超過の抑制と作業集中の維持を支援する。

## スコープ
- 基本タイマー
- ポモドーロタイマー
- アジェンダタイマー
- 複数タイマー
- 会議レポート出力
- 操作/エラーログ確認
- 分析ダッシュボード

## 機能要件
### RQ-01 基本タイマー
- 分単位で設定できるカウントダウンを提供する。
- 開始・一時停止・停止・リセットを提供する。
- 実行履歴を保持し、完了/中断を区別できる。

### RQ-02 ポモドーロ
- 作業/短休憩/長休憩のフェーズを切り替える。
- 自動開始設定（休憩自動開始・作業自動開始）を提供する。
- 1日統計（完了数、集中時間、休憩時間）を保持する。

### RQ-03 アジェンダタイマー
- 会議と議題を作成し、議題ごとに予定時間を設定できる。
- 現在議題の進行、残時間、超過状態を表示できる。
- 5分前通知・終了通知・超過通知を制御できる。
- 会議設定（自動遷移、サイレント、ベル種別）を保持する。
- 議事録入力（Quill）はモバイル/PC で操作性に応じた編集ツールを提供する。
- GitHub Issue を入力として、会議名・アジェンダ候補を下書き生成できる（要件策定中）。
  - 最低入力は `owner/repo` と Issue 番号とする。
  - 生成時は Issue タイトルを会議名候補、Issue 本文のタスクリスト/見出し/箇条書きをアジェンダ候補として扱う。
  - 生成後はユーザーが会議名・各アジェンダ（タイトル/予定時間/メモ）を編集確定できる。
  - 取得失敗時は既存の手動入力フローへフォールバックし、会議作成操作を継続できる。
  - 入力 Issue は次の推奨構造を満たすこと（厳密必須ではなく、欠落時は取得できた要素のみで候補生成する）。
    - タイトル: 会議名に使える短い要約（例: `Q2 KPIレビュー`）。
    - 本文見出し: `## Agenda` または `## 議題` 配下を優先してアジェンダ候補化する。
    - 箇条書き: `-` / `*` / `1.` を議題候補として抽出する。
    - チェックリスト: `- [ ]` / `- [x]` を議題候補として抽出する。
    - 任意メタ: `Duration: 10m` / `所要: 10分` がある場合は予定時間候補に使う。
  - 推奨入力フォーマットを `docs/templates/GITHUB_MEETING_INPUT_ISSUE_TEMPLATE.md` として提供する。

### RQ-04 複数タイマー
- 複数タイマーの追加・複製・削除・カテゴリ管理を提供する。
- 個別操作（開始/停止/リセット）と一括操作（全開始/全停止）を提供する。
- 完了時に通知を行う。

### RQ-05 会議レポート
- 会議結果からドラフトレポートを生成できる。
- サマリー、決定事項、ToDo、次回アクションを編集できる。
- 会議ファシリテーション支援のため、議事録要約・合意形成・進行・次回アジェンダ・事前準備の AI アシスト提案を表示し、参加者が編集して採用可否を判断できる。
- AI API 設定（provider / model / api key / temperature / 接続テスト）は設定画面から操作できる（段階導入）。
- AI API 呼び出しが失敗した場合は、既存のルールベース提案へフォールバックできる。
- Markdown 形式で保存できる。
- 任意で GitHub Issue コメントとして議事録/会議レポートを投稿できる（要件策定中）。
  - 投稿先は会議に紐付けた Issue とする。
  - 投稿はユーザー明示操作時のみ実行し、自動投稿は行わない。
  - 認証情報（PAT）は永続化しない。

### RQ-06 ログ・障害調査
- 操作ログ・エラーログを保存し、UI で参照できる。
- AI 解析向けプロンプトを生成できる。

### RQ-07 分析ダッシュボード
- 日次/週次/月次で集中時間・完了セッション数・完了率を可視化できる。
- ポモドーロの達成率、休憩比率、連続達成日数を表示できる。
- 会議単位・議題単位で予定時間と実績時間の差分、超過率を表示できる。
- タイマー種別、カテゴリ、会議、期間でフィルタリングできる。
- 分析結果を CSV または Markdown 形式で出力できる。

## 非機能要件
- TypeScript の型安全性を維持し、`npm run type-check` を常時通過する。
- UI はモバイル幅（320px）以上で主要操作が可能である。
- ライト/ダークモードを切り替えでき、選択状態を保持する。
- 通知機能はブラウザ通知権限が無い場合も動作継続する。
- ドメイン状態は Zustand ストアに集約する。
- ダッシュボード表示は 3 秒以内に初期レンダリングされる（直近 90 日データ想定）。

## 受け入れ基準
- 各タイマー種別で開始/停止/完了の基本シナリオが成立する。
- 主要ストアの状態更新でランタイムエラーが発生しない。
- README と docs のリンク切れがない。
- 分析ダッシュボードで期間・種別フィルタ適用後に指標値が正しく更新される。
- GitHub Issue からの会議下書き生成で「入力→候補確認→編集確定→会議保存」の操作が完了できる。
- 会議レポートの GitHub Issue コメント投稿で、成功/失敗がユーザーに通知される。
